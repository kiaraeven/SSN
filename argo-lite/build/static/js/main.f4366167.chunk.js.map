{"version":3,"sources":["stores/PreferencesStore.js","services/AlgorithmUtils.js","stores/GraphStore.js","stores/ImportStore.js","stores/ProjectStore.js","stores/SearchStore.js","stores/index.js","constants/index.js","ipc/client.js","graph-frontend/src/structure/node.js","graph-frontend/include/THREE.MeshLine.js","graph-frontend/src/select.js","graph-frontend/index.js","images/Snoman title.png","images/Snoman logo.png","notifications/client.js","graph-frontend/src/imports.js","graph-frontend/src/process.js","graph-frontend/include/QuickHull.js","graph-frontend/include/ConvexGeometry.js","graph-frontend/include/CSS3DRenderer.js","graph-frontend/include/OrbitControls.js","graph-frontend/src/utils/utils.js","graph-frontend/src/setup.js","graph-frontend/src/addremove.js","graph-frontend/src/highlighting.js","graph-frontend/src/mouse.js","graph-frontend/src/modify.js","graph-frontend/src/draw.js","graph-frontend/src/api.js","graph-frontend/src/update.js","components/PreferencesDialog.jsx","components/utils/Collapsable.jsx","components/utils/CommonItemRenderer.jsx","components/utils/SimpleSelect.jsx","components/PostImportOptions.jsx","components/ImportDialog.jsx","components/GEXFImportDialog.jsx","components/OpenDialog.jsx","components/NewProjectDialog.jsx","components/ProjectDetailDialog.jsx","components/SaveSnapshotDialog.jsx","components/RenameSnapshotDialog.jsx","components/OpenSnapshotDialog.jsx","components/ShareDialog.jsx","components/StatisticsDialog.jsx","components/FilterDialog.jsx","components/HelpDialog.jsx","components/NodeTable.jsx","components/NeighborDialog.jsx","components/DataSheetDialog.jsx","components/Dialogs.jsx","components/ResizableDraggableDialog.jsx","components/panels/GlobalPanel.jsx","components/utils/SwitchCollapsable.jsx","components/panels/SelectionPanel.jsx","components/panels/NodesPanel.jsx","components/panels/EdgesPanel.jsx","components/panels/LabelsPanel.jsx","components/utils/MultiSelects.jsx","components/panels/NodesFilterPanel.jsx","components/Navbar.jsx","components/WorkspaceView.jsx","visualizers/ThreeJSVis.jsx","components/AreaSelect.jsx","components/ReactLeafletToolbar.jsx","components/ZoomMap.jsx","components/Curve.jsx","visualizers/MapView.jsx","components/panels/NodeDetailPanel.jsx","components/utils/XYSelect.jsx","components/panels/ScatterPlot.jsx","components/Legends.jsx","components/panels/SelectionActionPanel.jsx","components/StatusBar.jsx","components/panels/ZoomPanel.jsx","components/FloatingCards.jsx","components/panels/SelectionDetail.jsx","components/panels/StatGroupPanel.jsx","components/Sidebar.jsx","app.jsx","index.js"],"names":["PreferencesStore","_class","_classCallCheck","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_createClass","key","value","requestLoadUserConfig","userConfig","darkMode","this","workspace","workspacePath","requestSaveUserConfig","isRenderOptionsCardHidden","isFilterOptionsCardHidden","isScatterPlotCardHidden","minimapShowing","isStatusBarShowing","isNavbarInMinimalMode","isLegendShowing","appState","graph","frame","hideMiniMap","console","log","_applyDecoratedDescriptor","prototype","observable","configurable","enumerable","writable","initializer","IS_IFRAME_WIDGET","jsnx","require","jsgraphs","convertToJsnx","snapshot","jsnxGraph","Graph","addNodesFrom","rawGraph","nodes","map","n","id","addEdgesFrom","edges","e","source_id","target_id","convertToJSGraph","i","idDict","length","g","forEach","addEdge","averageClusteringCoefficient","keydown","clusteringco","averageClustering","selectedNodes","filter","x","undefined","selection","getNodeList","node","renderData","draw_object","children","visible","connectedComponents","connectcom","cc","ConnectedComponents","componentCount","exactGraphDiameter","graphDiameter","temp","WeightedDiGraph","Edge","convertToJSGraphWeightedDi","jsg","dia","dijkstra","Dijkstra","f","hasPathTo","pathLength","pathTo","Math","max","GraphStore","_dec","ref","_dec2","initialGlobalConfig","colorBy","color","scale","from","to","nominalColor","sizeBy","size","min","labelBy","shape","labelSize","labelLength","crossColor","scatterplot","y","_descriptor20","_descriptor21","_descriptor22","_descriptor23","_descriptor24","_descriptor25","_descriptor26","_descriptor27","_descriptor28","_descriptor29","_descriptor30","_descriptor31","_descriptor32","tempRawGraph","_descriptor33","_descriptor34","_descriptor35","_descriptor36","_descriptor37","_descriptor38","_lastSelectedSingleNode","nodesShowingLabels","_descriptor39","_descriptor40","_descriptor41","_descriptor42","_descriptor43","_descriptor44","_descriptor45","_descriptor46","_descriptor47","_descriptor48","_descriptor49","_descriptor50","_descriptor51","_descriptor52","_descriptor53","_descriptor54","_descriptor55","_descriptor56","hasGraphLoaded","get","uniq","concat","_toConsumableArray","metadata","nodeProperties","nodeComputed","k","removeList","indexOf","uniq_compute","u","inputString","connectingWords","replace","word","includes","toLowerCase","charAt","toUpperCase","slice","capitalizeString","neighborIDs","j","links","link","push","fromId","toId","ret","_i","_arr","_step","p","Number","MAX_VALUE","MIN_VALUE","_iterator","_createForOfIteratorHelper","s","done","err","scales","domain","minMax","range","_this","Set","item","selectedNodeId","setOfNeighborIds","source","toString","target","add","has","_this2","createGraph","isHidden","override","overrides","addNode","label","nodeSizeScale","nodeColorScale","hasNode","addLink","_this3","runInAction","Object","keys","_objectSpread","satisfy","fkey","nodePropertyTypes","nodeids","_this4","_this5","removeNodesByIds","_this6","positions","getPositions","pinnedNodes","Array","getPinnedNodes","global","optionalConfig","getSnapshot","noPosition","noGlobal","noOverride","JSON","stringify","initialgraph","nodesArr","LonX","parseFloat","LatY","edgesArr","it","fromnode","tonode","fromlocLatY","fromlocLonX","tolocLatY","tolocLonX","withinState","withinFamily","latlist","lonlist","medianCenter","values","Error","result1","sort","a","b","half","floor","medianLat","medianLon","lat1","lon1","lat2","lon2","c","cos","asin","sqrt","calDistanceFromLatLonInKm","calMedianCenter","nodekeyList","uniqueValue","valuea","el","minv","apply","maxv","paths","snapshotName","fullNodes","fullEdges","edgeProperties","savedStatesStr","runActiveLayout","savedStates","parse","savedOverrides","Map","entries","_ref","_ref2","_slicedToArray","v","clear","merge","recalculateGraph","recalculateRawgraph","initialNodesShowingLabels","paused","smartPause","defaultActive","isActive","startTime","Date","now","smartPaused","nodesToPin","that","process","forEachNode","setPinnedNodes","_this7","graphFrame","Frame","computedGraph","init","display","ee","on","data","menu","MenuFactory","MenuItemFactory","onClick","toggleSelectedLabels","text","unpinSelectedNodes","pinSelectedNodes","rightClickedNode","rightClickedNodeId","neighbors","getNeighborNodesFromRawGraph","n1","n2","ids","showNodes","ContextMenu","show","left","pageX","top","pageY","shonodeid","nodeCount","graphDensity","getEdgeList","sum","degree","averageDegree","array","edgeSelection","linkObjs","uniqEdgeSelection","edgeDistance","edgeDist","reduce","toFixed","temraw","reaverageClusteringCoefficient","duration","interactingWithGraph","computed","getOwnPropertyDescriptor","action","ImportStore","postImportFilteringOptions","sortedList","setIds","defaultPostImportFilteringOption","selectedPostImportFilteringOption","nodeFile","path","topN","hasColumns","ready","columns","mapping","delimiter","edgeFile","createMissing","ProjectStore","SearchStore","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","val","object","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","AppState","preferences","import","search","project","window","useToolbartoSelect","loadAndDisplaySnapshotFromStrapi","uuid","convexPolygons","modularity","globalFlatRatio","convexhullby","groupby","mapClicked","areaSelected","currentlyHovered","convexNodes","pathHovered","pathHoveredList","densityDistance","edgeselection","degreeselection","degreebrushed","distanceDensityCurrentlyHovered","distanceDensityCurrentlyClicked","loading","clearBrush","mapEdgeShow","autoZoom","firstload","url","BACKEND_URL","fetch","mode","response","json","body","toaster","message","intent","Intent","DANGER","timeout","loadSnapshotFromStrapi","snapshotString","loadImmediateStates","loadAndDisplaySnapshotFromURL","loadSnapshotFromURL","split","loadInitialSampleGraph","_asyncToGenerator","_callee","hash","_context","location","substring","startsWith","decodeURIComponent","alert","SAMPLE_GRAPH_SNAPSHOTS","saveSnapshotToString","saveImmediateStates","addEventListener","event","autorun","hasGraph","clustercoe","updateGraph","setAllNodesShapeWithOverride","setLabelRelativeSize","setLabelLength","updateSelectionOpacity","pinNodes","updatePositions","showLabels","searchStr","runSearch","panelOpen","candidates","splice","highlightNodeIds","file","selectedEdgeFileFromInput","hasHeader","importConfig","reader","FileReader","readAsText","onload","lines","topLinesAsString","l","trim","join","comment","auto_parse","skip_empty_lines","_unused","onerror","selectedNodeFileFromInput","_unused2","parent","FRONTEND_URL","LOGO_URL","GITHUB_URL","MOBILE_WIDTH_CUTOFF","MOBILE_HEIGHT_CUTOFF","SCALE_LINEAR","SCALE_LOG","SCALE_CATEGORY","_scales","_defineProperty","LOAD_USER_CONFIG","LOADED_USER_CONFIG","SAVE_USER_CONFIG","SAVED_USER_CONFIG","FETCH_WORKSPACE_PROJECTS","FETCHED_WORKSPACE_PROJECTS","MENU_NEW_PROJECT","CREATE_NEW_PROJECT","CREATED_NEW_PROJECT","DELETE_FILE","RENAME_FILE","LOAD_GRAPH_JSON","LOAD_GRAPH_SQLITE","LOADED_GRAPH_JSON","LOAD_TOAST_KEY","SAVE_GRAPH_JSON","SAVE_GRAPH_SQLITE","SAVED_GRAPH_JSON","SAVE_TOAST_KEY","MENU_LOAD","MENU_IMPORT_CSV","MENU_SAVE_GRAPH_STATE","MENU_SAVE_GRAPH_STATE_TO_PROJECT","MENU_SAVE_GRAPH_SQLITE","SAVE_GRAPH_STATE","SAVED_GRAPH_STATE","SAVE_GRAPH_STATE_TO_PROJECT","SAVED_GRAPH_STATE_TO_PROJECT","LOAD_GRAPH_STATE","LOADED_GRAPH_STATE","SHOW_ITEM_IN_FOLDER","SHOW_WORKSPACE_FOLDER","CHANGE_WORKSPACE_FOLDER","CHANGED_WORKSPACE_FOLDER","CHOOSE_EDGE_FILE","CHOSEN_EDGE_FILE","CHOOSE_NODE_FILE","PEAKED_NODE_FILE","CHOSEN_NODE_FILE","CHOOSE_GRAPH_FILE","CHOSEN_GRAPH_FILE","CHOOSE_STATE_FILE","CHOSEN_STATE_FILE","NODE_AND_EDGE_FILE","ONLY_EDGE_FILE","GRAPH_AND_STATE_FILE","ONLY_GRAPH_FILE","IMPORT_GRAPH","IMPORTED_GRAPH","OPEN_GRAPH","OPENED_GRAPH","SEARCH_REQUEST","SEARCH_RESPONSE","ADD_NODES","ADD_SELECT_NODE","ADD_NODE","GET_NEIGHBORS","ipcRenderer","eventString","registerIPC","node_id","requestChooseGraphFile","requestChooseStateFile","requestOpen","graphFile","stateFile","requestDelete","filePath","requestImportGraphFromCSV","hasNodeFile","newProjectName","toJS","_x6","_importGraphFromCSV","arguments","importGraphFromCSV","postImportFilter","setUpFrame","dialogOpen","showMiniMap","turnOffLabelCSSRenderer","requestImportGraphFromGexf","_importGraphFromGexf","importGraphFromGexf","gexfDialogOpen","readCSV","_x","_x2","_x3","_readCSV","fileObject","content","msg","parseGEXF","_x4","_parseGEXF","_callee2","parser","xmlDoc","xmlEdges","xmlNodes","xmlAttri","nodeAttri","nodeAttriOrdered","curr","_l","_curr","_i2","_l2","currEdge","t","_i3","_l3","currNode","nodeAttvalues","nodeAttvalue","attributeIdElementAttribute","attributeId","_j","currAttri","_context2","DOMParser","parseFromString","getElementsByTagName","getAttribute","_readOnlyError","pagerank","betweenness","closeness","attributes","readGEXF","_x5","_readGEXF","_callee3","_context3","_callee4","config","degreeDict","edgesSet","rank","_context4","parseInt","edgeKey","edgeKey2","getNode","GEOID","Family","avgLat","avgLon","average","pathFinder","aGreedy","pathsArr","pathsSet","pathKey1","pathKey2","find","pageRank","centrality","_callee5","gexfParsed","_context5","selectedGexfFileFromInput","searchOrder","fetchWorkspaceProjects","requestCreateNewProject","projectMetadata","$","Node","index","in","out","domainData","vx","vy","connectedTo","outNodeIds","outNode","inArray","connectNode","THREE","memcpy","src","srcOffset","dst","dstOffset","subarray","buffer","set","MeshLine","previous","side","width","indices_array","uvs","counters","geometry","BufferGeometry","widthCallback","setGeometry","Geometry","vertices","z","Float32Array","compareV3","aa","ab","copyV3","w","position","copyArray","needsUpdate","uv","Uint16Array","BufferAttribute","addAttribute","setIndex","advance","MeshLineMaterial","parameters","check","d","Material","lineWidth","useMap","Color","opacity","resolution","Vector2","sizeAttenuation","near","far","dashArray","useDash","visibility","alphaTest","material","RawShaderMaterial","uniforms","vertexShader","fragmentShader","setValues","copy","def","default","OrbitControls","d3","linkVertical","module","selectNode","dragging","isSelected","updateSelection","mouseX","mouseY","clearSelection","NODE_NO_HIGHLIGHT","textHolder","element","hideme","getEdgeWithinSelection","withinEdges","getEdgeWithinOutSelection","withinoutEdges","getEdgeWithinDist","mindist","maxdist","getEdgeWithinSelectionForDensity","edgekeys","key1","key2","updateDegreeHistOpacity","degreehighlight","colorByDistance","dist","colorNode","colorNodeOpacity","lineIndices","linecolor","r","red","blue","green","arrow","setRGB","colorNodeEdge","highlightAllEdges","highlightedgeWithinDist","updateSelectionOutOpacity","highlightClickNode","neighborNodes","getNeighborNodesFromGraph","nodeNeighbor","froms","tos","getOnlyNeighborNodesFromGraph","diffx","diffy","clickedNode","pinnedx","pinnedy","highlightNode","highlightEdges","fx","fy","checkSelection","mouseEnd","Vector3","mouseStart","right","npos","options","layout","force","getNodePosition","insideBox","posx","posy","balancedBinTree","Argo","Toaster","Position","TOP","STATS","STATS_SHOW","NODE_COLOR","NODE_HIGHLIGHT","ADJACENT_HIGHLIGHT","SEARCH_HIGHLIGHT","NODE_HTEXTURE","NODE_TEXTURE","NODE_NO_HTEX","NODE_NO_TEX","NODE_NO_HCOLOR","NODE_NO_COLOR","NODE_NEIGHBOR_HIGHLIGHT","NODE_SHAPE","NODE_HSHAPE","NODE_SIZE","HIGHLIGHT_SIZE","LAYOUT","LINES","MAP","MAP_RENDER_PER_NUMBER_OF_FRAME","TEXT_SCALE","TEXT_SIZE","TEXT_X_OFFSET","TEXT_Y_OFFSET","TEXT_BACK_COLOR","TEXT_OPACITY","TEXT_WIREFRAME","PIN_COLOR","spawn","inGraph","layout_options","graphLayout","lineObjects","MAX_LINES","textureLoader","TextureLoader","crossOrigin","oldIntersect","fov","showBox","renderWidth","renderHeight","maxZoom","mouseDown","layoutInit","relativeFontSize","mapShowing","mapRenderPerNumberOfFrame","lastNode","doHighlightNeighbors","prevHighlights","hull","stats","showPanel","document","appendChild","dom","animate","begin","controls","update","render","end","requestAnimationFrame","renderer","WebGLRenderer","alpha","antialias","preserveDrawingBuffer","minimapRenderer","setDisplayParams","setRendererParams","setupCamera","setupMinimap","setupGeometry","setupSelect","innerHTML","domElement","cssRenderer","setupLayout","setupGraph","preventDefault","onWindowResize","clientRect","getBoundingClientRect","height","minimap","aspect","ccamera","updateProjectionMatrix","setSize","stage","numberOfFrameSinceMiniMapRerender","updateCamera","updateNodes","updateLabels","updateEdges","forceLink","restart","tickToStatic","ceil","alphaMin","alphaDecay","tick","setViewport","setScissor","setScissorTest","scene","camera","QuickHull","tolerance","faces","newFaces","assigned","VertexList","unassigned","Face","normal","midpoint","area","constant","outside","edge","HalfEdge","vertex","face","twin","VertexNode","point","head","tail","assign","setFromPoints","points","isArray","makeEmpty","compute","setFromObject","updateMatrixWorld","traverse","isGeometry","clone","applyMatrix4","matrixWorld","isBufferGeometry","attribute","count","fromBufferAttribute","addVertexToFace","append","insertBefore","removeVertexFromFace","remove","removeAllVerticesFromFace","start","removeSubList","deleteFaceVertices","absorbingFace","faceVertices","appendChain","nextVertex","distanceToPoint","resolveUnassignedPoints","isEmpty","first","maxDistance","maxFace","distance","computeExtremes","minVertices","maxVertices","getComponent","setComponent","EPSILON","abs","computeInitialHull","line3","plane","closestPoint","Line3","Plane","v0","v1","v2","v3","extremes","closestPointToPoint","distanceToSquared","setFromCoplanarPoints","getEdge","setTwin","reindexFaces","activeFaces","nextVertexToAdd","eyeVertex","eyeFace","computeHorizon","eyePoint","crossEdge","horizon","twinEdge","oppositeFace","addAdjoiningFace","horizonEdge","addNewFaces","firstSideEdge","previousSideEdge","sideEdge","addVertexToHull","cleanup","e0","e1","e2","triangle","Triangle","dot","distanceTo","lengthSquared","last","insertAfter","ConvexGeometry","fromBufferGeometry","ConvexBufferGeometry","mergeVertices","normals","Float32BufferAttribute","CSS3DObject","Object3D","style","parentNode","removeChild","CSS3DSprite","CSS3DRenderer","_width","_height","REVISION","matrix","Matrix4","cache","objects","createElement","overflow","WebkitTransformStyle","MozTransformStyle","oTransformStyle","transformStyle","cameraElement","epsilon","getObjectCSSMatrix","elements","setClearColor","isPaused","getSize","tan","degToRad","getEffectiveFOV","WebkitPerspective","MozPerspective","oPerspective","perspective","matrixWorldInverse","getInverse","getCameraCSSMatrix","WebkitTransform","MozTransform","oTransform","transform","renderObject","transpose","copyPosition","cachedStyle","enabled","minDistance","Infinity","minZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","SPACE","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","spacePan","bothPan","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","scope","dispatchEvent","changeEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","radius","panOffset","setFromSpherical","lookAt","zoomChanged","EPS","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","PerspectiveCamera","targetDistance","clientHeight","OrthographicCamera","clientWidth","bottom","warn","dollyIn","dollyScale","mousePos","dollyOut","handleMouseDownPan","clientX","clientY","button","handleMouseDownRotate","handleMouseDownDolly","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","spacePanStart","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","handleTouchStartRotate","dx","dy","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleKeyUp","EventDispatcher","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","relMouseCoords","currentElement","totalOffsetX","totalOffsetY","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","prepNode","nodeToAdd","hex","hcolor","exec","numYeast","random","tsize","make1x1Rect","rectShape","Shape","moveTo","lineTo","ShapeGeometry","make2x2Rect","volToRadius","volume","createNGraph","setupNgraphLayout","setupD3Layout","forceSimulation","forceManyBody","strength","forceY","forceX","velocityDecay","getElementById","containerDiv","querySelector","offsetWidth","offsetHeight","offsetBottom","zIndex","setPixelRatio","devicePixelRatio","oldCoords","panToMousePosition","coordX","coordY","coefficient","Scene","Group","setupFancyEdges","setUpSimpleEdges","rect","setupSelectionBox","setupBoundaries","setupViewPort","colors","LineGeometry","setPositions","setColors","matLine","LineMaterial","linewidth","vertexColors","dashed","alphaToCoverage","line","Line2","computeLineDistances","LineBasicMaterial","VertexColors","shading","FlatShading","LineSegments","frustumCulled","directedArrows","arrowMaterial","MeshBasicMaterial","Mesh","arrowPositions","arrowColors","drawCount","selectBox","Line","boundaries","setBoundarySize","viewPort","setViewPortSize","computeBoundingSphere","setupMouseHandlers","callback","coords","mousePosition","unproject","dir","normalize","isMouseCoordinatesOnMinimap","raycaster","Raycaster","pos","onRightClick","which","focus","onRightClickCoords","callMouseHandler","intersects","intersectObjects","nodeIndex","ctrlKey","mouseHandler","graphNode","drawNode","removeNode","removeGraphEdges","undrawEdges","undrawNode","nodeLinks","getLinks","removeLink","hidden","killed","locdata","drawEdge","toggle","highlightNeighbors","highlightPathEdgeNode","pathnode","pathnnodeid","op","setHex","ctrl","leftMouseDown","onHover","lastHover","endTime","oldStartTime","clickDifference","doubleClicked","newNodeIds","thenode","emit","setUniformNodeSize","hsize","setNodeDataSize","dataValue","dataVal","setUniformNodeColor","hsvDegree","setNodeDataColor","mapNodeAttributes","mod","attr","changeLabelFontSize","changeLabelLength","changeNodes","changeNode","numChars","relativeSize","mapsize","fontSize","mapfontSize","createHighlightMesh","texture","hshape","hgeometry","CircleGeometry","createHighlightDrawObject","getNodeSize","hmaterial","transparent","highlight","createNodeMesh","createNodeDrawObject","createPinMesh","pinMesh","createNodeLabel","wireframe","wireframeLinewidth","DoubleSide","PlaneGeometry","textMesh","createAndSetupLabelTextMesh","createAndSetupLabelDiv","createAndSetupTextHolder","bbox","Box3","createLabelDiv","createLabelDivElement","createTextNode","textElement","createLabelTextElement","backgroundColor","textOverflow","userSelect","whiteSpace","setupNodeDrawObject","htexture","onTextureLoad","load","himage","image","bind","hexToRGB","getDistanceFromLatLonInKm","hide","updateColorsAndPositions","setTimeout","v1pos","v2pos","v1color","v2color","setMouseMode","mouseMode","isMouseModeMove","pauseLayout","pause","resumeLayout","mapSelectedNodes","mapAllNodes","setLabelFontSize","querySelectorAll","toggleMiniMap","turnOnLabelCSSRenderer","updateNodesShowingLabels","toggleLabels","showSelectedLabels","selectneighbors","hideSelectedLabels","hideLabels","hideAllLabels","showAllLabels","setCanvasSize","setAllNodesShape","setNodeShape","getNumSelected","getNodesCount","toggleDark","updateViewPortEdgeColor","getGraph","forEachLink","poses","getPinPositions","alias","toggleAlias","setLastNode","dragLastNode","lowerRes","toggleNeighborHighlight","removeSelected","getSelected","getSelectedIds","setDrawRange","total","arrowPosition","directedOrNot","midPointX","midPointY","dX","dY","radianDegree","atan","tempXCorner","tempYCorner","sin","degreeDifference","thisNode","step","oldNode","updateNode","getLink","newNode","childNodes","innerText","PreferencesDialog","observer","_React$Component","_inherits","_super","_createSuper","React","Dialog","iconName","className","classnames","Classes","DARK","isOpen","onClose","title","Switch","checked","onChange","saveUserConfig","Button","PRIMARY","Component","onToggle","LARGE","FILL","MINIMAL","rightIconName","Collapse","handleClick","MenuItem","ACTIVE","items","onSelect","_ref$fill","fill","Select","itemRenderer","CommonItemRenderer","filterable","onItemSelect","PostImportOptions","SimpleSelect","selected","PreviewTable","props","Table","numRows","selectedRegions","rows","cols","Column","renderCell","Cell","ImportDialog","_class2","_React$Component2","_super2","changeAvailable","targetValue","setState","available","canImport","renderNodesSelection","Collapsable","nodesOpen","CONTROL_GROUP","margin","lineHeight","INPUT_GROUP","DISABLED","files","sytle","padding","renderEdgesSelection","edgesOpen","newDelimiter","updateDelimiter","DIALOG_BODY","TABLE","rel","href","Spinner","renderExampleDataset","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","createdDate","toLocaleString","GEXFImportDialog","renderImportButton","OpenDialog","renderSelectGraph","INPUT","placeholder","readOnly","renderSelectState","selectedGraph","selectedState","openDialogOpen","NewProjectDialog","isNewProjectNameDuplicate","projects","some","isNewProjectNameEmpty","isValidated","isNewProjectDialogOpen","ProjectDetailDialog","currentProject","isProjectDetailDialogOpen","hasGraphData","Card","interactive","elevation","ELEVATION_TWO","graphDataPath","Icon","snapshotPaths","snapshotPath","BUTTON","INTENT_PRIMARY","currentSnapshotName","SaveSnapshotDialog","isSaveSnapshotDialogOpen","stringCopyOfSnapshot","select","execCommand","isRenameSnapshotDialogOpen","OpenSnapshotDialog","selectedFile","openSnapshotDialogOpen","fileAsString","uuidv4","ShareDialog","isShared","isFetching","sharedURL","selectedContinue","handleRequest","_assertThisInitialized","_handleRequest","backendURL","headers","referrer","ok","shareDialogOpen","marginRight","marginBottom","marginTop","resize","dangerouslySetInnerHTML","__html","StatisticsDialog","statisticsDialogOpen","density","diameter","components","FilterDialog","filterDialogOpen","HelpDialog","helpDialogOpen","NodeTable","sortBy","sortOrder","filteredNodes","n1val","n2val","n1valAsNum","n2valAsNum","n1valAsString","n2valAsString","localeCompare","nodeAttributesOrig","allPropertiesKeyList","hideNodes","NeighborDialog","showMoreBy","showMoreNum","lastSelectedSingleNode","neighborDialogOpen","minWidth","ButtonGroup","numberToShow","attributeName","hiddenNodes","showNMoreByAttribute","NumericInput","onValueChange","valAsNumber","valAsString","DataSheetDialog","dataSheetDialogOpen","Dialogs","ResizableDraggableDialog","documentElement","innerWidth","innerHeight","Rnd","bounds","RenameSnapshotDialog","GlobalPanel","timeOutRef","sizeOptionOpen","colorOptionOpen","shapeOptionOpen","CARD","float","filterKeyList","watchAppearance","Popover2","placement","modifiers","preventOverflow","backgroundImage","SketchPicker","x1","y1","x2","y2","stopColor","stopOpacity","RangeSlider","stepSize","labelStepSize","pluralize","ALIGN_RIGHT","SelectionPanel","twoLayerUpdate","nodeId","nodeAttrs","delete","batchTwoLayerUpdate","labelOptionOpen","SwitchCollapsable","overrideConfig","Slider","class","NodesPanel","_len","args","_key","getRenderedNodes","EdgesPanel","directionOptionOpen","thicknessOptionOpen","LabelsPanel","tag","tagprops","MultiSelect","popoverProps","popoverClassName","targetTagName","resetOnSelect","tagRenderer","selectedItems","tagInputProps","NodesFilterPanel","MultiSelects","selectit","filterNodes","onRemove","deselectIndex1","onRelease","_ref3","_ref4","RegularNavbar","runcommunity","querydict","axios","post","communityDict","community","findcliques","cliques","convexhull","group","jsondata","convexDict","isconvex","multipolygon","density_distance","NAVBAR","NAVBAR_GROUP","ALIGN_LEFT","argologo_dark","argologo_light","NAVBAR_HEADING","Popover","Menu","sample","sampleSnapshotTitle","sampleSnapshotStrapiUuid","MenuDivider","forceUpdate","NAVBAR_DIVIDER","setInterval","timeNow","Tooltip","role","turnOnMinimalMode","textDecoration","FontAwesomeIcon","icon","faGithub","MinimalNavbar","_class4","turnOffMinimalMode","NavbarSelector","_class5","_React$Component3","_super3","WorkspaceView","textAlign","ThreeJSVis","AreaSelect","useEffect","selectArea","enable","toBBoxString","L","rectangle","weight","selectionNode","contains","latLng","getBounds","pad","setValidate","layerPoint","_map","layerPointToLatLng","ZoomMap","useMemo","nodeLoc","latLngBounds","extend","fitBounds","MapClick","useMapEvents","click","DetectKeyPress","Curve","useLeafletContext","curve","container","layerContainer","addLayer","removeLayer","MapView","dec2hexString","dec","substr","onMouseOut","setEdgePathOption","edgeSelectionID","nodesSelectedID","degreeselectionID","pathnodeid","pathnodeall","setNodeCircle","setNodePathOption","fillColor","fillOpacity","stroke","neighborNodesID","selectedNeighborIDs","setPolygonPath","polygon","pi","convexPolygonsShow","onCreate","edgesOfNodes","flex","Tag","MapContainer","LayersControl","BaseLayer","TileLayer","Overlay","GeoJSON","statejsonfile","countyjsonfile","congressionjsonfile","Pane","edgepositions","polygonlist","Polygon","pathOptions","CircleMarker","eventHandlers","originalEvent","view","DomEvent","mouseover","mouseout","direction","permanent","defaultChecked","NodeDetail","TABLE_STRIPED","nodeAttributeValue","num","toPrecision","formatLongFloat","ScatterPlot","cr","maxhop","formatXtext","infinityhop","downloadCSV","header","csvarray","unshift","noderow","column","onBrushStart","sourceEvent","onBrush","onBrushEnd","selectionNodeID","circles","svg","selectAll","brushBounds","x0","y0","each","nodecx","nodecy","renderBrush","SVGBrush","extent","getEventMouse","_this$svg$getBounding","brushType","createRef","scaleLinear","shortpathhop","pathlen","scalePoint","pairdistance","XYSelect","allComputedPropertiesKeyList","input","RenderCircles","Axis","axis","axisBottom","tickFormat","axisLeft","svgsaver","SvgSaver","asSvg","CSVLink","asyncOnClick","filename","refs","setScatterStyle","ni","String","cpathid","renderCircles","cluster","ci","cx","cy","pathlist","pathid","_pathid$split","_pathid$split2","sourceid","targetid","_pathid$split3","_pathid$split4","onMouseOver","dataset","onMouseLeave","SelectionActionPanel","StatusBar","numHiddenNodes","numHiddenNeighbor","WARNING","ZoomPanel","RenderOptionsCard","Tabs2","Tab2","panel","Expander","FilterOptionsCard","_class3","FloatingCards","optionsVisible","optionsInvisible","sideButtonVis","marginLeft","sideButtonInv","toggleOptions","filtersVisible","filtersInvisible","filterSideButtonVis","filterSideButtonInv","filterToggleOptions","scatterVisible","scatterInvisible","scatterSideButtonVis","scatterSideButtonInv","scatterToggleOptions","ELEVATION_2","justifyContent","alignItems","numCandidates","INTERACTIVE","pageNum","allCands","nPerPage","pointerEvents","cursor","pages","maxPage","paddingTop","paddingRight","paddingBottom","Legends","SelectionDetail","allwidth","allheight","brushmargin","brushwidth","distBinData","degreeBinData","onEdgeBrushStart","onEdgeBrush","onEdgeBrushEnd","selectionRectID","rects","edgesvg","rectx","filterDistBin2","distbuffer_min","mind","distbuffer_max","maxd","filteredge","renderEdgeBrush","_this$edgesvg$getBoun","onDegreeBrushStart","onDegreeBrush","_ref5","onNoNodeDegreeBrushEnd","_ref6","degreesvg","filterdegreeBin2","degreebuffer_min","degreebuffer_max","onSelectDegreeBrushEnd","_ref7","renderNoNodeDegreeBrush","_this$degreesvg$getBo","renderSelectDegreeBrush","_this$degreesvg$getBo2","prevTick","maxDegreeDict","maxDegreeCount","maxDistanceCount","SelectionDistanceFromLatLonIn","text-anchor","fontSizeAdjust","Histogram","ariaLabel","orientation","cumulative","normalized","binCount","valueAccessor","datum","binType","BarSeries","animated","rawData","XAxis","numTicks","tickLabelProps","YAxis","ti","selectNodes","SelectionDensity","avgdist","nodelength","selectionDen","selectedEdge","avgDegree","de","avgdensity","selectnodesID","rediameter","reclustercoe","recomponent","StatGroupPanel","unicommunity","fromCharCode","avgConnectionDist","cdistance","runKfullfillment","calculateDistance","dLat","dLon","atan2","_loop","currentNode","_step2","_iterator2","otherNode","_step3","_iterator3","cnn","snn","intersection","findKfulfillment","runGlobalFlatRatio","shuffleArray","randomIndex","_step6","_iterator6","_step7","_iterator7","nodeOrders","_step8","nodesLabels","distanceMatrix","_iterator8","nl","_step9","_iterator9","ll","avgGBarSum","order","nodesWKnn","degreeConstraintMatrix","degreeCount","_step4","connectionCounted","_iterator4","totalDistance","_loop2","_step5","neighborsid","_iterator5","neighbor","gBarSumDistances","gSum","flat","runLocalFlatRatio","_step10","_iterator10","currentId","ndistance","isFinite","_step11","_iterator11","_step12","_iterator12","findFlatRatio","runShortestPath","pairdist","shortestPathPairs","Sidebar","avgdegree","rerunDiameter","rerundiameter","rerunCluster","reruncluster","rerunComponent","reruncomponent","cityName","getElementsByClassName","background","SidebarMenu","openCity","colspan","avgDe","avgDist","filtergraphDensity","FocusStyleManager","onlyShowFocusOnTabs","loadUserConfig","DELETE","Keys","BACKSPACE","P","U","respondToResize","App","resizer","leftSide","previousElementSibling","rightSide","nextElementSibling","upHeight","mouseMoveHandler","newLeftHeight","mouseUpHandler","removeProperty","leftWidth","newLeftWidth","maxWidth","ReactDOM"],"mappings":"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b,KAAM,IAAK3a,MAAOI,KAAK21B,SAClCC,WAAY,CAAErb,KAAM,IAAK3a,MAAOI,KAAK41B,YACrCC,UAAW,CAAEtb,KAAM,IAAK3a,MAAOI,KAAK61B,YAEtCI,aA9JuB,CACvB,yBACA,GACA,2BACA,2BACA,uBACA,wBACA,yBACA,qBACA,4BACA,GACA,iCACA,gCACA,2BACA,2BACA,sBACA,yBACA,sBACA,qBACA,iCACA,GACA,oBACA,uBACA,0BACA,2BACA,GACA,qCACA,GACA,6BACA,uBACA,2BACA,kBACA,GACA,IACA,GACA,gBACA,GACA,kDACA,2EACA,GACA,uCACA,gBACA,GACA,mDACA,sDACA,gDACA,4CACA,GACA,oDACA,2CACA,2CACA,GACA,2DACA,sDACA,GACA,oCACA,uCACA,QACA,GACA,gBACA,mEACA,wEACA,aACA,qDACA,qDACA,0CACA,GACA,+CACA,8CACA,6EACA,GACA,QACA,GACA,2EACA,2CACA,0BACA,wBACA,GACA,qDACA,qCACA,GACA,iEACA,mCACA,GACA,KA0EiClQ,KAAK,QACtCmQ,eAxEyB,CACzB,kDACA,2BACA,GACA,yBACA,wBACA,yBACA,0BACA,4BACA,2BACA,GACA,oBACA,uBACA,0BACA,2BACA,GACA,gBACA,GACA,uBACA,oCACA,qDACA,0BACA,SACA,OACA,wBACA,mDACA,KA8CqCnQ,KAAK,UAoB5C,cAjBO8O,EAAWI,iBACXJ,EAAW1yB,WACX0yB,EAAWK,cACXL,EAAWjvB,aACXivB,EAAWO,eACXP,EAAWQ,kBACXR,EAAWU,uBACXV,EAAWW,YACXX,EAAWY,WACXZ,EAAWa,iBACXb,EAAWe,kBACXf,EAAWgB,UAElBC,EAASvb,KAAO,mBAEhBub,EAASK,UAAUtB,GAEZiB,GAGTxD,EAAMsC,iBAAiB1zB,UAAYuM,OAAOuM,OAAOsY,EAAM0C,SAAS9zB,WAChEoxB,EAAMsC,iBAAiB1zB,UAAUid,YAAcmU,EAAMsC,iBAErDtC,EAAMsC,iBAAiB1zB,UAAUk1B,KAAO,SAAS7pB,GAa/C,OAZA+lB,EAAM0C,SAAS9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","file":"static/js/main.f4366167.chunk.js","sourcesContent":["import { observable, action } from \"mobx\";\r\nimport { requestLoadUserConfig, requestSaveUserConfig } from \"../ipc/client\";\r\nimport { IS_IFRAME_WIDGET } from \"../constants\";\r\n\r\nexport default class PreferencesStore {\r\n  @observable dialogOpen = false;\r\n\r\n  @observable openDialogOpen = false;\r\n  @observable openSnapshotDialogOpen = false;\r\n  @observable shareDialogOpen = false;\r\n  @observable statisticsDialogOpen = false;\r\n  @observable filterDialogOpen = false;\r\n  @observable helpDialogOpen = false;\r\n  @observable neighborDialogOpen = false;\r\n  @observable dataSheetDialogOpen = false;\r\n  @observable isRenderOptionsCardHidden = IS_IFRAME_WIDGET;\r\n  @observable isFilterOptionsCardHidden = true;\r\n  @observable isScatterPlotCardHidden = true;\r\n  @observable isScatterPlotDialogOpen = false;\r\n\r\n  // The following fields are asynchronously loaded.\r\n  // Any writes to these fields through saveUserConfig\r\n  // won't be active until the app exits and starts\r\n  // next time.\r\n\r\n  @observable darkMode = false;\r\n  @observable minimapShowing = false;\r\n  @observable isStatusBarShowing = !IS_IFRAME_WIDGET;\r\n  @observable isNavbarInMinimalMode = IS_IFRAME_WIDGET;\r\n  @observable isLegendShowing = !IS_IFRAME_WIDGET;\r\n\r\n  @observable workspacePath = '';\r\n\r\n  // This is called at the beginning of the app.\r\n  loadUserConfig() {\r\n    requestLoadUserConfig();\r\n  }\r\n\r\n  saveUserConfig() {\r\n    const userConfig = {\r\n      darkMode: this.darkMode,\r\n      workspace: this.workspacePath,\r\n    }\r\n\r\n    requestSaveUserConfig(userConfig);\r\n  }\r\n\r\n  turnOnMinimalMode() {\r\n    this.isRenderOptionsCardHidden = true;\r\n    this.isFilterOptionsCardHidden = true;\r\n    this.isScatterPlotCardHidden = true;\r\n    this.minimapShowing = false;\r\n    this.isStatusBarShowing = false;\r\n    this.isNavbarInMinimalMode = true;\r\n    this.isLegendShowing = false;\r\n    if (appState.graph.frame) {\r\n      appState.graph.frame.hideMiniMap();\r\n    } else {\r\n      console.log(\"Frame not ready when trying to toggle minimap.\");\r\n    }\r\n    \r\n  }\r\n\r\n  turnOffMinimalMode() {\r\n    this.isRenderOptionsCardHidden = false;\r\n    this.isFilterOptionsCardHidden = true;\r\n    this.isScatterPlotCardHidden = true;\r\n    this.minimapShowing = false;\r\n    this.isStatusBarShowing = true;\r\n    this.isNavbarInMinimalMode = false;\r\n    this.isLegendShowing = true;\r\n    // if (appState.graph.frame) {\r\n    //   appState.graph.frame.showMiniMap();\r\n    // } else {\r\n    //   console.log(\"Frame not ready when trying to toggle minimap.\");\r\n    // }\r\n  }\r\n}","import appState from '../stores';\r\n\r\nconst jsnx = require('jsnetworkx');\r\nconst jsgraphs = require('js-graph-algorithms');\r\n\r\n/**\r\n * Convert Argo-lite snapshot for use in the JSNetworkX library.\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function convertToJsnx(snapshot) {\r\n    const jsnxGraph = new jsnx.Graph();\r\n    jsnxGraph.addNodesFrom(snapshot.rawGraph.nodes.map(n => [n.id, n]));\r\n    jsnxGraph.addEdgesFrom(snapshot.rawGraph.edges.map(e => [e.source_id, e.target_id]));\r\n    return jsnxGraph;\r\n}\r\n\r\n/**\r\n * Convert Argo-lite snapshot for use in the ngraph library.\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function convertToNGraph(snapshot) {\r\n    return null;\r\n}\r\n\r\n/**\r\n * Convert Argo-lite snapshot for use in the js-graph-algorithms library.\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function convertToJSGraph(snapshot) {\r\n    var idDict = {};\r\n    var i;\r\n    for (i = 0; i < snapshot.rawGraph.nodes.length; i++) {\r\n        idDict[snapshot.rawGraph.nodes[i].id] = i;\r\n    }\r\n    var g = new jsgraphs.Graph(snapshot.rawGraph.nodes.length);\r\n    snapshot.rawGraph.edges.forEach(e => {\r\n        g.addEdge(idDict[e.source_id], idDict[e.target_id]);\r\n    });\r\n    return [g, idDict];\r\n}\r\n\r\n/**\r\n * Convert Argo-lite snapshot for use in the js-graph-algorithms library (Weighted).\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function convertToJSGraphWeightedDi(snapshot) {\r\n    var idDict = {};\r\n    var i;\r\n    for (i = 0; i < snapshot.rawGraph.nodes.length; i++) {\r\n        idDict[snapshot.rawGraph.nodes[i].id] = i;\r\n    }\r\n    var g = new jsgraphs.WeightedDiGraph(snapshot.rawGraph.nodes.length);\r\n    snapshot.rawGraph.edges.forEach(e => {\r\n        g.addEdge(new jsgraphs.Edge(idDict[e.source_id], idDict[e.target_id], 1.0));\r\n    });\r\n    return [g, idDict];\r\n}\r\n\r\n/**\r\n * Convert Argo-lite snapshot to the GEXF format.\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function convertToGexf(snapshot) {\r\n    return null;\r\n}\r\n\r\n/**\r\n * Calculate the average clustering coefficient of the (undirected unweighted) graph.\r\n * @param {*} snapshot Argo-lite Snapshot Object exported by GraphStore\r\n */\r\nexport function averageClusteringCoefficient(snapshot) {\r\n    if(appState.graph.keydown) return appState.graph.clusteringco\r\n    const jsnxGraph = convertToJsnx(snapshot);\r\n    appState.graph.clusteringco = jsnx.averageClustering(jsnxGraph);\r\n    // const result = 0\r\n    console.log('Computing Clustering Coefficient');\r\n    if (appState.graph.selectedNodes && appState.graph.selectedNodes.length >0 ){\r\n      appState.graph.selectedNodes = appState.graph.selectedNodes.filter(x => x !== undefined)\r\n    }\r\n    if (appState.graph.frame.selection.length > 0) {\r\n        appState.graph.frame.selection = appState.graph.frame.selection.filter(x => x !== undefined)\r\n    }\r\n    appState.graph.frame.getNodeList().forEach((node)=>{node.renderData.draw_object.children[0].visible=false})\r\n\r\n    return appState.graph.clusteringco;\r\n}\r\n\r\n/**\r\n * ReCalculate the number of connected components in a graph\r\n * @param {*} rawGraph the rawGraph inside appState\r\n */\r\nexport function reaverageClusteringCoefficient(snapshot) {\r\n    \r\n    const jsnxGraph = convertToJsnx(snapshot);\r\n    \r\n    \r\n    return jsnx.averageClustering(jsnxGraph);\r\n}\r\n\r\n/**\r\n * Calculate the number of connected components in a graph\r\n * @param {*} rawGraph the rawGraph inside appState\r\n */\r\nexport function connectedComponents(snapshot) {\r\n    if(appState.graph.keydown) return appState.graph.connectcom\r\n    var cc = new jsgraphs.ConnectedComponents(convertToJSGraph(snapshot)[0]);\r\n    console.log('compute connected copoenent')\r\n    appState.graph.connectcom = cc.componentCount()\r\n    // console.log('connected:')\r\n    // console.log(appState.graph.connectcom)\r\n    return appState.graph.connectcom;\r\n   \r\n}\r\n\r\nexport function reconnectedComponents(snapshot) {\r\n    \r\n    var cc = new jsgraphs.ConnectedComponents(convertToJSGraph(snapshot)[0]);\r\n    \r\n    \r\n    // console.log('connected:')\r\n    // console.log(appState.graph.connectcom)\r\n    return cc.componentCount();\r\n   \r\n}\r\n\r\n/**\r\n * Calculate the density of a graph\r\n * @param {*} rawGraph the rawGraph inside appState\r\n */\r\nexport function graphDensity(snapshot) {\r\n    const nodeCount = snapshot.rawGraph.nodes.length;\r\n    const edgeCount = snapshot.rawGraph.edges.length ;\r\n    return (2 * edgeCount) / ((nodeCount) * (nodeCount - 1));\r\n}\r\n\r\n// /**\r\n//  * Calculate the density of a graph withour selfloop and changes when filters apply \r\n//  * @param {*} rawGraph the rawGraph inside appState\r\n//  */\r\n//  export function newgraphDensity(snapshot) {\r\n//     const nodeCount = snapshot.rawGraph.nodes.length;\r\n//     const edgeCount = snapshot.rawGraph.edges.length ;\r\n//     return (2 * edgeCount) / ((nodeCount) * (nodeCount - 1));\r\n// }\r\n\r\n/**\r\n * Calculate the average degree of a graph\r\n * @param {*} rawGraph the rawGraph inside appState\r\n */\r\nexport function averageDegree(snapshot) {\r\n    let sum = 0;\r\n    snapshot.rawGraph.nodes.forEach(e => {\r\n            sum += e.degree;\r\n        }\r\n    )\r\n    return sum / snapshot.rawGraph.nodes.length;\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * Calculate the diameter of a graph\r\n * @param {*} rawGraph the rawGraph inside appState\r\n */\r\nexport function exactGraphDiameter(snapshot) {\r\n    if(appState.graph.keydown) return appState.graph.graphDiameter\r\n    let temp = convertToJSGraphWeightedDi(snapshot);\r\n    let jsg = temp[0];\r\n    let idDict = temp[1]\r\n    let dia = -1;\r\n    snapshot.rawGraph.nodes.forEach(e => {\r\n        let dijkstra = new jsgraphs.Dijkstra(jsg, idDict[e.id]);\r\n        snapshot.rawGraph.nodes.forEach(f => {\r\n            if(dijkstra.hasPathTo(idDict[f.id])){\r\n                let pathLength = dijkstra.pathTo(idDict[f.id]).length;\r\n                dia = Math.max(dia, pathLength);\r\n            }\r\n        })\r\n    });\r\n    appState.graph.graphDiameter = dia\r\n    return dia;\r\n}\r\n ","import { observable, computed, action, runInAction } from \"mobx\";\r\nimport createGraph from \"ngraph.graph\";\r\nimport { scales } from \"../constants/index\";\r\nimport uniq from \"lodash/uniq\";\r\nimport { averageClusteringCoefficient, connectedComponents, graphDensity, averageDegree, exactGraphDiameter , reaverageClusteringCoefficient, reconnectedComponents} from \"../services/AlgorithmUtils\";\r\nimport { ContextMenu, MenuFactory, MenuItemFactory } from \"@blueprintjs/core\";\r\nimport { Frame } from \"../graph-frontend\";\r\n// import appState from '../stores';\r\n\r\nexport default class GraphStore {\r\n\r\n  // @observable\r\n  initialGlobalConfig = {\r\n    nodes: {\r\n      colorBy: \"degree\",\r\n      color: {\r\n        scale: \"Linear Scale\",\r\n        from: \"#448AFF\",\r\n        to: \"#E91E63\",\r\n        nominalColor: [\"#0073bc\", \"#ff3333\",\"#e377c2\", \"#98df8a\", \"#ff7f0e\", \"#a55194\", \"#2ca02c\", \"#aec7e8\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#1f77b4\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#9c9ede\", \"#8c6d31\", \"#ffbb78\", \"#bd9e39\"]\r\n      },\r\n      sizeBy: \"degree\",\r\n      size: {\r\n        min: 2,\r\n        max: 6,\r\n        scale: \"Linear Scale\"\r\n      },\r\n      labelBy: \"node_id\",\r\n      shape: \"circle\",\r\n      labelSize: 1,\r\n      labelLength: 10,\r\n      // filter:{}\r\n    },\r\n    edges: {\r\n      color: \"#AFAEAE\",\r\n      crossColor: \"#0055aa\"\r\n    },\r\n    scatterplot: {\r\n      x: 'degree',\r\n      y: 'distance to center'\r\n    }\r\n  }\r\n\r\n  @observable watchAppearance = 1;\r\n  @observable nodes = this.initialGlobalConfig.nodes;\r\n  @observable edges = this.initialGlobalConfig.edges;\r\n  @observable scatterplot = this.initialGlobalConfig.scatterplot;\r\n\r\n  @observable enableDegree = true;\r\n  @observable enableDensity = true;\r\n  @observable enableDiameter = false;\r\n  @observable enableCoefficient = true;\r\n  @observable enableComponent = true;\r\n  @observable modularity = undefined;\r\n  @observable globalFlatRatio = undefined;\r\n  @observable keydown = false;\r\n  clusteringco = 0;\r\n  graphDiameter = 0;\r\n  connectcom = 0;\r\n\r\n\r\n  //access to process.js \"self\"\r\n  @observable process = undefined;\r\n\r\n  // Updated by frame event\r\n  @observable selectedNodes = [];\r\n\r\n\r\n  filter = {}\r\n\r\n\r\n  @observable convexNodes = [];\r\n  @observable convexPolygons = [];\r\n  @observable convexPolygonsShow = true;\r\n\r\n  @observable mapEdgeShow = true;\r\n  @observable autoZoom = false;\r\n  @observable firstload =true;\r\n\r\n\r\n\r\n  // Currently hovered node\r\n  @observable currentlyHovered = undefined;\r\n\r\n  // Currently Clicked to frozen node on map\r\n  @observable mapClicked = undefined;\r\n  @observable areaSelected = undefined;\r\n  @observable clearBrush = false;\r\n\r\n\r\n  @observable selectedEdge = 0;\r\n  @observable avgDegree = 0;\r\n  @observable avgdist = 0;\r\n  @observable avgdensity = 0;\r\n  @observable clustercoe = 0;\r\n  @observable rediameter = '';\r\n  @observable reclustercoe = '';\r\n  @observable recomponent = '';\r\n\r\n tempRawGraph = undefined;\r\n\r\n  //  // Currently Clicked to frozen node on network\r\n  //  @observable networkClicked = undefined;\r\n\r\n  // Currently hovered path in the scatterplot view \r\n  @observable pathHovered = undefined;\r\n  @observable pathHoveredList = [];\r\n  /**\r\n   * Stores data relevant to smart pause feature\r\n   */\r\n  @observable smartPause = {\r\n    defaultActive: { //data for when graph layout is resumed and smart pause is not in effect \r\n      isActive: true, //true when layout is resumed and smart pause is not in effect\r\n      startTime: Date.now(), //keeps track of most recent time graph was unpaused\r\n      duration: 10000, //duration of resumed layout\r\n    },\r\n    //lastUnpaused: undefined, //old code using lastUnpaused\r\n    smartPaused: true, //true when resumed, but graph layout is paused due to inactivity\r\n    interactingWithGraph: false, //true when node is clicked or dragged. TODO: refactor to more understandable name\r\n  }\r\n\r\n  // Directed or not\r\n  @observable directedOrNot = false;\r\n\r\n  // Edge thickness based on \r\n  @observable edgeThicknessByDistance = false;\r\n\r\n  // Color by distance\r\n  @observable colorByDistance = false;\r\n\r\n  // Cache the single node that's been selected last time\r\n  // and will not update unless exactly one node is selected again\r\n  // useful for NeighborDialog\r\n  _lastSelectedSingleNode = null;\r\n  @computed\r\n  get lastSelectedSingleNode() {\r\n    if (this.selectedNodes.length === 1) {\r\n      this._lastSelectedSingleNode = this.selectedNodes[0];\r\n    }\r\n    return this._lastSelectedSingleNode;\r\n  }\r\n  // Updated by frame event. Not being listened, only used to save label visibility.\r\n  nodesShowingLabels = [];\r\n  // Used by autorun during snapshot loading.\r\n  @observable initialNodesShowingLabels = [];\r\n\r\n  @observable\r\n  overrideConfig = {\r\n    color: \"#000\",\r\n    size: 5,\r\n    label: \"\",\r\n    shape: \"circle\"\r\n  };\r\n\r\n  @observable\r\n  rawGraph = {\r\n    nodes: [],\r\n    edges: []\r\n  };\r\n\r\n  //saved states from loaded graph snapshot\r\n  @observable savedStates = null;\r\n\r\n  @observable\r\n  metadata = {\r\n    fullNodes: 0,\r\n    fullEdges: 0,\r\n    nodeProperties: [],\r\n    nodePropertyTypes: [],\r\n    uniqueValue: {},\r\n    nodeComputed: [\"pagerank\", \"degree\", 'centrality', 'distance to center'  ,  'betweenness', 'closeness',  'betweeness centrality', 'closeness centrality', 'distance to group center'],\r\n    edgeProperties: [],\r\n    snapshotName: \"loading...\" // Optional: for display in Argo-lite only\r\n  };\r\n\r\n  @observable\r\n  densityDistance = []\r\n\r\n  @observable\r\n  edgeselection = []\r\n\r\n  @observable\r\n  degreeselection = []\r\n\r\n  @observable\r\n  degreebrushed = false\r\n\r\n  //name of currently hovered family group on the cluster cluster scatterplot \r\n  @observable\r\n  distanceDensityCurrentlyHovered = undefined\r\n\r\n  @observable\r\n  distanceDensityCurrentlyClicked = []\r\n\r\n  @observable\r\n  groupby = 'NULL'\r\n\r\n  @observable\r\n  convexhullby = 'NULL'\r\n\r\n  // used for listing all the properties, either original or computed\r\n  @computed\r\n  get allPropertiesKeyList() {\r\n    return uniq([\r\n      ...this.metadata.nodeProperties,\r\n      ...this.metadata.nodeComputed\r\n    ]).filter(k => k !== 'id'); // since node_id is already present\r\n  }\r\n\r\n  @computed\r\n  get filterKeyList() {\r\n    const removeList = ['isHidden', 'id', 'Longitude', 'Latitude', 'LatY', 'LonX', 'dist to center', 'dist_to_center', 'centrality', 'shortest path', 'pair distance', 'node_id', 'standard distance', 'network density', 'SHORT', \"ORGANIZATION\", 'isconvex', 'nearestnn']\r\n    return uniq([\r\n      ...this.metadata.nodeProperties,\r\n      ...this.metadata.nodeComputed\r\n    ]).filter(k => removeList.indexOf(k) === -1); // since node_id is already present\r\n  }\r\n\r\n  @computed\r\n  get allComputedPropertiesKeyList() {\r\n\r\n    const uniq_compute = uniq([\r\n      ...this.metadata.nodeComputed\r\n    ]).filter(k => k !== 'id'); // since node_id is already present\r\n\r\n    const capitalizeString =(inputString)=> {\r\n      const connectingWords = ['in', 'to']; // Add more connecting words as needed\r\n    \r\n      return inputString.replace(/\\w+/g, function(word) {\r\n        return connectingWords.includes(word.toLowerCase()) ? word : word.charAt(0).toUpperCase() + word.slice(1);\r\n      });\r\n    }\r\n    \r\n    const uppercase_compute = uniq_compute.map((u) => {\r\n      return capitalizeString(u)\r\n    })\r\n    return uppercase_compute\r\n  }\r\n\r\n  @computed\r\n  get selectedNeighborIDs() {\r\n\r\n\r\n\r\n    if (this.selectedNodes.length > 0) {\r\n      const neighborIDs = []\r\n      for (var j = 0; j < this.selectedNodes.length; j++) {\r\n        if (!this.selectedNodes[j] || !this.selectedNodes[j].links) continue\r\n        this.selectedNodes[j].links.forEach((link) => {\r\n          neighborIDs.push(link.fromId);\r\n          neighborIDs.push(link.toId);\r\n        })\r\n\r\n      }\r\n      if (neighborIDs.length > 0) {\r\n        const uniqNeighborIDs = uniq([\r\n          ...neighborIDs\r\n        ])\r\n        return uniqNeighborIDs\r\n      } else {\r\n        return []\r\n      }\r\n    } else {\r\n      return []\r\n    }\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  @observable.ref frame = null;\r\n  @observable.ref positions = null;\r\n  @observable pinnedNodes = null;\r\n\r\n  @observable overrides = new Map();\r\n  @observable searchOrder = \"degree\";\r\n\r\n  hasGraphLoaded = false;\r\n\r\n  @computed\r\n  get hasGraph() {\r\n    if (this.rawGraph.nodes.length > 0) {\r\n      this.hasGraphLoaded = true;\r\n    }\r\n    return this.hasGraphLoaded;\r\n  }\r\n\r\n  // @computed\r\n  // get ordinalDomain(colorBy){\r\n  //   return this.rawGraph.nodes.map(function(n){\r\n  //     n[colorBy]\r\n  //   })\r\n  // }\r\n  @computed\r\n  get minMax() {\r\n    const ret = {};\r\n    for (const p of [\r\n      ...this.metadata.nodeProperties,\r\n      ...this.metadata.nodeComputed\r\n    ]) {\r\n      let min = Number.MAX_VALUE;\r\n      let max = Number.MIN_VALUE;\r\n\r\n      for (const n of this.rawGraph.nodes) {\r\n        min = Math.max(Math.min(min, n[p]), 0.0000001);\r\n        max = Math.max(max, n[p]);\r\n      }\r\n\r\n      ret[p] = [min, max];\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  @computed\r\n  get nodeSizeScale() {\r\n    return scales[this.nodes.size.scale]()\r\n      .domain(this.minMax[this.nodes.sizeBy])\r\n      .range([this.nodes.size.min, this.nodes.size.max]);\r\n  }\r\n\r\n  @computed\r\n  get nodeColorScale() {\r\n    if (this.nodes.color.scale == \"Nominal Scale\") { //nominal scale \r\n      const nominalColor =  [\"#0073bc\", \"#ff3333\", \"#ff7f0e\", \"#a55194\", \"#2ca02c\", \"#aec7e8\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \"#8c564b\", \"#c49c94\", \"#1f77b4\", \"#f7b6d2\", \"#7f7f7f\", \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\", \"#9c9ede\", \"#8c6d31\", \"#ffbb78\", \"#bd9e39\"]\r\n\r\n      return scales[this.nodes.color.scale]()\r\n        .domain([...new Set(this.rawGraph.nodes.map(item => item[this.nodes.colorBy]))])\r\n        .range(nominalColor);\r\n    } else { //linear and log scale \r\n      return scales[this.nodes.color.scale]()\r\n        .domain(this.minMax[this.nodes.colorBy])\r\n        .range([this.nodes.color.from, this.nodes.color.to]);\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  // @computed\r\n  // get nodeColorCategory() {\r\n  //   return scales[this.nodes.color.scale]()\r\n  //     .domain(this.minMax[this.nodes.colorBy])\r\n  //     .range([this.nodes.color.from, this.nodes.color.to]);\r\n  // }\r\n\r\n\r\n  // Return raw graph nodes that is neighbor with the selected node,\r\n  // excluding the node itself.\r\n  getNeighborNodesFromRawGraph(selectedNodeId) {\r\n    const setOfNeighborIds = new Set();\r\n    this.rawGraph.edges.forEach(e => {\r\n      const source = e.source_id.toString();\r\n      const target = e.target_id.toString();\r\n      if (source === selectedNodeId && target !== selectedNodeId) {\r\n        setOfNeighborIds.add(target);\r\n      }\r\n      if (target === selectedNodeId && source !== selectedNodeId) {\r\n        setOfNeighborIds.add(source);\r\n      }\r\n    });\r\n    return this.rawGraph.nodes.filter(node => setOfNeighborIds.has(node.id.toString()));\r\n  }\r\n\r\n\r\n\r\n  // Triggers autorun in stores/index.js to sent computedGraph to graph-frontend.\r\n  @computed\r\n  get computedGraph() {\r\n    const graph = createGraph();\r\n    this.rawGraph.nodes.forEach(n => {\r\n      // If isHidden flag is defined and true, ignore the node in graph-frontend.\r\n      if (n.isHidden) {\r\n        return;\r\n      }\r\n      const override = this.overrides.get(n.id.toString());\r\n      graph.addNode(n.id.toString(), {\r\n        label: (override && override.get(\"label\")) || n[this.nodes.labelBy],\r\n        size:\r\n          (override && override.get(\"size\")) ||\r\n          this.nodeSizeScale(n[this.nodes.sizeBy]),\r\n        color:\r\n          (override && override.get(\"color\")) ||\r\n          this.nodeColorScale(n[this.nodes.colorBy]),\r\n        shape: (override && override.get(\"shape\")) || n[this.nodes.shape],\r\n        ref: n\r\n      });\r\n    });\r\n\r\n    this.rawGraph.edges.forEach(e => {\r\n      // If isHidden flag is defined and true on an associated node,\r\n      // leave out its related edges.\r\n      if (graph.hasNode(e.source_id.toString()) && graph.hasNode(e.target_id.toString())) {\r\n        graph.addLink(e.source_id.toString(), e.target_id.toString(), e);\r\n      }\r\n    });\r\n\r\n    return graph;\r\n  }\r\n\r\n  @computed\r\n  get numHiddenNodes() {\r\n    return this.rawGraph.nodes.filter(n => n.isHidden).length;\r\n  }\r\n\r\n  filterNodes() {\r\n    runInAction('filter nodes', () => {\r\n      if (this.selectedNodes.length > 0) {\r\n      this.selectedNodes = this.selectedNodes.filter(x => x !== undefined)\r\n    }\r\n\r\n    if (this.frame.selection.length > 0) {\r\n      this.frame.selection = this.frame.selection.filter(x => x !== undefined)\r\n    }\r\n\r\n   \r\n      if (Object.keys(this.filter).length === 0){\r\n        this.rawGraph.nodes = this.rawGraph.nodes.map(n => {return { ...n, isHidden: false }});\r\n      }\r\n\r\n      if (Object.keys(this.filter).length !== 0) {\r\n\r\n\r\n        this.rawGraph.nodes = this.rawGraph.nodes.map(n => {\r\n          var satisfy = true\r\n          for (const fkey in this.filter) {\r\n            if (this.metadata.nodePropertyTypes[fkey] == 'string') {\r\n              if (this.filter[fkey].length > 0 && (!this.filter[fkey].includes(n[fkey]))) {\r\n                satisfy = false\r\n              }\r\n            } else {  // number range \r\n              if (this.filter[fkey] && (n[fkey] < this.filter[fkey]['min'] || n[fkey] > this.filter[fkey]['max'])) {\r\n                satisfy = false\r\n              }\r\n            }\r\n          }\r\n          if (satisfy) {\r\n            return { ...n, isHidden: false };\r\n          }\r\n          return { ...n, isHidden: true };\r\n        });\r\n\r\n      }\r\n      if (this.selectedNodes.length > 0) {\r\n        this.selectedNodes = this.selectedNodes.filter(x => x !== undefined)\r\n      }\r\n\r\n      if (this.frame.selection.length > 0) {\r\n        this.frame.selection = this.frame.selection.filter(x => x !== undefined)\r\n      }\r\n      this.frame.getNodeList().forEach((node)=>{node.renderData.draw_object.children[0].visible=false})\r\n\r\n\r\n    });\r\n     // this.runActiveLayout()\r\n    //  appState.graph.watchAppearance = appState.graph.watchAppearance +1\r\n  }\r\n\r\n  showNodes(nodeids) {\r\n    runInAction('show hidden nodes by ids', () => {\r\n      this.rawGraph.nodes = this.rawGraph.nodes.map(n => {\r\n        if (nodeids.includes(n.id)) {\r\n          return { ...n, isHidden: false };\r\n        }\r\n        return n;\r\n      });\r\n    });\r\n  }\r\n\r\n  hideNodes(nodeids) {\r\n    runInAction('hide nodes by ids', () => {\r\n      this.frame.removeNodesByIds(nodeids);\r\n      this.rawGraph.nodes = this.rawGraph.nodes.map(n => {\r\n        if (nodeids.includes(n.id)) {\r\n          return { ...n, isHidden: true };\r\n        }\r\n        return n;\r\n      });\r\n    });\r\n  }\r\n\r\n  removeNodes(nodeids) {\r\n    runInAction('remove nodes by ids', () => {\r\n      this.frame.removeNodesByIds(nodeids);\r\n      this.rawGraph.nodes = this.rawGraph.nodes.filter(\r\n        n => !nodeids.includes(n.id)\r\n      );\r\n      this.rawGraph.edges = this.rawGraph.edges.filter(\r\n        e => !nodeids.includes(e.source_id) && !nodeids.includes(e.target_id)\r\n      );\r\n    });\r\n  }\r\n\r\n  getSnapshot() {\r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n      overrides: this.overrides,\r\n      nodesShowingLabels: this.nodesShowingLabels,\r\n      positions: this.frame.getPositions(),\r\n      pinnedNodes: Array.from(this.frame.getPinnedNodes()),\r\n      metadata: this.metadata,\r\n      global: {\r\n        nodes: this.nodes,\r\n        edges: this.edges,\r\n      },\r\n    };\r\n    return snapshot;\r\n  }\r\n\r\n  /**\r\n   * [Argo-lite] Saves graph snapshot as String\r\n   * \r\n   * Note that Argo-lite snapshot contains all graph data\r\n   * and metadata except nodes/edges deleted by users.\r\n   * This is different from Argo-electron snapshot.\r\n   */\r\n  saveImmediateStates(optionalConfig) {\r\n    const snapshot = this.getSnapshot();\r\n    // TODO: add corresponding options on frontend\r\n    // The optional options allows users to leave out\r\n    // certain app state when saving snapshot\r\n    if (optionalConfig) {\r\n      if (optionalConfig.noPosition) {\r\n        snapshot.positions = undefined;\r\n      }\r\n      if (optionalConfig.noGlobal) {\r\n        snapshot.global = undefined;\r\n      }\r\n      if (optionalConfig.noOverride) {\r\n        snapshot.overrides = undefined;\r\n      }\r\n    }\r\n    return JSON.stringify(snapshot);\r\n  }\r\n\r\n\r\n  recalculateRawgraph(initialgraph) {\r\n    // Since the CSV lib we use uses int index when there's not header/column names specified\r\n    // but the frontend selector always convert int to string values, we need to\r\n    // manually convert the user-selected fromId and toId values back to int.\r\n    // Note that this should only be done when there's no header provided on the CSV (hasColumns == false).\r\n    //hardcode\r\n    const fromId = \"source_id\"\r\n    const toId = \"target_id\"\r\n    const mapId = \"ID\"\r\n    const mapLon = \"LonX\"\r\n    const mapLat = \"LatY\"\r\n    // Create temporary data structures.\r\n    // rawGraph: { nodes: nodesArr, edges: edgesArr, paths: pathsArr },\r\n    let nodesArr =\r\n    initialgraph.rawGraph.nodes.map(\r\n        n => ({ ...n, LonX: parseFloat(n[\"LonX\"]), LatY: parseFloat(n[\"LatY\"]) }));\r\n    // let nodesArr = initialgraph.rawGraph.nodes;\r\n    let edgesArr = initialgraph.rawGraph.edges;\r\n    // let pathsDict = {};\r\n  \r\n    // const graph = createGraph();\r\n    // const degreeDict = {};\r\n    // if (config.hasNodeFile) {\r\n    //   // nodesArr = await readCSV(appState.import.selectedNodeFileFromInput, config.nodes.hasColumns, config.delimiter);\r\n    //   nodesArr = initialgraph.nodes;\r\n    //   nodesArr.forEach(node => graph.addNode(node[mapId].toString(),\r\n    //     { id: node[mapId].toString(), LatY: parseFloat(node[config.nodes.mapping.LatY]),LonX: parseFloat(node[config.nodes.mapping.LonX]),degree: 0, ...node }));\r\n    //   nodesArr =\r\n    //     nodesArr.map(\r\n    //       n => ({ ...n, id: n[config.nodes.mapping.id].toString(), degree: 0, pagerank: 0, centrality: parseFloat(n['centrality']), 'dist to center': parseFloat(n['distance to center']), LonX: parseFloat(n[config.nodes.mapping.LonX]), LatY: parseFloat(n[config.nodes.mapping.LatY]) }));\r\n    //   nodesArr.forEach(n => degreeDict[n.id] = 0);\r\n    // }\r\n    // const edges = await readCSV(appState.import.selectedEdgeFileFromInput, config.edges.hasColumns, config.delimiter);\r\n    // if (config.edges.createMissing) {\r\n    //   edges.forEach((it) => {\r\n    //     const from = it[fromId].toString();\r\n    //     const to = it[toId].toString();\r\n    //     if (!graph.hasNode(from)) {\r\n    //       graph.addNode(from, { id: from, degree: 0 });\r\n    //       nodesArr.push({ id: from, degree: 0, pagerank: 0 });\r\n    //       degreeDict[from] = 0;\r\n    //     }\r\n    //     if (!graph.hasNode(to)) {\r\n    //       graph.addNode(to, { id: to, degree: 0 });\r\n    //       nodesArr.push({ id: to, degree: 0, pagerank: 0 });\r\n    //       degreeDict[to] = 0;\r\n    //     }\r\n    //   });\r\n    // }\r\n  \r\n    // const edgesSet = new Set();\r\n  \r\n    // const edgesArr = [];\r\n  \r\n    // const addEdge = (from, to, fromlocLatY, fromlocLonX, tolocLatY, tolocLonX, withinState, withinFamily) => {\r\n    //   const edgeKey = `${from}👉${to}`;\r\n    //   if (edgesSet.has(edgeKey)) {\r\n    //     return;\r\n    //   }\r\n    //   edgesSet.add(edgeKey);\r\n    //   var data = {\r\n    //     fromlocLatY: fromlocLatY,\r\n    //     fromlocLonX: fromlocLonX,\r\n    //     tolocLatY: tolocLatY,\r\n    //     tolocLonX: tolocLonX,\r\n    //     withinState: withinState,\r\n    //     withinFamily: withinFamily,\r\n  \r\n    //   }\r\n    //   graph.addLink(from, to, data);\r\n  \r\n    //   degreeDict[from] += 1;\r\n    //   degreeDict[to] += 1;\r\n    //   edgesArr.push({\r\n    //     source_id: from,\r\n    //     target_id: to,\r\n    //     fromlocLatY: fromlocLatY,\r\n    //     fromlocLonX: fromlocLonX,\r\n    //     tolocLatY: tolocLatY,\r\n    //     tolocLonX: tolocLonX,\r\n    //     withinState: withinState,\r\n    //     withinFamily: withinFamily\r\n    //   });\r\n    // };\r\n  \r\n    if (nodesArr[0].LatY !== undefined && nodesArr[0].LonX !== undefined) {  //node has spatial location info\r\n      edgesArr.forEach(it => {\r\n        const fromnode = nodesArr.filter((node)=>{return node.id === it[fromId].toString()})\r\n        const tonode = nodesArr.filter((node)=>{return node.id === it[toId].toString()})\r\n        const Nonloc = 360\r\n        if(fromnode.length > 0 && tonode.length >0){\r\n        it.fromlocLatY = parseFloat(fromnode[0].LatY)\r\n        it.fromlocLonX = parseFloat(fromnode[0].LonX)\r\n        it.tolocLatY = parseFloat(tonode[0].LatY)\r\n        it.tolocLonX = parseFloat(tonode[0].LonX) }\r\n        else{\r\n        it.fromlocLatY = Nonloc\r\n        it.fromlocLonX = Nonloc\r\n        it.tolocLatY = Nonloc\r\n        it.tolocLonX = Nonloc\r\n        }// observable array???\r\n        it.withinState = true\r\n        it.withinFamily = true\r\n        \r\n        // addEdge(from, to, fromlocLatY, fromlocLonX, tolocLatY, tolocLonX, withinState, withinFamily);\r\n        \r\n      });\r\n    } \r\n\r\n    const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n      var p = 0.017453292519943295;    // Math.PI / 180\r\n      var c = Math.cos;\r\n      var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n        c(lat1 * p) * c(lat2 * p) *\r\n        (1 - c((lon2 - lon1) * p)) / 2;\r\n  \r\n      return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n    }\r\n  \r\n    // calculate the diatance to centern/ average lat/lon\r\n    // const calDIstanceToCenter = () => {\r\n    //   const latlist = nodesArr.map(n => n['LatY'])\r\n    //   const lonlist = nodesArr.map(n => n['LonX'])\r\n    //   const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n    //   var avgLat\r\n    //   var avgLon\r\n    //   if (latlist.length > 0 && lonlist.length > 0) {\r\n    //     avgLat = average(latlist)\r\n    //     avgLon = average(lonlist)\r\n    //     nodesArr.forEach(function (n, i) {\r\n    //       n['distance to center'] = calDistanceFromLatLonInKm(avgLat, avgLon, latlist[i], lonlist[i])\r\n    //     })\r\n    //   }\r\n    // }\r\n  \r\n  \r\n    const calMedianCenter = ()=>{\r\n      const latlist = nodesArr.map(n => parseFloat(n['LatY']))\r\n      const lonlist = nodesArr.map(n => parseFloat(n['LonX']))\r\n      const medianCenter = (values)=>{\r\n        if(values.length ===0) throw new Error(\"No inputs\");\r\n  \r\n        const result1 = [...values].sort((a, b) => a - b)\r\n      \r\n        // values.sort(function(a,b){\r\n        //   return a-b;\r\n        // });\r\n      \r\n        var half = Math.floor(result1.length / 2);\r\n        \r\n        if (result1.length % 2)\r\n          return result1[half];\r\n        \r\n        return (result1[half - 1] + result1[half]) / 2.0;\r\n      }\r\n  \r\n      if (latlist.length > 0 && lonlist.length > 0) {\r\n        const medianLat = medianCenter(latlist)\r\n        const medianLon = medianCenter(lonlist)\r\n        nodesArr.forEach(function (n, i) {\r\n          n['distance to center'] = calDistanceFromLatLonInKm(medianLat, medianLon, latlist[i], lonlist[i])\r\n        })\r\n      }\r\n  \r\n  \r\n    }\r\n  \r\n    if (nodesArr[0]['LonX'] && nodesArr[0]['LatY']) {\r\n      // calDIstanceToCenter();\r\n    calMedianCenter();\r\n  \r\n    }\r\n\r\n    // const shortestPathPairs = () => {\r\n    //   let pathFinder = path.aGreedy(graph);\r\n      // const pathsArr = []\r\n    //   const pathsSet = new Set();\r\n  \r\n  \r\n  \r\n    //   graph.forEachNode(function (fromnode) {\r\n  \r\n    //     graph.forEachNode(function (tonode) {\r\n    //       if (fromnode.id !== tonode.id) {\r\n    //         const pathKey1 = `${fromnode.id}👉${tonode.id}`;\r\n    //         const pathKey2 = `${tonode.id}👉${fromnode.id}`;\r\n    //         // undirected graph:\r\n    //         // only add once for undirected graph \r\n    //         if (!(pathsSet.has(pathKey1)) && !(pathsSet.has(pathKey2)) ) {\r\n    //           pathsSet.add(pathKey1);\r\n    //           pathsSet.add(pathKey2);\r\n    //           pathsArr.push({\r\n    //            \"source\":fromnode.id,\r\n    //            \"target\":tonode.id,\r\n    //           \"path\": pathFinder.find(fromnode.id, tonode.id),\r\n    //           \"distance\": calDistanceFromLatLonInKm(fromnode.data.LatY, fromnode.data.LonX, tonode.data.LatY, tonode.data.LonX)\r\n            \r\n    //          })\r\n    //         }\r\n             \r\n    //         //directed graph: \r\n    //       }\r\n  \r\n    //     })\r\n  \r\n    //   })\r\n    //   // console.log(nodesArr.length)\r\n    //   // console.log(pathsArr.length)\r\n    //   return pathsArr\r\n  \r\n    // }\r\n    // const pathsArr = shortestPathPairs();\r\n    // const rank = pageRank(graph);\r\n  \r\n    // nodesArr = nodesArr.map(n => ({ ...n, node_id: n.id, pagerank: rank[n.id], degree: parseInt(degreeDict[n.id] / 2) }));\r\n    const nodekeyList = Object.keys(nodesArr[0])\r\n    const nodePropertyTypes = {}\r\n    nodekeyList.forEach(function (k) {\r\n      nodePropertyTypes[k] = typeof (nodesArr[0][k])\r\n    })\r\n    const uniqueValue = {}\r\n    nodekeyList.forEach(function (k, i) {\r\n  \r\n      if (nodePropertyTypes[k] == 'string') {\r\n        uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n      } else {\r\n        const valuea = nodesArr.map(function (el) { return el[k]; })\r\n        const minv = Math.min(...valuea)\r\n        const maxv = Math.max(...valuea)\r\n        uniqueValue[k] = [minv, maxv]\r\n      }\r\n    })\r\n    return {\r\n      rawGraph: { nodes: nodesArr, edges: edgesArr, paths: [] },\r\n      metadata: {\r\n        snapshotName: 'Untitled Graph',\r\n        fullNodes: nodesArr.length,\r\n        fullEdges: edgesArr.length, //Math.floor(edgesArr.length / 2), // Counting undirected edges\r\n        nodeProperties: nodekeyList,\r\n        nodePropertyTypes: nodePropertyTypes,\r\n        uniqueValue: uniqueValue,\r\n        nodeComputed: ['pagerank', 'degree', 'distance to center' ,  'betweenness', 'closeness'],\r\n        edgeProperties: ['source_id', 'target_id'],\r\n       \r\n      },\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  @action\r\n  loadImmediateStates(savedStatesStr) {\r\n    this.runActiveLayout();\r\n    const savedStates = JSON.parse(savedStatesStr);\r\n    this.savedStates = savedStates;\r\n    if (!savedStates) {\r\n      return;\r\n    }\r\n    const savedOverrides = new Map(\r\n      Object.entries(savedStates.overrides).map(([k, v]) => [\r\n        k,\r\n        new Map(Object.entries(v))\r\n      ])\r\n    );\r\n    this.overrides.clear();\r\n    this.overrides.merge(savedOverrides);\r\n\r\n    \r\n    if (savedStates.global) {\r\n      this.nodes = savedStates.global.nodes;\r\n      this.edges = savedStates.global.edges ? savedStates.global.edges : this.edges;\r\n    }\r\n    // The following lines trigger autoruns.\r\n    // recalculate rawgraph \r\n    const recalculateGraph = this.recalculateRawgraph(savedStates);\r\n    this.rawGraph = recalculateGraph.rawGraph;\r\n    this.metadata = recalculateGraph.metadata;\r\n    // this.rawGraph = savedStates.rawGraph;\r\n    // if (savedStates.metadata) {\r\n    //   this.metadata = savedStates.metadata;\r\n    // }\r\n    \r\n  \r\n    // appState.import.loading = false;\r\n    //\r\n    if (savedStates.positions) {\r\n      this.positions = savedStates.positions;\r\n    }\r\n    if (savedStates.nodesShowingLabels) {\r\n      this.initialNodesShowingLabels = savedStates.nodesShowingLabels;\r\n      this.nodesShowingLabels = savedStates.nodesShowingLabels;\r\n    }\r\n\r\n    //stores data pinned nodes in appState\r\n    if (savedStates.pinnedNodes) {\r\n      this.pinnedNodes = new Set(savedStates.pinnedNodes);\r\n    }\r\n\r\n    this.scatterplot.x = 'degree';\r\n    this.scatterplot.y = 'distance to center';\r\n\r\n\r\n    // this.runActiveLayout();\r\n    // appState.graph.frame.paused = true;\r\n  //   appState.graph.frame.paused = false;\r\n  // appState.graph.frame.resumeLayout();\r\n  //                 this.forceUpdate();\r\n  \r\n\r\n                      // this.frame.resumeLayout();\r\n                      // this.forceUpdate();\r\n  }\r\n\r\n\r\n  //resumes graph layout for a set duration before smart-pausing\r\n  runActiveLayout  () {\r\n    if (this.frame) {\r\n      this.frame.paused = false;\r\n    }\r\n    this.smartPause.defaultActive.isActive = true;\r\n    this.smartPause.defaultActive.startTime = Date.now();\r\n    this.smartPause.smartPaused = false;\r\n    // this.frame.paused = true;\r\n    \r\n  }\r\n\r\n  //selects which nodes should be pinned based on saved state of loaded snapshot\r\n  pinNodes() {\r\n    if (this.pinnedNodes && this.pinnedNodes.size >0) {\r\n      let nodesToPin = [];\r\n      let that = this; //\"this\" will not work inside of forEach, so it needs to be stored\r\n      this.process.graph.forEachNode(function (n) {\r\n        if (that.pinnedNodes.has(n.id)) {\r\n          nodesToPin.push(n);\r\n        }\r\n      });\r\n      this.frame.setPinnedNodes(nodesToPin);\r\n    }\r\n  }\r\n\r\n  setUpFrame() {\r\n    const graphFrame = new Frame(this.computedGraph);\r\n    graphFrame.init();\r\n    graphFrame.display();\r\n    this.frame = graphFrame;\r\n    graphFrame.ee.on(\"select-nodes\", nodes => {\r\n      this.selectedNodes = nodes;\r\n    });\r\n    graphFrame.ee.on(\"show-node-label\", nodes => {\r\n      this.nodesShowingLabels = nodes;\r\n    });\r\n    graphFrame.ee.on(\"right-click\", data => {\r\n      const menu = MenuFactory({\r\n        children: [\r\n          MenuItemFactory({\r\n            onClick: () => {\r\n              this.frame.toggleSelectedLabels();\r\n            },\r\n            text: 'Toggle Labels',\r\n            key: 'Toggle Labels'\r\n          }),\r\n          MenuItemFactory({\r\n            onClick: () => {\r\n              this.frame.unpinSelectedNodes();\r\n            },\r\n            text: 'Unpin Selected',\r\n            key: 'Unpin Selected'\r\n          }),\r\n          MenuItemFactory({\r\n            onClick: () => {\r\n              this.frame.pinSelectedNodes();\r\n            },\r\n            text: 'Pin Selected',\r\n            key: 'Pin Selected'\r\n          }),\r\n          this.frame.rightClickedNode && MenuItemFactory({\r\n            onClick: () => {\r\n              if (this.frame.rightClickedNode) {\r\n                const rightClickedNodeId = this.frame.rightClickedNode.data.ref.id.toString();\r\n                const neighbors = this.getNeighborNodesFromRawGraph(rightClickedNodeId);\r\n                neighbors.sort((n1, n2) => {\r\n                  if (n1[\"pagerank\"] && n2[\"pagerank\"]) {\r\n                    return n2[\"pagerank\"] - n1[\"pagerank\"];\r\n                  }\r\n                  return 0;\r\n                });\r\n                const ids = [];\r\n                for (let i = 0; i < 5 && i < neighbors.length; i++) {\r\n                  ids.push(neighbors[i].id);\r\n                }\r\n                this.showNodes(ids);\r\n              }\r\n            },\r\n            text: 'Show 5 Neighbors with Highest PageRank',\r\n            key: 'Show 5 Neighbors with Highest PageRank'\r\n          }),\r\n        ]\r\n      });\r\n      ContextMenu.show(menu, { left: data.pageX, top: data.pageY }, () => {\r\n        // onMenuClose\r\n        console.log(\"ContextMenu closed\");\r\n      });\r\n    });\r\n  }\r\n\r\n  /*\r\n   * Graph algorithms used in StatisticsDialog.\r\n   */\r\n\r\n  averageClustering() {\r\n    if(this.frame){\r\n      const shonodeid = this.frame.getNodeList().map(n=>n.id)\r\n    \r\n    const shownodes = this.rawGraph.nodes.filter((n)=>(shonodeid.includes(n.id)))\r\n    const showedges = this.rawGraph.edges.filter((e)=>(shonodeid.includes(e.source_id) && shonodeid.includes(e.target_id)))\r\n    const snapshot = {\r\n      rawGraph: {\r\n        nodes:shownodes,\r\n        edges:showedges\r\n      },\r\n    };\r\n    return averageClusteringCoefficient(snapshot);\r\n    }\r\n\r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n    };\r\n    return averageClusteringCoefficient(snapshot);\r\n  }\r\n\r\n\r\n  components() {\r\n    if(this.frame){\r\n      const shonodeid = this.frame.getNodeList().map(n=>n.id)\r\n    \r\n    const shownodes = this.rawGraph.nodes.filter((n)=>(shonodeid.includes(n.id)))\r\n    const showedges = this.rawGraph.edges.filter((e)=>(shonodeid.includes(e.source_id) && shonodeid.includes(e.target_id)))\r\n    const snapshot = {\r\n      rawGraph: {\r\n        nodes:shownodes,\r\n        edges:showedges\r\n      },\r\n    };\r\n    return connectedComponents(snapshot);\r\n    }\r\n    \r\n\r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n    };\r\n    return connectedComponents(snapshot);\r\n  }\r\n\r\n \r\n  density() {\r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n    };\r\n    return graphDensity(snapshot);\r\n  }\r\n\r\n  filtergraphDensity(){\r\n    const nodeCount = this.frame.getNodeList().length;\r\n    const edgeCount = this.frame.getEdgeList().filter(n=>n.fromId!==n.toId).length ;\r\n    return (2 * edgeCount) / ((nodeCount) * (nodeCount - 1));\r\n  }\r\n\r\n \r\n  degree() {\r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n    };\r\n    return averageDegree(snapshot);\r\n  }\r\n\r\n  avgDe(){\r\n    let sum = 0;\r\n    this.frame.getNodeList().forEach(e => {\r\n            sum += e.data.ref.degree;\r\n        }\r\n    )\r\n    return sum / this.frame.getNodeList().length;\r\n  }\r\n\r\n  avgDist(){\r\n\r\n    const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n    const edgeSelection = [];\r\n    this.frame.getNodeList().forEach(node => {\r\n      if(node.linkObjs && node.linkObjs.length>0){\r\n        edgeSelection.push(...node.linkObjs)\r\n      }\r\n      \r\n    })\r\n\r\n    if (edgeSelection.length > 0) {\r\n      const uniqEdgeSelection = uniq(edgeSelection)\r\n      \r\n      if (uniqEdgeSelection.length > 0) {\r\n        const edgeDistance = uniqEdgeSelection.map(e=>{\r\n          if(e.edgeDist >0){\r\n            return e.edgeDist\r\n          }else {\r\n            return 0\r\n          }\r\n         \r\n        })\r\n        // console.log(edgeDistance)\r\n        return average(edgeDistance).toFixed(2);\r\n\r\n      } else {\r\n        return 0\r\n      }\r\n\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n\r\n  diameter() {\r\n    if(this.frame){\r\n      const shonodeid = this.frame.getNodeList().map(n=>n.id)\r\n    \r\n    const shownodes = this.rawGraph.nodes.filter((n)=>(shonodeid.includes(n.id)))\r\n    const showedges = this.rawGraph.edges.filter((e)=>(shonodeid.includes(e.source_id) && shonodeid.includes(e.target_id)))\r\n    const snapshot = {\r\n      rawGraph: {\r\n        nodes:shownodes,\r\n        edges:showedges\r\n      },\r\n    };\r\n    return exactGraphDiameter(snapshot);\r\n    }\r\n    \r\n    const snapshot = {\r\n      rawGraph: this.rawGraph,\r\n    };\r\n    return exactGraphDiameter(snapshot);\r\n  }\r\n\r\n  rerundiameter(temraw){\r\n    const snapshot = {\r\n      rawGraph: temraw,\r\n    };\r\n    return exactGraphDiameter(snapshot);\r\n  }\r\n\r\n  reruncluster(temraw){\r\n    const snapshot = {\r\n      rawGraph: temraw,\r\n    };\r\n    return reaverageClusteringCoefficient(snapshot);\r\n  }\r\n\r\n  reruncomponent(temraw){\r\n    const snapshot = {\r\n      rawGraph: temraw,\r\n    };\r\n    return connectedComponents(snapshot);\r\n  }\r\n}\r\n\r\n","import { observable } from \"mobx\";\r\n\r\nexport default class ImportStore {\r\n  @observable graphFile = \"\";\r\n  @observable stateFile = \"\";\r\n\r\n  @observable dialogOpen = false;\r\n  @observable gexfDialogOpen = false;\r\n\r\n  @observable loading = false;\r\n\r\n  // Argo-lite specific: File object selected via the file input.\r\n  @observable selectedEdgeFileFromInput = null;\r\n  @observable selectedNodeFileFromInput = null;\r\n\r\n  @observable selectedGexfFileFromInput = null;\r\n\r\n  @observable\r\n  importConfig = {\r\n    nodeFile: {\r\n      path: \"\",\r\n      topN: [],\r\n      hasColumns: true,\r\n      ready: false, // whether the topN is ready to display\r\n      columns: [],\r\n      mapping: {\r\n        id: \"<UNK>\",\r\n        LonX: \"<UNK>\",\r\n        LatY: \"<UNK>\"\r\n      },\r\n      delimiter: \",\"\r\n    },\r\n    edgeFile: {\r\n      path: \"\",\r\n      ready: false,\r\n      hasColumns: true,\r\n      columns: [],\r\n      topN: [],\r\n      mapping: {\r\n        fromId: \"<UNK>\",\r\n        toId: \"<UNK>\"\r\n      },\r\n      createMissing: true,\r\n      delimiter: \",\"\r\n    }\r\n  };\r\n\r\n  /*\r\n    Post Import Filtering related options.\r\n  */\r\n\r\n  postImportFilteringOptions = {\r\n    \"top 10 nodes with highest degree\": (rawGraph) => {\r\n      const sortedList = [...rawGraph.nodes];\r\n      sortedList.sort((n1, n2) => {\r\n          if (n1[\"degree\"] && n2[\"degree\"]) {\r\n              return n2[\"degree\"] - n1[\"degree\"];\r\n          }\r\n          return 0;\r\n      });\r\n      const setIds = new Set();\r\n      for (let i = 0; i < 10 && i < sortedList.length; i++) {\r\n        setIds.add(sortedList[i].id);\r\n      }\r\n      rawGraph.nodes = rawGraph.nodes.map(n => {\r\n        if (setIds.has(n.id)) {\r\n          return {...n, isHidden: false};\r\n        }\r\n        return n;\r\n      });\r\n    },\r\n    \"All Nodes\": (rawGraph) => {\r\n      rawGraph.nodes = rawGraph.nodes.map(n => ({...n, isHidden: false}));\r\n    },\r\n  };\r\n\r\n  defaultPostImportFilteringOption = \"All Nodes\";\r\n  \r\n  @observable selectedPostImportFilteringOption = this.defaultPostImportFilteringOption;\r\n\r\n  postImportFilter(rawGraph) {\r\n    // Hide all nodes by default, use filtering option to show them.\r\n    rawGraph.nodes = rawGraph.nodes.map(n => ({...n, isHidden: true}));\r\n    // Run the selected post import filtering option.\r\n    this.postImportFilteringOptions[this.selectedPostImportFilteringOption](rawGraph);\r\n  }\r\n\r\n\r\n}\r\n","import { observable } from \"mobx\";\r\n\r\nexport default class ProjectStore {\r\n \r\n  @observable projects = [];\r\n\r\n  /*\r\n   * Active project and snapshot\r\n   */\r\n  @observable currentProject = null;\r\n  // @observable currentProjectName = null;\r\n  // @observable currentProjectPath = null;\r\n  @observable currentSnapshotName = \"Quick Save\"; // TODO: If not loaded from snapshot, use this, otherwise use the name of the loaded snapshot\r\n\r\n  // [Argo-lite] for displaying snapshot file in textarea to be copied\r\n  @observable stringCopyOfSnapshot = 'Loading';\r\n  \r\n  /*\r\n   * Dialogs and UI\r\n   */\r\n  @observable isNewProjectDialogOpen = false;\r\n  @observable isProjectDetailDialogOpen = false;\r\n  @observable isSaveSnapshotDialogOpen = false;\r\n  @observable isRenameSnapshotDialogOpen = false;\r\n  // when the ipc returns the projects data for the first time\r\n  // turn off `isFetching` so that the spinner of WorkspaceView will be turned off\r\n  // Also used when refreshing WorkspaceView\r\n  @observable isFetching = true;\r\n\r\n  /*\r\n   * New project creation and import\r\n   */\r\n  @observable newProjectName = '';\r\n}\r\n","import { observable } from \"mobx\";\r\n\r\nexport default class SearchStore {\r\n  @observable searchStr = \"\";\r\n  @observable candidates = [];\r\n  @observable numCandidates = 0;\r\n  @observable panelOpen = false;\r\n}\r\n","import { autorun, runInAction } from \"mobx\";\r\nimport { Intent } from \"@blueprintjs/core\";\r\n\r\nimport PreferencesStore from \"./PreferencesStore\";\r\nimport GraphStore from \"./GraphStore\";\r\n// import MapStore from \"./MapStore\";\r\nimport ImportStore from \"./ImportStore\";\r\nimport ProjectStore from \"./ProjectStore\";\r\n// import { peakCSV } from \"../services/CSVUtils\";\r\nimport parse from \"csv-parse/lib/sync\";\r\nimport SearchStore from \"./SearchStore\";\r\nimport { runSearch } from \"../ipc/client\";\r\n\r\nimport { BACKEND_URL, SAMPLE_GRAPH_SNAPSHOTS} from \"../constants\";\r\nimport { toaster } from '../notifications/client';\r\n\r\nimport {LocalFileData,constructFileFromLocalFileData} from \"get-file-object-from-local-path\"\r\n\r\n// import { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet'\r\n\r\nexport class AppState {\r\n  constructor() {\r\n    this.preferences = new PreferencesStore();\r\n    this.graph = new GraphStore();\r\n    // this.mapview = new MapStore();\r\n    this.import = new ImportStore();\r\n    this.search = new SearchStore();\r\n    this.project = new ProjectStore();\r\n  //   this.map = <MapContainer center={[51.505, -0.09]} zoom={13} scrollWheelZoom={false}>\r\n  //   <TileLayer\r\n  //     attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n  //     url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n  //   />\r\n  //   <Marker position={[51.505, -0.09]}>\r\n  //     <Popup>\r\n  //       A pretty CSS3 popup. <br /> Easily customizable.\r\n  //     </Popup>\r\n  //   </Marker>\r\n  // </MapContainer>\r\n\r\n  }\r\n}\r\n\r\nconst appState = new AppState();\r\n\r\nwindow.appState = appState;\r\n\r\nappState.useToolbartoSelect = false\r\n\r\nconst loadSnapshotFromURL = (url) => {\r\n  return fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors'\r\n  }).then(response => response.text()).catch(error => {\r\n    toaster.show({\r\n      message: 'Failed to fetch graph snapshot',\r\n      intent: Intent.DANGER,\r\n      timeout: -1\r\n    });\r\n    console.error(error);\r\n  });\r\n};\r\n\r\nconst loadSnapshotFromStrapi = (uuid) => {\r\n  const url = `${BACKEND_URL}/snapshots?uuid=${uuid}`;\r\n  return fetch(url, {\r\n    method: 'GET',\r\n    mode: 'cors'\r\n  }).then(response => response.json()).then(json => json[0].body).catch(error => {\r\n    toaster.show({\r\n      message: 'Failed to fetch graph snapshot',\r\n      intent: Intent.DANGER,\r\n      timeout: -1\r\n    });\r\n    console.error(error);\r\n  });\r\n};\r\n\r\nconst loadAndDisplaySnapshotFromURL = (url) => {\r\n  loadSnapshotFromURL(url).then(snapshotString => {\r\n    // use filename/last segment of URL as title in Navbar\r\n    appState.graph.metadata.snapshotName = url.split('/').pop() || url.split('/').pop().pop();\r\n    appState.graph.loadImmediateStates(snapshotString);\r\n  });\r\n};\r\n\r\nconst loadAndDisplaySnapshotFromStrapi = (uuid) => {\r\n  appState.graph.convexPolygons =[]\r\n  appState.graph.modularity = undefined\r\n  appState.graph.globalFlatRatio = undefined\r\n  appState.graph.convexhullby = \"NULL\"\r\n  appState.graph.groupby = \"NULL\"\r\n  appState.graph.mapClicked = undefined;\r\n  appState.graph.areaSelected = undefined;\r\n  appState.graph.selectedNodes = [];\r\n  if(appState.graph.frame) {appState.graph.frame.selection = [];}\r\n  appState.graph.filter = {}\r\n  appState.graph.currentlyHovered = undefined;\r\n \r\n  appState.graph.convexNodes = [];\r\n  appState.graph.convexPolygons = [];\r\n  appState.graph.pathHovered = undefined;\r\n  appState.graph.pathHoveredList = [];\r\n  appState.graph.initialNodesShowingLabels = [];\r\n  appState.graph.densityDistance = [];\r\n  appState.graph.edgeselection = [];\r\n  appState.graph.degreeselection = [];\r\n  appState.graph.degreebrushed = false;\r\n  appState.graph.distanceDensityCurrentlyHovered = undefined;\r\n  appState.graph.distanceDensityCurrentlyClicked = [];\r\n  appState.graph.pinnedNodes = null;\r\n  appState.import.loading = true\r\n  appState.graph.clearBrush = false;\r\n  \r\n  appState.graph.mapEdgeShow = true;\r\n  appState.graph.autoZoom = false;\r\n  appState.graph.firstload =true;\r\n  appState.graph.keydown = false;\r\n  appState.graph.clusteringco = 0;\r\n  appState.graph.graphDiameter = 0;\r\n  appState.graph.connectcom = 0;\r\n\r\n \r\n  loadSnapshotFromStrapi(uuid).then(snapshotString => {\r\n    // TODO: use more sensible snapshot name\r\n    appState.graph.metadata.snapshotName = 'Shared';\r\n    appState.graph.loadImmediateStates(snapshotString);\r\n    appState.import.loading = false;\r\n  });\r\n};\r\n\r\nwindow.loadAndDisplaySnapshotFromURL = loadAndDisplaySnapshotFromURL;\r\nwindow.loadAndDisplaySnapshotFromStrapi = loadAndDisplaySnapshotFromStrapi;\r\n\r\n// var getFileBlob = function (url, cb) {\r\n//   var xhr = new XMLHttpRequest();\r\n//   xhr.open(\"GET\", url);\r\n//   xhr.responseType = \"blob\";\r\n//   xhr.addEventListener('load', function() {\r\n//       cb(xhr.response);\r\n//   });\r\n//   xhr.send();\r\n// };\r\n\r\n// var blobToFile = function (blob, name) {\r\n//   blob.lastModifiedDate = new Date();\r\n//   blob.name = name;\r\n//   return blob;\r\n// };\r\n\r\n// var getFileObject = function(filePathOrUrl, cb) {\r\n//  getFileBlob(filePathOrUrl, function (blob) {\r\n//     cb(blobToFile(blob, 'test.jpg'));\r\n//  });\r\n// };\r\n\r\nwindow.loadInitialSampleGraph = async () => {\r\n  // const nodeFileData = new LocalFileData('/Users/jsc/repositories/SSN/argo-lite/MafiaNodes_2.csv')\r\n  // const nodeFile = constructFileFromLocalFileData(nodeFileData)\r\n  // console.log(nodeFile)\r\n  // appState.import.selectedNodeFileFromInput = nodeFile\r\n\r\n  // const edgeFileData = new LocalFileData('/Users/jsc/repositories/SSN/argo-lite/MafiaEdges_2.csv')\r\n  // const edgeFile = constructFileFromLocalFileData(edgeFileData)\r\n  // console.log(edgeFile)\r\n  // appState.import.selectedEdgeFileFromInput = edgeFile\r\n\r\n  \r\n\r\n  // default fallback url\r\n  let url = \"https://argo-graph-lite.s3.amazonaws.com/lesmiserables.json\"\r\n\r\n  // check url hash\r\n  if (window.location.hash) {\r\n    const hash = window.location.hash.substring(1);\r\n    // If the hash component begins with http.\r\n    if (hash.length >= 4 && hash.startsWith('http')) {\r\n      try {\r\n        url = decodeURIComponent(hash);\r\n      } catch (e) {\r\n        console.error(e);\r\n        alert('Provided URL is not valid.');\r\n      }\r\n    } else {\r\n      // If the hash component does not begin with http\r\n      // treat it as a uuid in strapi.\r\n      loadAndDisplaySnapshotFromStrapi(hash);\r\n      return;\r\n    }\r\n    \r\n  }\r\n  // loadAndDisplaySnapshotFromURL(url)\r\n  loadAndDisplaySnapshotFromStrapi(SAMPLE_GRAPH_SNAPSHOTS[0][1]);\r\n};\r\n\r\nwindow.saveSnapshotToString = () => {\r\n  const snapshotString = appState.graph.saveImmediateStates();\r\n  return snapshotString;\r\n};\r\n\r\n// Load initial sample graph when Argo Lite is ready\r\nwindow.addEventListener('load', (event) => {\r\n  window.loadInitialSampleGraph();\r\n});\r\n\r\nconst updateTimeout = null;\r\n\r\n// Load graph on frontend once the rawGraph has been returned from IPC\r\n// Once a graph has been loaded and displayed, even if nodes are all deleted, still consider it \"hasGraph\"\r\nautorun(() => {\r\n  if (!appState.graph.hasGraph && appState.graph.rawGraph.nodes.length > 0) {\r\n    appState.graph.hasGraph = true;\r\n    appState.graph.clustercoe = appState.graph.averageClustering().toFixed(3)\r\n  }\r\n}) \r\n\r\n// // update MapView\r\nautorun(() => {\r\n  if (appState.graph.rawGraph.nodes.length > 0 ) {  // has spatial information \r\n    //\r\n  }\r\n}) \r\n\r\n\r\n\r\nautorun(() => {\r\n  if (appState.graph.frame) {\r\n    console.log(\"Triggered\");\r\n    // appState.graph.frame.selection = []\r\n\r\n    // \r\n    appState.graph.selectedNodes = appState.graph.frame.selection\r\n\r\n    appState.graph.frame.updateGraph(appState.graph.computedGraph); //loads nodes on screen when snapshot loaded\r\n    appState.graph.frame.setAllNodesShapeWithOverride(appState.graph.nodes.shape, appState.graph.overrides);\r\n    appState.graph.frame.setLabelRelativeSize(appState.graph.nodes.labelSize);\r\n    appState.graph.frame.setLabelLength(appState.graph.nodes.labelLength);\r\n    appState.graph.frame.updateSelectionOpacity();\r\n    // appState.graph.frame.clearSelection();\r\n    // if (appState.graph.selectedNodes && appState.graph.selectedNodes.length >0 ){\r\n    //   appState.graph.selectedNodes = appState.graph.selectedNodes.filter(x => x !== undefined)\r\n    // }\r\n    // if (appState.graph.frame.selection.length > 0) {\r\n    //   this.frame.selection = this.frame.selection.filter(x => x !== undefined)\r\n    // }\r\n  }\r\n\r\n  //pins nodes only after nodes are loaded\r\n  appState.graph.pinNodes();\r\n});\r\n\r\n\r\n// // // resume layout by default \r\nautorun(() => {\r\n  \r\n  // appState.graph.runActiveLayout();\r\n  // setTimeout(function(){appState.graph.frame.paused = true},9000);\r\n  appState.graph.frame.paused = true;\r\n  // appState.graph.frame.resumeLayout();\r\n                  // this.forceUpdate();\r\n}) \r\n\r\n\r\nautorun(() => {\r\n  if (appState.graph.frame && appState.graph.positions) {\r\n    // If positions are saved in a snapshot, pause layout upon loading.\r\n    appState.graph.frame.updatePositions(appState.graph.positions);\r\n    appState.graph.positions = null;\r\n    console.log('[autorun] Positions updated.');\r\n\r\n  }\r\n  if (appState.graph.frame && appState.graph.initialNodesShowingLabels) {\r\n    appState.graph.frame.showLabels(appState.graph.initialNodesShowingLabels);\r\n    appState.graph.initialNodesShowingLabels = null;\r\n  }\r\n\r\n  if (appState.graph.frame && appState.graph.frame.getNodeList().length>0){  //dehilight border when innitially load \r\n    appState.graph.frame.getNodeList().forEach((node)=>{node.renderData.draw_object.children[0].visible=false})\r\n  }\r\n});\r\n\r\nautorun(() => {\r\n  const searchStr = appState.search.searchStr;\r\n  if (searchStr.length >= 3) {\r\n    runSearch(searchStr);\r\n  } else {\r\n    appState.search.panelOpen = false;\r\n    appState.search.candidates.splice(0, appState.search.candidates.length);\r\n    if (appState.graph.frame) {\r\n      appState.graph.frame.highlightNodeIds([], true);\r\n    }\r\n  }\r\n});\r\n\r\nautorun(() => {\r\n  if (appState.graph.selectedNodes && appState.graph.selectedNodes.length >0 ){\r\n    appState.graph.selectedNodes = appState.graph.selectedNodes.filter(x => x !== undefined)\r\n  }\r\n  // if (appState.graph && appState.graph.frame && appState.graph.frame.selection.length > 0) {\r\n  //   this.frame.selection = this.frame.selection.filter(x => x !== undefined)\r\n  // }\r\n})\r\n\r\n// Argo-lite specific: extract CSV from File object and update related fields.\r\nautorun(() => {\r\n  const file = appState.import.selectedEdgeFileFromInput;\r\n  const hasHeader = appState.import.importConfig.edgeFile.hasColumns;\r\n  const delimiter = appState.import.importConfig.edgeFile.delimiter;\r\n\r\n  if (!file) {\r\n    return;\r\n  }\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  reader.onload = () => {\r\n    // Read entire CSV into memory as string\r\n    const fileAsString = reader.result;\r\n    // Get top 20 lines. Or if there's less than 10 line, get all the lines.\r\n    const lines = fileAsString.split('\\n');\r\n    const lineNumber = lines.length;\r\n    const topLinesAsString = lines.map(l => l.trim()).filter((l, i) => i < 20).join('\\n');\r\n    console.log(topLinesAsString);\r\n\r\n    // Parse the top lines\r\n    try {\r\n      const it = hasHeader ? parse(topLinesAsString, {\r\n        comment: \"#\",\r\n        trim: true,\r\n        auto_parse: true,\r\n        skip_empty_lines: true,\r\n        columns: hasHeader,\r\n        delimiter\r\n      }) : parse(topLinesAsString, {\r\n        comment: \"#\",\r\n        trim: true,\r\n        auto_parse: true,\r\n        skip_empty_lines: true,\r\n        columns: undefined,\r\n        delimiter\r\n      });\r\n      runInAction(\"preview top N lines of edge file\", () => {\r\n        appState.import.importConfig.edgeFile.topN = it;\r\n        appState.import.importConfig.edgeFile.columns = Object.keys(it[0]).map(key => `${key}`);\r\n        appState.import.importConfig.edgeFile.mapping.fromId = appState.import.importConfig.edgeFile.columns[0];\r\n        appState.import.importConfig.edgeFile.mapping.toId = appState.import.importConfig.edgeFile.columns[1];\r\n        appState.import.importConfig.edgeFile.ready = true;\r\n      });\r\n    } catch {\r\n      toaster.show({\r\n        message: 'Error: Fails to parse file',\r\n        intent: Intent.DANGER,\r\n        timeout: -1\r\n      });\r\n    }\r\n  };\r\n\r\n  reader.onerror = () => {\r\n    console.error(reader.error);\r\n    toaster.show({\r\n      message: 'Error: Fails to open file',\r\n      intent: Intent.DANGER,\r\n      timeout: -1\r\n    });\r\n  };\r\n});\r\n\r\nautorun(() => {\r\n  const file = appState.import.selectedNodeFileFromInput;\r\n  const hasHeader = appState.import.importConfig.nodeFile.hasColumns;\r\n  const delimiter = appState.import.importConfig.nodeFile.delimiter;\r\n\r\n  if (!file) {\r\n    return;\r\n  }\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  reader.onload = () => {\r\n    // Read entire CSV into memory as string\r\n    const fileAsString = reader.result;\r\n    // Get top 20 lines. Or if there's less than 10 line, get all the lines.\r\n    const lines = fileAsString.split('\\n');\r\n    const lineNumber = lines.length;\r\n    const topLinesAsString = lines.map(l => l.trim()).filter((l, i) => i < 20).join('\\n');\r\n    console.log(topLinesAsString);\r\n\r\n    // Parse the top lines\r\n    try {\r\n      const it = hasHeader ? parse(topLinesAsString, {\r\n        comment: \"#\",\r\n        trim: true,\r\n        auto_parse: true,\r\n        skip_empty_lines: true,\r\n        columns: hasHeader,\r\n        delimiter\r\n      }) : parse(topLinesAsString, {\r\n        comment: \"#\",\r\n        trim: true,\r\n        auto_parse: true,\r\n        skip_empty_lines: true,\r\n        columns: undefined,\r\n        delimiter\r\n      });\r\n\r\n      runInAction(\"preview top N lines of node file\", () => {\r\n        appState.import.importConfig.nodeFile.topN = it;\r\n        appState.import.importConfig.nodeFile.columns = Object.keys(it[0]).map(key => `${key}`);\r\n        appState.import.importConfig.nodeFile.mapping.id = appState.import.importConfig.nodeFile.columns[0];\r\n        appState.import.importConfig.nodeFile.mapping.LatY = appState.import.importConfig.nodeFile.columns[2];\r\n        appState.import.importConfig.nodeFile.mapping.LonX = appState.import.importConfig.nodeFile.columns[1];\r\n        appState.import.importConfig.nodeFile.ready = true;\r\n      });\r\n    } catch {\r\n      toaster.show({\r\n        message: 'Error: Fails to open file',\r\n        intent: Intent.DANGER,\r\n        timeout: -1\r\n      });\r\n    }\r\n  };\r\n\r\n  reader.onerror = () => {\r\n    console.error(reader.error);\r\n    toaster.show({\r\n      message: 'Error: Fails to open file',\r\n      intent: Intent.DANGER,\r\n      timeout: -1\r\n    });\r\n  };\r\n});\r\n\r\nexport default appState;\r\n","import * as scale from \"d3-scale\";\r\n\r\n// Argo-lite Iframe widget mode\r\n// Build the app separately and host it on a different URL\r\n// If set to true, the app will begin in widget mode\r\n// hiding certain panels, logo, and minimap\r\n// and show a minimalist Navbar.\r\nexport const IS_IFRAME_WIDGET = window.location !== window.parent.location;\r\n\r\nexport const FRONTEND_URL = \"https://poloclub.github.io/argo-graph-lite\";\r\nexport const LOGO_URL = \"https://sites.gatech.edu/snoman/\";\r\nexport const GITHUB_URL = \"https://github.com/sichenjin/SSN\";\r\n// Argo-lite Graph Sharing backend Strapi Server:\r\nexport const BACKEND_URL = \"https://argo-share.herokuapp.com\"; // for production\r\n// export const BACKEND_URL = \"https://sleepy-brushlands-57948.herokuapp.com\"; // for free heroku\r\n// export const BACKEND_URL = \"http://localhost:1337\"; // for local strapi development\r\nexport const SAMPLE_GRAPH_SNAPSHOTS = [\r\n  // [\"Les Miserables\", \"31d8fb5a-b540-4db6-a2df-9c0158e152f0\"],\r\n  // https://poloclub.github.io/argo-graph-lite/#099905af-a9a1-417a-8a1c-92fa121d7d0d\r\n  // #bc368f46-a78b-4fc7-bd29-68594a8f7e3c\r\n  // https://poloclub.github.io/argo-graph-lite/#ab19b31c-efe1-4b77-ba03-4656ef1bd4bc\r\n  // https://poloclub.github.io/argo-graph-lite/#6c399b67-1454-498c-9abc-86cafa48434d \r\n  // https://poloclub.github.io/argo-graph-lite/#f5eb85cb-65be-46fe-bd66-1c3066e27893  \r\n  // https://poloclub.github.io/argo-graph-lite/#0b92553e-b85a-4be4-94ce-84c8868da40c /\r\n  //change back to no shortest path snapshot for foodsharing \"ab19b31c-efe1-4b77-ba03-4656ef1bd4bc\"\r\n  // https://poloclub.github.io/argo-graph-lite/#c1295995-f0c4-4350-9ea0-c97c8a134a34 //shortest path for food sharing \r\n  // https://poloclub.github.io/argo-graph-lite/#ae71bf2c-0b47-43bd-8955-c64a53734341  \r\n  // \"\" \r\n  \r\n  // https://poloclub.github.io/argo-graph-lite/#82ffaa24-1d0f-402d-8d5c-9e6595827bc8\r\n  // c1295995-f0c4-4350-9ea0-c97c8a134a34\r\n  // <iframe src=\"https://poloclub.github.io/argo-graph-lite/#0add65d1-c16f-4c44-b33f-6bf2adb4b589\" width=\"850\" height=\"500\"></iframe>\r\n  [\"Food Sharing\", \"935e591f-38d3-4e91-974d-40172dd123b6\"],  \r\n   \r\n  // 8b1fa770-a1d0-43f0-b798-def14744dd8c\r\n  //without -degree nodes snapshot \r\n  // [\"CORD-19 Citation Graph 06-02\", \"4bf882d3-8966-4f41-a590-acafeb998d2a\"],\r\n  // https://poloclub.github.io/argo-graph-lite/#\"\r\n  //<iframe src=\"https://poloclub.github.io/argo-graph-lite/#732a9a88-9123-46b4-a271-3616675eab3d\" width=\"850\" height=\"500\"></iframe> \r\n  // mafia: 6f4e03f4-1de3-485b-96a8-8c3e513b6e54//// 732a9a88-9123-46b4-a271-3616675eab3d\r\n  \r\n  [\"Mafia Family Network\", \"13aaf5c9-fea7-4c72-9ca2-a4d605622e82\"],\r\n  // c43890f8-1cfb-4599-a0d3-8f47303691fc\r\n  [\"US flight Network\", '5d34f2ee-da8c-4748-affc-af44798e32d6'],\r\n  // https://poloclub.github.io/argo-graph-lite/#a6470fe8-f562-4e78-94ee-196f78006c1c\r\n  ['US 117th House Vote of 5 States', '86665914-5bd3-4293-bc2b-4ab673595c8a'],\r\n  // https://poloclub.github.io/argo-graph-lite/#86665914-5bd3-4293-bc2b-4ab673595c8a\r\n  // https://poloclub.github.io/argo-graph-lite/#51cd24cd-0819-4f2c-b28b-364dc84bb055\r\n  ['US 117th House Vote Network','ad3d8ca3-1f15-4ae5-90a8-2af15d65bc81']\r\n  // \"5c1c6b89-24cd-4dff-9748-6cf6ad8a43a1\" 960 edges\r\n  // e6d1062c-f1ac-4d69-8039-16d589fb04cf\r\n];\r\n\r\n// When resizing window or running on mobile,\r\n// used to determine whether screen\r\n// is considered small.\r\nexport const MOBILE_WIDTH_CUTOFF = 800;\r\nexport const MOBILE_HEIGHT_CUTOFF = 480;\r\n\r\nexport const SCALE_LINEAR = \"Linear Scale\";\r\nexport const SCALE_LOG = \"Log Scale\";\r\nexport const SCALE_CATEGORY = \"Nominal Scale\";\r\n\r\nexport const scales = {\r\n  [SCALE_LINEAR]: scale.scaleLinear,\r\n  // [SCALE_LOG]: scale.scaleLog,\r\n  [SCALE_CATEGORY] : scale.scaleOrdinal\r\n};\r\n\r\nexport const LOAD_USER_CONFIG = \"load-user-config\";\r\nexport const LOADED_USER_CONFIG = \"loaded-user-config\";\r\nexport const SAVE_USER_CONFIG = \"save-user-config\";\r\nexport const SAVED_USER_CONFIG = \"saved-user-config\";\r\n\r\nexport const FETCH_WORKSPACE_PROJECTS = \"fetch-workspace-projects\";\r\nexport const FETCHED_WORKSPACE_PROJECTS = \"fetched-workspace-projects\";\r\nexport const MENU_NEW_PROJECT = \"menu-new-project\";\r\nexport const CREATE_NEW_PROJECT = \"create-new-project\";\r\nexport const CREATED_NEW_PROJECT = \"created-new-project\";\r\n\r\nexport const DELETE_FILE = \"delete-file\";\r\nexport const RENAME_FILE = \"rename-file\";\r\n\r\nexport const LOAD_GRAPH_JSON = \"load-graph-json\";\r\nexport const LOAD_GRAPH_SQLITE = \"load-graph-sqlite\";\r\nexport const LOADED_GRAPH_JSON = \"loaded-graph-json\";\r\nexport const LOAD_TOAST_KEY = \"load-toast-key\";\r\n\r\nexport const SAVE_GRAPH_JSON = \"save-graph-json\";\r\nexport const SAVE_GRAPH_SQLITE = \"save-graph-sqlite\";\r\nexport const SAVED_GRAPH_JSON = \"saved-graph-json\";\r\nexport const SAVE_TOAST_KEY = \"save-const-key\";\r\n\r\nexport const MENU_LOAD = \"menu-load\";\r\nexport const MENU_IMPORT_CSV = \"menu-import-csv\";\r\nexport const MENU_SAVE_GRAPH_STATE = \"menu-save-graph-state\";\r\nexport const MENU_SAVE_GRAPH_STATE_TO_PROJECT =\r\n  \"menu-save-graph-state-to-project\";\r\nexport const MENU_SAVE_GRAPH_SQLITE = \"menu-save-graph-sqlite\";\r\nexport const SAVE_GRAPH_STATE = \"save-graph-state\";\r\nexport const SAVED_GRAPH_STATE = \"saved-graph-state\";\r\nexport const SAVE_GRAPH_STATE_TO_PROJECT = \"save-graph-state-to-project\";\r\nexport const SAVED_GRAPH_STATE_TO_PROJECT = \"saved-graph-state-to-project\";\r\nexport const LOAD_GRAPH_STATE = \"load-graph-state\";\r\nexport const LOADED_GRAPH_STATE = \"loaded-graph-state\";\r\n\r\nexport const SHOW_ITEM_IN_FOLDER = \"show-item-in-folder\";\r\nexport const SHOW_WORKSPACE_FOLDER = 'show-workspace-folder';\r\nexport const CHANGE_WORKSPACE_FOLDER = 'change-workspace-folder';\r\nexport const CHANGED_WORKSPACE_FOLDER = 'changed-workspace-folder';\r\n\r\nexport const CHOOSE_EDGE_FILE = \"choose-edge-file\";\r\nexport const CHOSEN_EDGE_FILE = \"chosen-edge-file\";\r\nexport const CHOOSE_NODE_FILE = \"choose-node-file\";\r\nexport const PEAKED_NODE_FILE = \"peaked-node-file\";\r\nexport const CHOSEN_NODE_FILE = \"chosen-node-file\";\r\n\r\nexport const CHOOSE_GRAPH_FILE = \"choose-graph-file\";\r\nexport const CHOSEN_GRAPH_FILE = \"chosen-graph-file\";\r\nexport const CHOOSE_STATE_FILE = \"choose-state-file\";\r\nexport const CHOSEN_STATE_FILE = \"chosen-state-file\";\r\n\r\nexport const NODE_AND_EDGE_FILE = \"both nodes and edges file\";\r\nexport const ONLY_EDGE_FILE = \"only edges file\";\r\n\r\nexport const GRAPH_AND_STATE_FILE = \"both graph and snapshot file\";\r\nexport const ONLY_GRAPH_FILE = \"only graph file\";\r\nexport const IMPORT_GRAPH = \"import-graph\";\r\nexport const IMPORTED_GRAPH = \"imported-graph\";\r\nexport const OPEN_GRAPH = \"open-graph\";\r\nexport const OPENED_GRAPH = \"opened-graph\";\r\n\r\nexport const SEARCH_REQUEST = \"search-request\";\r\nexport const SEARCH_RESPONSE = \"search-response\";\r\n\r\nexport const ADD_NODES = \"add-nodes\";\r\nexport const ADD_SELECT_NODE = \"add-select-node\";\r\nexport const ADD_NODE = \"add-node\";\r\nexport const GET_NEIGHBORS = \"get-neighbors\";\r\n","import { runInAction, toJS } from 'mobx';\r\nimport { Intent } from '@blueprintjs/core';\r\nimport { demapify } from 'es6-mapify';\r\n\r\nimport appState from '../stores/index';\r\nimport {\r\n  ADD_NODE,\r\n  ADD_NODES,\r\n  ADD_SELECT_NODE,\r\n  CHOOSE_EDGE_FILE,\r\n  CHOOSE_GRAPH_FILE,\r\n  CHOOSE_NODE_FILE,\r\n  CHOOSE_STATE_FILE,\r\n  CHOSEN_EDGE_FILE,\r\n  CHOSEN_GRAPH_FILE,\r\n  CHOSEN_NODE_FILE,\r\n  CHOSEN_STATE_FILE,\r\n  GET_NEIGHBORS,\r\n  IMPORT_GRAPH,\r\n  IMPORTED_GRAPH,\r\n  LOAD_GRAPH_SQLITE,\r\n  LOADED_GRAPH_SQLITE,\r\n  LOADED_GRAPH_STATE,\r\n  MENU_IMPORT_CSV,\r\n  MENU_LOAD,\r\n  MENU_NEW_PROJECT,\r\n  MENU_SAVE_GRAPH_SQLITE,\r\n  MENU_SAVE_GRAPH_STATE,\r\n  CREATE_NEW_PROJECT,\r\n  CREATED_NEW_PROJECT,\r\n  OPEN_GRAPH,\r\n  OPENED_GRAPH,\r\n  FETCH_WORKSPACE_PROJECTS,\r\n  FETCHED_WORKSPACE_PROJECTS,\r\n  SAVE_GRAPH_SQLITE,\r\n  SAVE_GRAPH_STATE,\r\n  SAVED_GRAPH_JSON,\r\n  SAVED_GRAPH_STATE,\r\n  SEARCH_REQUEST,\r\n  SEARCH_RESPONSE,\r\n  SHOW_ITEM_IN_FOLDER,\r\n  SAVED_GRAPH_STATE_TO_PROJECT,\r\n  MENU_SAVE_GRAPH_STATE_TO_PROJECT,\r\n  SAVE_GRAPH_STATE_TO_PROJECT,\r\n  DELETE_FILE,\r\n  RENAME_FILE,\r\n  SHOW_WORKSPACE_FOLDER,\r\n  LOAD_USER_CONFIG,\r\n  LOADED_USER_CONFIG,\r\n  SAVED_USER_CONFIG,\r\n  SAVE_USER_CONFIG,\r\n  CHANGE_WORKSPACE_FOLDER,\r\n  CHANGED_WORKSPACE_FOLDER,\r\n} from '../constants/index';\r\nimport { toaster } from '../notifications/client';\r\n\r\nimport createGraph from 'ngraph.graph';\r\nimport pageRank from 'ngraph.pagerank';\r\nimport path from 'ngraph.path';\r\nimport parse from \"csv-parse/lib/sync\";\r\nimport centrality from 'ngraph.centrality';\r\n// import betweennes from 'ngraph.centrality/src/betweenness';\r\n// import worker from './worker';\r\n\r\n// TODO: Register web worker used by Argo-lite.\r\n\r\n// Argo-lite replacement for electron ipc.\r\nconst ipcRenderer = {\r\n  send: (eventString) => {\r\n    console.log(`ipcRenderer.send(${eventString}, ...)`);\r\n  }\r\n}\r\n\r\nconst Nonloc = 360\r\n\r\nexport default function registerIPC() {\r\n  // ipcRenderer.on(LOADED_USER_CONFIG, (event, loadedObject) => {\r\n  //   // Overwrite PreferenceStore values according to user config values,\r\n  //   // if present.\r\n  //   if (loadedObject.darkMode) {\r\n  //     appState.preferences.darkMode = true;\r\n  //   }\r\n  //   if (loadedObject.workspace && loadedObject.workspace != '') {\r\n  //     appState.preferences.workspacePath = loadedObject.workspace;\r\n  //   }\r\n  // });\r\n\r\n  // ipcRenderer.on(SAVED_USER_CONFIG, (event) => {\r\n  //   toaster.show({\r\n  //     message: \"User configuration saved\",\r\n  //     intent: Intent.SUCCESS,\r\n  //     iconName: 'saved',\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(LOADED_GRAPH_SQLITE, (event, loadedObject) => {\r\n  //   runInAction('load saved graph', () => {\r\n  //     appState.graph.rawGraph = loadedObject.rawGraph;\r\n  //     appState.graph.metadata = loadedObject.metadata;\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(OPENED_GRAPH, (event, loadedObject) => {\r\n  //   runInAction('load saved graph and state', () => {\r\n  //     console.log(loadedObject);\r\n  //     appState.graph.rawGraph = loadedObject.rawGraph;\r\n  //     appState.graph.metadata = loadedObject.metadata;\r\n  //     if (loadedObject.state) {\r\n  //       appState.graph.loadImmediateStates(loadedObject.state);\r\n  //     }\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(LOADED_GRAPH_STATE, (event, loadedObject) => {\r\n  //   appState.graph.loadImmediateStates(loadedObject);\r\n  // });\r\n\r\n  // ipcRenderer.on(SAVED_GRAPH_STATE, (event, savedFilePath) => {\r\n  //   toaster.show({\r\n  //     message: `Saved graph snapshot file to ${savedFilePath}`,\r\n  //     intent: Intent.SUCCESS,\r\n  //     iconName: 'saved',\r\n  //     action: {\r\n  //       onClick: () => ipcRenderer.send(SHOW_ITEM_IN_FOLDER, savedFilePath),\r\n  //       text: 'Show in Folder',\r\n  //     },\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(SAVED_GRAPH_STATE_TO_PROJECT, (event, snapshotName) => {\r\n  //   toaster.show({\r\n  //     message: `Saved to snapshot ${snapshotName}`,\r\n  //     intent: Intent.SUCCESS,\r\n  //     iconName: 'saved',\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(SAVED_GRAPH_JSON, (event, savedFilePath) => {\r\n  //   toaster.show({\r\n  //     message: `Saved graph file to ${savedFilePath}`,\r\n  //     intent: Intent.SUCCESS,\r\n  //     iconName: 'saved',\r\n  //     action: {\r\n  //       onClick: () => ipcRenderer.send(SHOW_ITEM_IN_FOLDER, savedFilePath),\r\n  //       text: 'Show in Folder',\r\n  //     },\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(CHOSEN_NODE_FILE, (event, path) => {\r\n  //   appState.import.importConfig.nodeFile.path = path;\r\n  // });\r\n\r\n  // ipcRenderer.on(CHOSEN_EDGE_FILE, (event, path) => {\r\n  //   appState.import.importConfig.edgeFile.path = path;\r\n  // });\r\n\r\n  // ipcRenderer.on(CHOSEN_GRAPH_FILE, (event, path) => {\r\n  //   appState.import.graphFile = path;\r\n  // });\r\n\r\n  // ipcRenderer.on(CHOSEN_STATE_FILE, (event, path) => {\r\n  //   appState.import.stateFile = path;\r\n  // });\r\n\r\n  // ipcRenderer.on(IMPORTED_GRAPH, (event) => {\r\n  //   appState.import.loading = false;\r\n  //   appState.import.dialogOpen = false;\r\n  //   appState.project.isFetching = true;\r\n  //   fetchWorkspaceProjects();\r\n  // });\r\n\r\n  // ipcRenderer.on(ADD_NODES, (event, toAdd) => {\r\n  //   runInAction('add nodes and edges to graph', () => {\r\n  //     appState.graph.rawGraph.nodes = appState.graph.rawGraph.nodes.concat(\r\n  //       toAdd.nodes,\r\n  //     );\r\n  //     appState.graph.rawGraph.edges = appState.graph.rawGraph.edges.concat(\r\n  //       toAdd.edges,\r\n  //     );\r\n  //   });\r\n  // });\r\n\r\n  // ipcRenderer.on(ADD_SELECT_NODE, (event, toAdd) => {\r\n  //   runInAction('add nodes and edges to graph', () => {\r\n  //     appState.graph.rawGraph.nodes = appState.graph.rawGraph.nodes.concat(\r\n  //       toAdd.nodes,\r\n  //     );\r\n  //     appState.graph.rawGraph.edges = appState.graph.rawGraph.edges.concat(\r\n  //       toAdd.edges,\r\n  //     );\r\n  //   });\r\n\r\n  //   appState.graph.frame.setLastNode(toAdd.nodes[0].node_id);\r\n  //   appState.graph.frame.dragLastNode();\r\n  // });\r\n\r\n  // ipcRenderer.on(SEARCH_RESPONSE, (event, candidates) => {\r\n  //   var cands = JSON.parse(candidates);\r\n  //   var ckeys = cands.map(x => x.node_id);\r\n  //   appState.search.allCands = Object.values(cands);\r\n  //   appState.search.pageNum = 0;\r\n  //   appState.search.nPerPage = 10;\r\n  //   appState.search.numCandidates = appState.search.allCands.length;\r\n  //   appState.search.maxPage = parseInt(\r\n  //     appState.search.allCands.length / appState.search.nPerPage,\r\n  //   );\r\n  //   appState.search.pages = [...Array(appState.search.maxPage).keys()];\r\n  //   appState.search.candidates = appState.search.allCands.slice(0, 10);\r\n  //   appState.search.panelOpen = true;\r\n  //   if (appState.graph.frame) {\r\n  //     appState.graph.frame.highlightNodeIds(ckeys, true);\r\n  //   }\r\n  // });\r\n\r\n  // ipcRenderer.on(LOADED_GRAPH_STATE, (event, stateStr) => {\r\n  //   appState.graph.loadImmediateStates(stateStr);\r\n  // });\r\n\r\n  // ipcRenderer.on(CREATED_NEW_PROJECT, () => {\r\n  //   fetchWorkspaceProjects();\r\n  // });\r\n\r\n  // ipcRenderer.on(FETCHED_WORKSPACE_PROJECTS, (event, projects) => {\r\n  //   appState.project.isFetching = false;\r\n  //   appState.project.projects = projects;\r\n  //   // Update mobx state on projects, useful for updating the components after deleting/renaming etc.\r\n  //   if (appState.project.currentProject !== null) {\r\n  //     // There is a project currently selected (showing in a ProjectDetailDialog etc.)\r\n  //     // This fetch needs to update the dialog also\r\n  //     const temp = appState.project.projects.filter((project) => {\r\n  //       return project.projectPath === appState.project.currentProject.projectPath;\r\n  //     });\r\n  //     if (temp.length === 1) {\r\n  //       appState.project.currentProject = temp[0];\r\n  //     } else {\r\n  //       appState.project.currentProject = null;\r\n  //     }\r\n\r\n  //   }\r\n  // });\r\n\r\n  // ipcRenderer.on(CHANGED_WORKSPACE_FOLDER, (events, newWorkspaceDirectory) => {\r\n  //   appState.preferences.workspacePath = newWorkspaceDirectory;\r\n  //   appState.preferences.saveUserConfig();\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_NEW_PROJECT, () => {\r\n  //   appState.project.isNewProjectDialogOpen = true;\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_LOAD, () => {\r\n  //   appState.preferences.openDialogOpen = true;\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_IMPORT_CSV, () => {\r\n  //   appState.import.dialogOpen = true;\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_SAVE_GRAPH_STATE, () => {\r\n  //   // Original implementation for opening a traditional system-level save file dialog\r\n  //   // ipcRenderer.send(SAVE_GRAPH_STATE, appState.graph.saveImmediateStates());\r\n\r\n  //   // New implementation opening a dialog that saves snapshot to project\r\n  //   appState.project.isSaveSnapshotDialogOpen = true;\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_SAVE_GRAPH_STATE_TO_PROJECT, () => {\r\n  //   requestSaveSnapshot();\r\n  // });\r\n\r\n  // ipcRenderer.on(MENU_SAVE_GRAPH_SQLITE, requestSaveSQLite);\r\n}\r\n\r\nexport function requestLoadSQLite() {\r\n  ipcRenderer.send(LOAD_GRAPH_SQLITE);\r\n}\r\n\r\nexport function addNode(node_id) {\r\n  ipcRenderer.send(ADD_NODE, node_id);\r\n}\r\n\r\nexport function requestNeighbors(\r\n  node_id,\r\n  attr = 'degree',\r\n  num = '10',\r\n  order = 'desc',\r\n) {\r\n  ipcRenderer.send(GET_NEIGHBORS, node_id, attr, num, order);\r\n}\r\n\r\nfunction requestSaveSQLite() {\r\n  ipcRenderer.send(\r\n    SAVE_GRAPH_SQLITE,\r\n    JSON.stringify({\r\n      graph: toJS(appState.graph.rawGraph),\r\n      metadata: toJS(appState.graph.metadata),\r\n      nodes: toJS(appState.graph.nodes),\r\n      overrides: toJS(demapify(appState.graph.overrides)),\r\n      nodePositions: appState.graph.frame.getPositions(),\r\n    }),\r\n  );\r\n}\r\n\r\nexport function requestChooseNodeFile(hasHeader) {\r\n  ipcRenderer.send(CHOOSE_NODE_FILE, hasHeader);\r\n}\r\n\r\nexport function requestChooseEdgeFile(hasHeader) {\r\n  ipcRenderer.send(CHOOSE_EDGE_FILE, hasHeader);\r\n}\r\n\r\nexport function requestChooseGraphFile() {\r\n  ipcRenderer.send(CHOOSE_GRAPH_FILE);\r\n}\r\n\r\nexport function requestChooseStateFile() {\r\n  ipcRenderer.send(CHOOSE_STATE_FILE);\r\n}\r\n\r\nexport function requestOpen() {\r\n  ipcRenderer.send(\r\n    OPEN_GRAPH,\r\n    appState.import.graphFile,\r\n    appState.import.stateFile,\r\n  );\r\n}\r\n\r\n// Request to delete a file specified at filePath\r\nexport function requestDelete(filePath) {\r\n  ipcRenderer.send(DELETE_FILE, filePath);\r\n}\r\n\r\n/**\r\n * Request to rename a file specified at filePath\r\n * @param filePath where the file to be renamed is located\r\n * @param newName new file name with extension\r\n */\r\nexport function requestRename(filePath, newName) {\r\n  ipcRenderer.send(RENAME_FILE, filePath, newName);\r\n}\r\n\r\nexport function requestSaveSnapshot(snapshotName) {\r\n  if (!snapshotName) {\r\n    // Default: Use the currently opened snapshot name (if no snapshot opened, the default name in the ProjectStore will be used)\r\n    ipcRenderer.send(SAVE_GRAPH_STATE_TO_PROJECT, appState.graph.saveImmediateStates(), appState.project.currentProject.projectPath, appState.project.currentSnapshotName);\r\n  } else {\r\n    ipcRenderer.send(SAVE_GRAPH_STATE_TO_PROJECT, appState.graph.saveImmediateStates(), appState.project.currentProject.projectPath, snapshotName);\r\n  }\r\n}\r\n\r\nexport function requestImportGraphFromCSV(hasNodeFile, delimiter, newProjectName) {\r\n  if (!newProjectName) {\r\n    newProjectName = 'Test Project';\r\n  }\r\n  appState.import.loading = true;\r\n  appState.graph.convexPolygons =[]\r\n  appState.graph.modularity = undefined\r\n  appState.graph.globalFlatRatio = undefined\r\n  appState.graph.convexhullby = \"NULL\"\r\n  appState.graph.groupby = \"NULL\"\r\n  appState.graph.mapClicked = undefined;\r\n  appState.graph.areaSelected = undefined;\r\n  appState.graph.selectedNodes = [];\r\n  appState.graph.filter = {}\r\n  appState.graph.currentlyHovered = undefined;\r\n \r\n  appState.graph.convexNodes = [];\r\n  appState.graph.convexPolygons = [];\r\n  appState.graph.pathHovered = undefined;\r\n  appState.graph.pathHoveredList = [];\r\n  appState.graph.initialNodesShowingLabels = [];\r\n  appState.graph.densityDistance = [];\r\n  appState.graph.edgeselection = [];\r\n  appState.graph.degreeselection = [];\r\n  appState.graph.degreebrushed = false;\r\n  appState.graph.distanceDensityCurrentlyHovered = undefined;\r\n  appState.graph.distanceDensityCurrentlyClicked = [];\r\n  appState.graph.pinnedNodes = null;\r\n  appState.graph.clearBrush = false;\r\n  \r\n  appState.graph.mapEdgeShow = true;\r\n  appState.graph.autoZoom = false;\r\n  appState.graph.firstload =true;\r\n  appState.graph.keydown = false;\r\n  appState.graph.clusteringco = 0;\r\n  appState.graph.graphDiameter = 0;\r\n  appState.graph.connectcom = 0;\r\n\r\n  const importConfig = {\r\n    hasNodeFile,\r\n    nodes: {\r\n      path: appState.import.importConfig.nodeFile.path,\r\n      hasColumns: appState.import.importConfig.nodeFile.hasColumns,\r\n      columns: toJS(appState.import.importConfig.nodeFile.columns),\r\n      mapping: toJS(appState.import.importConfig.nodeFile.mapping),\r\n    },\r\n    edges: {\r\n      path: appState.import.importConfig.edgeFile.path,\r\n      hasColumns: appState.import.importConfig.edgeFile.hasColumns,\r\n      columns: toJS(appState.import.importConfig.edgeFile.columns),\r\n      mapping: toJS(appState.import.importConfig.edgeFile.mapping),\r\n      createMissing: appState.import.importConfig.edgeFile.createMissing,\r\n    },\r\n    delimiter,\r\n    newProjectName\r\n  };\r\n  ipcRenderer.send(IMPORT_GRAPH, importConfig);\r\n\r\n  // TODO: Potentially separate this out to web worker.\r\n  importGraphFromCSV(importConfig).then(graph => {\r\n    // Run post import filters\r\n    appState.import.postImportFilter(graph.rawGraph);\r\n\r\n    runInAction('load imported graph', () => {\r\n      appState.graph.rawGraph = graph.rawGraph;\r\n      appState.graph.metadata = graph.metadata;\r\n      appState.graph.setUpFrame();\r\n      appState.import.loading = false;\r\n    });\r\n    // Reinitialize global configs\r\n    appState.graph.nodes = appState.graph.initialGlobalConfig.nodes;\r\n    appState.graph.scatterplot = appState.graph.initialGlobalConfig.scatterplot;\r\n    appState.graph.overrides = new Map();\r\n    appState.import.loading = false;\r\n    appState.import.dialogOpen = false;\r\n    // Sync preference store with graph-frontend frame\r\n    // if (!appState.preferences.darkMode) { // assume frame defaults to dark\r\n    //   appState.graph.frame.toggleDark();\r\n    // }\r\n    if (appState.preferences.minimapShowing) {\r\n      appState.graph.frame.showMiniMap();\r\n    } else {\r\n      appState.graph.frame.hideMiniMap();\r\n    }\r\n    // Newly imported graph shouldn't have label showing\r\n    appState.graph.frame.turnOffLabelCSSRenderer();\r\n    // appState.import.loading = false;\r\n  });\r\n  appState.import.loading = false;\r\n}\r\n\r\nexport function requestImportGraphFromGexf() {\r\n  importGraphFromGexf().then(graph => {\r\n    // Run post import filters\r\n    appState.import.postImportFilter(graph.rawGraph);\r\n\r\n    runInAction('load imported graph', () => {\r\n      appState.graph.rawGraph = graph.rawGraph;\r\n      appState.graph.metadata = graph.metadata;\r\n      appState.graph.setUpFrame();\r\n    });\r\n    // Reinitialize global configs\r\n    appState.graph.nodes = appState.graph.initialGlobalConfig.nodes;\r\n    appState.graph.scatterplot = appState.graph.initialGlobalConfig.scatterplot;\r\n    appState.graph.overrides = new Map();\r\n    appState.import.loading = false;\r\n    appState.import.gexfDialogOpen = false;\r\n    // Sync preference store with graph-frontend frame\r\n    // if (!appState.preferences.darkMode) { // assume frame defaults to dark\r\n    //   appState.graph.frame.toggleDark();\r\n    // }\r\n    if (appState.preferences.minimapShowing) {\r\n      appState.graph.frame.showMiniMap();\r\n    } else {\r\n      appState.graph.frame.hideMiniMap();\r\n    }\r\n    // Newly imported graph shouldn't have label showing\r\n    appState.graph.frame.turnOffLabelCSSRenderer();\r\n  });\r\n}\r\n\r\nasync function readCSV(fileObject, hasHeader, delimiter) {\r\n  const file = fileObject;\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = () => {\r\n      const content = reader.result;\r\n      try {\r\n        if (hasHeader) {\r\n          resolve(parse(content, {\r\n            comment: \"#\",\r\n            trim: true,\r\n            auto_parse: true,\r\n            skip_empty_lines: true,\r\n            columns: hasHeader,\r\n            delimiter\r\n          }));\r\n        }\r\n        resolve(parse(content, {\r\n          comment: \"#\",\r\n          trim: true,\r\n          auto_parse: true,\r\n          skip_empty_lines: true,\r\n          columns: undefined,\r\n          delimiter\r\n        }));\r\n      } catch (err) {\r\n        let msg = err.message\r\n        let mismatch = msg.indexOf(\"Invalid Record Length:\") == 0\r\n        if (mismatch) {\r\n          msg = msg.replace(\"is\", \"set to\")\r\n          msg = msg.replace(\"got\", \"but detected\")\r\n        }\r\n        toaster.show({\r\n          message: \"Error: \" + msg,\r\n          intent: Intent.DANGER,\r\n          timeout: -1\r\n        });\r\n        \r\n      }\r\n      // appState.import.loading = false;\r\n      appState.import.dialogOpen = false;\r\n    }\r\n  });\r\n}\r\n\r\nasync function parseGEXF(content) {\r\n  const parser = new DOMParser();\r\n  const xmlDoc = parser.parseFromString(content, \"text/xml\");\r\n  const xmlEdges = xmlDoc.getElementsByTagName('edge');\r\n  const xmlNodes = xmlDoc.getElementsByTagName('node');\r\n  const xmlAttri = xmlDoc.getElementsByTagName('attributes')\r\n\r\n  let nodeAttri = [];\r\n  let edgeAttri = [];\r\n  const edgesArr = [];\r\n  const nodesArr = [];\r\n  const nodeAttriOrdered = {};\r\n\r\n  for (let i = 0, l = xmlAttri.length; i < l; i++) {\r\n    const curr = xmlAttri[i];\r\n    if (curr.getAttribute('class') === 'node') {\r\n      nodeAttri = curr.getElementsByTagName('attribute');\r\n    }\r\n    else if (curr.getAttribute('class') === 'edge') {\r\n      edgeAttri = curr.getElementsByTagName('attribute');\r\n    }\r\n  }\r\n\r\n  for (let i = 0, l = nodeAttri.length; i < l; i++) {\r\n    const curr = nodeAttri[i];\r\n    nodeAttriOrdered[curr.getAttribute(\"id\")] = curr.getAttribute(\"title\");\r\n  }\r\n\r\n  for (let i = 0, l = xmlEdges.length; i < l; i++) {\r\n    const currEdge = xmlEdges[i];\r\n    const s = currEdge.getAttribute('source').toString();\r\n    const t = currEdge.getAttribute('target').toString();\r\n    edgesArr.push({\r\n      source_id: s,\r\n      target_id: t,\r\n    });\r\n  }\r\n  for (let i = 0, l = xmlNodes.length; i < l; i++) {\r\n    const currNode = xmlNodes[i];\r\n    const id = currNode.getAttribute('id').toString();\r\n    const nodeAttvalues = currNode.getElementsByTagName(\"attvalues\");\r\n    const nodeAttvalue = [];\r\n    if (nodeAttvalues.length != 0) {\r\n      nodeAttvalue = nodeAttvalues[0].getElementsByTagName(\"attvalue\");\r\n    }\r\n    let node = { id: id, degree: 0, pagerank: 0, node_id: id,  betweenness:0, closeness:0 };\r\n    for (let j = 0; j < nodeAttvalue.length; j++) {\r\n      const value = nodeAttvalue[j].attributes[\"value\"].value;\r\n      const attributeIdElementAttribute = nodeAttvalue[j].attributes[\"for\"] || nodeAttvalue[j].attributes[\"id\"];\r\n      const attributeId = attributeIdElementAttribute.value;\r\n      node[nodeAttriOrdered[attributeId]] = value;\r\n    }\r\n    for (let j = 0; j < currNode.attributes.length; j++) {\r\n      const currAttri = currNode.attributes[j];\r\n      node[currAttri.name] = currAttri.value;\r\n    }\r\n    node[\"id\"] = id;\r\n    node[\"node_id\"] = id;\r\n    nodesArr.push(node);\r\n  }\r\n  return [nodesArr, edgesArr];\r\n}\r\n\r\nasync function readGEXF(fileObject) {\r\n  const file = fileObject;\r\n  const reader = new FileReader();\r\n  reader.readAsText(file);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = () => {\r\n      const content = reader.result;\r\n      resolve(parseGEXF(content));\r\n    }\r\n  });\r\n}\r\n\r\nasync function importGraphFromCSV(config) {\r\n  // Since the CSV lib we use uses int index when there's not header/column names specified\r\n  // but the frontend selector always convert int to string values, we need to\r\n  // manually convert the user-selected fromId and toId values back to int.\r\n  // Note that this should only be done when there's no header provided on the CSV (hasColumns == false).\r\n  const fromId = config.nodes.hasColumns ? config.edges.mapping.fromId : parseInt(config.edges.mapping.fromId);\r\n  const toId = config.nodes.hasColumns ? config.edges.mapping.toId : parseInt(config.edges.mapping.toId);\r\n\r\n  // Create temporary data structures.\r\n  let nodesArr = [];\r\n  // let pathsDict = {};\r\n\r\n  const graph = createGraph();\r\n  const degreeDict = {};\r\n  if (config.hasNodeFile) {\r\n    nodesArr = await readCSV(appState.import.selectedNodeFileFromInput, config.nodes.hasColumns, config.delimiter);\r\n    nodesArr.forEach(node => graph.addNode(node[config.nodes.mapping.id].toString(),\r\n      { id: node[config.nodes.mapping.id].toString(), LatY: parseFloat(node[config.nodes.mapping.LatY]),LonX: parseFloat(node[config.nodes.mapping.LonX]),degree: 0, ...node }));\r\n    nodesArr =\r\n      nodesArr.map(\r\n        n => ({ ...n, id: n[config.nodes.mapping.id].toString(), degree: 0,betweenness:0, closeness:0 , pagerank: 0, LonX: parseFloat(n[config.nodes.mapping.LonX]), LatY: parseFloat(n[config.nodes.mapping.LatY]) }));\r\n    nodesArr.forEach(n => degreeDict[n.id] = 0);\r\n  }\r\n  const edges = await readCSV(appState.import.selectedEdgeFileFromInput, config.edges.hasColumns, config.delimiter);\r\n  if (config.edges.createMissing) {\r\n    edges.forEach((it) => {\r\n      const from = it[fromId].toString();\r\n      const to = it[toId].toString();\r\n      if (!graph.hasNode(from)) {\r\n        graph.addNode(from, { id: from, degree: 0 });\r\n        nodesArr.push({ id: from, degree: 0, pagerank: 0 , betweenness:0, closeness:0 });\r\n        degreeDict[from] = 0;\r\n      }\r\n      if (!graph.hasNode(to)) {\r\n        graph.addNode(to, { id: to, degree: 0 });\r\n        nodesArr.push({ id: to, degree: 0, pagerank: 0 ,betweenness:0, closeness:0 });\r\n        degreeDict[to] = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  const edgesSet = new Set();\r\n\r\n  const edgesArr = [];\r\n\r\n  const addEdge = (from, to, fromlocLatY, fromlocLonX, tolocLatY, tolocLonX, withinState, withinFamily) => {\r\n    const edgeKey = `${from}👉${to}`;\r\n    const edgeKey2 = `${to}👉${from}`;\r\n    if (edgesSet.has(edgeKey) || edgesSet.has(edgeKey2)) {\r\n      return;\r\n    }\r\n    edgesSet.add(edgeKey);\r\n    edgesSet.add(edgeKey2);\r\n    var data = {\r\n      fromlocLatY: fromlocLatY,\r\n      fromlocLonX: fromlocLonX,\r\n      tolocLatY: tolocLatY,\r\n      tolocLonX: tolocLonX,\r\n      withinState: withinState,\r\n      withinFamily: withinFamily,\r\n\r\n    }\r\n    graph.addLink(from, to, data);\r\n\r\n    degreeDict[from] += 1;\r\n    degreeDict[to] += 1;\r\n    edgesArr.push({\r\n      source_id: from,\r\n      target_id: to,\r\n      fromlocLatY: fromlocLatY,\r\n      fromlocLonX: fromlocLonX,\r\n      tolocLatY: tolocLatY,\r\n      tolocLonX: tolocLonX,\r\n      withinState: withinState,\r\n      withinFamily: withinFamily\r\n    });\r\n  };\r\n\r\n  if (config.hasNodeFile && nodesArr[0].LatY !== undefined && nodesArr[0].LonX !== undefined) {  //node has spatial location info\r\n    edges.forEach(it => {\r\n      const from = it[fromId].toString();\r\n      const to = it[toId].toString();\r\n      var fromlocLatY = parseFloat(graph.getNode(it[fromId].toString()).data.LatY)\r\n      var fromlocLonX = parseFloat(graph.getNode(it[fromId].toString()).data.LonX)\r\n      var tolocLatY = parseFloat(graph.getNode(it[toId].toString()).data.LatY)\r\n      var tolocLonX = parseFloat(graph.getNode(it[toId].toString()).data.LonX) // observable array???\r\n      var withinState = (graph.getNode(to).data.GEOID === graph.getNode(from).data.GEOID)\r\n      var withinFamily = (graph.getNode(to).data.Family === graph.getNode(from).data.Family)\r\n      // fromloc.push(graph.getNode(it[fromId].toString()).data.LatY) \r\n      // fromloc.push(graph.getNode(it[fromId].toString()).data.LonX) \r\n      // toloc.push(graph.getNode(it[toId].toString()).data.LatY)\r\n      // toloc.push(graph.getNode(it[toId].toString()).data.LonX)\r\n      // Argo currently works with undirected graph\r\n      addEdge(from, to, fromlocLatY, fromlocLonX, tolocLatY, tolocLonX, withinState, withinFamily);\r\n      // addEdge(to, from);\r\n    });\r\n  } else {  //doesn't have  spatial location info\r\n    edges.forEach(it => {\r\n      const from = it[fromId].toString();\r\n      const to = it[toId].toString();\r\n      // Argo currently works with undirected graph\r\n      addEdge(from, to, Nonloc, Nonloc, Nonloc, Nonloc);\r\n      // addEdge(to, from);\r\n    });\r\n  }\r\n\r\n  const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n    var p = 0.017453292519943295;    // Math.PI / 180\r\n    var c = Math.cos;\r\n    var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n      c(lat1 * p) * c(lat2 * p) *\r\n      (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n  }\r\n\r\n  //calculate the diatance to centern/ average lat/lon\r\n  const calDIstanceToCenter = () => {\r\n    const latlist = nodesArr.map(n => n['LatY'])\r\n    const lonlist = nodesArr.map(n => n['LonX'])\r\n    const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n    var avgLat\r\n    var avgLon\r\n    if (latlist.length > 0 && lonlist.length > 0) {\r\n      avgLat = average(latlist)\r\n      avgLon = average(lonlist)\r\n      nodesArr.forEach(function (n, i) {\r\n        n['distance to center'] = calDistanceFromLatLonInKm(avgLat, avgLon, latlist[i], lonlist[i])\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  const calMedianCenter = ()=>{\r\n    const latlist = nodesArr.map(n => n['LatY'])\r\n    const lonlist = nodesArr.map(n => n['LonX'])\r\n    const medianCenter = (values)=>{\r\n      if(values.length ===0) throw new Error(\"No inputs\");\r\n\r\n      const result1 = [...values].sort((a, b) => a - b)\r\n    \r\n      // values.sort(function(a,b){\r\n      //   return a-b;\r\n      // });\r\n    \r\n      var half = Math.floor(result1.length / 2);\r\n      \r\n      if (result1.length % 2)\r\n        return result1[half];\r\n      \r\n      return (result1[half - 1] + result1[half]) / 2.0;\r\n    }\r\n\r\n    if (latlist.length > 0 && lonlist.length > 0) {\r\n      const medianLat = medianCenter(latlist)\r\n      const medianLon = medianCenter(lonlist)\r\n      nodesArr.forEach(function (n, i) {\r\n        n['distance to center'] = calDistanceFromLatLonInKm(medianLat, medianLon, latlist[i], lonlist[i])\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n\r\n  if (nodesArr[0]['LonX'] && nodesArr[0]['LatY']) {\r\n    // calDIstanceToCenter();\r\n  calMedianCenter();\r\n\r\n  }\r\n  const shortestPathPairs = () => {\r\n    let pathFinder = path.aGreedy(graph);\r\n    const pathsArr = []\r\n    const pathsSet = new Set();\r\n\r\n\r\n\r\n    graph.forEachNode(function (fromnode) {\r\n\r\n      graph.forEachNode(function (tonode) {\r\n        if (fromnode.id !== tonode.id) {\r\n          const pathKey1 = `${fromnode.id}👉${tonode.id}`;\r\n          const pathKey2 = `${tonode.id}👉${fromnode.id}`;\r\n          // undirected graph:\r\n          // only add once for undirected graph \r\n          if (!(pathsSet.has(pathKey1)) && !(pathsSet.has(pathKey2)) ) {\r\n            pathsSet.add(pathKey1);\r\n            pathsSet.add(pathKey2);\r\n            pathsArr.push({\r\n             \"source\":fromnode.id,\r\n             \"target\":tonode.id,\r\n            \"path\": pathFinder.find(fromnode.id, tonode.id),\r\n            \"distance\": calDistanceFromLatLonInKm(fromnode.data.LatY, fromnode.data.LonX, tonode.data.LatY, tonode.data.LonX)\r\n          \r\n           })\r\n          }\r\n           \r\n          //directed graph: \r\n        }\r\n\r\n      })\r\n\r\n    })\r\n    // console.log(nodesArr.length)\r\n    // console.log(pathsArr.length)\r\n    return pathsArr\r\n\r\n  }\r\n  // const pathsArr = shortestPathPairs();\r\n  const rank = pageRank(graph);\r\n  const betweenness = centrality.betweenness(graph)\r\n  const closeness = centrality.closeness(graph);\r\n  nodesArr = nodesArr.map(n => ({ ...n, node_id: n.id, pagerank: rank[n.id],  closeness: closeness[n.id],betweenness:betweenness[n.id], degree: parseInt(degreeDict[n.id] ) }));\r\n  const nodekeyList = Object.keys(nodesArr[0])\r\n  const nodePropertyTypes = {}\r\n  nodekeyList.forEach(function (k) {\r\n    nodePropertyTypes[k] = typeof (nodesArr[0][k])\r\n  })\r\n  const uniqueValue = {}\r\n  nodekeyList.forEach(function (k, i) {\r\n\r\n    if (nodePropertyTypes[k] == 'string') {\r\n      uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n    } else {\r\n      const valuea = nodesArr.map(function (el) { return el[k]; })\r\n      const minv = Math.min(...valuea)\r\n      const maxv = Math.max(...valuea)\r\n      uniqueValue[k] = [minv, maxv]\r\n    }\r\n  })\r\n  return {\r\n    rawGraph: { nodes: nodesArr, edges: edgesArr },\r\n    metadata: {\r\n      snapshotName: 'Untitled Graph',\r\n      fullNodes: nodesArr.length,\r\n      fullEdges: edgesArr.length, //Math.floor(edgesArr.length / 2), // Counting undirected edges\r\n      nodeProperties: nodekeyList,\r\n      nodePropertyTypes: nodePropertyTypes,\r\n      uniqueValue: uniqueValue,\r\n      nodeComputed: ['pagerank', 'degree','distance to center',  'betweenness', 'closeness' ],\r\n      edgeProperties: ['source_id', 'target_id'],\r\n     \r\n    },\r\n  }\r\n}\r\n\r\nexport async function importGraphFromGexf() {\r\n  const gexfParsed = await readGEXF(appState.import.selectedGexfFileFromInput);\r\n  let nodesArr = gexfParsed[0];\r\n  const edges = gexfParsed[1];\r\n  const graph = createGraph();\r\n  const degreeDict = {};\r\n\r\n  nodesArr.forEach((it) => {\r\n    const currNode = it[\"id\"].toString();\r\n    if (!graph.hasNode(currNode)) {\r\n      graph.addNode(currNode, it);\r\n      degreeDict[currNode] = 0;\r\n    }\r\n  });\r\n\r\n  const edgesSet = new Set();\r\n\r\n  const edgesArr = [];\r\n\r\n  const addEdge = (from, to) => {\r\n    const edgeKey = `${from}👉${to}`;\r\n    if (edgesSet.has(edgeKey)) {\r\n      return;\r\n    }\r\n    edgesSet.add(edgeKey);\r\n    graph.addLink(from, to);\r\n    degreeDict[from] += 1;\r\n    degreeDict[to] += 1;\r\n    edgesArr.push({\r\n      source_id: from,\r\n      target_id: to,\r\n    });\r\n  };\r\n\r\n  edges.forEach(it => {\r\n    const from = it[\"source_id\"].toString();\r\n    const to = it[\"target_id\"].toString();\r\n\r\n    // Argo currently works with undirected graph\r\n    addEdge(from, to);\r\n    // addEdge(to, from);\r\n  });\r\n\r\n  const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n    var p = 0.017453292519943295;    // Math.PI / 180\r\n    var c = Math.cos;\r\n    var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n      c(lat1 * p) * c(lat2 * p) *\r\n      (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n  }\r\n\r\n  //calculate the diatance to center/ average lat/lon\r\n  const calDIstanceToCenter = () => {\r\n    const latlist = nodesArr.map(n => n['LatY'])\r\n    const lonlist = nodesArr.map(n => n['LonX'])\r\n    const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n    var avgLat\r\n    var avgLon\r\n    if (latlist.length > 0 && lonlist.length > 0) {\r\n      avgLat = average(latlist)\r\n      avgLon = average(lonlist)\r\n      nodesArr.forEach(function (n, i) {\r\n        n['distance to center'] = calDistanceFromLatLonInKm(avgLat, avgLon, latlist[i], lonlist[i])\r\n      })\r\n    }\r\n  }\r\n\r\n  const calMedianCenter = ()=>{\r\n    const latlist = nodesArr.map(n => n['LatY'])\r\n    const lonlist = nodesArr.map(n => n['LonX'])\r\n    const medianCenter = (values)=>{\r\n      if(values.length ===0) throw new Error(\"No inputs\");\r\n    \r\n      values.sort(function(a,b){\r\n        return a-b;\r\n      });\r\n    \r\n      var half = Math.floor(values.length / 2);\r\n      \r\n      if (values.length % 2)\r\n        return values[half];\r\n      \r\n      return (values[half - 1] + values[half]) / 2.0;\r\n    }\r\n\r\n    if (latlist.length > 0 && lonlist.length > 0) {\r\n      const medianLat = medianCenter(latlist)\r\n      const medianLon = medianCenter(lonlist)\r\n      nodesArr.forEach(function (n, i) {\r\n        n['distance to center'] = calDistanceFromLatLonInKm(medianLat, medianLon, latlist[i], lonlist[i])\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n\r\n  if (nodesArr[0]['LonX'] && nodesArr[0]['LatY']) {\r\n    // calDIstanceToCenter();\r\n    calMedianCenter();\r\n  }\r\n\r\n  const shortestPathPairs = () => {\r\n    let pathFinder = path.aGreedy(graph);\r\n    const pathsArr = []\r\n    const pathsSet = new Set();\r\n\r\n\r\n\r\n    graph.forEachNode(function (fromnode) {\r\n\r\n      graph.forEachNode(function (tonode) {\r\n        if (fromnode.id !== tonode.id) {\r\n          const pathKey1 = `${fromnode.id}👉${tonode.id}`;\r\n          const pathKey2 = `${tonode.id}👉${fromnode.id}`;\r\n          // undirected graph:\r\n          // only add once for undirected graph \r\n          if (!(pathsSet.has(pathKey1)) && !(pathsSet.has(pathKey2)) ) {\r\n            pathsSet.add(pathKey1)\r\n            pathsSet.add(pathKey2)\r\n            pathsArr.push({\r\n             \"source\":fromnode.id,\r\n             \"target\":tonode.id,\r\n            \"path\": pathFinder.find(fromnode.id, tonode.id),\r\n            \"distance\": calDistanceFromLatLonInKm(fromnode.data.LatY, fromnode.data.LonX, tonode.data.LatY, tonode.data.LonX)\r\n          \r\n           })\r\n          }\r\n           \r\n          //directed graph: \r\n        }\r\n\r\n      })\r\n\r\n    })\r\n    return pathsArr\r\n\r\n  }\r\n  // const pathsArr = shortestPathPairs();\r\n\r\n  const rank = pageRank(graph);\r\n  const betweenness = centrality.betweenness(graph);\r\n  const closeness = centrality.closeness(graph);\r\n  nodesArr = nodesArr.map(n => ({ ...n, node_id: n.id, closeness:closeness[n.id] , betweenness: betweenness[n.id],pagerank: rank[n.id], degree: parseInt(degreeDict[n.id] / 2) }));\r\n  const nodekeyList = Object.keys(nodesArr[0])\r\n  const nodePropertyTypes = {}\r\n  nodekeyList.forEach(function (k) {\r\n    nodePropertyTypes[k] = typeof (nodesArr[0][k])\r\n  })\r\n  const uniqueValue = {}\r\n  nodekeyList.forEach(function (k, i) {\r\n\r\n    if (nodePropertyTypes[k] == 'string') {\r\n      uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n    } else {\r\n      const valuea = nodesArr.map(function (el) { return el[k]; })\r\n      const minv = Math.min(...valuea)\r\n      const maxv = Math.max(...valuea)\r\n      uniqueValue[k] = [minv, maxv]\r\n    }\r\n  })\r\n  return {\r\n    rawGraph: { nodes: nodesArr, edges: edgesArr },\r\n    metadata: {\r\n      snapshotName: 'Untitled Graph',\r\n      fullNodes: nodesArr.length,\r\n      fullEdges: edgesArr.length, //Math.floor(edgesArr.length / 2), // Counting undirected edges\r\n      nodeProperties: nodekeyList,\r\n      nodePropertyTypes: nodePropertyTypes,\r\n      uniqueValue: uniqueValue,\r\n      nodeComputed: ['pagerank', 'degree',  'distance to center',  'betweenness', 'closeness'],\r\n      edgeProperties: ['source_id', 'target_id'],\r\n     \r\n    },\r\n  }\r\n}\r\n\r\nexport function runSearch(searchStr) {\r\n  ipcRenderer.send(SEARCH_REQUEST, searchStr, appState.graph.searchOrder);\r\n}\r\n\r\nexport function fetchWorkspaceProjects() {\r\n  ipcRenderer.send(FETCH_WORKSPACE_PROJECTS);\r\n}\r\n\r\nexport function requestCreateNewProject(projectMetadata) {\r\n  ipcRenderer.send(CREATE_NEW_PROJECT, projectMetadata);\r\n}\r\n\r\nexport function requestOpenWorkspaceFolder() {\r\n  ipcRenderer.send(SHOW_WORKSPACE_FOLDER);\r\n}\r\n\r\nexport function requestLoadUserConfig() {\r\n  ipcRenderer.send(LOAD_USER_CONFIG);\r\n}\r\n\r\nexport function requestSaveUserConfig(userConfig) {\r\n  ipcRenderer.send(SAVE_USER_CONFIG, userConfig);\r\n}\r\n\r\nexport function requestChangeWorkspace() {\r\n  ipcRenderer.send(CHANGE_WORKSPACE_FOLDER);\r\n}","var $ = require(\"jquery\");\r\nfunction Edge(source, target) {\r\n  this.source = source;\r\n  this.target = target;\r\n  this.renderData = {};\r\n}\r\n\r\nfunction Node(id, size = 0.5) {\r\n  this.id = id;\r\n  this.index = id;\r\n  this.in = [];\r\n  this.out = [];\r\n  this.size = size;\r\n  this.renderData = {};\r\n  this.domainData = {};\r\n  this.x = 1;\r\n  this.y = 1;\r\n  this.vx = 1;\r\n  this.vy = 1;\r\n\r\n  /**\r\n   * Tells if a node is connected to a node of a certain id\r\n   */\r\n  this.connectedTo = function(id) {\r\n    outNodeIds = this.out.map(function(outNode) {\r\n      return outNode.id;\r\n    });\r\n    return $.inArray(id, outNodeIds) >= 0;\r\n  };\r\n}\r\n\r\nNode.prototype.connectNode = function(node) {\r\n  if (!this.connectedTo(node.id)) {\r\n    this.out.push(node);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexports.Edge = Edge;\r\nexports.Node = Node;\r\n","var THREE = require(\"three\");\r\n\r\nTHREE.MeshLine = function() {\r\n  this.positions = [];\r\n\r\n  this.previous = [];\r\n  this.next = [];\r\n  this.side = [];\r\n  this.width = [];\r\n  this.indices_array = [];\r\n  this.uvs = [];\r\n  this.counters = [];\r\n  this.geometry = new THREE.BufferGeometry();\r\n\r\n  this.widthCallback = null;\r\n};\r\n\r\nTHREE.MeshLine.prototype.setGeometry = function(g, c) {\r\n  this.widthCallback = c;\r\n\r\n  this.positions = [];\r\n  this.counters = [];\r\n\r\n  if (g instanceof THREE.Geometry) {\r\n    for (var j = 0; j < g.vertices.length; j++) {\r\n      var v = g.vertices[j];\r\n      var c = j / g.vertices.length;\r\n      this.positions.push(v.x, v.y, v.z);\r\n      this.positions.push(v.x, v.y, v.z);\r\n      this.counters.push(c);\r\n      this.counters.push(c);\r\n    }\r\n  }\r\n\r\n  if (g instanceof THREE.BufferGeometry) {\r\n    // read attribute positions ?\r\n  }\r\n\r\n  if (g instanceof Float32Array || g instanceof Array) {\r\n    for (var j = 0; j < g.length; j += 3) {\r\n      var c = j / g.length;\r\n      this.positions.push(g[j], g[j + 1], g[j + 2]);\r\n      this.positions.push(g[j], g[j + 1], g[j + 2]);\r\n      this.counters.push(c);\r\n      this.counters.push(c);\r\n    }\r\n  }\r\n\r\n  this.process();\r\n};\r\n\r\nTHREE.MeshLine.prototype.compareV3 = function(a, b) {\r\n  var aa = a * 6;\r\n  var ab = b * 6;\r\n  return (\r\n    this.positions[aa] === this.positions[ab] &&\r\n    this.positions[aa + 1] === this.positions[ab + 1] &&\r\n    this.positions[aa + 2] === this.positions[ab + 2]\r\n  );\r\n};\r\n\r\nTHREE.MeshLine.prototype.copyV3 = function(a) {\r\n  var aa = a * 6;\r\n  return [this.positions[aa], this.positions[aa + 1], this.positions[aa + 2]];\r\n};\r\n\r\nTHREE.MeshLine.prototype.process = function() {\r\n  var l = this.positions.length / 6;\r\n\r\n  this.previous = [];\r\n  this.next = [];\r\n  this.side = [];\r\n  this.width = [];\r\n  this.indices_array = [];\r\n  this.uvs = [];\r\n\r\n  for (var j = 0; j < l; j++) {\r\n    this.side.push(1);\r\n    this.side.push(-1);\r\n  }\r\n\r\n  var w;\r\n  for (var j = 0; j < l; j++) {\r\n    if (this.widthCallback) w = this.widthCallback(j / (l - 1));\r\n    else w = 1;\r\n    this.width.push(w);\r\n    this.width.push(w);\r\n  }\r\n\r\n  for (var j = 0; j < l; j++) {\r\n    this.uvs.push(j / (l - 1), 0);\r\n    this.uvs.push(j / (l - 1), 1);\r\n  }\r\n\r\n  var v;\r\n\r\n  if (this.compareV3(0, l - 1)) {\r\n    v = this.copyV3(l - 2);\r\n  } else {\r\n    v = this.copyV3(0);\r\n  }\r\n  this.previous.push(v[0], v[1], v[2]);\r\n  this.previous.push(v[0], v[1], v[2]);\r\n  for (var j = 0; j < l - 1; j++) {\r\n    v = this.copyV3(j);\r\n    this.previous.push(v[0], v[1], v[2]);\r\n    this.previous.push(v[0], v[1], v[2]);\r\n  }\r\n\r\n  for (var j = 1; j < l; j++) {\r\n    v = this.copyV3(j);\r\n    this.next.push(v[0], v[1], v[2]);\r\n    this.next.push(v[0], v[1], v[2]);\r\n  }\r\n\r\n  if (this.compareV3(l - 1, 0)) {\r\n    v = this.copyV3(1);\r\n  } else {\r\n    v = this.copyV3(l - 1);\r\n  }\r\n  this.next.push(v[0], v[1], v[2]);\r\n  this.next.push(v[0], v[1], v[2]);\r\n\r\n  for (var j = 0; j < l - 1; j++) {\r\n    var n = j * 2;\r\n    this.indices_array.push(n, n + 1, n + 2);\r\n    this.indices_array.push(n + 2, n + 1, n + 3);\r\n  }\r\n\r\n  if (!this.attributes) {\r\n    this.attributes = {\r\n      position: new THREE.BufferAttribute(new Float32Array(this.positions), 3),\r\n      previous: new THREE.BufferAttribute(new Float32Array(this.previous), 3),\r\n      next: new THREE.BufferAttribute(new Float32Array(this.next), 3),\r\n      side: new THREE.BufferAttribute(new Float32Array(this.side), 1),\r\n      width: new THREE.BufferAttribute(new Float32Array(this.width), 1),\r\n      uv: new THREE.BufferAttribute(new Float32Array(this.uvs), 2),\r\n      index: new THREE.BufferAttribute(new Uint16Array(this.indices_array), 1),\r\n      counters: new THREE.BufferAttribute(new Float32Array(this.counters), 1)\r\n    };\r\n  } else {\r\n    this.attributes.position.copyArray(new Float32Array(this.positions));\r\n    this.attributes.position.needsUpdate = true;\r\n    this.attributes.previous.copyArray(new Float32Array(this.previous));\r\n    this.attributes.previous.needsUpdate = true;\r\n    this.attributes.next.copyArray(new Float32Array(this.next));\r\n    this.attributes.next.needsUpdate = true;\r\n    this.attributes.side.copyArray(new Float32Array(this.side));\r\n    this.attributes.side.needsUpdate = true;\r\n    this.attributes.width.copyArray(new Float32Array(this.width));\r\n    this.attributes.width.needsUpdate = true;\r\n    this.attributes.uv.copyArray(new Float32Array(this.uvs));\r\n    this.attributes.uv.needsUpdate = true;\r\n    this.attributes.index.copyArray(new Uint16Array(this.indices_array));\r\n    this.attributes.index.needsUpdate = true;\r\n  }\r\n\r\n  this.geometry.addAttribute(\"position\", this.attributes.position);\r\n  this.geometry.addAttribute(\"previous\", this.attributes.previous);\r\n  this.geometry.addAttribute(\"next\", this.attributes.next);\r\n  this.geometry.addAttribute(\"side\", this.attributes.side);\r\n  this.geometry.addAttribute(\"width\", this.attributes.width);\r\n  this.geometry.addAttribute(\"uv\", this.attributes.uv);\r\n  this.geometry.addAttribute(\"counters\", this.attributes.counters);\r\n\r\n  this.geometry.setIndex(this.attributes.index);\r\n};\r\n\r\nfunction memcpy(src, srcOffset, dst, dstOffset, length) {\r\n  var i;\r\n\r\n  src = src.subarray || src.slice ? src : src.buffer;\r\n  dst = dst.subarray || dst.slice ? dst : dst.buffer;\r\n\r\n  src = srcOffset\r\n    ? src.subarray\r\n      ? src.subarray(srcOffset, length && srcOffset + length)\r\n      : src.slice(srcOffset, length && srcOffset + length)\r\n    : src;\r\n\r\n  if (dst.set) {\r\n    dst.set(src, dstOffset);\r\n  } else {\r\n    for (i = 0; i < src.length; i++) {\r\n      dst[i + dstOffset] = src[i];\r\n    }\r\n  }\r\n\r\n  return dst;\r\n}\r\n\r\n/**\r\n * Fast method to advance the line by one position.  The oldest position is removed.\r\n * @param position\r\n */\r\nTHREE.MeshLine.prototype.advance = function(position) {\r\n  var positions = this.attributes.position.array;\r\n  var previous = this.attributes.previous.array;\r\n  var next = this.attributes.next.array;\r\n  var l = positions.length;\r\n\r\n  // PREVIOUS\r\n  memcpy(positions, 0, previous, 0, l);\r\n\r\n  // POSITIONS\r\n  memcpy(positions, 6, positions, 0, l - 6);\r\n\r\n  positions[l - 6] = position.x;\r\n  positions[l - 5] = position.y;\r\n  positions[l - 4] = position.z;\r\n  positions[l - 3] = position.x;\r\n  positions[l - 2] = position.y;\r\n  positions[l - 1] = position.z;\r\n\r\n  // NEXT\r\n  memcpy(positions, 6, next, 0, l - 6);\r\n\r\n  next[l - 6] = position.x;\r\n  next[l - 5] = position.y;\r\n  next[l - 4] = position.z;\r\n  next[l - 3] = position.x;\r\n  next[l - 2] = position.y;\r\n  next[l - 1] = position.z;\r\n\r\n  this.attributes.position.needsUpdate = true;\r\n  this.attributes.previous.needsUpdate = true;\r\n  this.attributes.next.needsUpdate = true;\r\n};\r\n\r\nTHREE.MeshLineMaterial = function(parameters) {\r\n  var vertexShaderSource = [\r\n    \"precision highp float;\",\r\n    \"\",\r\n    \"attribute vec3 position;\",\r\n    \"attribute vec3 previous;\",\r\n    \"attribute vec3 next;\",\r\n    \"attribute float side;\",\r\n    \"attribute float width;\",\r\n    \"attribute vec2 uv;\",\r\n    \"attribute float counters;\",\r\n    \"\",\r\n    \"uniform mat4 projectionMatrix;\",\r\n    \"uniform mat4 modelViewMatrix;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"uniform float lineWidth;\",\r\n    \"uniform vec3 color;\",\r\n    \"uniform float opacity;\",\r\n    \"uniform float near;\",\r\n    \"uniform float far;\",\r\n    \"uniform float sizeAttenuation;\",\r\n    \"\",\r\n    \"varying vec2 vUV;\",\r\n    \"varying vec4 vColor;\",\r\n    \"varying vec3 vPosition;\",\r\n    \"varying float vCounters;\",\r\n    \"\",\r\n    \"vec2 fix( vec4 i, float aspect ) {\",\r\n    \"\",\r\n    \"    vec2 res = i.xy / i.w;\",\r\n    \"    res.x *= aspect;\",\r\n    \"\t vCounters = counters;\",\r\n    \"    return res;\",\r\n    \"\",\r\n    \"}\",\r\n    \"\",\r\n    \"void main() {\",\r\n    \"\",\r\n    \"    float aspect = resolution.x / resolution.y;\",\r\n    \"\t float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\",\r\n    \"\",\r\n    \"    vColor = vec4( color, opacity );\",\r\n    \"    vUV = uv;\",\r\n    \"\",\r\n    \"    mat4 m = projectionMatrix * modelViewMatrix;\",\r\n    \"    vec4 finalPosition = m * vec4( position, 1.0 );\",\r\n    \"    vec4 prevPos = m * vec4( previous, 1.0 );\",\r\n    \"    vec4 nextPos = m * vec4( next, 1.0 );\",\r\n    \"\",\r\n    \"    vec2 currentP = fix( finalPosition, aspect );\",\r\n    \"    vec2 prevP = fix( prevPos, aspect );\",\r\n    \"    vec2 nextP = fix( nextPos, aspect );\",\r\n    \"\",\r\n    \"\t float pixelWidth = finalPosition.w * pixelWidthRatio;\",\r\n    \"    float w = 1.8 * pixelWidth * lineWidth * width;\",\r\n    \"\",\r\n    \"    if( sizeAttenuation == 1. ) {\",\r\n    \"        w = 1.8 * lineWidth * width;\",\r\n    \"    }\",\r\n    \"\",\r\n    \"    vec2 dir;\",\r\n    \"    if( nextP == currentP ) dir = normalize( currentP - prevP );\",\r\n    \"    else if( prevP == currentP ) dir = normalize( nextP - currentP );\",\r\n    \"    else {\",\r\n    \"        vec2 dir1 = normalize( currentP - prevP );\",\r\n    \"        vec2 dir2 = normalize( nextP - currentP );\",\r\n    \"        dir = normalize( dir1 + dir2 );\",\r\n    \"\",\r\n    \"        vec2 perp = vec2( -dir1.y, dir1.x );\",\r\n    \"        vec2 miter = vec2( -dir.y, dir.x );\",\r\n    \"        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );\",\r\n    \"\",\r\n    \"    }\",\r\n    \"\",\r\n    \"    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;\",\r\n    \"    vec2 normal = vec2( -dir.y, dir.x );\",\r\n    \"    normal.x /= aspect;\",\r\n    \"    normal *= .5 * w;\",\r\n    \"\",\r\n    \"    vec4 offset = vec4( normal * side, 0.0, 1.0 );\",\r\n    \"    finalPosition.xy += offset.xy;\",\r\n    \"\",\r\n    \"\t vPosition = ( modelViewMatrix * vec4( position, 1. ) ).xyz;\",\r\n    \"    gl_Position = finalPosition;\",\r\n    \"\",\r\n    \"}\"\r\n  ];\r\n\r\n  var fragmentShaderSource = [\r\n    \"#extension GL_OES_standard_derivatives : enable\",\r\n    \"precision mediump float;\",\r\n    \"\",\r\n    \"uniform sampler2D map;\",\r\n    \"uniform float useMap;\",\r\n    \"uniform float useDash;\",\r\n    \"uniform vec2 dashArray;\",\r\n    \"uniform float visibility;\",\r\n    \"uniform float alphaTest;\",\r\n    \"\",\r\n    \"varying vec2 vUV;\",\r\n    \"varying vec4 vColor;\",\r\n    \"varying vec3 vPosition;\",\r\n    \"varying float vCounters;\",\r\n    \"\",\r\n    \"void main() {\",\r\n    \"\",\r\n    \"    vec4 c = vColor;\",\r\n    \"\t if( c.a < alphaTest ) discard;\",\r\n    \"    if( useMap == 1. ) c *= texture2D( map, vUV );\",\r\n    \"\t if( useDash == 1. ){\",\r\n    \"\t \t \",\r\n    \"\t }\",\r\n    \"    gl_FragColor = c;\",\r\n    \"\t gl_FragColor.a *= step(vCounters,visibility);\",\r\n    \"}\"\r\n  ];\r\n\r\n  function check(v, d) {\r\n    if (v === undefined) return d;\r\n    return v;\r\n  }\r\n\r\n  THREE.Material.call(this);\r\n\r\n  parameters = parameters || {};\r\n\r\n  this.lineWidth = check(parameters.lineWidth, 1);\r\n  this.map = check(parameters.map, null);\r\n  this.useMap = check(parameters.useMap, 0);\r\n  this.color = check(parameters.color, new THREE.Color(0xffffff));\r\n  this.opacity = check(parameters.opacity, 1);\r\n  this.resolution = check(parameters.resolution, new THREE.Vector2(1, 1));\r\n  this.sizeAttenuation = check(parameters.sizeAttenuation, 1);\r\n  this.near = check(parameters.near, 1);\r\n  this.far = check(parameters.far, 1);\r\n  this.dashArray = check(parameters.dashArray, []);\r\n  this.useDash = this.dashArray !== [] ? 1 : 0;\r\n  this.visibility = check(parameters.visibility, 1);\r\n  this.alphaTest = check(parameters.alphaTest, 0);\r\n\r\n  var material = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      lineWidth: { type: \"f\", value: this.lineWidth },\r\n      map: { type: \"t\", value: this.map },\r\n      useMap: { type: \"f\", value: this.useMap },\r\n      color: { type: \"c\", value: this.color },\r\n      opacity: { type: \"f\", value: this.opacity },\r\n      resolution: { type: \"v2\", value: this.resolution },\r\n      sizeAttenuation: { type: \"f\", value: this.sizeAttenuation },\r\n      near: { type: \"f\", value: this.near },\r\n      far: { type: \"f\", value: this.far },\r\n      dashArray: {\r\n        type: \"v2\",\r\n        value: new THREE.Vector2(this.dashArray[0], this.dashArray[1])\r\n      },\r\n      useDash: { type: \"f\", value: this.useDash },\r\n      visibility: { type: \"f\", value: this.visibility },\r\n      alphaTest: { type: \"f\", value: this.alphaTest }\r\n    },\r\n    vertexShader: vertexShaderSource.join(\"\\r\\n\"),\r\n    fragmentShader: fragmentShaderSource.join(\"\\r\\n\")\r\n  });\r\n\r\n  delete parameters.lineWidth;\r\n  delete parameters.map;\r\n  delete parameters.useMap;\r\n  delete parameters.color;\r\n  delete parameters.opacity;\r\n  delete parameters.resolution;\r\n  delete parameters.sizeAttenuation;\r\n  delete parameters.near;\r\n  delete parameters.far;\r\n  delete parameters.dashArray;\r\n  delete parameters.visibility;\r\n  delete parameters.alphaTest;\r\n\r\n  material.type = \"MeshLineMaterial\";\r\n\r\n  material.setValues(parameters);\r\n\r\n  return material;\r\n};\r\n\r\nTHREE.MeshLineMaterial.prototype = Object.create(THREE.Material.prototype);\r\nTHREE.MeshLineMaterial.prototype.constructor = THREE.MeshLineMaterial;\r\n\r\nTHREE.MeshLineMaterial.prototype.copy = function(source) {\r\n  THREE.Material.prototype.copy.call(this, source);\r\n\r\n  this.lineWidth = source.lineWidth;\r\n  this.map = source.map;\r\n  this.useMap = source.useMap;\r\n  this.color.copy(source.color);\r\n  this.opacity = source.opacity;\r\n  this.resolution.copy(source.resolution);\r\n  this.sizeAttenuation = source.sizeAttenuation;\r\n  this.near = source.near;\r\n  this.far = source.far;\r\n\r\n  return this;\r\n};\r\n\r\nexports.MeshLine = THREE.MeshLine;\r\nexports.MeshLineMaterial = THREE.MeshLineMaterial;\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\nconst { linkVertical } = require(\"d3\");\r\nvar $ = require(\"jquery\");\r\nconst { default: appState } = require(\"../../stores\");\r\n\r\nmodule.exports = function (self) {\r\n  self.selectNode = function (node) {\r\n    self.dragging = node;\r\n    self.selection = [node];\r\n    node.renderData.isSelected = true;\r\n    self.updateSelection(self.mouseX, self.mouseY);\r\n  };\r\n\r\n  /**\r\n   * Deselect nodes in selection list\r\n   */\r\n  self.clearSelection = function () {\r\n    for (var i = 0; i < self.selection.length; i++) {\r\n      self.selection[i].renderData.isSelected = false;\r\n      if (!def.NODE_NO_HIGHLIGHT) {\r\n        self.selection[i].renderData.draw_object.children[0].visible = false;\r\n      } else {\r\n        self.selection[i].renderData.draw_object.material.color.set(\r\n          new THREE.Color(self.selection[i].renderData.color)\r\n        );\r\n      }\r\n      self.selection[i].renderData.textHolder.children[0].element.hideme = true;\r\n    }\r\n    self.selection = [];\r\n  };\r\n\r\n  //return all the edges within the selected nodes \r\n  self.getEdgeWithinSelection = function (selection) {\r\n    const withinEdges = []\r\n    for (var i = 0; i < selection.length; i++) {\r\n      if (selection[i] && selection[i].linkObjs) {\r\n        selection[i].linkObjs.forEach(function (link) {\r\n          if ((selection.indexOf(link.source) !== -1 && selection.indexOf(link.target) !== -1) && link.source !== link.target && withinEdges.indexOf(link) == -1) {\r\n            withinEdges.push(link)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return withinEdges;\r\n  }\r\n\r\n\r\n  //return all the edges within and out the selected nodes \r\n  self.getEdgeWithinOutSelection = function (selection) {\r\n    const withinoutEdges = []\r\n    for (var i = 0; i < selection.length; i++) {\r\n      if (selection[i] && selection[i].linkObjs) {\r\n        selection[i].linkObjs.forEach(function (link) {\r\n          if ((selection.indexOf(link.source) !== -1 || selection.indexOf(link.target) !== -1) && link.source !== link.target && withinoutEdges.indexOf(link) == -1) {\r\n            withinoutEdges.push(link)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return withinoutEdges;\r\n  }\r\n\r\n  //return all the edges within distance \r\n  self.getEdgeWithinDist = function (mindist, maxdist) {\r\n    const withinoutEdges = []\r\n    self.graph.forEachNode(n => {\r\n      if (n.linkObjs && n.linkObjs.length > 0) {\r\n        n.linkObjs.forEach(function (link) {\r\n          if (link.edgeDist > mindist && link.edgeDist < maxdist) {\r\n            withinoutEdges.push(link)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    return withinoutEdges;\r\n  }\r\n\r\n\r\n  self.getEdgeWithinSelectionForDensity = function (selection) {\r\n    const withinEdges = []\r\n    const edgekeys = []\r\n    for (var i = 0; i < selection.length; i++) {\r\n      if (selection[i] && selection[i].linkObjs) {\r\n        selection[i].linkObjs.forEach(function (link) {\r\n          const key1 = `${link.source.id}👉 ${link.target.id}`\r\n          const key2 = `${link.target.id}👉 ${link.source.id}`\r\n          if ((selection.indexOf(link.source) !== -1 && selection.indexOf(link.target) !== -1) && link.source !== link.target && edgekeys.indexOf(key1) == -1) {\r\n            withinEdges.push(link)\r\n            edgekeys.push(key1)\r\n            edgekeys.push(key2)\r\n            // edgecount = edgecount+1\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return withinEdges;\r\n  }\r\n\r\n\r\n  //highlight nodes and edges within selection\r\n  self.updateDegreeHistOpacity = function () {\r\n    if (self.degreehighlight.length > 0) {\r\n      if (self.degreehighlight.length == 1 && appState.graph.colorByDistance) {\r\n        const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n          var p = 0.017453292519943295;    // Math.PI / 180\r\n          var c = Math.cos;\r\n          var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n            c(lat1 * p) * c(lat2 * p) *\r\n            (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n          return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n        }\r\n        var sumOfAllDistance = 0;\r\n        var n = 0;\r\n        var max = 0;\r\n        self.graph.forEachNode(n => {\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.degreehighlight[0].data.ref.LatY, self.degreehighlight[0].data.ref.LonX)\r\n          if (dist > max) {\r\n            max = dist;\r\n          }\r\n        })\r\n        self.graph.forEachNode(n => {\r\n          // self.colorNodeColor(n, \"#0000FF\");\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.degreehighlight[0].data.ref.LatY, self.degreehighlight[0].data.ref.LonX);\r\n          console.log(n.data.ref.LatY, n.data.ref.LonX, self.degreehighlight[0]['LatY'], self.degreehighlight[0]['LatX'])\r\n          self.colorNode(n, 0x0000FF);\r\n          if (dist == 0) {\r\n            self.colorNodeOpacity(n, 1);\r\n          } else if (dist < max / 4) {\r\n            self.colorNodeOpacity(n, 0.2);\r\n          } else if (dist < (2 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.4);\r\n          } else if (dist < (3 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.6);\r\n          }\r\n          else {\r\n            self.colorNodeOpacity(n, 0.8);\r\n          }\r\n\r\n\r\n        });\r\n      }\r\n      else {\r\n        self.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n          self.colorNodeOpacity(n, 0.2);\r\n\r\n        });\r\n        // self.colorNodeEdge(null);    // this is to highlight all \r\n\r\n        //fisrt dehighlight all the edges\r\n        self.lineIndices.forEach(function (link) {\r\n          link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n          link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n          link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n        })\r\n\r\n        //hilight within edges\r\n        let red = new THREE.Color(appState.graph.edges.color).r;\r\n        let blue = new THREE.Color(appState.graph.edges.color).g;\r\n        let green = new THREE.Color(appState.graph.edges.color).b;\r\n        const withinEdges = self.getEdgeWithinSelection(self.degreehighlight)\r\n\r\n        for (var i = 0; i < withinEdges.length; i++) {\r\n          withinEdges[i].linecolor.r = red;\r\n          withinEdges[i].linecolor.g = blue;\r\n          withinEdges[i].linecolor.b = green;\r\n        }\r\n        self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n        //highlight nodes \r\n        for (var i = 0; i < self.degreehighlight.length; i++) {\r\n          self.colorNodeOpacity(self.degreehighlight[i], 1);\r\n        }\r\n\r\n      }\r\n    } else {        //when no nodes satisfying the condition, all 0.2 opacity \r\n      self.graph.forEachNode(n => {\r\n        self.colorNodeOpacity(n, 0.2);\r\n\r\n      });\r\n      self.colorNodeEdge(null);\r\n    }\r\n  }\r\n\r\n\r\n  //highlight nodes and edges within selection\r\n  self.updateSelectionOpacity = function () {\r\n    // if()\r\n    if (self.selection.length > 0) {\r\n      if (self.selection.length == 1 && appState.graph.colorByDistance) {\r\n        const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n          var p = 0.017453292519943295;    // Math.PI / 180\r\n          var c = Math.cos;\r\n          var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n            c(lat1 * p) * c(lat2 * p) *\r\n            (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n          return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n        }\r\n        var sumOfAllDistance = 0;\r\n        var n = 0;\r\n        var max = 0;\r\n        self.graph.forEachNode(n => {\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.selection[0].data.ref.LatY, self.selection[0].data.ref.LonX)\r\n          if (dist > max) {\r\n            max = dist;\r\n          }\r\n        })\r\n        self.graph.forEachNode(n => {\r\n          // self.colorNodeColor(n, \"#0000FF\");\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.selection[0].data.ref.LatY, self.selection[0].data.ref.LonX);\r\n          console.log(n.data.ref.LatY, n.data.ref.LonX, self.selection[0]['LatY'], self.selection[0]['LatX'])\r\n          self.colorNode(n, 0x0000FF);\r\n          if (dist == 0) {\r\n            self.colorNodeOpacity(n, 1);\r\n          } else if (dist < max / 4) {\r\n            self.colorNodeOpacity(n, 0.2);\r\n          } else if (dist < (2 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.4);\r\n          } else if (dist < (3 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.6);\r\n          }\r\n          else {\r\n            self.colorNodeOpacity(n, 0.8);\r\n          }\r\n\r\n\r\n        });\r\n      }\r\n      else {\r\n        self.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n          self.colorNodeOpacity(n, 0.2);\r\n\r\n        });\r\n        // self.colorNodeEdge(null);    // this is to highlight all \r\n\r\n        //fisrt dehighlight all the edges\r\n        self.lineIndices.forEach(function (link) {\r\n          link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n          link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n          link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n        })\r\n\r\n        //hilight within edges\r\n        let red = new THREE.Color(appState.graph.edges.color).r;\r\n        let blue = new THREE.Color(appState.graph.edges.color).g;\r\n        let green = new THREE.Color(appState.graph.edges.color).b;\r\n        const withinEdges = self.getEdgeWithinSelection(self.selection)\r\n\r\n        for (var i = 0; i < withinEdges.length; i++) {\r\n          withinEdges[i].linecolor.r = red;\r\n          withinEdges[i].linecolor.g = blue;\r\n          withinEdges[i].linecolor.b = green;\r\n        }\r\n        self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n        //highlight nodes \r\n        for (var i = 0; i < self.selection.length; i++) {\r\n          self.colorNodeOpacity(self.selection[i], 1);\r\n        }\r\n\r\n      }\r\n    }\r\n    else {        //when no nodes are selected, all 1 opacity \r\n      self.graph.forEachNode(n => {\r\n        self.colorNodeOpacity(n, 1);\r\n\r\n      });\r\n      self.colorNodeEdge(null);\r\n    }\r\n  }\r\n\r\n  self.highlightAllEdges = function () {\r\n    let red = new THREE.Color(appState.graph.edges.color).r;\r\n    let blue = new THREE.Color(appState.graph.edges.color).g;\r\n    let green = new THREE.Color(appState.graph.edges.color).b;\r\n    self.lineIndices.forEach(function (link) {\r\n      link.linecolor.r = red //black/white\r\n      link.linecolor.g = blue\r\n      link.linecolor.b = green\r\n    })\r\n    self.arrow.material.color.setRGB(red, blue, green);\r\n  }\r\n\r\n  //highlight  edges within distance range \r\n  self.highlightedgeWithinDist = function (mindist, maxdist) {\r\n\r\n    let red = new THREE.Color(appState.graph.edges.color).r;\r\n    let blue = new THREE.Color(appState.graph.edges.color).g;\r\n    let green = new THREE.Color(appState.graph.edges.color).b;\r\n    //fisrt dehighlight all the edges\r\n    self.lineIndices.forEach(function (link) {\r\n      if (link.edgeDist >= mindist && link.edgeDist <= maxdist) {\r\n        link.linecolor.r = red;\r\n        link.linecolor.g = blue;\r\n        link.linecolor.b = green;\r\n      } else {\r\n        link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n        link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n        link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n      }\r\n\r\n    })\r\n    self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n    //hilight  edges within distance \r\n\r\n    // const withinEdges = self.getEdgeWithinDist(mindist,maxdist)\r\n\r\n    // for (var i = 0; i < withinEdges.length; i++) {\r\n    //   withinEdges[i].linecolor.r = red;\r\n    //   withinEdges[i].linecolor.g = blue;\r\n    //   withinEdges[i].linecolor.b = green;\r\n    // }\r\n    // self.arrow.material.color.setRGB(red, blue, green);\r\n  }\r\n\r\n\r\n  //highlight map selected nodes: highlight nodes and edges branching out from selection and neighbor nodes of the selection with lower transparency\r\n  self.updateSelectionOutOpacity = function () {\r\n    // if()\r\n    if (self.selection.length > 0) {\r\n      if (self.selection.length == 1 && appState.graph.colorByDistance) {\r\n        const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n          var p = 0.017453292519943295;    // Math.PI / 180\r\n          var c = Math.cos;\r\n          var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n            c(lat1 * p) * c(lat2 * p) *\r\n            (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n          return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n        }\r\n        var sumOfAllDistance = 0;\r\n        var n = 0;\r\n        var max = 0;\r\n        self.graph.forEachNode(n => {\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.selection[0].data.ref.LatY, self.selection[0].data.ref.LonX)\r\n          if (dist > max) {\r\n            max = dist;\r\n          }\r\n        })\r\n        self.graph.forEachNode(n => {\r\n          // self.colorNodeColor(n, \"#0000FF\");\r\n          var dist = calDistanceFromLatLonInKm(n.data.ref.LatY, n.data.ref.LonX, self.selection[0].data.ref.LatY, self.selection[0].data.ref.LonX);\r\n          console.log(n.data.ref.LatY, n.data.ref.LonX, self.selection[0]['LatY'], self.selection[0]['LatX'])\r\n          self.colorNode(n, 0x0000FF);\r\n          if (dist == 0) {\r\n            self.colorNodeOpacity(n, 1);\r\n          } else if (dist < max / 4) {\r\n            self.colorNodeOpacity(n, 0.2);\r\n          } else if (dist < (2 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.4);\r\n          } else if (dist < (3 * max) / 4) {\r\n            self.colorNodeOpacity(n, 0.6);\r\n          }\r\n          else {\r\n            self.colorNodeOpacity(n, 0.8);\r\n          }\r\n\r\n\r\n        });\r\n      }\r\n      else {\r\n        self.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n          self.colorNodeOpacity(n, 0.2);\r\n\r\n        });\r\n        // self.colorNodeEdge(null);    // this is to highlight all \r\n\r\n        //fisrt dehighlight all the edges\r\n        self.lineIndices.forEach(function (link) {\r\n          link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n          link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n          link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n        })\r\n\r\n        //hilight within edges\r\n        let red = new THREE.Color(appState.graph.edges.color).r;\r\n        let blue = new THREE.Color(appState.graph.edges.color).g;\r\n        let green = new THREE.Color(appState.graph.edges.color).b;\r\n        const withinEdges = self.getEdgeWithinOutSelection(self.selection)\r\n\r\n        for (var i = 0; i < withinEdges.length; i++) {\r\n          withinEdges[i].linecolor.r = red;\r\n          withinEdges[i].linecolor.g = blue;\r\n          withinEdges[i].linecolor.b = green;\r\n        }\r\n        self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n\r\n\r\n\r\n        \r\n        for (var i = 0; i < self.selection.length; i++) {\r\n          // slightly highlight neighbors \r\n          // const neighborNodes = self.getNeighborNodesFromGraph(self.selection[i])\r\n          // for (var i = 0; i < neighborNodes.length; i++) {\r\n          //   self.colorNodeOpacity(neighborNodes[i], 0.5);\r\n          // }\r\n          //fully highlight nodes \r\n          self.colorNodeOpacity(self.selection[i], 1);\r\n        }\r\n\r\n      }\r\n    }\r\n    else {        //when no nodes are selected, all 1 opacity \r\n      self.graph.forEachNode(n => {\r\n        self.colorNodeOpacity(n, 1);\r\n\r\n      });\r\n      self.colorNodeEdge(null);\r\n    }\r\n  }\r\n\r\n\r\n  //highlight clicked nodes and its neighbor edges only\r\n  self.highlightClickNode = function (node) {\r\n    if (node) {\r\n      self.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n        self.colorNodeOpacity(n, 0.2);\r\n\r\n      });\r\n      //   // self.colorNodeEdge(null);    // this is to highlight all \r\n\r\n      //   //fisrt dehighlight all the edges\r\n      //   self.lineIndices.forEach(function (link) {\r\n      //     link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n      //     link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n      //     link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n      //   })  \r\n\r\n      //   //hilight neighbor edges\r\n      //   let red = new THREE.Color(appState.graph.edges.color).r;\r\n      //   let blue = new THREE.Color(appState.graph.edges.color).g;\r\n      //   let green = new THREE.Color(appState.graph.edges.color).b;\r\n      //   const withinEdges = node.linkObjs\r\n\r\n      //   for (var i = 0; i < withinEdges.length; i++) {\r\n      //     withinEdges[i].linecolor.r = red;\r\n      //     withinEdges[i].linecolor.g = blue;\r\n      //     withinEdges[i].linecolor.b = green;\r\n      //   }\r\n      //   self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n      //highlight nodes \r\n      const neighborNodes = self.getNeighborNodesFromGraph(node)\r\n      for (var i = 0; i < neighborNodes.length; i++) {\r\n        self.colorNodeOpacity(neighborNodes[i], 1);\r\n      }\r\n\r\n      // } else {        //when no nodes are given, all 1 opacity \r\n      //   self.graph.forEachNode(n => {\r\n      //     self.colorNodeOpacity(n, 1);\r\n\r\n      //   });\r\n      //   self.colorNodeEdge(null);\r\n      // }\r\n\r\n\r\n      // self.highlightNode(node, true);\r\n      // node.renderData.textHolder.children[0].element.hideme = false;\r\n      self.colorNodeEdge(node);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  self.getNeighborNodesFromGraph = function (node) {\r\n    const nodeNeighbor = []\r\n    const froms = []\r\n    const tos = []\r\n    if (!node) return\r\n    for (var i = 0; i < node.links.length; i++) {\r\n      froms.push(node.links[i].fromId);\r\n      tos.push(node.links[i].toId);\r\n    }\r\n    self.graph.forEachNode(n => {\r\n      if (froms.indexOf(n.id) != -1 || tos.indexOf(n.id) != -1) {\r\n        nodeNeighbor.push(n)\r\n      }\r\n    })\r\n    return nodeNeighbor\r\n  }\r\n\r\n  // get only neighbors from a set of nodes, exclude selected nodes, only neighbors\r\n  self.getOnlyNeighborNodesFromGraph = function (nodes) {\r\n    const nodeNeighbor = []\r\n    const froms = []\r\n    const tos = []\r\n    if (nodes.length < 1) return\r\n    for (var i = 0; i < node.links.length; i++) {\r\n      froms.push(node.links[i].fromId);\r\n      tos.push(node.links[i].toId);\r\n    }\r\n    self.graph.forEachNode(n => {\r\n      if (froms.indexOf(n.id) != -1 || tos.indexOf(n.id) != -1) {\r\n        nodeNeighbor.push(n)\r\n      }\r\n    })\r\n    return nodeNeighbor\r\n  }\r\n\r\n\r\n  /**\r\n   *  Update positions of all objects in self.selection\r\n   *  based on diff between mouse position and self.dragging position\r\n   */\r\n  self.updateSelection = function (mouseX, mouseY, selection) {\r\n    if (self.dragging) {\r\n      var diffx = mouseX - self.dragging.x;\r\n      var diffy = mouseY - self.dragging.y;\r\n    }\r\n\r\n    //'selection' only passed if a single node is double clicked\r\n    let clickedNode = selection;\r\n    //if not already pinned, then pin the node upon double-click\r\n    if (clickedNode && !clickedNode.pinnedx) {\r\n      clickedNode.pinnedx = true;\r\n      clickedNode.pinnedy = true;\r\n      appState.graph.mapClicked = clickedNode\r\n      self.highlightNode(clickedNode, true);\r\n      self.highlightEdges(clickedNode, true);\r\n      const neighborNodes = self.getNeighborNodesFromGraph(clickedNode);\r\n      self.selection = neighborNodes;\r\n      console.log(self.selection)\r\n    } else if (clickedNode && clickedNode.pinnedx) {\r\n      //if already pinned, then unpin upon double-click\r\n      clickedNode.pinnedx = false;\r\n      clickedNode.pinnedy = false;\r\n      appState.graph.mapClicked = null;\r\n\r\n\r\n      self.selection = []\r\n    }\r\n\r\n\r\n\r\n    // if(self.selection.length!==0){\r\n    //   self.graph.forEachNode(n => {\r\n    //     self.colorNodeOpacity(n, 0.2);\r\n    //   });\r\n    // }else{\r\n    //   self.graph.forEachNode(n => {\r\n    //     self.colorNodeOpacity(n, 1);\r\n    //   });\r\n    // }\r\n\r\n\r\n\r\n    for (var i = 0; i < self.selection.length; i++) {\r\n      if (self.dragging) {\r\n        self.selection[i].x += diffx;\r\n        self.selection[i].y += diffy;\r\n        self.selection[i].fx = self.selection[i].x;\r\n        self.selection[i].fy = self.selection[i].y;\r\n        //pins multiple nodes when dragging\r\n        if (!clickedNode) {\r\n          self.selection[i].pinnedx = true;\r\n          self.selection[i].pinnedy = true;\r\n        }\r\n      }\r\n      if (!def.NODE_NO_HIGHLIGHT) {\r\n        self.selection[i].renderData.draw_object.children[0].visible = true;\r\n      } else {\r\n        self.selection[i].renderData.draw_object.material.color.set(\r\n          new THREE.Color(self.selection[i].renderData.color)\r\n        );\r\n        // self.colorNodeOpacity(self.selection[i], 1);\r\n\r\n      }\r\n      self.selection[\r\n        i\r\n      ].renderData.textHolder.children[0].element.hideme = false;\r\n    }\r\n\r\n\r\n\r\n\r\n  };\r\n\r\n  /**\r\n   *  Find any objects within the current box selection and add it to self.selection\r\n   */\r\n  self.checkSelection = function (mouseX, mouseY) {\r\n    if (!self.dragging) {\r\n      self.mouseEnd = new THREE.Vector3(mouseX, mouseY, 0);\r\n      if (self.mouseStart.x < self.mouseEnd.x) {\r\n        var left = self.mouseStart;\r\n        var right = self.mouseEnd;\r\n      } else {\r\n        var left = self.mouseEnd;\r\n        var right = self.mouseStart;\r\n      }\r\n\r\n      self.graph.forEachNode(function (node) {\r\n        let npos;\r\n        if (self.options.layout == \"ngraph\") {\r\n          npos = self.force.getNodePosition(node.id);\r\n        } else if (self.options.layout == \"d3\") {\r\n          npos = node;\r\n        }\r\n        if (self.insideBox(left, right, npos.x, npos.y)) {\r\n          self.selection.push(node);\r\n          //indicates nodes were in selection box \r\n          //when mouse is lifted\r\n          //self.multNodesHighlighted = true;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  returns true if pos is in box with top left l and bottom right r\r\n   */\r\n  self.insideBox = function (l, r, posx, posy) {\r\n    return (\r\n      posx < r.x &&\r\n      posx > l.x &&\r\n      ((posy > r.y && posy < l.y) || (posy < r.y && posy > l.y))\r\n    );\r\n  };\r\n};","var Frame = require(\"./src/process\").Frame;\r\n\r\nexports.Frame = Frame;\r\n\r\nvar graph = require(\"ngraph.generators\").balancedBinTree(5);\r\n\r\nexports.graph = graph;\r\n\r\nif (window) {\r\n  window.Argo = exports;\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/Snoman title.ea1f0722.png\";","module.exports = __webpack_public_path__ + \"static/media/Snoman logo.bf0e8895.png\";","import { Position, Toaster } from \"@blueprintjs/core\";\r\n\r\nexport const toaster = Toaster.create({\r\n  position: Position.TOP\r\n});\r\n\r\nexport default toaster;\r\n","var THREE = require(\"three\");\r\nvar STATS = require(\"stats.js\");\r\nwindow.THREE = THREE;\r\nrequire(\"../include/QuickHull\");\r\nrequire(\"../include/ConvexGeometry\");\r\nrequire(\"../include/CSS3DRenderer\");\r\n// var Line2 = require(\"../src/lines/Line2\");\r\n// var LineGeometry = require(\"../src/lines/LineGeometry\");\r\n// var LineMaterial = require(\"../src/lines/LineMaterial\");\r\nvar Edge = require(\"./structure/node\").Edge;\r\nvar Node = require(\"./structure/node\").Node;\r\nvar OrbitControls = require(\"../include/OrbitControls\")(THREE); //'three-orbit-controls')(THREE);\r\nTHREE.MeshLine = require(\"../include/THREE.MeshLine\").MeshLine;\r\nTHREE.MeshLineMaterial = require(\"../include/THREE.MeshLine\").MeshLineMaterial;\r\nvar d3 = require(\"d3\");\r\nvar ee = require(\"event-emitter\");\r\nvar IS_IFRAME_WIDGET = require(\"../../constants\").IS_IFRAME_WIDGET;\r\n\r\nexports.default = {\r\n  THREE: THREE,\r\n  MeshLine: THREE.MeshLine,\r\n  MeshLineMaterial: THREE.MeshLineMaterial,\r\n  // Line2: Line2,\r\n  // LineGeometry: LineGeometry,\r\n  // LineMaterial: LineMaterial,\r\n  STATS: STATS, // stats.js panel for showing fps and other stats.\r\n  STATS_SHOW: false,\r\n  Edge: Edge,\r\n  Node: Node,\r\n  OrbitControls: OrbitControls,\r\n  d3: d3,\r\n  ee: ee,\r\n  NODE_COLOR: 0x0055aa,\r\n  NODE_HIGHLIGHT: 0x0055aa,\r\n  // NODE_HIGHLIGHT_RGB: 'rgb(219, 119, 52)',\r\n  ADJACENT_HIGHLIGHT: 0x95a5a6,\r\n  SEARCH_HIGHLIGHT: 0xe67e22,\r\n  NODE_HTEXTURE: \"http://i.imgur.com/xzkxSIw.png\",\r\n  NODE_TEXTURE: \"http://i.imgur.com/reTXqiM.png\",\r\n  NODE_NO_HTEX: true,\r\n  NODE_NO_TEX: true,\r\n  NODE_NO_HCOLOR: true,\r\n  NODE_NO_COLOR: false,\r\n  NODE_NO_HIGHLIGHT: false,\r\n  NODE_NEIGHBOR_HIGHLIGHT: true,\r\n  NODE_SHAPE: \"circle\",\r\n  NODE_HSHAPE: \"circle\",\r\n  NODE_SIZE: 5,\r\n  HIGHLIGHT_SIZE: 1.0,\r\n  LAYOUT: \"d3\",\r\n  LINES: \"nofancy\",\r\n  MAP: false,\r\n  MAP_RENDER_PER_NUMBER_OF_FRAME: 10,\r\n  TEXT_SCALE: true,\r\n  TEXT_SIZE: 0.07,\r\n  TEXT_X_OFFSET: 0.52,\r\n  TEXT_Y_OFFSET: 0.35,\r\n  TEXT_BACK_COLOR: \"rgba(100, 100, 200, 0)\",\r\n  TEXT_OPACITY: \"1\",\r\n  TEXT_WIREFRAME: false,\r\n  PIN_COLOR: 0xFFA500\r\n};\r\n","const { observable } = require(\"mobx\");\r\n\r\nvar def = require(\"./imports\").default;\r\nconst spawn = require(\"threads\").spawn;\r\nvar THREE = def.THREE;\r\nvar STATS = def.STATS;\r\nvar STATS_SHOW = def.STATS_SHOW;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\nvar Frame = function(graph, options) {\r\n  // Needed to reference \"this\" in functions\r\n  var self = this;\r\n  appState.graph.process = this;\r\n  // Options\r\n  this.inGraph = graph;\r\n  this.options = options || {\r\n    layout: def.LAYOUT\r\n  };\r\n  this.layout_options = this.options.graphLayout || {};\r\n\r\n  this.lineObjects = [];\r\n  this.lineIndices = [];\r\n  this.MAX_LINES = 100000;\r\n  this.textureLoader = new THREE.TextureLoader();\r\n  this.textureLoader.crossOrigin = true;\r\n  this.oldIntersect = -1;\r\n\r\n  this.selection = [];\r\n \r\n  this.fov = 60;\r\n  this.near = 1;\r\n  this.far = 5000;\r\n  this.mouseStart = new THREE.Vector3(0, 0, 0);\r\n  this.mouseEnd = new THREE.Vector3(0, 0, 0);\r\n  this.dragging = null;\r\n  this.showBox = false;\r\n  this.renderWidth = 1000;\r\n  this.renderHeight = 1000;\r\n  this.maxZoom = 1000;\r\n  this.paused = false;\r\n  this.mouseDown = false;\r\n  this.ee = ee({});\r\n  this.layoutInit = true;\r\n  this.labelSize = 6;\r\n  this.relativeFontSize = 1;\r\n  this.mapShowing = def.MAP;\r\n  this.mapRenderPerNumberOfFrame = def.MAP_RENDER_PER_NUMBER_OF_FRAME;\r\n  this.darkMode = false;\r\n  this.lastNode = null;\r\n  this.rightClickedNode = null;\r\n  this.doHighlightNeighbors = def.NODE_NEIGHBOR_HIGHLIGHT;\r\n  this.prevHighlights = [];\r\n  this.hull = null;\r\n\r\n  require(\"./utils/utils\")(this);\r\n  require(\"./setup\")(this);\r\n  require(\"./addremove\")(this);\r\n  require(\"./highlighting\")(this);\r\n  require(\"./select\")(this);\r\n  require(\"./mouse\")(this);\r\n  require(\"./modify\")(this);\r\n  require(\"./draw\")(this);\r\n  require(\"./api\")(this);\r\n  require(\"./update\")(this);\r\n\r\n  /**\r\n   *  Starting point, run once to create scene\r\n   */\r\n  let stats = new STATS();\r\n  this.display = function() {\r\n    if (STATS_SHOW) {\r\n      stats.showPanel(0); // show fps panel\r\n      document.body.appendChild(stats.dom);\r\n    }\r\n    this.animate();\r\n  };\r\n\r\n  /**\r\n   *  Creates loop called on every animation frame\r\n   */\r\n  \r\n  let fps = 30;\r\n  // let now;\r\n  // let then = Date.now();\r\n  // let interval = 1000 / fps;\r\n  // let delta;\r\n  this.animate = function() {\r\n    if (STATS_SHOW) {\r\n      stats.begin(); // Begin stats.js panel timing\r\n    }\r\n    \r\n    self.controls.update();\r\n    self.render();\r\n\r\n    if (STATS_SHOW) {\r\n      stats.end(); // End stats.js panel timing\r\n    }\r\n    \r\n    // now = Date.now();\r\n    // delta = now - then;\r\n    // if (delta > interval) {\r\n    //   then = now;\r\n    //   self.controls.update();\r\n    //   self.render();\r\n    // }\r\n    requestAnimationFrame(self.animate);\r\n  };\r\n\r\n  /**\r\n   *  Set initial properties\r\n   */\r\n  this.init = function(aa = true) {\r\n    self.renderer = new THREE.WebGLRenderer({\r\n      alpha: true,\r\n      antialias: aa,\r\n      preserveDrawingBuffer: true,\r\n    });\r\n    self.minimapRenderer = new THREE.WebGLRenderer({\r\n      alpha: true,\r\n      antialias: aa,\r\n      preserveDrawingBuffer: true,\r\n    });\r\n    //self.renderer.setPixelRatio(window.devicePixelRatio);\r\n    //self.renderer.setPixelRatio(0.1);\r\n    self.setDisplayParams();\r\n    self.setRendererParams();\r\n\r\n    self.setupCamera();\r\n    self.setupMinimap();\r\n    self.setupGeometry();\r\n    self.setupSelect();\r\n\r\n    // Make sure to clear children before setting up new frame.\r\n    self.element.innerHTML = \"\";\r\n    self.element.appendChild(self.renderer.domElement);\r\n    self.element.appendChild(self.cssRenderer.domElement);\r\n    self.element.appendChild(self.minimapRenderer.domElement);\r\n\r\n    self.setupLayout();\r\n\r\n    self.setupGraph();\r\n\r\n    window.addEventListener(\r\n      \"resize\",\r\n      function(e) {\r\n        e.preventDefault();\r\n        self.onWindowResize();\r\n      },\r\n      false\r\n    );\r\n    window.addEventListener(\r\n      \"load\",\r\n      function(e) {\r\n        e.preventDefault();\r\n        self.onWindowResize();\r\n      },\r\n      false\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Change camera on window resize\r\n   */\r\n  self.onWindowResize = function() {\r\n    self.clientRect = self.element.getBoundingClientRect();\r\n    self.width = self.clientRect.width;\r\n    self.height = self.clientRect.height;\r\n    self.minimap.width = 0.2 * self.height;\r\n    self.minimap.height = 0.2 * self.height;\r\n    self.aspect = self.width / self.height;\r\n    self.ccamera.aspect = self.aspect;\r\n    self.ccamera.updateProjectionMatrix();\r\n\r\n    self.renderer.setSize(self.width, self.height);\r\n    self.cssRenderer.setSize(self.width, self.height);\r\n    self.minimapRenderer.setSize(0.2 * self.height, 0.2 * self.height);\r\n  };\r\n\r\n  /**\r\n   *  Draws graphics\r\n   */\r\n  var stage = 0;\r\n  var numberOfFrameSinceMiniMapRerender = 1;\r\n  this.render = function() {\r\n    self.updateCamera();\r\n    self.updateNodes();\r\n    // self.paused = true;\r\n    if (stage == 1) {\r\n      self.updateLabels();\r\n      self.updateEdges();\r\n      stage = 0;\r\n    }\r\n    stage += 1;\r\n    numberOfFrameSinceMiniMapRerender += 1;\r\n    if (self.options.layout == \"d3\") {\r\n      if (self.layoutInit == true) {\r\n        var nodes = [];\r\n        self.graph.forEachNode(function(node) {\r\n          nodes.push(node);\r\n        });\r\n        self.force.nodes(nodes);\r\n        self.force.force(\"link\", d3.forceLink(self.lineIndices));\r\n        self.force.restart();\r\n        self.force.stop();\r\n        if (self.tickToStatic && !self.paused) {\r\n          // We don't tick and pause for now\r\n          for (\r\n            var i = 0,\r\n              n = Math.ceil(\r\n                Math.log(self.force.alphaMin()) /\r\n                  Math.log(1 - self.force.alphaDecay())\r\n              );\r\n            i < n;\r\n            ++i\r\n          ) {\r\n            self.force.tick();\r\n          }\r\n          //self.pauseLayout();\r\n        }\r\n        self.layoutInit = false;\r\n      }\r\n    }\r\n    self.renderer.setViewport(0, 0, self.width, self.height);\r\n    self.renderer.setScissor(0, 0, self.width, self.height);\r\n    self.renderer.setScissorTest(true);\r\n    self.renderer.render(self.scene, self.ccamera);\r\n    self.cssRenderer.render(self.scene, self.ccamera);\r\n\r\n    // Render MiniMap at a lower framerate.\r\n    if (numberOfFrameSinceMiniMapRerender >= this.mapRenderPerNumberOfFrame) {\r\n      numberOfFrameSinceMiniMapRerender = 0;\r\n\r\n      if (self.mapShowing) {\r\n        self.minimap.width = 0.2 * self.height;\r\n        self.minimap.height = 0.2 * self.height;\r\n        self.minimapRenderer.setViewport(0, 0, self.minimap.width, self.minimap.height);\r\n        self.minimapRenderer.setScissor(0, 0, self.minimap.width, self.minimap.height);\r\n        self.minimapRenderer.setScissorTest(true);\r\n        self.minimapRenderer.render(self.scene, self.minimap.camera);\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexports.Frame = Frame;\r\n","/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n *\r\n * Ported from: https://github.com/maurizzzio/quickhull3d/ by Mauricio Poppe (https://github.com/maurizzzio)\r\n *\r\n */\r\n\r\n(function() {\r\n  var Visible = 0;\r\n  var Deleted = 1;\r\n\r\n  function QuickHull() {\r\n    this.tolerance = -1;\r\n\r\n    this.faces = []; // the generated faces of the convex hull\r\n    this.newFaces = []; // this array holds the faces that are generated within a single iteration\r\n\r\n    // the vertex lists work as follows:\r\n    //\r\n    // let 'a' and 'b' be 'Face' instances\r\n    // let 'v' be points wrapped as instance of 'Vertex'\r\n    //\r\n    //     [v, v, ..., v, v, v, ...]\r\n    //      ^             ^\r\n    //      |             |\r\n    //  a.outside     b.outside\r\n    //\r\n    this.assigned = new VertexList();\r\n    this.unassigned = new VertexList();\r\n\r\n    this.vertices = []; // vertices of the hull (internal representation of given geometry data)\r\n  }\r\n\r\n  Object.assign(QuickHull.prototype, {\r\n    setFromPoints: function(points) {\r\n      if (Array.isArray(points) !== true) {\r\n        console.error(\"THREE.QuickHull: Points parameter is not an array.\");\r\n      }\r\n\r\n      if (points.length < 4) {\r\n        console.error(\r\n          \"THREE.QuickHull: The algorithm needs at least four points.\"\r\n        );\r\n      }\r\n\r\n      this.makeEmpty();\r\n\r\n      for (var i = 0, l = points.length; i < l; i++) {\r\n        this.vertices.push(new VertexNode(points[i]));\r\n      }\r\n\r\n      this.compute();\r\n\r\n      return this;\r\n    },\r\n\r\n    setFromObject: function(object) {\r\n      var points = [];\r\n\r\n      object.updateMatrixWorld(true);\r\n\r\n      object.traverse(function(node) {\r\n        var i, l, point;\r\n\r\n        var geometry = node.geometry;\r\n\r\n        if (geometry !== undefined) {\r\n          if (geometry.isGeometry) {\r\n            var vertices = geometry.vertices;\r\n\r\n            for (i = 0, l = vertices.length; i < l; i++) {\r\n              point = vertices[i].clone();\r\n              point.applyMatrix4(node.matrixWorld);\r\n\r\n              points.push(point);\r\n            }\r\n          } else if (geometry.isBufferGeometry) {\r\n            var attribute = geometry.attributes.position;\r\n\r\n            if (attribute !== undefined) {\r\n              for (i = 0, l = attribute.count; i < l; i++) {\r\n                point = new THREE.Vector3();\r\n\r\n                point\r\n                  .fromBufferAttribute(attribute, i)\r\n                  .applyMatrix4(node.matrixWorld);\r\n\r\n                points.push(point);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      return this.setFromPoints(points);\r\n    },\r\n\r\n    makeEmpty: function() {\r\n      this.faces = [];\r\n      this.vertices = [];\r\n\r\n      return this;\r\n    },\r\n\r\n    // Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\r\n\r\n    addVertexToFace: function(vertex, face) {\r\n      vertex.face = face;\r\n\r\n      if (face.outside === null) {\r\n        this.assigned.append(vertex);\r\n      } else {\r\n        this.assigned.insertBefore(face.outside, vertex);\r\n      }\r\n\r\n      face.outside = vertex;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Removes a vertex from the 'assigned' list of vertices and from the given face\r\n\r\n    removeVertexFromFace: function(vertex, face) {\r\n      if (vertex === face.outside) {\r\n        // fix face.outside link\r\n\r\n        if (vertex.next !== null && vertex.next.face === face) {\r\n          // face has at least 2 outside vertices, move the 'outside' reference\r\n\r\n          face.outside = vertex.next;\r\n        } else {\r\n          // vertex was the only outside vertex that face had\r\n\r\n          face.outside = null;\r\n        }\r\n      }\r\n\r\n      this.assigned.remove(vertex);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertext list\r\n\r\n    removeAllVerticesFromFace: function(face) {\r\n      if (face.outside !== null) {\r\n        // reference to the first and last vertex of this face\r\n\r\n        var start = face.outside;\r\n        var end = face.outside;\r\n\r\n        while (end.next !== null && end.next.face === face) {\r\n          end = end.next;\r\n        }\r\n\r\n        this.assigned.removeSubList(start, end);\r\n\r\n        // fix references\r\n\r\n        start.prev = end.next = null;\r\n        face.outside = null;\r\n\r\n        return start;\r\n      }\r\n    },\r\n\r\n    // Removes all the visible vertices that 'face' is able to see\r\n\r\n    deleteFaceVertices: function(face, absorbingFace) {\r\n      var faceVertices = this.removeAllVerticesFromFace(face);\r\n\r\n      if (faceVertices !== undefined) {\r\n        if (absorbingFace === undefined) {\r\n          // mark the vertices to be reassigned to some other face\r\n\r\n          this.unassigned.appendChain(faceVertices);\r\n        } else {\r\n          // if there's an absorbing face try to assign as many vertices as possible to it\r\n\r\n          var vertex = faceVertices;\r\n\r\n          do {\r\n            // we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\r\n            // will be changed by upcoming method calls\r\n\r\n            var nextVertex = vertex.next;\r\n\r\n            var distance = absorbingFace.distanceToPoint(vertex.point);\r\n\r\n            // check if 'vertex' is able to see 'absorbingFace'\r\n\r\n            if (distance > this.tolerance) {\r\n              this.addVertexToFace(vertex, absorbingFace);\r\n            } else {\r\n              this.unassigned.append(vertex);\r\n            }\r\n\r\n            // now assign next vertex\r\n\r\n            vertex = nextVertex;\r\n          } while (vertex !== null);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    // Reassigns as many vertices as possible from the unassigned list to the new faces\r\n\r\n    resolveUnassignedPoints: function(newFaces) {\r\n      if (this.unassigned.isEmpty() === false) {\r\n        var vertex = this.unassigned.first();\r\n\r\n        do {\r\n          // buffer 'next' reference, see .deleteFaceVertices()\r\n\r\n          var nextVertex = vertex.next;\r\n\r\n          var maxDistance = this.tolerance;\r\n\r\n          var maxFace = null;\r\n\r\n          for (var i = 0; i < newFaces.length; i++) {\r\n            var face = newFaces[i];\r\n\r\n            if (face.mark === Visible) {\r\n              var distance = face.distanceToPoint(vertex.point);\r\n\r\n              if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                maxFace = face;\r\n              }\r\n\r\n              if (maxDistance > 1000 * this.tolerance) break;\r\n            }\r\n          }\r\n\r\n          // 'maxFace' can be null e.g. if there are identical vertices\r\n\r\n          if (maxFace !== null) {\r\n            this.addVertexToFace(vertex, maxFace);\r\n          }\r\n\r\n          vertex = nextVertex;\r\n        } while (vertex !== null);\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    // Computes the extremes of a simplex which will be the initial hull\r\n\r\n    computeExtremes: function() {\r\n      var min = new THREE.Vector3();\r\n      var max = new THREE.Vector3();\r\n\r\n      var minVertices = [];\r\n      var maxVertices = [];\r\n\r\n      var i, l, j;\r\n\r\n      // initially assume that the first vertex is the min/max\r\n\r\n      for (i = 0; i < 3; i++) {\r\n        minVertices[i] = maxVertices[i] = this.vertices[0];\r\n      }\r\n\r\n      min.copy(this.vertices[0].point);\r\n      max.copy(this.vertices[0].point);\r\n\r\n      // compute the min/max vertex on all six directions\r\n\r\n      for (i = 0, l = this.vertices.length; i < l; i++) {\r\n        var vertex = this.vertices[i];\r\n        var point = vertex.point;\r\n\r\n        // update the min coordinates\r\n\r\n        for (j = 0; j < 3; j++) {\r\n          if (point.getComponent(j) < min.getComponent(j)) {\r\n            min.setComponent(j, point.getComponent(j));\r\n            minVertices[j] = vertex;\r\n          }\r\n        }\r\n\r\n        // update the max coordinates\r\n\r\n        for (j = 0; j < 3; j++) {\r\n          if (point.getComponent(j) > max.getComponent(j)) {\r\n            max.setComponent(j, point.getComponent(j));\r\n            maxVertices[j] = vertex;\r\n          }\r\n        }\r\n      }\r\n\r\n      // use min/max vectors to compute an optimal epsilon\r\n\r\n      this.tolerance =\r\n        3 *\r\n        Number.EPSILON *\r\n        (Math.max(Math.abs(min.x), Math.abs(max.x)) +\r\n          Math.max(Math.abs(min.y), Math.abs(max.y)) +\r\n          Math.max(Math.abs(min.z), Math.abs(max.z)));\r\n\r\n      return { min: minVertices, max: maxVertices };\r\n    },\r\n\r\n    // Computes the initial simplex assigning to its faces all the points\r\n    // that are candidates to form part of the hull\r\n\r\n    computeInitialHull: (function() {\r\n      var line3, plane, closestPoint;\r\n\r\n      return function computeInitialHull() {\r\n        if (line3 === undefined) {\r\n          line3 = new THREE.Line3();\r\n          plane = new THREE.Plane();\r\n          closestPoint = new THREE.Vector3();\r\n        }\r\n\r\n        var vertex,\r\n          vertices = this.vertices;\r\n        var extremes = this.computeExtremes();\r\n        var min = extremes.min;\r\n        var max = extremes.max;\r\n\r\n        var v0, v1, v2, v3;\r\n        var i, l, j;\r\n\r\n        // 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\r\n        // (max.x - min.x)\r\n        // (max.y - min.y)\r\n        // (max.z - min.z)\r\n\r\n        var distance,\r\n          maxDistance = 0;\r\n        var index = 0;\r\n\r\n        for (i = 0; i < 3; i++) {\r\n          distance =\r\n            max[i].point.getComponent(i) - min[i].point.getComponent(i);\r\n\r\n          if (distance > maxDistance) {\r\n            maxDistance = distance;\r\n            index = i;\r\n          }\r\n        }\r\n\r\n        v0 = min[index];\r\n        v1 = max[index];\r\n\r\n        // 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\r\n\r\n        maxDistance = 0;\r\n        line3.set(v0.point, v1.point);\r\n\r\n        for (i = 0, l = this.vertices.length; i < l; i++) {\r\n          vertex = vertices[i];\r\n\r\n          if (vertex !== v0 && vertex !== v1) {\r\n            line3.closestPointToPoint(vertex.point, true, closestPoint);\r\n\r\n            distance = closestPoint.distanceToSquared(vertex.point);\r\n\r\n            if (distance > maxDistance) {\r\n              maxDistance = distance;\r\n              v2 = vertex;\r\n            }\r\n          }\r\n        }\r\n\r\n        // 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\r\n\r\n        maxDistance = 0;\r\n        plane.setFromCoplanarPoints(v0.point, v1.point, v2.point);\r\n\r\n        for (i = 0, l = this.vertices.length; i < l; i++) {\r\n          vertex = vertices[i];\r\n\r\n          if (vertex !== v0 && vertex !== v1 && vertex !== v2) {\r\n            distance = Math.abs(plane.distanceToPoint(vertex.point));\r\n\r\n            if (distance > maxDistance) {\r\n              maxDistance = distance;\r\n              v3 = vertex;\r\n            }\r\n          }\r\n        }\r\n\r\n        var faces = [];\r\n\r\n        if (plane.distanceToPoint(v3.point) < 0) {\r\n          // the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\r\n\r\n          faces.push(\r\n            Face.create(v0, v1, v2),\r\n            Face.create(v3, v1, v0),\r\n            Face.create(v3, v2, v1),\r\n            Face.create(v3, v0, v2)\r\n          );\r\n\r\n          // set the twin edge\r\n\r\n          for (i = 0; i < 3; i++) {\r\n            j = (i + 1) % 3;\r\n\r\n            // join face[ i ] i > 0, with the first face\r\n\r\n            faces[i + 1].getEdge(2).setTwin(faces[0].getEdge(j));\r\n\r\n            // join face[ i ] with face[ i + 1 ], 1 <= i <= 3\r\n\r\n            faces[i + 1].getEdge(1).setTwin(faces[j + 1].getEdge(0));\r\n          }\r\n        } else {\r\n          // the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\r\n\r\n          faces.push(\r\n            Face.create(v0, v2, v1),\r\n            Face.create(v3, v0, v1),\r\n            Face.create(v3, v1, v2),\r\n            Face.create(v3, v2, v0)\r\n          );\r\n\r\n          // set the twin edge\r\n\r\n          for (i = 0; i < 3; i++) {\r\n            j = (i + 1) % 3;\r\n\r\n            // join face[ i ] i > 0, with the first face\r\n\r\n            faces[i + 1].getEdge(2).setTwin(faces[0].getEdge((3 - i) % 3));\r\n\r\n            // join face[ i ] with face[ i + 1 ]\r\n\r\n            faces[i + 1].getEdge(0).setTwin(faces[j + 1].getEdge(1));\r\n          }\r\n        }\r\n\r\n        // the initial hull is the tetrahedron\r\n\r\n        for (i = 0; i < 4; i++) {\r\n          this.faces.push(faces[i]);\r\n        }\r\n\r\n        // initial assignment of vertices to the faces of the tetrahedron\r\n\r\n        for (i = 0, l = vertices.length; i < l; i++) {\r\n          vertex = vertices[i];\r\n\r\n          if (\r\n            vertex !== v0 &&\r\n            vertex !== v1 &&\r\n            vertex !== v2 &&\r\n            vertex !== v3\r\n          ) {\r\n            maxDistance = this.tolerance;\r\n            var maxFace = null;\r\n\r\n            for (j = 0; j < 4; j++) {\r\n              distance = this.faces[j].distanceToPoint(vertex.point);\r\n\r\n              if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                maxFace = this.faces[j];\r\n              }\r\n            }\r\n\r\n            if (maxFace !== null) {\r\n              this.addVertexToFace(vertex, maxFace);\r\n            }\r\n          }\r\n        }\r\n\r\n        return this;\r\n      };\r\n    })(),\r\n\r\n    // Removes inactive faces\r\n\r\n    reindexFaces: function() {\r\n      var activeFaces = [];\r\n\r\n      for (var i = 0; i < this.faces.length; i++) {\r\n        var face = this.faces[i];\r\n\r\n        if (face.mark === Visible) {\r\n          activeFaces.push(face);\r\n        }\r\n      }\r\n\r\n      this.faces = activeFaces;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Finds the next vertex to create faces with the current hull\r\n\r\n    nextVertexToAdd: function() {\r\n      // if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\r\n\r\n      if (this.assigned.isEmpty() === false) {\r\n        var eyeVertex,\r\n          maxDistance = 0;\r\n\r\n        // grap the first available face and start with the first visible vertex of that face\r\n\r\n        var eyeFace = this.assigned.first().face;\r\n        var vertex = eyeFace.outside;\r\n\r\n        // now calculate the farthest vertex that face can see\r\n\r\n        do {\r\n          var distance = eyeFace.distanceToPoint(vertex.point);\r\n\r\n          if (distance > maxDistance) {\r\n            maxDistance = distance;\r\n            eyeVertex = vertex;\r\n          }\r\n\r\n          vertex = vertex.next;\r\n        } while (vertex !== null && vertex.face === eyeFace);\r\n\r\n        return eyeVertex;\r\n      }\r\n    },\r\n\r\n    // Computes a chain of half edges in CCW order called the 'horizon'.\r\n    // For an edge to be part of the horizon it must join a face that can see\r\n    // 'eyePoint' and a face that cannot see 'eyePoint'.\r\n\r\n    computeHorizon: function(eyePoint, crossEdge, face, horizon) {\r\n      // moves face's vertices to the 'unassigned' vertex list\r\n\r\n      this.deleteFaceVertices(face);\r\n\r\n      face.mark = Deleted;\r\n\r\n      var edge;\r\n\r\n      if (crossEdge === null) {\r\n        edge = crossEdge = face.getEdge(0);\r\n      } else {\r\n        // start from the next edge since 'crossEdge' was already analyzed\r\n        // (actually 'crossEdge.twin' was the edge who called this method recursively)\r\n\r\n        edge = crossEdge.next;\r\n      }\r\n\r\n      do {\r\n        var twinEdge = edge.twin;\r\n        var oppositeFace = twinEdge.face;\r\n\r\n        if (oppositeFace.mark === Visible) {\r\n          if (oppositeFace.distanceToPoint(eyePoint) > this.tolerance) {\r\n            // the opposite face can see the vertex, so proceed with next edge\r\n\r\n            this.computeHorizon(eyePoint, twinEdge, oppositeFace, horizon);\r\n          } else {\r\n            // the opposite face can't see the vertex, so this edge is part of the horizon\r\n\r\n            horizon.push(edge);\r\n          }\r\n        }\r\n\r\n        edge = edge.next;\r\n      } while (edge !== crossEdge);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\r\n\r\n    addAdjoiningFace: function(eyeVertex, horizonEdge) {\r\n      // all the half edges are created in ccw order thus the face is always pointing outside the hull\r\n\r\n      var face = Face.create(eyeVertex, horizonEdge.tail(), horizonEdge.head());\r\n\r\n      this.faces.push(face);\r\n\r\n      // join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\r\n\r\n      face.getEdge(-1).setTwin(horizonEdge.twin);\r\n\r\n      return face.getEdge(0); // the half edge whose vertex is the eyeVertex\r\n    },\r\n\r\n    //  Adds 'horizon.length' faces to the hull, each face will be linked with the\r\n    //  horizon opposite face and the face on the left/right\r\n\r\n    addNewFaces: function(eyeVertex, horizon) {\r\n      this.newFaces = [];\r\n\r\n      var firstSideEdge = null;\r\n      var previousSideEdge = null;\r\n\r\n      for (var i = 0; i < horizon.length; i++) {\r\n        var horizonEdge = horizon[i];\r\n\r\n        // returns the right side edge\r\n\r\n        var sideEdge = this.addAdjoiningFace(eyeVertex, horizonEdge);\r\n\r\n        if (firstSideEdge === null) {\r\n          firstSideEdge = sideEdge;\r\n        } else {\r\n          // joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\r\n\r\n          sideEdge.next.setTwin(previousSideEdge);\r\n        }\r\n\r\n        this.newFaces.push(sideEdge.face);\r\n        previousSideEdge = sideEdge;\r\n      }\r\n\r\n      // perform final join of new faces\r\n\r\n      firstSideEdge.next.setTwin(previousSideEdge);\r\n\r\n      return this;\r\n    },\r\n\r\n    // Adds a vertex to the hull\r\n\r\n    addVertexToHull: function(eyeVertex) {\r\n      var horizon = [];\r\n      var i, face;\r\n\r\n      this.unassigned.clear();\r\n\r\n      // remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\r\n\r\n      this.removeVertexFromFace(eyeVertex, eyeVertex.face);\r\n\r\n      this.computeHorizon(eyeVertex.point, null, eyeVertex.face, horizon);\r\n\r\n      this.addNewFaces(eyeVertex, horizon);\r\n\r\n      // reassign 'unassigned' vertices to the new faces\r\n\r\n      this.resolveUnassignedPoints(this.newFaces);\r\n\r\n      return this;\r\n    },\r\n\r\n    cleanup: function() {\r\n      this.assigned.clear();\r\n      this.unassigned.clear();\r\n      this.newFaces = [];\r\n\r\n      return this;\r\n    },\r\n\r\n    compute: function() {\r\n      var vertex;\r\n\r\n      this.computeInitialHull();\r\n\r\n      // add all available vertices gradually to the hull\r\n\r\n      while ((vertex = this.nextVertexToAdd()) !== undefined) {\r\n        this.addVertexToHull(vertex);\r\n      }\r\n\r\n      this.reindexFaces();\r\n\r\n      this.cleanup();\r\n\r\n      return this;\r\n    }\r\n  });\r\n\r\n  //\r\n\r\n  function Face() {\r\n    this.normal = new THREE.Vector3();\r\n    this.midpoint = new THREE.Vector3();\r\n    this.area = 0;\r\n\r\n    this.constant = 0; // signed distance from face to the origin\r\n    this.outside = null; // reference to a vertex in a vertex list this face can see\r\n    this.mark = Visible;\r\n    this.edge = null;\r\n  }\r\n\r\n  Object.assign(Face, {\r\n    create: function(a, b, c) {\r\n      var face = new Face();\r\n\r\n      var e0 = new HalfEdge(a, face);\r\n      var e1 = new HalfEdge(b, face);\r\n      var e2 = new HalfEdge(c, face);\r\n\r\n      // join edges\r\n\r\n      e0.next = e2.prev = e1;\r\n      e1.next = e0.prev = e2;\r\n      e2.next = e1.prev = e0;\r\n\r\n      // main half edge reference\r\n\r\n      face.edge = e0;\r\n\r\n      return face.compute();\r\n    }\r\n  });\r\n\r\n  Object.assign(Face.prototype, {\r\n    getEdge: function(i) {\r\n      var edge = this.edge;\r\n\r\n      while (i > 0) {\r\n        edge = edge.next;\r\n        i--;\r\n      }\r\n\r\n      while (i < 0) {\r\n        edge = edge.prev;\r\n        i++;\r\n      }\r\n\r\n      return edge;\r\n    },\r\n\r\n    compute: (function() {\r\n      var triangle;\r\n\r\n      return function compute() {\r\n        if (triangle === undefined) triangle = new THREE.Triangle();\r\n\r\n        var a = this.edge.tail();\r\n        var b = this.edge.head();\r\n        var c = this.edge.next.head();\r\n\r\n        triangle.set(a.point, b.point, c.point);\r\n\r\n        triangle.normal(this.normal);\r\n        triangle.midpoint(this.midpoint);\r\n        this.area = triangle.area();\r\n\r\n        this.constant = this.normal.dot(this.midpoint);\r\n\r\n        return this;\r\n      };\r\n    })(),\r\n\r\n    distanceToPoint: function(point) {\r\n      return this.normal.dot(point) - this.constant;\r\n    }\r\n  });\r\n\r\n  // Entity for a Doubly-Connected Edge List (DCEL).\r\n\r\n  function HalfEdge(vertex, face) {\r\n    this.vertex = vertex;\r\n    this.prev = null;\r\n    this.next = null;\r\n    this.twin = null;\r\n    this.face = face;\r\n  }\r\n\r\n  Object.assign(HalfEdge.prototype, {\r\n    head: function() {\r\n      return this.vertex;\r\n    },\r\n\r\n    tail: function() {\r\n      return this.prev ? this.prev.vertex : null;\r\n    },\r\n\r\n    length: function() {\r\n      var head = this.head();\r\n      var tail = this.tail();\r\n\r\n      if (tail !== null) {\r\n        return tail.point.distanceTo(head.point);\r\n      }\r\n\r\n      return -1;\r\n    },\r\n\r\n    lengthSquared: function() {\r\n      var head = this.head();\r\n      var tail = this.tail();\r\n\r\n      if (tail !== null) {\r\n        return tail.point.distanceToSquared(head.point);\r\n      }\r\n\r\n      return -1;\r\n    },\r\n\r\n    setTwin: function(edge) {\r\n      this.twin = edge;\r\n      edge.twin = this;\r\n\r\n      return this;\r\n    }\r\n  });\r\n\r\n  // A vertex as a double linked list node.\r\n\r\n  function VertexNode(point) {\r\n    this.point = point;\r\n    this.prev = null;\r\n    this.next = null;\r\n    this.face = null; // the face that is able to see this vertex\r\n  }\r\n\r\n  // A double linked list that contains vertex nodes.\r\n\r\n  function VertexList() {\r\n    this.head = null;\r\n    this.tail = null;\r\n  }\r\n\r\n  Object.assign(VertexList.prototype, {\r\n    first: function() {\r\n      return this.head;\r\n    },\r\n\r\n    last: function() {\r\n      return this.tail;\r\n    },\r\n\r\n    clear: function() {\r\n      this.head = this.tail = null;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Inserts a vertex before the target vertex\r\n\r\n    insertBefore: function(target, vertex) {\r\n      vertex.prev = target.prev;\r\n      vertex.next = target;\r\n\r\n      if (vertex.prev === null) {\r\n        this.head = vertex;\r\n      } else {\r\n        vertex.prev.next = vertex;\r\n      }\r\n\r\n      target.prev = vertex;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Inserts a vertex after the target vertex\r\n\r\n    insertAfter: function(target, vertex) {\r\n      vertex.prev = target;\r\n      vertex.next = target.next;\r\n\r\n      if (vertex.next === null) {\r\n        this.tail = vertex;\r\n      } else {\r\n        vertex.next.prev = vertex;\r\n      }\r\n\r\n      target.next = vertex;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Appends a vertex to the end of the linked list\r\n\r\n    append: function(vertex) {\r\n      if (this.head === null) {\r\n        this.head = vertex;\r\n      } else {\r\n        this.tail.next = vertex;\r\n      }\r\n\r\n      vertex.prev = this.tail;\r\n      vertex.next = null; // the tail has no subsequent vertex\r\n\r\n      this.tail = vertex;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Appends a chain of vertices where 'vertex' is the head.\r\n\r\n    appendChain: function(vertex) {\r\n      if (this.head === null) {\r\n        this.head = vertex;\r\n      } else {\r\n        this.tail.next = vertex;\r\n      }\r\n\r\n      vertex.prev = this.tail;\r\n\r\n      // ensure that the 'tail' reference points to the last vertex of the chain\r\n\r\n      while (vertex.next !== null) {\r\n        vertex = vertex.next;\r\n      }\r\n\r\n      this.tail = vertex;\r\n\r\n      return this;\r\n    },\r\n\r\n    // Removes a vertex from the linked list\r\n\r\n    remove: function(vertex) {\r\n      if (vertex.prev === null) {\r\n        this.head = vertex.next;\r\n      } else {\r\n        vertex.prev.next = vertex.next;\r\n      }\r\n\r\n      if (vertex.next === null) {\r\n        this.tail = vertex.prev;\r\n      } else {\r\n        vertex.next.prev = vertex.prev;\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    // Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\r\n\r\n    removeSubList: function(a, b) {\r\n      if (a.prev === null) {\r\n        this.head = b.next;\r\n      } else {\r\n        a.prev.next = b.next;\r\n      }\r\n\r\n      if (b.next === null) {\r\n        this.tail = a.prev;\r\n      } else {\r\n        b.next.prev = a.prev;\r\n      }\r\n\r\n      return this;\r\n    },\r\n\r\n    isEmpty: function() {\r\n      return this.head === null;\r\n    }\r\n  });\r\n\r\n  // export\r\n\r\n  THREE.QuickHull = QuickHull;\r\n})();\r\n","/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\n(function() {\r\n  // ConvexGeometry\r\n\r\n  function ConvexGeometry(points) {\r\n    THREE.Geometry.call(this);\r\n\r\n    this.type = \"ConvexGeometry\";\r\n\r\n    this.fromBufferGeometry(new ConvexBufferGeometry(points));\r\n    this.mergeVertices();\r\n  }\r\n\r\n  ConvexGeometry.prototype = Object.create(THREE.Geometry.prototype);\r\n  ConvexGeometry.prototype.constructor = ConvexGeometry;\r\n\r\n  // ConvexBufferGeometry\r\n\r\n  function ConvexBufferGeometry(points) {\r\n    THREE.BufferGeometry.call(this);\r\n\r\n    this.type = \"ConvexBufferGeometry\";\r\n\r\n    // buffers\r\n\r\n    var vertices = [];\r\n    var normals = [];\r\n\r\n    // execute QuickHull\r\n\r\n    if (THREE.QuickHull === undefined) {\r\n      console.error(\r\n        \"THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on THREE.QuickHull\"\r\n      );\r\n    }\r\n\r\n    var quickHull = new THREE.QuickHull().setFromPoints(points);\r\n\r\n    // generate vertices and normals\r\n\r\n    var faces = quickHull.faces;\r\n\r\n    for (var i = 0; i < faces.length; i++) {\r\n      var face = faces[i];\r\n      var edge = face.edge;\r\n\r\n      // we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\r\n\r\n      do {\r\n        var point = edge.head().point;\r\n\r\n        vertices.push(point.x, point.y, point.z);\r\n        normals.push(face.normal.x, face.normal.y, face.normal.z);\r\n\r\n        edge = edge.next;\r\n      } while (edge !== face.edge);\r\n    }\r\n\r\n    // build geometry\r\n\r\n    this.addAttribute(\r\n      \"position\",\r\n      new THREE.Float32BufferAttribute(vertices, 3)\r\n    );\r\n    this.addAttribute(\"normal\", new THREE.Float32BufferAttribute(normals, 3));\r\n  }\r\n\r\n  ConvexBufferGeometry.prototype = Object.create(\r\n    THREE.BufferGeometry.prototype\r\n  );\r\n  ConvexBufferGeometry.prototype.constructor = ConvexBufferGeometry;\r\n\r\n  // export\r\n\r\n  THREE.ConvexGeometry = ConvexGeometry;\r\n  THREE.ConvexBufferGeometry = ConvexBufferGeometry;\r\n})();\r\n","/**\r\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = require(\"three\");\r\n\r\nTHREE.CSS3DObject = function(element) {\r\n  THREE.Object3D.call(this);\r\n\r\n  this.element = element;\r\n  this.element.style.position = \"absolute\";\r\n\r\n  this.addEventListener(\"removed\", function() {\r\n    if (this.element.parentNode !== null) {\r\n      this.element.parentNode.removeChild(this.element);\r\n    }\r\n  });\r\n};\r\n\r\nTHREE.CSS3DObject.prototype = Object.create(THREE.Object3D.prototype);\r\nTHREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject;\r\n\r\nTHREE.CSS3DSprite = function(element) {\r\n  THREE.CSS3DObject.call(this, element);\r\n};\r\n\r\nTHREE.CSS3DSprite.prototype = Object.create(THREE.CSS3DObject.prototype);\r\nTHREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite;\r\n\r\n//\r\n\r\nTHREE.CSS3DRenderer = function() {\r\n  console.log(\"THREE.CSS3DRenderer\", THREE.REVISION);\r\n\r\n  var _width, _height;\r\n\r\n  var matrix = new THREE.Matrix4();\r\n\r\n  var cache = {\r\n    camera: { fov: 0, style: \"\" },\r\n    objects: {}\r\n  };\r\n\r\n  var domElement = document.createElement(\"div\");\r\n  domElement.style.overflow = \"hidden\";\r\n\r\n  domElement.style.WebkitTransformStyle = \"preserve-3d\";\r\n  domElement.style.MozTransformStyle = \"preserve-3d\";\r\n  domElement.style.oTransformStyle = \"preserve-3d\";\r\n  domElement.style.transformStyle = \"preserve-3d\";\r\n\r\n  this.domElement = domElement;\r\n\r\n  var cameraElement = document.createElement(\"div\");\r\n\r\n  cameraElement.style.position = \"absolute\";\r\n  cameraElement.style.left = \"50%\";\r\n  cameraElement.style.top = \"50%\";\r\n\r\n  cameraElement.style.WebkitTransformStyle = \"preserve-3d\";\r\n  cameraElement.style.MozTransformStyle = \"preserve-3d\";\r\n  cameraElement.style.oTransformStyle = \"preserve-3d\";\r\n  cameraElement.style.transformStyle = \"preserve-3d\";\r\n\r\n  domElement.appendChild(cameraElement);\r\n\r\n  this.setClearColor = function() {};\r\n\r\n  // Added by Argo-lite, for optimization\r\n  this.isPaused = false;\r\n\r\n  this.getSize = function() {\r\n    return {\r\n      width: _width,\r\n      height: _height\r\n    };\r\n  };\r\n\r\n  this.setSize = function(width, height) {\r\n    _width = width;\r\n    _height = height;\r\n\r\n    domElement.style.width = width + \"px\";\r\n    domElement.style.height = height + \"px\";\r\n  };\r\n\r\n  function epsilon(value) {\r\n    return Math.abs(value) < Number.EPSILON ? 0 : value;\r\n  }\r\n\r\n  function getCameraCSSMatrix(matrix) {\r\n    var elements = matrix.elements;\r\n\r\n    return (\r\n      \"matrix3d(\" +\r\n      epsilon(elements[0]) +\r\n      \",\" +\r\n      epsilon(-elements[1]) +\r\n      \",\" +\r\n      epsilon(elements[2]) +\r\n      \",\" +\r\n      epsilon(elements[3]) +\r\n      \",\" +\r\n      epsilon(elements[4]) +\r\n      \",\" +\r\n      epsilon(-elements[5]) +\r\n      \",\" +\r\n      epsilon(elements[6]) +\r\n      \",\" +\r\n      epsilon(elements[7]) +\r\n      \",\" +\r\n      epsilon(elements[8]) +\r\n      \",\" +\r\n      epsilon(-elements[9]) +\r\n      \",\" +\r\n      epsilon(elements[10]) +\r\n      \",\" +\r\n      epsilon(elements[11]) +\r\n      \",\" +\r\n      epsilon(elements[12]) +\r\n      \",\" +\r\n      epsilon(-elements[13]) +\r\n      \",\" +\r\n      epsilon(elements[14]) +\r\n      \",\" +\r\n      epsilon(elements[15]) +\r\n      \")\"\r\n    );\r\n  }\r\n\r\n  function getObjectCSSMatrix(matrix) {\r\n    var elements = matrix.elements;\r\n\r\n    return (\r\n      \"translate3d(-50%,-50%,0) matrix3d(\" +\r\n      epsilon(elements[0]) +\r\n      \",\" +\r\n      epsilon(elements[1]) +\r\n      \",\" +\r\n      epsilon(elements[2]) +\r\n      \",\" +\r\n      epsilon(elements[3]) +\r\n      \",\" +\r\n      epsilon(-elements[4]) +\r\n      \",\" +\r\n      epsilon(-elements[5]) +\r\n      \",\" +\r\n      epsilon(-elements[6]) +\r\n      \",\" +\r\n      epsilon(-elements[7]) +\r\n      \",\" +\r\n      epsilon(elements[8]) +\r\n      \",\" +\r\n      epsilon(elements[9]) +\r\n      \",\" +\r\n      epsilon(elements[10]) +\r\n      \",\" +\r\n      epsilon(elements[11]) +\r\n      \",\" +\r\n      epsilon(elements[12]) +\r\n      \",\" +\r\n      epsilon(elements[13]) +\r\n      \",\" +\r\n      epsilon(elements[14]) +\r\n      \",\" +\r\n      epsilon(elements[15]) +\r\n      \")\"\r\n    );\r\n  }\r\n\r\n  function renderObject(object, camera) {\r\n    if (object instanceof THREE.CSS3DObject) {\r\n      var style;\r\n\r\n      if (object instanceof THREE.CSS3DSprite) {\r\n        // http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\r\n\r\n        matrix.copy(camera.matrixWorldInverse);\r\n        matrix.transpose();\r\n        matrix.copyPosition(object.matrixWorld);\r\n        matrix.scale(object.scale);\r\n\r\n        matrix.elements[3] = 0;\r\n        matrix.elements[7] = 0;\r\n        matrix.elements[11] = 0;\r\n        matrix.elements[15] = 1;\r\n\r\n        style = getObjectCSSMatrix(matrix);\r\n      } else {\r\n        style = getObjectCSSMatrix(object.matrixWorld);\r\n      }\r\n\r\n      var element = object.element;\r\n      var cachedStyle = cache.objects[object.id];\r\n\r\n      if (cachedStyle === undefined || cachedStyle !== style) {\r\n        element.style.WebkitTransform = style;\r\n        element.style.MozTransform = style;\r\n        element.style.oTransform = style;\r\n        element.style.transform = style;\r\n\r\n        cache.objects[object.id] = style;\r\n      }\r\n\r\n      if (element.parentNode !== cameraElement) {\r\n        cameraElement.appendChild(element);\r\n      }\r\n    }\r\n\r\n    for (var i = 0, l = object.children.length; i < l; i++) {\r\n      renderObject(object.children[i], camera);\r\n    }\r\n  }\r\n\r\n  this.render = function(scene, camera) {\r\n    if (this.isPaused) {\r\n      return;\r\n    }\r\n    var fov =\r\n      (0.5 / Math.tan(THREE.Math.degToRad(camera.getEffectiveFOV() * 0.5))) *\r\n      _height;\r\n\r\n    if (cache.camera.fov !== fov) {\r\n      domElement.style.WebkitPerspective = fov + \"px\";\r\n      domElement.style.MozPerspective = fov + \"px\";\r\n      domElement.style.oPerspective = fov + \"px\";\r\n      domElement.style.perspective = fov + \"px\";\r\n\r\n      cache.camera.fov = fov;\r\n    }\r\n\r\n    scene.updateMatrixWorld();\r\n\r\n    if (camera.parent === null) camera.updateMatrixWorld();\r\n\r\n    camera.matrixWorldInverse.getInverse(camera.matrixWorld);\r\n\r\n    var style =\r\n      \"translateZ(\" +\r\n      fov +\r\n      \"px)\" +\r\n      getCameraCSSMatrix(camera.matrixWorldInverse);\r\n\r\n    if (cache.camera.style !== style) {\r\n      cameraElement.style.WebkitTransform = style;\r\n      cameraElement.style.MozTransform = style;\r\n      cameraElement.style.oTransform = style;\r\n      cameraElement.style.transform = style;\r\n\r\n      cache.camera.style = style;\r\n    }\r\n\r\n    renderObject(scene, camera);\r\n  };\r\n};\r\n","var $ = require(\"jquery\");\r\n\r\nmodule.exports = function(THREE) {\r\n  /**\r\n   * @author qiao / https://github.com/qiao\r\n   * @author mrdoob / http://mrdoob.com\r\n   * @author alteredq / http://alteredqualia.com/\r\n   * @author WestLangley / http://github.com/WestLangley\r\n   * @author erich666 / http://erichaines.com\r\n   */\r\n\r\n  // This set of controls performs orbiting, dollying (zooming), and panning.\r\n  // Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n  //\r\n  //    Orbit - left mouse / touch: one finger move\r\n  //    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n  //    Pan - right mouse, or arrow keys / touch: three finter swipe\r\n\r\n  function OrbitControls(object, domElement, appState) {\r\n\r\n    \r\n    this.appState = appState;\r\n\r\n    this.object = object;\r\n\r\n    this.domElement = domElement !== undefined ? domElement : document;\r\n\r\n    // Set to false to disable this control\r\n    this.enabled = true;\r\n\r\n    // \"target\" sets the location of focus, where the object orbits around\r\n    this.target = new THREE.Vector3();\r\n\r\n    // How far you can dolly in and out ( PerspectiveCamera only )\r\n    this.minDistance = 0;\r\n    this.maxDistance = Infinity;\r\n\r\n    // How far you can zoom in and out ( OrthographicCamera only )\r\n    this.minZoom = 0;\r\n    this.maxZoom = Infinity;\r\n\r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians.\r\n    this.minPolarAngle = 0; // radians\r\n    this.maxPolarAngle = Math.PI; // radians\r\n\r\n    // How far you can orbit horizontally, upper and lower limits.\r\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    this.minAzimuthAngle = -Infinity; // radians\r\n    this.maxAzimuthAngle = Infinity; // radians\r\n\r\n    // Set to true to enable damping (inertia)\r\n    // If damping is enabled, you must call controls.update() in your animation loop\r\n    this.enableDamping = false;\r\n    this.dampingFactor = 0.25;\r\n\r\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n    // Set to false to disable zooming\r\n    this.enableZoom = true;\r\n    this.zoomSpeed = 1.0;\r\n\r\n    // Set to false to disable rotating\r\n    this.enableRotate = true;\r\n    this.rotateSpeed = 1.0;\r\n\r\n    // Set to false to disable panning\r\n    this.enablePan = true;\r\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\r\n\r\n    // Set to true to automatically rotate around the target\r\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n    this.autoRotate = false;\r\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n    // Set to false to disable use of the keys\r\n    this.enableKeys = true;\r\n\r\n    // The four arrow keys\r\n    this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40, SPACE: 32 };\r\n\r\n    // Mouse buttons\r\n    this.mouseButtons = {\r\n      ORBIT: THREE.MOUSE.LEFT,\r\n      ZOOM: THREE.MOUSE.MIDDLE,\r\n      PAN: THREE.MOUSE.RIGHT\r\n    };\r\n\r\n    // for reset\r\n    this.target0 = this.target.clone();\r\n    this.position0 = this.object.position.clone();\r\n    this.zoom0 = this.object.zoom;\r\n\r\n    // for space panning\r\n    this.spacePan = false;\r\n    this.bothPan = false;\r\n\r\n    //\r\n    // public methods\r\n    //\r\n\r\n    this.getPolarAngle = function() {\r\n      return spherical.phi;\r\n    };\r\n\r\n    this.getAzimuthalAngle = function() {\r\n      return spherical.theta;\r\n    };\r\n\r\n    this.reset = function() {\r\n      scope.target.copy(scope.target0);\r\n      scope.object.position.copy(scope.position0);\r\n      scope.object.zoom = scope.zoom0;\r\n\r\n      scope.object.updateProjectionMatrix();\r\n      scope.dispatchEvent(changeEvent);\r\n\r\n      scope.update();\r\n\r\n      state = STATE.NONE;\r\n    };\r\n\r\n    // this method is exposed, but perhaps it would be better if we can make it private...\r\n    this.update = (function() {\r\n      var offset = new THREE.Vector3();\r\n\r\n      // so camera.up is the orbit axis\r\n      var quat = new THREE.Quaternion().setFromUnitVectors(\r\n        object.up,\r\n        new THREE.Vector3(0, 1, 0)\r\n      );\r\n      var quatInverse = quat.clone().inverse();\r\n\r\n      var lastPosition = new THREE.Vector3();\r\n      var lastQuaternion = new THREE.Quaternion();\r\n\r\n      return function update() {\r\n        var position = scope.object.position;\r\n\r\n        offset.copy(position).sub(scope.target);\r\n\r\n        // rotate offset to \"y-axis-is-up\" space\r\n        offset.applyQuaternion(quat);\r\n\r\n        // angle from z-axis around y-axis\r\n        spherical.setFromVector3(offset);\r\n\r\n        if (scope.autoRotate && state === STATE.NONE) {\r\n          rotateLeft(getAutoRotationAngle());\r\n        }\r\n\r\n        spherical.theta += sphericalDelta.theta;\r\n        spherical.phi += sphericalDelta.phi;\r\n\r\n        // restrict theta to be between desired limits\r\n        spherical.theta = Math.max(\r\n          scope.minAzimuthAngle,\r\n          Math.min(scope.maxAzimuthAngle, spherical.theta)\r\n        );\r\n\r\n        // restrict phi to be between desired limits\r\n        spherical.phi = Math.max(\r\n          scope.minPolarAngle,\r\n          Math.min(scope.maxPolarAngle, spherical.phi)\r\n        );\r\n\r\n        spherical.makeSafe();\r\n\r\n        spherical.radius *= scale;\r\n\r\n        // restrict radius to be between desired limits\r\n        spherical.radius = Math.max(\r\n          scope.minDistance,\r\n          Math.min(scope.maxDistance, spherical.radius)\r\n        );\r\n\r\n        // move target to panned location\r\n        scope.target.add(panOffset);\r\n\r\n        offset.setFromSpherical(spherical);\r\n\r\n        // rotate offset back to \"camera-up-vector-is-up\" space\r\n        offset.applyQuaternion(quatInverse);\r\n\r\n        position.copy(scope.target).add(offset);\r\n\r\n        scope.object.lookAt(scope.target);\r\n\r\n        if (scope.enableDamping === true) {\r\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\r\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\r\n        } else {\r\n          sphericalDelta.set(0, 0, 0);\r\n        }\r\n\r\n        scale = 1;\r\n        panOffset.set(0, 0, 0);\r\n\r\n        // update condition is:\r\n        // min(camera displacement, camera rotation in radians)^2 > EPS\r\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n        if (\r\n          zoomChanged ||\r\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\r\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\r\n        ) {\r\n          scope.dispatchEvent(changeEvent);\r\n\r\n          lastPosition.copy(scope.object.position);\r\n          lastQuaternion.copy(scope.object.quaternion);\r\n          zoomChanged = false;\r\n\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      };\r\n    })();\r\n\r\n    this.dispose = function() {\r\n      scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\r\n      scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\r\n      scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\r\n\r\n      scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\r\n      scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\r\n      scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\r\n\r\n      document.removeEventListener(\"mousemove\", onMouseMove, false);\r\n      document.removeEventListener(\"mouseup\", onMouseUp, false);\r\n\r\n      window.removeEventListener(\"keydown\", onKeyDown, false);\r\n\r\n      //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n    };\r\n\r\n    //\r\n    // internals\r\n    //\r\n\r\n    var scope = this;\r\n    var changeEvent = { type: \"change\" };\r\n    var startEvent = { type: \"start\" };\r\n    var endEvent = { type: \"end\" };\r\n\r\n    var STATE = {\r\n      NONE: -1,\r\n      ROTATE: 0,\r\n      DOLLY: 1,\r\n      PAN: 2,\r\n      TOUCH_ROTATE: 3,\r\n      TOUCH_DOLLY: 4,\r\n      TOUCH_PAN: 5\r\n    };\r\n\r\n    var state = STATE.NONE;\r\n\r\n    var EPS = 0.000001;\r\n\r\n    // current position in spherical coordinates\r\n    var spherical = new THREE.Spherical();\r\n    var sphericalDelta = new THREE.Spherical();\r\n\r\n    var scale = 1;\r\n    var panOffset = new THREE.Vector3();\r\n    var zoomChanged = false;\r\n\r\n    var rotateStart = new THREE.Vector2();\r\n    var rotateEnd = new THREE.Vector2();\r\n    var rotateDelta = new THREE.Vector2();\r\n\r\n    var panStart = new THREE.Vector2();\r\n    var panEnd = new THREE.Vector2();\r\n    var panDelta = new THREE.Vector2();\r\n\r\n    var dollyStart = new THREE.Vector2();\r\n    var dollyEnd = new THREE.Vector2();\r\n    var dollyDelta = new THREE.Vector2();\r\n\r\n    function getAutoRotationAngle() {\r\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\r\n    }\r\n\r\n    function getZoomScale() {\r\n      return Math.pow(0.95, scope.zoomSpeed);\r\n    }\r\n\r\n    function rotateLeft(angle) {\r\n      sphericalDelta.theta -= angle;\r\n    }\r\n\r\n    function rotateUp(angle) {\r\n      sphericalDelta.phi -= angle;\r\n    }\r\n\r\n    var panLeft = (function() {\r\n      var v = new THREE.Vector3();\r\n\r\n      return function panLeft(distance, objectMatrix) {\r\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n        v.multiplyScalar(-distance);\r\n\r\n        panOffset.add(v);\r\n      };\r\n    })();\r\n\r\n    var panUp = (function() {\r\n      var v = new THREE.Vector3();\r\n\r\n      return function panUp(distance, objectMatrix) {\r\n        v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\r\n        v.multiplyScalar(distance);\r\n\r\n        panOffset.add(v);\r\n      };\r\n    })();\r\n\r\n    // deltaX and deltaY are in pixels; right and down are positive\r\n    var pan = (function() {\r\n      var offset = new THREE.Vector3();\r\n\r\n      return function pan(deltaX, deltaY) {\r\n        var element =\r\n          scope.domElement === document\r\n            ? scope.domElement.body\r\n            : scope.domElement;\r\n\r\n        if (scope.object instanceof THREE.PerspectiveCamera) {\r\n          // perspective\r\n          var position = scope.object.position;\r\n          offset.copy(position).sub(scope.target);\r\n          var targetDistance = offset.length();\r\n\r\n          // half of the fov is center to top of screen\r\n          targetDistance *= Math.tan(\r\n            ((scope.object.fov / 2) * Math.PI) / 180.0\r\n          );\r\n\r\n          // we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n          panLeft(\r\n            (2 * deltaX * targetDistance) / element.clientHeight,\r\n            scope.object.matrix\r\n          );\r\n          panUp(\r\n            (2 * deltaY * targetDistance) / element.clientHeight,\r\n            scope.object.matrix\r\n          );\r\n        } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n          // orthographic\r\n          panLeft(\r\n            (deltaX * (scope.object.right - scope.object.left)) /\r\n              scope.object.zoom /\r\n              element.clientWidth,\r\n            scope.object.matrix\r\n          );\r\n          panUp(\r\n            (deltaY * (scope.object.top - scope.object.bottom)) /\r\n              scope.object.zoom /\r\n              element.clientHeight,\r\n            scope.object.matrix\r\n          );\r\n        } else {\r\n          // camera neither orthographic nor perspective\r\n          console.warn(\r\n            \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\r\n          );\r\n          scope.enablePan = false;\r\n        }\r\n      };\r\n    })();\r\n\r\n    // Expose panning for external usage\r\n    this.pan = pan;\r\n\r\n\r\n    function dollyIn(dollyScale, mousePos, event) {\r\n      if (scope.object instanceof THREE.PerspectiveCamera) {\r\n        scale /= dollyScale;\r\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n        scope.object.zoom = Math.max(\r\n          scope.minZoom,\r\n          Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\r\n        );\r\n        scope.object.updateProjectionMatrix();\r\n        zoomChanged = true;\r\n      } else {\r\n        console.warn(\r\n          \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\r\n        );\r\n        scope.enableZoom = false;\r\n      }\r\n    }\r\n\r\n    function dollyOut(dollyScale, mousePos) {\r\n      if (scope.object instanceof THREE.PerspectiveCamera) {\r\n        scale *= dollyScale;\r\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n        scope.object.zoom = Math.max(\r\n          scope.minZoom,\r\n          Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\r\n        );\r\n        scope.object.updateProjectionMatrix();\r\n        zoomChanged = true;\r\n      } else {\r\n        console.warn(\r\n          \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\r\n        );\r\n        scope.enableZoom = false;\r\n      }\r\n    }\r\n\r\n    //public zoom in function, used when zoom in button clicked\r\n    this.dollyIn = function(scale) {\r\n      dollyIn(scale);\r\n      scope.update()\r\n    }\r\n    //public zoom out function, used when zoom out button clicked\r\n    this.dollyOut = function(scale) {\r\n      dollyOut(scale);\r\n      scope.update()\r\n    }\r\n\r\n    //\r\n    // event callbacks - update the object state\r\n    //\r\n\r\n    function handleMouseDownRotate(event) {\r\n      //console.log( 'handleMouseDownRotate' );\r\n\r\n      rotateStart.set(event.clientX, event.clientY);\r\n    }\r\n\r\n    function handleMouseDownDolly(event) {\r\n      //console.log( 'handleMouseDownDolly' );\r\n      dollyStart.set(event.clientX, event.clientY);\r\n    }\r\n\r\n    function handleMouseDownPan(event) {\r\n      //console.log( 'handleMouseDownPan' );\r\n\r\n      panStart.set(event.clientX, event.clientY);\r\n    }\r\n\r\n    function handleMouseMoveRotate(event) {\r\n      //console.log( 'handleMouseMoveRotate' );\r\n    \r\n      rotateEnd.set(event.clientX, event.clientY);\r\n      rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n      var element =\r\n        scope.domElement === document\r\n          ? scope.domElement.body\r\n          : scope.domElement;\r\n\r\n      // rotating across whole screen goes 360 degrees around\r\n      rotateLeft(\r\n        ((2 * Math.PI * rotateDelta.x) / element.clientWidth) *\r\n          scope.rotateSpeed\r\n      );\r\n\r\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n      rotateUp(\r\n        ((2 * Math.PI * rotateDelta.y) / element.clientHeight) *\r\n          scope.rotateSpeed\r\n      );\r\n\r\n      rotateStart.copy(rotateEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleMouseMoveDolly(event) {\r\n      //console.log( 'handleMouseMoveDolly' );\r\n      dollyEnd.set(event.clientX, event.clientY);\r\n\r\n      dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n      if (dollyDelta.y > 0) {\r\n        dollyIn(getZoomScale());\r\n      } else if (dollyDelta.y < 0) {\r\n        dollyOut(getZoomScale());\r\n      }\r\n\r\n      dollyStart.copy(dollyEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleMouseMovePan(event) {\r\n      //console.log( 'handleMouseMovePan' );\r\n\r\n      panEnd.set(event.clientX, event.clientY);\r\n\r\n      panDelta.subVectors(panEnd, panStart);\r\n\r\n      pan(panDelta.x, panDelta.y);\r\n\r\n      panStart.copy(panEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleMouseUp(event) {\r\n      //console.log( 'handleMouseUp' );\r\n    }\r\n\r\n    function handleMouseWheel(event) {\r\n      \r\n      mousePos = {x: event.clientX, y: event.clientY}\r\n\r\n      if (event.deltaY < 0) {\r\n        dollyOut(getZoomScale(), mousePos, event);\r\n      } else if (event.deltaY > 0) {\r\n        dollyIn(getZoomScale(), mousePos, event);\r\n      }\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleKeyUp(event) {\r\n      switch (event.keyCode) {\r\n        case scope.keys.SPACE:\r\n          if (scope.spacePan == true) {\r\n            scope.spacePanStart = false;\r\n            state = STATE.NONE;\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    function handleKeyDown(event) {\r\n      //console.log( 'handleKeyDown' );\r\n\r\n      switch (event.keyCode) {\r\n        case scope.keys.UP:\r\n          pan(0, scope.keyPanSpeed);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.BOTTOM:\r\n          pan(0, -scope.keyPanSpeed);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.LEFT:\r\n          pan(scope.keyPanSpeed, 0);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.RIGHT:\r\n          pan(-scope.keyPanSpeed, 0);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.SPACE:\r\n          if (scope.spacePan == true) {\r\n            scope.spacePanStart = true;\r\n            state = STATE.PAN;\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    function handleTouchStartRotate(event) {\r\n      //console.log( 'handleTouchStartRotate' );\r\n\r\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    }\r\n\r\n    function handleTouchStartDolly(event) {\r\n      //console.log( 'handleTouchStartDolly' );\r\n\r\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      dollyStart.set(0, distance);\r\n    }\r\n\r\n    function handleTouchStartPan(event) {\r\n      //console.log( 'handleTouchStartPan' );\r\n\r\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    }\r\n\r\n    function handleTouchMoveRotate(event) {\r\n      //console.log( 'handleTouchMoveRotate' );\r\n\r\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n      rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n      var element =\r\n        scope.domElement === document\r\n          ? scope.domElement.body\r\n          : scope.domElement;\r\n\r\n      // rotating across whole screen goes 360 degrees around\r\n      rotateLeft(\r\n        ((2 * Math.PI * rotateDelta.x) / element.clientWidth) *\r\n          scope.rotateSpeed\r\n      );\r\n\r\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n      rotateUp(\r\n        ((2 * Math.PI * rotateDelta.y) / element.clientHeight) *\r\n          scope.rotateSpeed\r\n      );\r\n\r\n      rotateStart.copy(rotateEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleTouchMoveDolly(event) {\r\n      //console.log( 'handleTouchMoveDolly' );\r\n\r\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n      var distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      dollyEnd.set(0, distance);\r\n\r\n      dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n      if (dollyDelta.y > 0) {\r\n        dollyOut(getZoomScale());\r\n      } else if (dollyDelta.y < 0) {\r\n        dollyIn(getZoomScale());\r\n      }\r\n\r\n      dollyStart.copy(dollyEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleTouchMovePan(event) {\r\n      //console.log( 'handleTouchMovePan' );\r\n\r\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n      panDelta.subVectors(panEnd, panStart);\r\n\r\n      pan(panDelta.x, panDelta.y);\r\n\r\n      panStart.copy(panEnd);\r\n\r\n      scope.update();\r\n    }\r\n\r\n    function handleTouchEnd(event) {\r\n      //console.log( 'handleTouchEnd' );\r\n    }\r\n\r\n    //\r\n    // event handlers - FSM: listen for events and reset state\r\n    //\r\n\r\n    function onMouseDown(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n\r\n      if (event.button === scope.mouseButtons.ORBIT) {\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleMouseDownRotate(event);\r\n\r\n        state = STATE.ROTATE;\r\n      } else if (event.button === scope.mouseButtons.ZOOM) {\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleMouseDownDolly(event);\r\n\r\n        state = STATE.DOLLY;\r\n      } else if (event.button === scope.mouseButtons.PAN) {\r\n        if (scope.enablePan === false) return;\r\n\r\n        if (!scope.spacePan || scope.bothPan) {\r\n          handleMouseDownPan(event);\r\n\r\n          state = STATE.PAN;\r\n        }\r\n      }\r\n\r\n      if (state !== STATE.NONE) {\r\n        document.addEventListener(\"mousemove\", onMouseMove, false);\r\n        document.addEventListener(\"mouseup\", onMouseUp, false);\r\n\r\n        scope.dispatchEvent(startEvent);\r\n      }\r\n    }\r\n\r\n    function onMouseMove(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n\r\n      if (state === STATE.ROTATE) {\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleMouseMoveRotate(event);\r\n      } else if (state === STATE.DOLLY) {\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleMouseMoveDolly(event);\r\n      } else if (state === STATE.PAN) {\r\n        if (scope.enablePan === false) return;\r\n\r\n        if (scope.spacePan == true) {\r\n          if (scope.spacePanStart == true) {\r\n            handleMouseDownPan(event);\r\n            scope.spacePanStart = false;\r\n          }\r\n        }\r\n\r\n        handleMouseMovePan(event);\r\n      }\r\n    }\r\n\r\n    function onMouseUp(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      handleMouseUp(event);\r\n\r\n      //document.removeEventListener( 'mousemove', onMouseMove, false );\r\n      document.removeEventListener(\"mouseup\", onMouseUp, false);\r\n\r\n      scope.dispatchEvent(endEvent);\r\n\r\n      state = STATE.NONE;\r\n    }\r\n\r\n    function onMouseWheel(event) {\r\n      if (\r\n        scope.enabled === false ||\r\n        scope.enableZoom === false ||\r\n        (state !== STATE.NONE && state !== STATE.ROTATE)\r\n      )\r\n        return;\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      handleMouseWheel(event);\r\n\r\n      scope.dispatchEvent(startEvent); // not sure why these are here...\r\n      scope.dispatchEvent(endEvent);\r\n    }\r\n\r\n    function onKeyDown(event) {\r\n      if (\r\n        scope.enabled === false ||\r\n        scope.enableKeys === false ||\r\n        scope.enablePan === false\r\n      )\r\n        return;\r\n\r\n      document.addEventListener(\"mousemove\", onMouseMove, false);\r\n\r\n      handleKeyDown(event);\r\n    }\r\n\r\n    function onKeyUp(event) {\r\n      if (\r\n        scope.enabled === false ||\r\n        scope.enableKeys === false ||\r\n        scope.enablePan === false\r\n      )\r\n        return;\r\n\r\n      handleKeyUp(event);\r\n    }\r\n\r\n    function onTouchStart(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      switch (event.touches.length) {\r\n        case 1: // one-fingered touch: rotate\r\n          if (scope.enableRotate === false) return;\r\n\r\n          handleTouchStartRotate(event);\r\n\r\n          state = STATE.TOUCH_ROTATE;\r\n\r\n          break;\r\n\r\n        case 2: // two-fingered touch: dolly\r\n          if (scope.enableZoom === false) return;\r\n\r\n          handleTouchStartDolly(event);\r\n\r\n          state = STATE.TOUCH_DOLLY;\r\n\r\n          break;\r\n\r\n        case 3: // three-fingered touch: pan\r\n          if (scope.enablePan === false) return;\r\n\r\n          handleTouchStartPan(event);\r\n\r\n          state = STATE.TOUCH_PAN;\r\n\r\n          break;\r\n\r\n        default:\r\n          state = STATE.NONE;\r\n      }\r\n\r\n      if (state !== STATE.NONE) {\r\n        scope.dispatchEvent(startEvent);\r\n      }\r\n    }\r\n\r\n    function onTouchMove(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      switch (event.touches.length) {\r\n        case 1: // one-fingered touch: rotate\r\n          if (scope.enableRotate === false) return;\r\n          if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\r\n\r\n          handleTouchMoveRotate(event);\r\n\r\n          break;\r\n\r\n        case 2: // two-fingered touch: dolly\r\n          if (scope.enableZoom === false) return;\r\n          if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\r\n\r\n          handleTouchMoveDolly(event);\r\n\r\n          break;\r\n\r\n        case 3: // three-fingered touch: pan\r\n          if (scope.enablePan === false) return;\r\n          if (state !== STATE.TOUCH_PAN) return; // is this needed?...\r\n\r\n          handleTouchMovePan(event);\r\n\r\n          break;\r\n\r\n        default:\r\n          state = STATE.NONE;\r\n      }\r\n    }\r\n\r\n    function onTouchEnd(event) {\r\n      if (scope.enabled === false) return;\r\n\r\n      handleTouchEnd(event);\r\n\r\n      scope.dispatchEvent(endEvent);\r\n\r\n      state = STATE.NONE;\r\n    }\r\n\r\n    function onContextMenu(event) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    //\r\n\r\n    scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\r\n\r\n    scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\r\n    scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\r\n\r\n    scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\r\n    scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\r\n    scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\r\n\r\n    window.addEventListener(\"keydown\", onKeyDown, false);\r\n    window.addEventListener(\"keyup\", onKeyUp, false);\r\n\r\n    // force an update at start\r\n\r\n    this.update();\r\n\r\n    \r\n    \r\n  }\r\n\r\n  OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\r\n  OrbitControls.prototype.constructor = OrbitControls;\r\n\r\n  Object.defineProperties(OrbitControls.prototype, {\r\n    center: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .center has been renamed to .target\"\r\n        );\r\n        return this.target;\r\n      }\r\n    },\r\n\r\n    // backward compatibility\r\n\r\n    noZoom: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\r\n        );\r\n        return !this.enableZoom;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\r\n        );\r\n        this.enableZoom = !value;\r\n      }\r\n    },\r\n\r\n    noRotate: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\r\n        );\r\n        return !this.enableRotate;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\r\n        );\r\n        this.enableRotate = !value;\r\n      }\r\n    },\r\n\r\n    noPan: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\r\n        );\r\n        return !this.enablePan;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\r\n        );\r\n        this.enablePan = !value;\r\n      }\r\n    },\r\n\r\n    noKeys: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\r\n        );\r\n        return !this.enableKeys;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\r\n        );\r\n        this.enableKeys = !value;\r\n      }\r\n    },\r\n\r\n    staticMoving: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\r\n        );\r\n        return !this.enableDamping;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\r\n        );\r\n        this.enableDamping = !value;\r\n      }\r\n    },\r\n\r\n    dynamicDampingFactor: {\r\n      get: function() {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\r\n        );\r\n        return this.dampingFactor;\r\n      },\r\n\r\n      set: function(value) {\r\n        console.warn(\r\n          \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\r\n        );\r\n        this.dampingFactor = value;\r\n      }\r\n    }\r\n  });\r\n\r\n  \r\n\r\n  return OrbitControls;\r\n};\r\n","var def = require(\"../imports\").default;\r\nvar appState = require(\"../../../stores\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\nmodule.exports = function(self) {\r\n  /**\r\n   * Calculates coordinates of mouse on canvas adjusted for padding\r\n   * @param {*} event\r\n   * @param {*} currentElement\r\n   */\r\n  self.relMouseCoords = function(pageX, pageY, currentElement) {\r\n    var totalOffsetX = 0;\r\n    var totalOffsetY = 0;\r\n    var canvasX = 0;\r\n    var canvasY = 0;\r\n\r\n    do {\r\n      totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\r\n      totalOffsetY += currentElement.offsetTop - currentElement.scrollTop ;\r\n    } while ((currentElement = currentElement.offsetParent));\r\n\r\n    canvasX = pageX - totalOffsetX;\r\n    canvasY = pageY - totalOffsetY;\r\n\r\n    return { x: canvasX, y: canvasY };\r\n  };\r\n\r\n  /**\r\n   * Add metadata to node\r\n   * @param {*} node\r\n   */\r\n  self.prepNode = function(node) {\r\n    let nodeToAdd = node;\r\n    if (!node.data) {\r\n      node.data = {};\r\n    }\r\n\r\n    let hexToRGB = (hex) => {\r\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n      return result ? \r\n      new THREE.Color(appState.graph.edges.color)\r\n      : null;\r\n  }\r\n    nodeToAdd.renderData = {\r\n      label: node.data.label || \"No Label\",\r\n      color: node.data.color || def.NODE_COLOR,\r\n      hcolor: node.data.hcolor || def.NODE_HIGHLIGHT,\r\n      shape: node.data.shape || def.NODE_SHAPE,\r\n      linecolor:  hexToRGB(appState.graph.edges.color),\r\n      numYeast: Math.ceil(Math.random() * 8),\r\n      size: node.data.size,\r\n      tsize: node.data.tsize || def.TEXT_SIZE,\r\n      x: 0,\r\n      y: 0,\r\n      vx: 0,\r\n      vy: 0\r\n    };\r\n    return nodeToAdd;\r\n  };\r\n\r\n  /**\r\n   * Creates a generic rectangle shape to use for selection and boundaries\r\n   */\r\n  self.make1x1Rect = function() {\r\n    var rectShape = new THREE.Shape();\r\n    rectShape.moveTo(0, 0);\r\n    rectShape.lineTo(0, 1);\r\n    rectShape.lineTo(1, 1);\r\n    rectShape.lineTo(1, 0);\r\n    rectShape.lineTo(0, 0);\r\n    rectShape.lineTo(0, 1);\r\n    return new THREE.ShapeGeometry(rectShape);\r\n  };\r\n\r\n  /**\r\n   * Creates a centered 2x2 Rectangle\r\n   */\r\n  self.make2x2Rect = function() {\r\n    var rectShape = new THREE.Shape();\r\n    rectShape.moveTo(-1, -1);\r\n    rectShape.lineTo(-1, 1);\r\n    rectShape.lineTo(1, 1);\r\n    rectShape.lineTo(1, -1);\r\n    rectShape.lineTo(-1, -1);\r\n    return new THREE.ShapeGeometry(rectShape);\r\n  };\r\n\r\n  /**\r\n   *  find radius of circle given the volume\r\n   * @param {*} volume\r\n   */\r\n  self.volToRadius = function(volume) {\r\n    return Math.pow((volume / Math.PI) * (3.0 / 4.0), 1.0 / 3.0);\r\n  };\r\n};\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar MeshLine = def.MeshLine;\r\nvar MeshLineMaterial = def.MeshLineMaterial;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\nconst { default: appState } = require(\"../../stores\");\r\n\r\n// import { Line2 } from '../src/lines/Line2.js';\r\n// import { LineMaterial } from '../src/lines/LineMaterial.js';\r\n// import { LineGeometry } from '../src/lines/LineGeometry.js';\r\n\r\n\r\nmodule.exports = function(self) {\r\n  /**\r\n   * Creates or converts ngraph or d3 graph\r\n   */\r\n  self.setupGraph = function() {\r\n    var createNGraph = require(\"ngraph.graph\");\r\n    self.graph = createNGraph();\r\n    if (self.inGraph) {\r\n      self.updateGraph(self.inGraph);\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  Create layout using d3\r\n   */\r\n  self.setupLayout = function() {\r\n    if (self.options.layout == \"ngraph\") {\r\n      self.setupNgraphLayout();\r\n    } else if (self.options.layout == \"d3\") {\r\n      self.setupD3Layout();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set graph layout to ngraph\r\n   */\r\n  self.setupNgraphLayout = function() {\r\n    self.force = require(\"ngraph.forcelayout\")(self.graph);\r\n  };\r\n\r\n  /**\r\n   * Set graph layout to D3 Force Directed and set decay parameters\r\n   */\r\n  self.setupD3Layout = function() {\r\n    self.force = d3\r\n      .forceSimulation()\r\n      .force(\"charge\", d3.forceManyBody().strength(-1))\r\n      .force(\"link\", d3.forceLink())\r\n      .force(\"y\", d3.forceY(0).strength(0.001))\r\n      .force(\"x\", d3.forceX(0).strength(0.001))\r\n      .stop();\r\n\r\n    // set alpha decay to be lower than the default 0.0228\r\n    // so force layout does not prematurely stop\r\n    self.force.alphaDecay(0.005);\r\n\r\n    // set velocity decay to be lower than the default 0.4\r\n    // so nodes move to their final locations\r\n    self.force.velocityDecay(0.1);\r\n  };\r\n\r\n  self.setDisplayParams = function() {\r\n    self.element = document.getElementById(\"graph-container\");\r\n    self.containerDiv = document.querySelector(\"#graph-container\");\r\n    self.clientRect = self.element.getBoundingClientRect();\r\n    self.width = self.containerDiv.offsetWidth;\r\n    self.height = self.containerDiv.offsetHeight;\r\n    self.aspect = self.width / self.height;\r\n    self.resolution = new THREE.Vector2(self.width, self.height);\r\n  };\r\n\r\n  self.setRendererParams = function() {\r\n    self.renderer.setSize(self.width, self.height);\r\n    self.cssRenderer = new THREE.CSS3DRenderer();\r\n    self.cssRenderer.setSize(self.width, self.height);\r\n    self.cssRenderer.domElement.style.position = \"absolute\";\r\n    self.cssRenderer.domElement.style.top = 0;\r\n    self.minimapRenderer.domElement.style.position = \"absolute\";\r\n    self.minimapRenderer.domElement.style.bottom = \"50px\";\r\n    self.minimapRenderer.domElement.style.offsetBottom = 50;  //numberic value of the minimap bottom offset for mouse position locate \r\n    self.minimapRenderer.domElement.style.left = 0;\r\n    self.minimapRenderer.setSize(0.2 * self.height, 0.2 * self.height);\r\n    self.minimapRenderer.zIndex = 1000;\r\n    self.renderer.setPixelRatio(window.devicePixelRatio);\r\n  };\r\n\r\n  /**\r\n   *  Create initial camera and parameters\r\n   */\r\n  self.setupCamera = function() {\r\n    self.ccamera = new THREE.PerspectiveCamera(\r\n      self.fov,\r\n      self.width / self.height,\r\n      self.near,\r\n      self.far\r\n    );\r\n    self.ccamera.position.z = 200;\r\n    var controls = new OrbitControls(self.ccamera, self.element, appState);\r\n    \r\n    //add orbitcontrols to appstate\r\n    appState.controls = controls\r\n\r\n    controls.spacePan = true; // Space bar panning\r\n    controls.bothPan = true; // Space bar and right click panning\r\n    controls.minDistance = 10;\r\n    controls.maxDistance = self.renderWidth * 2;\r\n    controls.target.set(0, 0, 0);\r\n    controls.enableRotate = false;\r\n    self.controls = controls;\r\n  };\r\n\r\n  /**\r\n   *  Create minimap\r\n   */\r\n  self.setupMinimap = function() {\r\n    self.minimap = {};\r\n    self.minimap.camera = new THREE.PerspectiveCamera(\r\n      self.fov,\r\n      1,\r\n      self.near,\r\n      self.far\r\n    );\r\n    self.minimap.camera.position.z = self.renderWidth * 2;\r\n\r\n    (self.oldCoords = {\r\n      x: null,\r\n      y: null,\r\n      z: null\r\n    }),\r\n      /**\r\n       * Pan the ccamera according to mouse position on screen (should be called only when mouse is on minimap)\r\n       * @param coordX mouse position on screen returned by relMouseCoords\r\n       * @param coordY mouse position on screen returned by relMouseCoords\r\n       */\r\n      (self.minimap.panToMousePosition = function(coordX, coordY) {\r\n        // ensures that the camera position is updated from the last pan.\r\n        if (\r\n          self.ccamera.position.x == self.oldCoords.x &&\r\n          self.ccamera.position.y == self.oldCoords.y &&\r\n          self.ccamera.position.z == self.oldCoords.z\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        self.oldCoords.x = self.ccamera.position.x;\r\n        self.oldCoords.y = self.ccamera.position.y;\r\n        self.oldCoords.z = self.ccamera.position.z;\r\n\r\n        // 850 is an approximation\r\n        const coefficient = (self.height - 200) / self.ccamera.position.z;\r\n\r\n        self.controls.pan(\r\n          ((coordX / self.minimap.width) * 4000 -\r\n            2000 -\r\n            self.ccamera.position.x) *\r\n            -coefficient,\r\n          (((self.height - coordY) / self.minimap.height) * 4000 -\r\n            2000 -\r\n            self.ccamera.position.y) *\r\n            coefficient\r\n        );\r\n      });\r\n\r\n      appState.panToMousePosition = self.minimap.panToMousePosition;\r\n  };\r\n\r\n  /**\r\n   *  Create initial scene geometry and attributes\r\n   */\r\n  self.setupGeometry = function() {\r\n    self.scene = new THREE.Scene();\r\n\r\n    self.points = new THREE.BufferGeometry();\r\n    self.nodes = new THREE.Group();\r\n    self.scene.add(self.nodes);\r\n\r\n    if (def.LINES == \"fancy\") {\r\n      self.setupFancyEdges();\r\n    } else {\r\n      self.setUpSimpleEdges();\r\n    }\r\n\r\n    var rect = self.make1x1Rect();\r\n\r\n    self.setupSelectionBox(rect);\r\n    self.setupBoundaries(rect);\r\n    self.setupViewPort(rect);\r\n  };\r\n\r\n  /**\r\n   * Setup data structures for fancy edges\r\n   */\r\n  self.setupFancyEdges = function() {\r\n    self.edges = new THREE.BufferGeometry();\r\n    var positions = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n    var colors = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n\r\n    self.edges.addAttribute(\"position\", positions);\r\n    self.edges.addAttribute(\"color\", colors);\r\n    const geometry = new LineGeometry();\r\n    geometry.setPositions( self.edges.attributes.positions );\r\n    geometry.setColors( self.edges.attributes.colors );\r\n\r\n    matLine = new LineMaterial( {\r\n\r\n      color: 0xffffff,\r\n      linewidth: 5, // in world units with size attenuation, pixels otherwise\r\n      vertexColors: true,\r\n\r\n      //resolution:  // to be set by renderer, eventually\r\n      dashed: false,\r\n      alphaToCoverage: true,\r\n\r\n    } );\r\n\r\n    var line = new Line2( geometry, matLine );\r\n    line.computeLineDistances();\r\n    line.scale.set( 1, 1, 1 );\r\n    scene.add( line );\r\n  };\r\n\r\n  /**\r\n   * Sets up data structures for simple edges\r\n   */\r\n  self.setUpSimpleEdges = function() {\r\n    self.edges = new THREE.BufferGeometry();\r\n    var material = new THREE.LineBasicMaterial({\r\n      linewidth: 2,\r\n      color: 0xffffff,\r\n      vertexColors: THREE.VertexColors,\r\n      shading: THREE.FlatShading\r\n    });\r\n    self.line = new THREE.LineSegments(self.edges, material);\r\n    self.line.frustumCulled = false;\r\n    self.scene.add(self.line);\r\n\r\n    var positions = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n    var colors = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n\r\n    self.edges.addAttribute(\"position\", positions);\r\n    self.edges.addAttribute(\"color\", colors);\r\n\r\n    /**Adding triangles for directed edges update*/\r\n    self.directedArrows = new THREE.BufferGeometry();\r\n    var arrowMaterial = new THREE.MeshBasicMaterial({\r\n      color: 0xffffff,\r\n    });\r\n    self.arrow = new THREE.Mesh(self.directedArrows, arrowMaterial);\r\n    self.arrow.frustumCulled = false;\r\n    self.scene.add(self.arrow)\r\n    var arrowPositions = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n    var arrowColors = new THREE.BufferAttribute(\r\n      new Float32Array(self.MAX_LINES * 3),\r\n      3\r\n    );\r\n\r\n    self.directedArrows.addAttribute(\"position\", arrowPositions);\r\n    self.directedArrows.addAttribute(\"color\", arrowColors);\r\n    \r\n    self.drawCount = 0;\r\n  };\r\n\r\n  /**\r\n   * Adds box to screen that is displayed when selecting groups of nodes\r\n   */\r\n  self.setupSelectionBox = function(rect) {\r\n    self.selectBox = new THREE.Line(\r\n      rect,\r\n      new THREE.LineBasicMaterial({ linewidth: 3, color: 0x3399aa })\r\n    );\r\n    self.selectBox.visible = false;\r\n    self.scene.add(self.selectBox);\r\n  };\r\n\r\n  /**\r\n   * Sets boundaries for max edges of graph\r\n   */\r\n  self.setupBoundaries = function(rect) {\r\n    self.boundaries = new THREE.Line(\r\n      rect,\r\n      new THREE.LineBasicMaterial({ linewidth: 3, color: 0x999999 })\r\n    ); \r\n    self.scene.add(self.boundaries);\r\n    self.setBoundarySize(self.renderWidth * 2);\r\n  };\r\n\r\n  /**\r\n   * Sets viewport to match size of display\r\n   */\r\n  self.setupViewPort = function(rect) {\r\n    self.viewPort = new THREE.Line(\r\n      rect,\r\n      new THREE.LineBasicMaterial({ linewidth: 3, color: self.darkMode? 0xffffff : 0x000000})\r\n    );\r\n    self.scene.add(self.viewPort);\r\n    self.setViewPortSize(self.ccamera);\r\n  };\r\n\r\n  /**\r\n   *  Creates listeners and events for selecting nodes\r\n   */\r\n  self.setupSelect = function() {\r\n    self.points.addAttribute(\r\n      \"position\",\r\n      new THREE.BufferAttribute(new Float32Array(20 * 3), 3)\r\n    );\r\n    self.points.computeBoundingSphere();\r\n    self.nodeCount = 0;\r\n    var mouseHandler = function(callback) {\r\n      return function(event) {\r\n        event.preventDefault();\r\n        let pageX, pageY;\r\n        if (event.touches && event.touches.length > 0) {\r\n          // for touch events\r\n          pageX = event.touches.item(0).pageX;\r\n          pageY = event.touches.item(0).pageY;\r\n        } else {\r\n          pageX = event.pageX;\r\n          pageY = event.pageY;\r\n        }\r\n        \r\n        var coords = self.relMouseCoords(pageX, pageY, this);\r\n        var mouseX = (coords.x / self.width) * 2 - 1;\r\n        var mouseY = 1 - (coords.y / self.height) * 2;\r\n        var mousePosition = new THREE.Vector3(mouseX, mouseY, 1);\r\n        mousePosition.unproject(self.ccamera);\r\n        var dir = mousePosition.sub(self.ccamera.position).clone();\r\n        mousePosition.normalize();\r\n        // Determine whether mouse is on minimap\r\n\r\n        self.isMouseCoordinatesOnMinimap =\r\n          coords.x <= self.minimap.width &&\r\n          self.height - coords.y <= (self.minimap.height + self.minimapRenderer.domElement.style.offsetBottom) &&\r\n          self.height - coords.y >= self.minimapRenderer.domElement.style.offsetBottom;\r\n        if (self.isMouseCoordinatesOnMinimap) {\r\n          self.minimap.mouseX = coords.x;\r\n          self.minimap.mouseY = coords.y + self.minimapRenderer.domElement.style.offsetBottom;\r\n        }\r\n\r\n        // Determine intersects\r\n        var raycaster = new THREE.Raycaster(\r\n          self.ccamera.position,\r\n          mousePosition\r\n        );\r\n\r\n        // Find real location of mouse\r\n        var distance = -self.ccamera.position.z / dir.z;\r\n        var pos = self.ccamera.position\r\n          .clone()\r\n          .add(dir.multiplyScalar(distance));\r\n\r\n        if (callback == self.onRightClick && event.which != 3) {\r\n          return;\r\n        }\r\n\r\n        if (\r\n          callback == self.onRightClick &&\r\n          event.target.getAttribute(\"contenteditable\")\r\n        ) {\r\n          event.target.focus();\r\n        } else {\r\n          event.preventDefault();\r\n          if (callback == self.onRightClick) {\r\n            self.onRightClickCoords(event);\r\n          }\r\n          self.callMouseHandler(event, raycaster, pos, callback);\r\n        }\r\n      };\r\n    };\r\n\r\n    //Add listeners to web page\r\n    self.setupMouseHandlers(mouseHandler);\r\n  };\r\n\r\n  /**\r\n   * Checks if a node has been clicked, and calls the appropriate mouse handler function\r\n   */\r\n  self.callMouseHandler = function(event, raycaster, pos, callback) {\r\n    var intersects = raycaster.intersectObjects(self.nodes.children);\r\n    if (intersects.length) {\r\n      // If a node has been clicked\r\n      var nodeIndex = intersects[0].object.index;\r\n      self.oldIntersect = nodeIndex;\r\n      callback(\r\n        self.graph.getNode(nodeIndex),\r\n        pos.x,\r\n        pos.y,\r\n        event.button,\r\n        event.ctrlKey\r\n      );\r\n    } else {\r\n      callback(null, pos.x, pos.y, event.button, event.ctrlKey);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Add Mouse Event Listeners to page\r\n   */\r\n  self.setupMouseHandlers = function(mouseHandler) {\r\n    self.element.addEventListener(\r\n      \"mousemove\",\r\n      mouseHandler(self.onMouseMove),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"mousedown\",\r\n      mouseHandler(self.onMouseDown),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"mouseup\",\r\n      mouseHandler(self.onMouseUp),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"mouseup\",\r\n      mouseHandler(self.onRightClick),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"touchstart\",\r\n      mouseHandler(self.onMouseDown),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"touchmove\",\r\n      mouseHandler(self.onMouseMove),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"touchend\",\r\n      mouseHandler(self.onMouseUp),\r\n      false\r\n    );\r\n    self.element.addEventListener(\r\n      \"touchcancel\",\r\n      mouseHandler(self.onMouseUp),\r\n      false\r\n    );\r\n  };\r\n};\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\nvar $ = require(\"jquery\");\r\n\r\nmodule.exports = function(self) {\r\n  self.addNode = function(node) {\r\n    self.graph.addNode(node.id, node.data);\r\n    var graphNode = self.graph.getNode(node.id);\r\n    graphNode.x = node.x;\r\n    graphNode.y = node.y;\r\n    graphNode.fx = node.fx;\r\n    graphNode.fy = node.fy;\r\n    graphNode.pinnedx = node.fx != undefined;\r\n    graphNode.pinnedy = node.fy != undefined;\r\n    self.prepNode(graphNode);\r\n    self.drawNode(graphNode);\r\n    graphNode.links = [];\r\n    self.layoutInit = true;\r\n    return graphNode;\r\n  };\r\n\r\n  self.removeNode = function(node) {\r\n    if (!node || !node.id) {\r\n      return;\r\n    }\r\n    self.removeGraphEdges(node);\r\n    self.undrawEdges(node);\r\n    self.nodes.remove(node.renderData.draw_object);\r\n    self.graph.removeNode(node.id);\r\n    self.undrawNode(node);\r\n    self.nodeCount -= 1;\r\n  };\r\n\r\n  self.removeGraphEdges = function(node) {\r\n    var nodeLinks = self.graph.getLinks(node.id);\r\n    if (nodeLinks) {\r\n      nodeLinks.forEach(function(edge) {\r\n        self.graph.removeLink(edge);\r\n      });\r\n    }\r\n  };\r\n\r\n  self.undrawNode = function(node) {\r\n    var nodes = self.force.nodes();\r\n    if (nodes) {\r\n      for (var i = 0; i < nodes.length; i++) {\r\n        if (nodes[i].id == node.id) {\r\n          self.scene.remove(nodes[i].renderData.draw_object);\r\n          nodes[i].renderData.textHolder.children[0].element.hidden = true;\r\n          nodes.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  self.undrawEdges = function(node) {\r\n    var positions = self.edges.attributes.position.array;\r\n    var colors = self.edges.attributes.color.array;\r\n    var killed = 0;\r\n    for (var i = 0; i - killed < self.lineIndices.length; i++) {\r\n      if (\r\n        self.lineIndices[i - killed].source.id == node.id ||\r\n        self.lineIndices[i - killed].target.id == node.id\r\n      ) {\r\n        for (var j = i - killed; j < self.lineIndices.length; j++) {\r\n          var k = j + 1;\r\n          if (k == self.lineIndices.length) {\r\n            positions[j * 6] = 0;\r\n            positions[j * 6 + 1] = 0;\r\n            positions[j * 6 + 3] = 0;\r\n            positions[j * 6 + 4] = 0;\r\n            colors[j * 6] = 255;\r\n            colors[j * 6 + 1] = 160;\r\n            colors[j * 6 + 2] = 80;\r\n            colors[j * 6 + 3] = 255;\r\n            colors[j * 6 + 4] = 160;\r\n            colors[j * 6 + 5] = 80;\r\n          } else {\r\n            self.lineIndices[j] = self.lineIndices[k];\r\n            self.lineObjects[j * 2] = self.lineObjects[k * 2];\r\n            self.lineObjects[j * 2 + 1] = self.lineObjects[k * 2 + 1];\r\n            positions[j * 6] = positions[k * 6];\r\n            positions[j * 6 + 1] = positions[k * 6 + 1];\r\n            positions[j * 6 + 3] = positions[k * 6 + 3];\r\n            positions[j * 6 + 4] = positions[k * 6 + 4];\r\n            colors[j * 6] = colors[k * 6];\r\n            colors[j * 6 + 1] = colors[k * 6 + 1];\r\n            colors[j * 6 + 2] = colors[k * 6 + 2];\r\n            colors[j * 6 + 3] = colors[k * 6 + 3];\r\n            colors[j * 6 + 4] = colors[k * 6 + 4];\r\n            colors[j * 6 + 5] = colors[k * 6 + 5];\r\n          }\r\n        }\r\n        self.lineIndices.pop();\r\n        self.lineObjects.pop();\r\n        self.lineObjects.pop();\r\n        self.drawCount -= 2;\r\n        killed += 1;\r\n      }\r\n    }\r\n    // console.log(\"Deleted \" + killed.toString() + \" edges\");\r\n  };\r\n\r\n  self.getNode = function(node_id) {\r\n    return self.graph.getNode(node_id);\r\n  };\r\n\r\n  self.addEdge = function(source, target, visible = true) {\r\n    var withinState = (source.data.ref.GEOID === target.data.ref.GEOID)\r\n    var withinFamily = (source.data.ref.Family === target.data.ref.Family)\r\n    var locdata = {\r\n      fromlocLatY: source.data.ref.LatY,\r\n      fromlocLonX : source.data.ref.LonX,\r\n      tolocLatY : target.data.ref.LatY,\r\n      tolocLonX: target.data.ref.LonX,\r\n      withinState: withinState,\r\n      withinFamily: withinFamily\r\n    }\r\n    self.graph.addLink(source.id, target.id,locdata);\r\n    self.drawEdge(self.getNode(source.id), self.getNode(target.id), visible);\r\n  };\r\n};\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\nmodule.exports = function (self) {\r\n  /**\r\n   *  Change color of node edges\r\n   */\r\n  self.highlightNode = function (node, toggle, color = def.NODE_HIGHLIGHT) {\r\n    // if (toggle) {\r\n    //   node.renderData.draw_object.children[0].material.color.setHex(color);\r\n    //   node.renderData.draw_object.children[0].visible = false;\r\n    // } else {\r\n    //   node.renderData.draw_object.children[0].material.color.set(\r\n    //     node.renderData.hcolor\r\n    //   );\r\n    //   node.renderData.draw_object.children[0].visible = false;\r\n    // }\r\n  };\r\n\r\n  /**\r\n   *  Highlight edges from and to a node and hide others\r\n   */\r\n  self.highlightEdges = function (node, toggle) {\r\n    const froms = [];\r\n    const tos = [];\r\n    for (var i = 0; i < self.selection.length; i++) {\r\n      for (var j = 0; j < self.selection[i].links.length; j++) {\r\n        if(!self.selection[i]) continue\r\n        froms.push(self.selection[i].links[j].fromId);\r\n        tos.push(self.selection[i].links[j].toId);\r\n      }\r\n    }\r\n    if (toggle) {\r\n      for (var i = 0; i < node.links.length; i++) {\r\n        froms.push(node.links[i].fromId);\r\n        tos.push(node.links[i].toId);\r\n      }\r\n      self.highlightNeighbors(node, froms, tos);\r\n    } else {\r\n      self.highlightNeighbors(node, froms, tos);\r\n    }\r\n  };\r\n\r\n /**\r\n   *  Highlight edges and nodes on the path \r\n   */\r\n  self.highlightPathEdgeNode = function (pathnode) {\r\n\r\n    \r\n    if(pathnode.length==0){\r\n      //no path selected \r\n      self.graph.forEachNode(function (n) {\r\n        self.colorNodeOpacity(n, 1);\r\n      })\r\n      self.highlightAllEdges()\r\n      return \r\n    }\r\n    //first dehighlight all nodes \r\n    self.graph.forEachNode(function (n) {\r\n\r\n      self.colorNodeOpacity(n, 0.2);\r\n    })\r\n\r\n    pathnode.forEach((node)=>{\r\n     self.colorNodeOpacity(node, 1);\r\n    })\r\n    self.highlightNode(pathnode[0], true)\r\n    self.highlightNode(pathnode[pathnode.length - 1], true)\r\n    // pathnode[0].renderData.draw_object.children[0].material.color.setHex(def.NODE_HIGHLIGHT);\r\n    // pathnode[pathnode.length - 1].renderData.draw_object.children[0].material.color.setHex(def.NODE_HIGHLIGHT);\r\n    \r\n\r\n    //highlight edges\r\n    let red = new THREE.Color(appState.graph.edges.color).r;\r\n    let blue = new THREE.Color(appState.graph.edges.color).g;\r\n    let green = new THREE.Color(appState.graph.edges.color).b;\r\n    \r\n    //first dehighlight all edges\r\n    self.lineIndices.forEach(function (link) {\r\n      link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n      link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n      link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n    })\r\n    //undirected \r\n    //then highlight only the node's edges\r\n    // for (let i = 0; i < pathnode.length-1; i++) {\r\n    //   self.lineIndices.forEach(function (link) {\r\n    //     if ((link.source.id == pathnode[i].id && link.target.id == pathnode[i+1].id) || (link.source.id == pathnode[i+1].id && link.target.id == pathnode[i].id))  {\r\n    //       link.linecolor.r = red;\r\n    //       link.linecolor.g = blue;\r\n    //       link.linecolor.b = green;\r\n    //     }\r\n    //   })\r\n    // } \r\n    const pathnnodeid = pathnode.map(p=>p.id)\r\n    self.lineIndices.forEach(function (link) {\r\n      if ((( pathnnodeid.indexOf(link.source.id)!==-1 && pathnnodeid.indexOf(link.target.id )!==-1)) || (( pathnnodeid.indexOf(link.target.id)!==-1 && pathnnodeid.indexOf(link.source.id )!==-1)))  {\r\n        link.linecolor.r = red;\r\n        link.linecolor.g = blue;\r\n        link.linecolor.b = green;\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Highlight adjacent nodes\r\n   * \r\n   * Also highlights edges.\r\n   */\r\n  self.highlightNeighbors = function (node, froms, tos) {\r\n    self.graph.forEachNode(n => {\r\n      if (self.selection.indexOf(n) != -1 || n == node) {\r\n        // If the node is selected or the node is the node to be highlighted\r\n        self.colorNodeOpacity(n, 1);\r\n        self.colorNodeEdge(n);  //set the node.renderData.linecolor , i.e. color edges by nodes  \r\n        // for (var i = 0; n.linkObjs && i < n.linkObjs.length; i++) {\r\n        //   n.linkObjs[i].linecolor = n.renderData.linecolor;\r\n        // }\r\n      } else if (\r\n        self.doHighlightNeighbors &&\r\n        (froms.indexOf(n.id) != -1 || tos.indexOf(n.id) != -1)\r\n      ) {\r\n        // If the node is not selected or highlighted and\r\n        // if the node is present in either froms or tos arrays\r\n        self.colorNodeOpacity(n, 1);\r\n        // self.colorNodeEdge(n, false);\r\n      } else if (\r\n        !self.prevHighlights ||\r\n        self.prevHighlights.indexOf(n.id) == -1\r\n      ) {\r\n        self.colorNodeOpacity(n, 0.2);\r\n        // self.colorNodeEdge(n, false);\r\n        self.highlightNode(n, false, def.ADJACENT_HIGHLIGHT);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   *  Change color of node edges\r\n   */\r\n  //  self.colorNodeEdge = function(node, isHighlighted) {\r\n  //   let red = new THREE.Color(appState.graph.edges.color).r;\r\n  //   let blue = new THREE.Color(appState.graph.edges.color).g;\r\n  //   let green = new THREE.Color(appState.graph.edges.color).b;\r\n  //   if(isHighlighted) {\r\n  //     node.renderData.linecolor.r = red;\r\n  //     node.renderData.linecolor.g = blue;\r\n  //     node.renderData.linecolor.b = green;\r\n  //     self.arrow.material.color.setRGB(red, blue, green);\r\n  //   } else {\r\n  //     node.renderData.linecolor.r =  self.darkMode ? 0.25 : .75;\r\n  //     node.renderData.linecolor.g = self.darkMode ? 0.25 : .75;\r\n  //     node.renderData.linecolor.b = self.darkMode ? 0.25 : .75;\r\n  //   }\r\n\r\n  // };\r\n\r\n\r\n  self.colorNodeEdge = function (node) {\r\n    let red = new THREE.Color(appState.graph.edges.color).r;\r\n    let blue = new THREE.Color(appState.graph.edges.color).g;\r\n    let green = new THREE.Color(appState.graph.edges.color).b;\r\n    if (!node) {  //highlight all the edges \r\n\r\n\r\n      self.lineIndices.forEach(function (link) {\r\n\r\n        link.linecolor.r = red;\r\n        link.linecolor.g = blue;\r\n        link.linecolor.b = green;\r\n      })\r\n\r\n    } else {                     //only highlight the node's edges\r\n      //first dehighlight all edges\r\n      self.lineIndices.forEach(function (link) {\r\n        link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n        link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n        link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n      })\r\n      //then highlight only the node's edges\r\n      self.lineIndices.forEach(function (link) {\r\n        if (link.source.id == node.id || link.target.id == node.id) {\r\n          link.linecolor.r = red;\r\n          link.linecolor.g = blue;\r\n          link.linecolor.b = green;\r\n        }\r\n      })\r\n\r\n\r\n    }\r\n\r\n    // if (isHighlighted) {\r\n    //   self.lineIndices.forEach(function (link) {\r\n    //     if (link.source.id == node.id || link.target.id == node.id) {\r\n    //       link.linecolor.r = red;\r\n    //       link.linecolor.g = blue;\r\n    //       link.linecolor.b = green;\r\n    //     } else {\r\n    //       link.linecolor.r = self.darkMode ? 0.25 : 0.89;\r\n    //       link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n    //       link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n    //     }\r\n\r\n    //   })\r\n\r\n    //   // node.renderData.linecolor.r = red;\r\n    //   // node.renderData.linecolor.g = blue;\r\n    //   // node.renderData.linecolor.b = green;\r\n    //   self.arrow.material.color.setRGB(red, blue, green);\r\n\r\n    // } else {\r\n    //   self.lineIndices.forEach(function (link) {\r\n    //     link.linecolor.r = self.darkMode ? 0.25 : 0.89;\r\n    //     link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n    //     link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n    //   })\r\n\r\n      // node.renderData.linecolor.r =  self.darkMode ? 0.25 : 0.89;\r\n      // node.renderData.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n      // node.renderData.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n    }\r\n\r\n  // };\r\n\r\n\r\n\r\n  /**\r\n   *  Change node opacity\r\n   */\r\n  self.colorNodeOpacity = function (node, op) {\r\n    node.renderData.draw_object.material.opacity = op;\r\n  };\r\n  self.colorNode = function (node, op) {\r\n    node.renderData.draw_object.material.color.setHex(op);\r\n  }\r\n};\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\nvar $ = require(\"jquery\");\r\nconst { default: appState } = require(\"../../stores\");\r\n\r\nmodule.exports = function (self) {\r\n  \r\n\r\n\r\n  /**\r\n   * Mouse move event that selections nodes in selection box\r\n   */\r\n  self.onMouseMove = function (selection, mouseX, mouseY, button, ctrl) {  \r\n    // check if left button is not down\r\n    self.mouseX = mouseX;\r\n    self.mouseY = mouseY;\r\n    if (self.leftMouseDown && self.mouseDown) {\r\n      appState.graph.mapClicked = null\r\n      appState.graph.areaSelected = undefined;\r\n      // appState.graph.networkClicked = null\r\n      \r\n      // left-clicked empty space (i.e., not clicking a node)\r\n      if (!self.dragging && self.selection.indexOf(selection) == -1 && !ctrl) {\r\n        self.clearSelection();\r\n        // appState.graph.mapClicked = null\r\n        // appState.graph.degreeselection = []\r\n        // appState.graph.degreebrushed = false\r\n      }\r\n      \r\n\r\n\r\n      if (!self.dragging) {\r\n        // add nodes enclosed by selection box into node selection\r\n        self.checkSelection(mouseX, mouseY);\r\n      }\r\n    }\r\n\r\n    \r\n\r\n\r\n    if (self.selection.length > 0) {\r\n      // reactivate (in D3's terminology: reheat) the force layout\r\n      if (self.dragging) {\r\n        self.force.alpha(1);\r\n      }\r\n      // update position of nodes in selection\r\n      self.updateSelection(mouseX, mouseY);\r\n    }\r\n\r\n    if (!self.mouseDown) {\r\n      self.onHover(selection);\r\n      self.mouseStart = new THREE.Vector3(mouseX, mouseY, 0);\r\n    } else {\r\n      // if mouse is in minimap, do nothing else\r\n      if (self.isMouseCoordinatesOnMinimap && self.mapShowing) {\r\n        self.minimap.panToMousePosition(\r\n          self.minimap.mouseX,\r\n          self.minimap.mouseY\r\n        );\r\n        return;\r\n      }\r\n\r\n\r\n\r\n      // update selection box size/position\r\n      if (self.leftMouseDown && !self.dragging) {\r\n        if (self.showBox) {\r\n          self.selectBox.visible = true;\r\n          self.showBox = false;\r\n        }\r\n        self.selectBox.position.x = mouseX;\r\n        self.selectBox.position.y = mouseY;\r\n        var diffx = self.mouseStart.x - mouseX;\r\n        var diffy = self.mouseStart.y - mouseY;\r\n        self.selectBox.scale.set(diffx, diffy, 1);\r\n      } else {\r\n        self.selectBox.visible = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Mouse hover over node event that highlights the node and neighbors at mouse position\r\n   */\r\n  self.onHover = function (node) {\r\n    if(appState.graph.mapClicked) return;\r\n    if(appState.graph.pathHovered && appState.graph.pathHovered.pathnode.length>0) return;\r\n    if(self.selection.length>0) return;\r\n    if (self.lastHover && self.selection.indexOf(self.lastHover) == -1) {\r\n      self.highlightNode(self.lastHover, false);\r\n      self.lastHover.renderData.textHolder.children[0].element.hideme = true;\r\n      self.highlightEdges(node, false);\r\n    }\r\n    self.lastHover = node;\r\n    if (node) {\r\n      // self.highlightNode(node, true);\r\n      // node.renderData.textHolder.children[0].element.hideme = false;\r\n      // self.highlightEdges(node, true);\r\n      self.highlightClickNode(node)\r\n      //set currently hovered node\r\n      appState.graph.currentlyHovered = node;\r\n    } else if (self.selection.length == 0) {\r\n      self.graph.forEachNode(n => {\r\n        self.colorNodeOpacity(n, 1);\r\n        \r\n        self.highlightNode(n, false, def.ADJACENT_HIGHLIGHT);\r\n      });\r\n      self.colorNodeEdge(null);\r\n      appState.graph.currentlyHovered = null;\r\n    }\r\n    // if (self.prevHighlights != undefined) {\r\n    //   for (var i = 0; i < self.prevHighlights.length; i++) {\r\n    //     self.colorNodeOpacity(self.prevHighlights[i], 1);\r\n    //     self.highlightNode(self.prevHighlights[i], true, def.SEARCH_HIGHLIGHT);\r\n    //   }\r\n    // }\r\n  };\r\n  \r\n\r\n\r\n\r\n\r\n  // vars to get time at mouse press and time at mouse release\r\n  var startTime = 0;\r\n  var endTime = 0;\r\n  /**\r\n   * Mouse down event to start a selection box or start dragging a node\r\n   */\r\n  self.onMouseDown = function (selection, mouseX, mouseY, button, ctrl) {\r\n    // console.log(\"triggered\")\r\n    // if mouse is in minimap, do nothing else\r\n    if (self.isMouseCoordinatesOnMinimap && self.mapShowing) {\r\n      self.mouseDown = true;\r\n      self.minimap.panToMousePosition(self.minimap.mouseX, self.minimap.mouseY);\r\n      return;\r\n    }\r\n\r\n    \r\n\r\n    self.leftMouseDown = true;\r\n    if (self.leftMouseDown) {\r\n      self.mouseDown = true;\r\n      self.mouseStart = new THREE.Vector3(mouseX, mouseY, 0);\r\n      if (button == 0 && !self.dragging) {\r\n        self.showBox = true;\r\n      }\r\n\r\n      \r\n      \r\n      if (self.selection.indexOf(selection) == -1 && !ctrl) {\r\n        for (var i = 0; i < self.selection.length; i++) {\r\n          self.selection[i].renderData.isSelected = false;\r\n          if (!def.NODE_NO_HIGHLIGHT) {\r\n            self.selection[\r\n              i\r\n            ].renderData.draw_object.children[0].visible = false;\r\n            // self.selection[\r\n            //   i\r\n            // ].renderData.draw_object.material.opacity = 0.2;\r\n          } else {\r\n            self.selection[i].renderData.draw_object.material.color.set(\r\n              new THREE.Color(self.selection[i].renderData.color)\r\n            );\r\n          }\r\n          self.selection[\r\n            i\r\n          ].renderData.textHolder.children[0].element.hideme = true;\r\n          // self.selection[\r\n          //   i\r\n          // ].renderData.draw_object.material.opacity = 0.2;\r\n        }\r\n        self.selection = [];\r\n      }\r\n\r\n\r\n      if(selection) {\r\n        //when any node is clicked, un-smartpause if smartpaused\r\n        //appState.graph.smartPause.lastUnpaused = Date.now(); //old code using lastUnpaused\r\n        appState.graph.smartPause.interactingWithGraph = true;\r\n        \r\n        \r\n        \r\n      }\r\n\r\n\r\n\r\n      \r\n\r\n\r\n      //captures click times to measure time distance between clicks\r\n      oldStartTime = startTime;\r\n      startTime = Date.now();\r\n\r\n      //keeps track of time difference\r\n      clickDifference = startTime - oldStartTime;\r\n\r\n      //sets whether or not last click was \r\n      //double click or not\r\n      // console.log(clickDifference)\r\n      if (clickDifference < 500) {\r\n        self.doubleClicked = true;\r\n        \r\n      } else {\r\n        self.doubleClicked = false;\r\n      }\r\n\r\n      \r\n\r\n      //selects single node when dragged\r\n      if (selection) {\r\n        self.dragging = selection;\r\n        if (self.selection.indexOf(selection) == -1) {\r\n          self.selection.push(selection);\r\n          selection.renderData.isSelected = false;\r\n        }\r\n      }\r\n\r\n    //   if(self.selection.length == 1){\r\n          \r\n    //     appState.graph.mapClicked = self.selection[0]\r\n      \r\n    // }\r\n\r\n      if (selection) {\r\n        self.dragging = selection;\r\n        //only pins node if double-clicked\r\n        if (self.doubleClicked) {\r\n          //passing in 'selection' node to pass information for node to pin\r\n          // self.updateSelection(self.dragging.x, self.dragging.y, selection);\r\n\r\n        } else if (ctrl) {\r\n          self.selection.splice(self.selection.indexOf(selection), 1);\r\n          selection.renderData.isSelected = false;\r\n          if (!def.NODE_NO_HIGHLIGHT) {\r\n            selection.renderData.draw_object.children[0].visible = false;\r\n            // selection.renderData.draw_object.material.opacity = 0.2;\r\n          } else {\r\n            selection.renderData.draw_object.material.color.set(\r\n              new THREE.Color(self.selection[i].renderData.color)\r\n            );\r\n          }\r\n          selection.renderData.textHolder.children[0].element.hideme = true;\r\n          // selection.renderData.draw_object.material.opacity = 0.2;\r\n          self.dragging = null;\r\n        }\r\n      } else {\r\n        if (self.newNodeIds) {\r\n          self.highlightNodeIds([], true);\r\n          self.newNodeIds = undefined;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Mouse up event that closes selection flags and emits selection to Argo\r\n   */\r\n  self.onMouseUp = function (selection, mouseX, mouseY, button) {\r\n    endTime = Date.now();\r\n    self.mouseDown = false;\r\n\r\n    //when not clicking, nodes aren't being interacted with\r\n    appState.graph.smartPause.interactingWithGraph = false;\r\n    appState.graph.mapClicked = null\r\n    appState.graph.areaSelected = undefined;\r\n    appState.graph.degreeselection = []\r\n    appState.graph.degreebrushed = false\r\n    \r\n    self.updateSelectionOpacity();\r\n\r\n    if(self.selection.length == 1){\r\n      const thenode = self.selection[0]\r\n      self.highlightClickNode(thenode)\r\n      appState.graph.mapClicked = thenode\r\n      // self.selection = self.getNeighborNodesFromGraph(thenode);\r\n      appState.graph.selectedNodes = self.getNeighborNodesFromGraph(thenode);\r\n        \r\n      \r\n      // appState.graph.networkClicked = thenode\r\n    }\r\n\r\n    if(self.selection.length == 0){\r\n      appState.graph.mapClicked = null\r\n      appState.graph.areaSelected = undefined;\r\n    }\r\n\r\n    // if(self.selection.length>0){\r\n    //   const tselection = self.selection.map(n=>n)\r\n    //   appState.graph.selectedNodes = tselection\r\n    // }\r\n    \r\n  \r\n    // Left or right mouse button\r\n    if (true) {\r\n      self.showBox = false;\r\n      self.dragging = null;\r\n      self.selectBox.visible = false;\r\n\r\n      self.ee.emit(\"select-nodes\", self.selection);\r\n      \r\n    }\r\n\r\n  };\r\n\r\n\r\n\r\n  /**\r\n   * Right click event to save right clicked node\r\n   */\r\n  self.onRightClick = function (selection) {\r\n    if (selection) {\r\n      self.rightClickedNode = selection;\r\n    } else {\r\n      self.rightClickedNode = null;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Right click event that emits context menu event to Argo\r\n   */\r\n  self.onRightClickCoords = function (event) {\r\n    // Don't show menu if dragging camera\r\n    if (endTime - startTime < 200) {\r\n      self.ee.emit(\"right-click\", {\r\n        pageX: event.pageX,\r\n        pageY: event.pageY\r\n      });\r\n    }\r\n  };\r\n};","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\nmodule.exports = function(self) {\r\n  /**\r\n   * Set all nodes to a size\r\n   */\r\n  self.setUniformNodeSize = function(s) {\r\n    self.graph.forEachNode(function(node) {\r\n      node.renderData.draw_object.scale.set(s, s, 1);\r\n      var hsize = 1 + def.HIGHLIGHT_SIZE / s;\r\n      node.renderData.draw_object.children[0].scale.set(hsize, hsize, 1);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Set all nodes to a size based on a value in the node's data\r\n   */\r\n  self.setNodeDataSize = function(dataValue) {\r\n    self.graph.forEachNode(function(node) {\r\n      dataVal = node.renderData[dataValue];\r\n      if (!dataVal) {\r\n        console.log(\"Data value does not exist\");\r\n      } else {\r\n        dataVal = Math.log(dataVal + 1);\r\n        node.renderData.draw_object.scale.set(dataVal, dataVal, 1);\r\n        var hsize = 1 + def.HIGHLIGHT_SIZE / dataVal;\r\n        node.renderData.draw_object.children[0].scale.set(hsize, hsize, 1);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Set all nodes to a color\r\n   */\r\n  self.setUniformNodeColor = function(hsvDegree) {\r\n    self.graph.forEachNode(function(node) {\r\n      node.renderData.draw_object.material.color.set(\r\n        new THREE.Color(\"hsl(\" + hsvDegree + \", 100%, 43%)\")\r\n      );\r\n      if (!def.NODE_NO_HIGHLIGHT) {\r\n        node.renderData.draw_object.children[0].material.color.set(\r\n          new THREE.Color(\"hsl(\" + hsvDegree + \", 100%, 63%)\")\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Set all nodes to a color based on a value in the node's data\r\n   */\r\n  self.setNodeDataColor = function(dataValue) {\r\n    var i = 0;\r\n    values = [];\r\n    min = null;\r\n    max = null;\r\n\r\n    self.graph.forEachNode(function(node) {\r\n      if ((dataVal = node.renderData[dataValue])) {\r\n        if (min == null) min = dataVal;\r\n        if (max == null) max = dataVal;\r\n        if (dataVal < min) min = dataVal;\r\n        else if (dataVal > max) max = dataVal;\r\n        values[i] = dataVal;\r\n        i += 1;\r\n      } else {\r\n        values[i] = -1;\r\n      }\r\n    });\r\n\r\n    i = 0;\r\n    self.graph.forEachNode(function(node) {\r\n      var hsvDegree;\r\n      if (values[i] == -1) {\r\n        hsvDegree = 0;\r\n      } else {\r\n        values[i] = (values[i] - min) / (max - min);\r\n        hsvDegree = values[i] * 120;\r\n      }\r\n      node.renderData.draw_object.material.color.set(\r\n        new THREE.Color(\"hsl(\" + hsvDegree + \", 100%, 48%)\")\r\n      );\r\n      if (!def.NODE_NO_HIGHLIGHT) {\r\n        node.renderData.draw_object.children[0].material.color.set(\r\n          new THREE.Color(\"hsl(\" + hsvDegree + \", 100%, 63%)\")\r\n        );\r\n      }\r\n      i++;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Map a node attribute based on some mapping function\r\n   */\r\n  self.mapNodeAttributes = function(mapping, nodes = null) {\r\n    let val;\r\n    if (mapping[0] == \"degree\") {\r\n      val = node => (node.links ? node.links.length + 2 : 2);\r\n    } else if (mapping[0] == \"scalex\") {\r\n      val = node => node.renderData.draw_object.scale.x;\r\n    } else {\r\n      val = node => mapping[0];\r\n    }\r\n\r\n    let mod;\r\n    if (mapping[1] == \"volume\") {\r\n      mod = val => self.volToRadius(val);\r\n    } else if (mapping[1] == \"mult\") {\r\n      mod = val => val * mapping[3](val);\r\n    } else if (mapping[1] == \"add\") {\r\n      mod = val => val + mapping[3](val);\r\n    } else if (mapping[1] == \"log\") {\r\n      mod = val => Math.log(val);\r\n    } else {\r\n      mod = val => val;\r\n    }\r\n\r\n    let attr;\r\n    if (mapping[2] == \"scalexy\") {\r\n      attr = (node, val) => {\r\n        node.renderData.draw_object.scale.set(val, val, 1);\r\n        var hsize = 1 + def.HIGHLIGHT_SIZE / val;\r\n        node.renderData.draw_object.children[0].scale.set(hsize, hsize, 1);\r\n      };\r\n    } else if (mapping[2] == \"edgeColorRed\") {\r\n      attr = (node, val) => {\r\n        node.renderData.linecolor.r = 1;\r\n        node.renderData.linecolor.b = 1 - val / 5;\r\n        node.renderData.linecolor.g = 1 - val / 5;\r\n      };\r\n    } else if (mapping[2] == \"edgeColorBlue\") {\r\n      attr = (node, val) => {\r\n        node.renderData.linecolor.b = 1;\r\n        node.renderData.linecolor.r = 1 - val / 5;\r\n        node.renderData.linecolor.g = 1 - val / 5;\r\n      };\r\n    } else if (mapping[2] == \"edgeColorGreen\") {\r\n      attr = (node, val) => {\r\n        node.renderData.linecolor.g = 1;\r\n        node.renderData.linecolor.b = 1 - val / 5;\r\n        node.renderData.linecolor.r = 1 - val / 5;\r\n      };\r\n    } else if (mapping[2] == \"nodeColorBlue\") {\r\n      attr = (node, val) => {\r\n        node.renderData.draw_object.material.color.b = 1;\r\n        node.renderData.draw_object.material.color.r = 1 - val / 5;\r\n        node.renderData.draw_object.material.color.g = 1 - val / 5;\r\n      };\r\n    } else if (mapping[2] == \"pinned\") {\r\n      attr = (node, val) => {\r\n        node.pinnedx = val;\r\n        node.pinnedy = val;\r\n      };\r\n    } else if (mapping[2] == \"labelSize\") {\r\n      attr = (node, val) => {\r\n        self.changeLabelFontSize(node, val);\r\n      };\r\n    } else if (mapping[2] == \"labelLength\") {\r\n      attr = (node, val) => {\r\n        self.changeLabelLength(node, val);\r\n      };\r\n    }\r\n\r\n    self.changeNodes(val, mod, attr, nodes);\r\n  };\r\n\r\n  /**\r\n   *  get attribute from node using function val\r\n   *  modify result with function mode\r\n   *  set node attribute with attr\r\n   */\r\n  self.changeNode = function(val, mod, attr, node) {\r\n    var v = val(node);\r\n    if (v != undefined) {\r\n      var r = mod(v);\r\n      if (r != undefined) {\r\n        attr(node, r);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  perform changeNode on many nodes\r\n   */\r\n  self.changeNodes = function(val, mod, attr, nodes = null) {\r\n    if (nodes == null) {\r\n      self.graph.forEachNode(function(node) {\r\n        self.changeNode(val, mod, attr, node);\r\n      });\r\n    } else {\r\n      for (var i = 0; i < nodes.length; i++) {\r\n        self.changeNode(val, mod, attr, nodes[i]);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Limit label size by (estimated) characters\r\n   * This is only accurate if the label is monospaced\r\n   */\r\n  self.changeLabelLength = function(node, numChars) {\r\n    node.renderData.textHolder.children[0].element.children[0].style.width =\r\n      numChars.toString() + \"ch\";\r\n  };\r\n\r\n  /**\r\n   * Limit label size by (estimated) characters\r\n   * This is only accurate if the label is monospaced\r\n   */\r\n  self.changeLabelFontSize = function(node, size, relativeSize = 1) {\r\n    size = size * relativeSize *6;\r\n    mapsize  = size/6;\r\n    node.renderData.textHolder.children[0].element.children[0].style.fontSize =\r\n      size.toString() + \"px\";\r\n      node.renderData.textHolder.children[0].element.children[0].style.mapfontSize =\r\n      mapsize.toString() + \"px\";\r\n  };\r\n\r\n  /**\r\n   * Change boundary size\r\n   */\r\n  self.setBoundarySize = function(size) {\r\n    self.renderWidth = size;\r\n    self.renderHeight = size;\r\n    self.boundaries.scale.set(size * 2, size * 2, 1);\r\n    self.boundaries.position.x = -size;\r\n    self.boundaries.position.y = -size;\r\n    self.controls.maxDistance = size * 2;\r\n    self.minimap.camera.position.z = self.renderWidth * 2;\r\n  };\r\n\r\n  /**\r\n   * Change viewport size\r\n   */\r\n  self.setViewPortSize = function(camera) {\r\n    var distance = self.ccamera.position.z;\r\n    var height =\r\n      Math.tan(((camera.fov * Math.PI) / 180) * 0.5) * distance * 2 + 5;\r\n    var width = height * camera.aspect + 5;\r\n    self.viewPort.scale.set(width, height, 1);\r\n    self.viewPort.position.x = camera.position.x - width / 2;\r\n    self.viewPort.position.y = camera.position.y - height / 2;\r\n  };\r\n};\r\n","var def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\nconst { default: appState } = require(\"../../stores\");\r\n\r\n\r\nmodule.exports = function(self) {\r\n  /**\r\n   *  Create highlight mesh\r\n   */\r\n  self.createHighlightMesh = function(node, texture) {\r\n    var shape =\r\n      node.renderData.hshape || node.renderData.shape || def.NODE_HSHAPE;\r\n    if (shape == \"square\") {\r\n      var hgeometry = self.make2x2Rect();\r\n    } else {\r\n      var hgeometry = new THREE.CircleGeometry(1, 32);\r\n    }\r\n\r\n    return self.createHighlightDrawObject(hgeometry, node, texture);\r\n  };\r\n\r\n  /**\r\n   * Sets the material, color, visibility, and size of the highlight drawing for a node.\r\n   */\r\n  self.createHighlightDrawObject = function(hgeometry, node, texture) {\r\n    var size = self.getNodeSize(node);\r\n    var hsize = def.HIGHLIGHT_SIZE;\r\n\r\n    texture = def.NODE_NO_HTEX ? null : texture;\r\n    var color = def.NODE_NO_HCOLOR\r\n      ? null\r\n      : parseInt(node.renderData.hcolor || def.NODE_HIGHLIGHT);\r\n    var hmaterial = new THREE.MeshBasicMaterial({ color: color, map: texture });\r\n    hmaterial.transparent = true;\r\n    var highlight = new THREE.Mesh(hgeometry, hmaterial);\r\n    highlight.visible = true;\r\n    highlight.scale.set(1 + hsize / size, 1 + hsize / size, 1);\r\n    highlight.position.z = -0.01;\r\n    return highlight;\r\n  };\r\n\r\n  /**\r\n   *  Create node mesh\r\n   */\r\n  self.createNodeMesh = function(node, texture) {\r\n    var shape = node.renderData.shape || def.NODE_SHAPE;\r\n    if (shape == \"square\") {\r\n      var geometry = self.make2x2Rect();\r\n    } else {\r\n      var geometry = new THREE.CircleGeometry(1, 32);\r\n    }\r\n    return self.createNodeDrawObject(geometry, node, texture);\r\n  };\r\n\r\n  /**\r\n   * Create mesh to visual show pinning\r\n   */\r\n  self.createPinMesh = function(size) {\r\n    var geometry = self.make2x2Rect();\r\n    var color = new THREE.Color(def.PIN_COLOR);\r\n    var material = new THREE.MeshBasicMaterial({ color: color });\r\n    var pinMesh = new THREE.Mesh(geometry, material);\r\n    pinMesh.scale.set(0.1, 0.1, 1);\r\n    pinMesh.position.z = 0.01;\r\n    pinMesh.visible = false;\r\n    return pinMesh;\r\n  };\r\n\r\n  /**\r\n   * Create the drawing information for a node\r\n   */\r\n  self.createNodeDrawObject = function(geometry, node, texture) {\r\n    var size = self.getNodeSize(node);\r\n\r\n    texture = def.NODE_NO_TEX ? null : texture;\r\n    var color = def.NODE_NO_COLOR\r\n      ? null\r\n      : new THREE.Color(node.renderData.color || def.NODE_COLOR);\r\n    var material = new THREE.MeshBasicMaterial({ color: color, map: texture });\r\n    material.transparent = true;\r\n    var draw_object = new THREE.Mesh(geometry, material);\r\n    draw_object.scale.set(size, size, 1);\r\n    return draw_object;\r\n  };\r\n\r\n  /**\r\n   * Get the size of a node if it exists, otherwise get it from the render data.\r\n   */\r\n  self.getNodeSize = function(node) {\r\n    var size;\r\n    if (node.renderData.size != undefined) size = node.renderData.size;\r\n    else size = node.renderData[\"size\"];\r\n    return size;\r\n  };\r\n\r\n  self.createNodeLabel = function(node) {\r\n    var material = new THREE.MeshBasicMaterial({\r\n      color: 0x000000,\r\n      wireframe: true,\r\n      wireframeLinewidth: 1,\r\n      side: THREE.DoubleSide\r\n    });\r\n    var geometry = new THREE.PlaneGeometry(1000, 200);\r\n    var textMesh = self.createAndSetupLabelTextMesh(geometry, material);\r\n    var label = self.createAndSetupLabelDiv(node, textMesh);\r\n    var textHolder = self.createAndSetupTextHolder(label, textMesh);\r\n    node.renderData.textHolder = textHolder;\r\n    self.scene.add(textHolder);\r\n  };\r\n\r\n  self.createAndSetupLabelTextMesh = function(geometry, material) {\r\n    var textMesh = new THREE.Mesh(geometry, material);\r\n    textMesh.scale.set(def.TEXT_SIZE, def.TEXT_SIZE, 1);\r\n    var bbox = new THREE.Box3().setFromObject(textMesh);\r\n    textMesh.position.x += (bbox.max.x - bbox.min.x) * def.TEXT_X_OFFSET;\r\n    textMesh.position.y -= (bbox.max.y - bbox.min.y) * def.TEXT_Y_OFFSET;\r\n    textMesh.visible = def.TEXT_WIREFRAME;\r\n    return textMesh;\r\n  };\r\n\r\n  self.createAndSetupLabelDiv = function(node, textMesh) {\r\n    var label = self.createLabelDiv(node);\r\n    label.element.hidden = true;\r\n    label.position.copy(textMesh.position);\r\n    label.scale.copy(textMesh.scale);\r\n    return label;\r\n  };\r\n\r\n  self.createAndSetupTextHolder = function(label, textMesh) {\r\n    var textHolder = new THREE.Object3D();\r\n    textHolder.add(label);\r\n    textHolder.add(textMesh);\r\n    return textHolder;\r\n  };\r\n\r\n  /**\r\n   *  Create label div\r\n   */\r\n  self.createLabelDiv = function(node) {\r\n    // Create canvas to draw text label onto sprite image\r\n    var element = self.createLabelDivElement();\r\n    var content = document.createTextNode(node.renderData.label);\r\n    var textElement = self.createLabelTextElement();\r\n    textElement.appendChild(content);\r\n    element.appendChild(textElement);\r\n    var labelObj = new THREE.CSS3DObject(element);\r\n    return labelObj;\r\n  };\r\n\r\n  /**\r\n   * Creates the Label Div Element for a node's label\r\n   */\r\n  self.createLabelDivElement = function() {\r\n    var element = document.createElement(\"div\");\r\n    element.style.width = \"1000px\";\r\n    element.style.height = \"200px\";\r\n    element.style.backgroundColor = def.TEXT_BACK_COLOR;\r\n    element.style.opacity = def.TEXT_OPACITY;\r\n    return element;\r\n  };\r\n\r\n  /**\r\n   * Creates the text element to add to the label div for a node.\r\n   */\r\n  self.createLabelTextElement = function() {\r\n    var textElement = document.createElement(\"div\");\r\n    textElement.style.width = \"1000px\";\r\n    textElement.style.height = \"2ch\";\r\n    textElement.style.fontSize = \"96px\";\r\n    textElement.style.textOverflow = \"ellipsis\";\r\n    textElement.style.overflow = \"hidden\";\r\n    textElement.style.userSelect = \"all\";\r\n    textElement.style.whiteSpace = \"nowrap\";\r\n    //textElement.setAttribute('contenteditable', 'true');\r\n    return textElement;\r\n  };\r\n\r\n  /**\r\n   * Instantiates, sets highlight for, and sets position for the actual THREE\r\n   * drawing of a node\r\n   */\r\n  self.setupNodeDrawObject = function(node, htexture, texture) {\r\n    var draw_object = self.createNodeMesh(node, texture);\r\n\r\n    // Create highlight\r\n    if (!def.NODE_NO_HIGHLIGHT) {\r\n      var highlight = self.createHighlightMesh(node, htexture);\r\n      draw_object.add(highlight);\r\n    }\r\n\r\n    var pinMesh = self.createPinMesh();\r\n    draw_object.add(pinMesh);\r\n\r\n    draw_object.position.x = node.renderData.x;\r\n    draw_object.position.y = node.renderData.y;\r\n    draw_object.index = node.id;\r\n    draw_object.name = node.id;\r\n    node.renderData.draw_object = draw_object;\r\n\r\n    return draw_object;\r\n  };\r\n\r\n  /**\r\n   *  Create a node object and add it to the scene.\r\n   */\r\n  self.drawNode = function(node) {\r\n    function onHTextureLoad(node, htexture) {\r\n      // Load node texture\r\n      self.textureLoader.load(\r\n        node.renderData.image || def.NODE_TEXTURE,\r\n        onTextureLoad.bind(null, node, htexture)\r\n      );\r\n    }\r\n\r\n    function onTextureLoad(node, htexture, texture) {\r\n      // Create mesh for node\r\n      var draw_object = self.setupNodeDrawObject(node, htexture, texture);\r\n\r\n      // Create div for label\r\n      self.createNodeLabel(node);\r\n\r\n      self.nodeCount += 1;\r\n      self.nodes.add(draw_object);\r\n    }\r\n\r\n    if (def.NODE_NO_HTEX && def.NODE_NO_TEX) {\r\n      onTextureLoad(node, null, null);\r\n    } else {\r\n      // Load highlight texture\r\n      self.textureLoader.load(\r\n        node.renderData.himage || def.NODE_HTEXTURE,\r\n        onHTextureLoad.bind(null, node)\r\n      );\r\n    }\r\n  };\r\n\r\n  let hexToRGB = (hex) => {\r\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? \r\n    new THREE.Color(appState.graph.edges.color)\r\n    : null;\r\n}\r\n\r\nself.getDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n  var p = 0.017453292519943295;    // Math.PI / 180\r\n  var c = Math.cos;\r\n  var a = 0.5 - c((lat2 - lat1) * p)/2 + \r\n          c(lat1 * p) * c(lat2 * p) * \r\n          (1 - c((lon2 - lon1) * p))/2;\r\n\r\n  return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n}\r\n\r\n  /**\r\n   *  Create an edge and add it to the lineSegments.\r\n   */\r\n  self.drawEdge = function(source, target, visible = true) {\r\n    if (\r\n      source.renderData.draw_object === undefined ||\r\n      target.renderData.draw_object === undefined\r\n    ) {\r\n      setTimeout(self.drawEdge.bind(null, source, target), 50);\r\n      return;\r\n    }\r\n    var index = self.drawCount * 3;\r\n    self.lineObjects[index / 3] = source;\r\n    self.lineObjects[index / 3 + 1] = target;\r\n    if (!source.linkObjs) {\r\n      source.linkObjs = [];\r\n    }\r\n    if (!target.linkObjs) {\r\n      target.linkObjs = [];\r\n    }\r\n    var edgeDist\r\n    if(source.data.ref.LonX){\r\n      const lon1 = source.data.ref.LonX\r\n      const lat1 = source.data.ref.LatY\r\n      const lon2 = target.data.ref.LonX\r\n      const lat2 = target.data.ref.LatY\r\n      edgeDist = self.getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2)\r\n    }\r\n    \r\n\r\n    self.lineIndices.push({\r\n      source: source,\r\n      target: target,\r\n      hide: !visible,\r\n      linecolor: hexToRGB(appState.graph.edges.color),\r\n      edgeDist:edgeDist\r\n      // hexToRGB(appState.graph.edges.color),\r\n      // source.renderData.linecolor, \r\n    });\r\n\r\n    source.linkObjs.push(self.lineIndices[index / 6]);\r\n    target.linkObjs.push(self.lineIndices[index / 6]);\r\n    self.updateColorsAndPositions(source, target, index);\r\n    self.drawCount += 2;\r\n  };\r\n\r\n  /**\r\n   * Update the colors and positions of the edges between source and target\r\n   */\r\n  self.updateColorsAndPositions = function(source, target, index) {\r\n    var positions = self.edges.attributes.position.array;\r\n    var colors = self.edges.attributes.color.array;\r\n\r\n    var v1pos = source.renderData.draw_object.position;\r\n    var v2pos = target.renderData.draw_object.position;\r\n    var v1color = self.lineIndices[index / 6].linecolor;\r\n    var v2color = self.lineIndices[index / 6].linecolor;\r\n    colors[index] = v1color.b;\r\n    positions[index++] = v1pos.x;\r\n    colors[index] = v1color.g;\r\n    positions[index++] = v1pos.y;\r\n    colors[index] = v1color.r;\r\n    positions[index++] = v1pos.z - 0.02;\r\n    colors[index] = v2color.b;\r\n    positions[index++] = v2pos.x;\r\n    colors[index] = v2color.g;\r\n    positions[index++] = v2pos.y;\r\n    colors[index] = v2color.r;\r\n    positions[index++] = v2pos.z - 0.02;\r\n  };\r\n};\r\n","const { default: appState } = require(\"../../stores\");\r\n\r\nvar def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\n/**\r\n * These functions are endpoints revealed to Argo frontend\r\n */\r\nmodule.exports = function(self) {\r\n  /**\r\n   * Set frame.mouseMode to the specified mode\r\n   * @param {string} mode name of the mode, currently supports ['select', 'move']\r\n   */\r\n  self.setMouseMode = mode => {\r\n    if (mode === \"select\") {\r\n      // This is the default mode, where users can select one or multiple nodes\r\n      self.mouseMode = \"select\";\r\n      self.isMouseModeMove = false;\r\n    } else if (mode === \"move\") {\r\n      // move mode, where user can drag the screen to achieve panning\r\n      self.mouseMode = \"move\";\r\n      self.isMouseModeMove = true;\r\n    }\r\n  };\r\n\r\n  self.pauseLayout = () => {\r\n    self.paused = true;\r\n  };\r\n  window.pause = self.pauseLayout;\r\n\r\n  self.resumeLayout = () => {\r\n    self.paused = false;\r\n  };\r\n\r\n  self.mapSelectedNodes = () => {\r\n    self.mapNodeAttributes([\"degree\", \"log\", \"scalexy\"], self.selection);\r\n  };\r\n\r\n  self.mapAllNodes = () => {\r\n    self.mapNodeAttributes([\"degree\", \"log\", \"scalexy\"]);\r\n  };\r\n\r\n  self.pinSelectedNodes = () => {\r\n    self.mapNodeAttributes([true, \"\", \"pinned\"], self.selection);\r\n  };\r\n\r\n  self.unpinSelectedNodes = () => {\r\n    self.mapNodeAttributes([false, \"\", \"pinned\"], self.selection);\r\n  };\r\n\r\n  self.setLabelFontSize = size => {\r\n    self.graph.forEachNode(function(node) {\r\n      self.changeLabelFontSize(node, size, self.relativeFontSize);\r\n    });\r\n\r\n    // change the map label size\r\n    size = (size * self.relativeFontSize ) ;\r\n    document.querySelectorAll('.maptooltip').forEach(node=>{\r\n      node.style.fontSize = size.toString() + \"px\";\r\n    })\r\n    \r\n  };\r\n\r\n  self.setLabelRelativeSize = size => {\r\n    self.relativeFontSize = size;\r\n    self.setLabelFontSize(self.labelSize);\r\n  };\r\n\r\n  self.setLabelLength = numChars => {\r\n    self.graph.forEachNode(function(node) {\r\n      self.changeLabelLength(node, numChars);\r\n    });\r\n    document.querySelectorAll('.maptooltip').forEach(node=>{\r\n      node.style.width = numChars.toString() + \"ch\";\r\n    })\r\n    \r\n  };\r\n\r\n  self.toggleMiniMap = () => {\r\n    if (self.mapShowing) {\r\n      self.hideMiniMap();\r\n    } else {\r\n      self.showMiniMap();\r\n    }\r\n  };\r\n\r\n  self.showMiniMap = () => {\r\n    if (self.mapShowing) {\r\n      return;\r\n    }\r\n    self.mapShowing = true;\r\n    // self.element.appendChild(self.minimapRenderer.domElement);\r\n  };\r\n\r\n  self.hideMiniMap = () => {\r\n    if (!self.mapShowing) {\r\n      return;\r\n    }\r\n    self.mapShowing = false;\r\n    // self.element.removeChild(self.minimapRenderer.domElement);\r\n  };\r\n\r\n  // The CSS Renderer for rendering labels is the most expensive\r\n  // renderer. For 300+ nodes it's recommended to turn it off by\r\n  // default and only use it when no node is moving to prevent\r\n  // visible lagging (during layout, dragging etc.)\r\n  self.turnOffLabelCSSRenderer = () => {\r\n    if (self.cssRenderer.isPaused) {\r\n      return;\r\n    }\r\n    self.element.removeChild(self.cssRenderer.domElement);\r\n    self.cssRenderer.isPaused = true;\r\n  };\r\n\r\n  // See turnOffLabelCSSRenderer.\r\n  self.turnOnLabelCSSRenderer = () => {\r\n    if (!self.cssRenderer.isPaused) {\r\n      return;\r\n    }\r\n    self.element.appendChild(self.cssRenderer.domElement);\r\n    self.cssRenderer.isPaused = false;\r\n  };\r\n\r\n  // Emits id of every node with label being displayed at this moment.\r\n  // Used to keep mobx state in sync since GraphStore and snapshot\r\n  // needs to save what nodes have labels shown and what not.\r\n  // Also turns off label CSSRenderer when no node is showing label.\r\n  self.updateNodesShowingLabels = () => {\r\n    var nodes = [];\r\n    self.graph.forEachNode(n => {\r\n      var node = self.graph.getNode(n.id);\r\n      if (node.renderData.textHolder.children[0].element.override) {\r\n        nodes.push(n.id);\r\n      }\r\n    });\r\n\r\n    // Turns off label CSSRenderer when no node is showing label.\r\n    // This is because CSSRenderer is slow.\r\n    if (nodes.length == 0) {\r\n      self.turnOffLabelCSSRenderer();\r\n    } else if (!((self.selection.length > 0) && (self.dragging)) || (appState.graph.frame.paused)) { \r\n      //Only turns on when no node is moving\r\n      self.turnOnLabelCSSRenderer();\r\n    }\r\n\r\n    self.ee.emit(\"show-node-label\", nodes);\r\n  };\r\n\r\n  self.toggleSelectedLabels = () => {\r\n    self.toggleLabels(self.selection.map(n => n.id));\r\n  };\r\n\r\n  self.showSelectedLabels = () => {\r\n    // document.getElementById(\"showSelected\").style.display=\"none\";\r\n    // document.getElementById(\"hideSelected\").style.display=\"inline\";\r\n    self.showLabels(self.selection.map(n => n.id));\r\n    self.selection.forEach(n=>{\r\n      document.querySelectorAll(`.maptooltip_${n.id}`).forEach(node=>{\r\n        node.style.opacity = 1;\r\n      })\r\n      \r\n    })\r\n      \r\n    if(appState.graph.mapClicked){\r\n      const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(appState.graph.mapClicked)\r\n      selectneighbors.forEach(n=>{\r\n        document.querySelectorAll(`.maptooltip_${n.id}`).forEach(node=>{\r\n          node.style.opacity = 1;\r\n        })\r\n        \r\n      })\r\n      self.showLabels(selectneighbors.map(n => n.id));\r\n    }\r\n    \r\n  };\r\n\r\n  self.hideSelectedLabels = () => {\r\n    document.getElementById(\"hideSelected\").style.display=\"none\";\r\n    document.getElementById(\"showSelected\").style.display=\"inline\";\r\n    self.hideLabels(self.selection.map(n => n.id));\r\n  };\r\n\r\n  self.toggleLabels = nodeids => {\r\n    self.graph.forEachNode(n => {\r\n      if (nodeids.includes(n.id)) {\r\n        var node = self.graph.getNode(n.id);\r\n        if (\r\n          node.renderData.textHolder.children[0].element.override == undefined\r\n        ) {\r\n          node.renderData.textHolder.children[0].element.override = false;\r\n        }\r\n        node.renderData.textHolder.children[0].element.override = !node\r\n          .renderData.textHolder.children[0].element.override;\r\n      }\r\n    });\r\n    self.updateNodesShowingLabels();\r\n  };\r\n\r\n  self.showLabels = nodeids => {\r\n    self.graph.forEachNode(n => {\r\n      if (nodeids.includes(n.id)) {\r\n        var node = self.graph.getNode(n.id);\r\n        node.renderData.textHolder.children[0].element.override = true;\r\n      }\r\n    });\r\n    self.updateNodesShowingLabels();\r\n    \r\n    \r\n    \r\n  };\r\n\r\n  self.hideLabels = nodeids => {\r\n    self.graph.forEachNode(n => {\r\n      if (nodeids.includes(n.id)) {\r\n        var node = self.graph.getNode(n.id);\r\n        node.renderData.textHolder.children[0].element.override = false;\r\n      }\r\n    });\r\n    self.updateNodesShowingLabels();\r\n  };\r\n\r\n  self.hideAllLabels = () => {\r\n    // document.getElementById(\"hideAll\").style.display=\"none\";\r\n    // document.getElementById(\"showAll\").style.display=\"inline\";\r\n    self.graph.forEachNode(function(node) {\r\n      var node = self.graph.getNode(node.id);\r\n      node.renderData.textHolder.children[0].element.override = false;\r\n    });\r\n    self.updateNodesShowingLabels();\r\n    //update map tooltip \r\n    document.querySelectorAll('.maptooltip').forEach(node=>{\r\n      node.style.opacity=0;\r\n    })\r\n  };\r\n\r\n  self.showAllLabels = () => {\r\n    // document.getElementById(\"showAll\").style.display=\"none\";\r\n    // document.getElementById(\"hideAll\").style.display=\"inline\";\r\n    self.graph.forEachNode(function(node) {\r\n      var node = self.graph.getNode(node.id);\r\n      node.renderData.textHolder.children[0].element.override = true;\r\n    });\r\n    self.updateNodesShowingLabels();\r\n    document.querySelectorAll('.maptooltip').forEach(node=>{\r\n      node.style.opacity=1;\r\n    })\r\n  };\r\n\r\n  self.setCanvasSize = function(size) {\r\n    self.setBoundarySize(size);\r\n  };\r\n\r\n  self.setAllNodesShape = function(shape) {\r\n    if (self.selection.length == 0) {\r\n      self.graph.forEachNode(function(node) {\r\n        self.setNodeShape(self.graph.getNode(node.id), shape);\r\n      });\r\n    } else {\r\n      self.selection.forEach(function(node) {\r\n        self.setNodeShape(self.graph.getNode(node.id), shape);\r\n      });\r\n    }\r\n  };\r\n\r\n  self.setAllNodesShapeWithOverride = function(shape, overrides) {\r\n    self.graph.forEachNode(function(node) {\r\n      if (overrides.has(node.id) && overrides.get(node.id).has('shape')) {\r\n        self.setNodeShape(self.graph.getNode(node.id), overrides.get(node.id).get('shape'));\r\n      } else {\r\n        self.setNodeShape(self.graph.getNode(node.id), shape);\r\n      }\r\n    });\r\n  }\r\n\r\n  self.setNodeShape = function(node, shape) {\r\n    if (shape == \"square\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = self.make2x2Rect();\r\n      node.renderData.draw_object.children[0].geometry = self.make2x2Rect();\r\n    } else if (shape == \"circle\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = new THREE.CircleGeometry(1, 32);\r\n      node.renderData.draw_object.children[0].geometry = new THREE.CircleGeometry(\r\n        1,\r\n        32\r\n      );\r\n    } else if (shape == \"triangle\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = new THREE.CircleGeometry(1, 3);\r\n      node.renderData.draw_object.children[0].geometry = new THREE.CircleGeometry(\r\n        1,\r\n        3\r\n      );\r\n    } else if (shape == \"pentagon\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = new THREE.CircleGeometry(1, 5);\r\n      node.renderData.draw_object.children[0].geometry = new THREE.CircleGeometry(\r\n        1,\r\n        5\r\n      );\r\n    } else if (shape == \"hexagon\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = new THREE.CircleGeometry(1, 6);\r\n      node.renderData.draw_object.children[0].geometry = new THREE.CircleGeometry(\r\n        1,\r\n        6\r\n      );\r\n    } else if (shape == \"octagon\") {\r\n      node.renderData.shape = shape;\r\n      node.renderData.draw_object.geometry = new THREE.CircleGeometry(1, 8);\r\n      node.renderData.draw_object.children[0].geometry = new THREE.CircleGeometry(\r\n        1,\r\n        8\r\n      );\r\n    }\r\n  };\r\n\r\n  self.getNumSelected = function() {\r\n    if (self.selection.length == self.graph.getNodesCount()) {\r\n      return 0;\r\n    }\r\n    return self.selection.length;\r\n  };\r\n\r\n  self.toggleDark = function() {\r\n    self.darkMode = !self.darkMode;\r\n    self.updateViewPortEdgeColor();\r\n  };\r\n\r\n  self.updateViewPortEdgeColor = function() {\r\n    self.viewPort.material.color = new THREE.Color( self.darkMode? 0xffffff : 0x000000 );       \r\n  }\r\n\r\n  self.getGraph = function() {\r\n    return self.graph;\r\n  };\r\n\r\n  self.getNodeList = function() {\r\n    var nodes = [];\r\n    self.graph.forEachNode(function(node) {\r\n      nodes.push(node);\r\n    });\r\n    return nodes;\r\n  };\r\n\r\n  self.getEdgeList = function(){\r\n    var edges = [];\r\n\r\n    self.graph.forEachLink(function(edge) {\r\n      edges.push(edge);\r\n    });\r\n    return edges;\r\n  }\r\n\r\n  self.getPositions = function() {\r\n    var poses = {};\r\n    self.graph.forEachNode(function(node) {\r\n      poses[node.id] = [node.x, node.y];\r\n    });\r\n    return poses;\r\n  };\r\n\r\n  self.getPinPositions = function() {\r\n    var poses = {};\r\n    self.graph.forEachNode(function(node) {\r\n      poses[node.id] = [node.fx, node.fy];\r\n    });\r\n    return poses;\r\n  };\r\n\r\n  // retrieves current graph's pinned nodes \r\n  self.getPinnedNodes = function() {\r\n    var poses = new Set();\r\n    self.graph.forEachNode(function(node) {\r\n      if(node.pinnedx && node.pinnedy) {\r\n        poses.add(node.id);\r\n      }\r\n    });\r\n    return poses;\r\n  }\r\n\r\n  //pins nodes that were pinned from a graph loaded in\r\n  self.setPinnedNodes = function(nodesToPin) {\r\n    self.mapNodeAttributes([true, \"\", \"pinned\"], nodesToPin);\r\n  }\r\n\r\n  var alias = false;\r\n  self.toggleAlias = () => {\r\n    // TODO: recreate renderer with new antialias\r\n    // self.init(alias);\r\n    // self.display();\r\n    alias = !alias;\r\n  };\r\n\r\n  self.setLastNode = id => {\r\n    self.lastNode = self.graph.getNode(id);\r\n  };\r\n\r\n  self.dragLastNode = () => {\r\n    self.selectNode(self.lastNode);\r\n  };\r\n\r\n  var x = 1.0;\r\n  self.lowerRes = () => {\r\n    x -= 0.1;\r\n    self.renderer.setPixelRatio(x);\r\n    self.onWindowResize();\r\n  };\r\n\r\n  self.toggleNeighborHighlight = function() {\r\n    self.doHighlightNeighbors = !self.doHighlightNeighbors;\r\n  };\r\n\r\n  self.highlightNodeIds = function(nodeids, toggle) {\r\n    if (nodeids.length > 0 && Array.isArray(nodeids[0])) {\r\n      nodeids = nodeids[0];\r\n    }\r\n    // if (self.prevHighlights) {\r\n    //   for (var i = 0; i < self.prevHighlights.length; i++) {\r\n    //     self.highlightNode(\r\n    //       self.prevHighlights[i],\r\n    //       !toggle,\r\n    //       def.SEARCH_HIGHLIGHT\r\n    //     );\r\n    //   }\r\n    // }\r\n    self.prevHighlights = [];\r\n    // self.graph.forEachNode(function(node) {\r\n    //   if (nodeids.indexOf(node.id) != -1) {\r\n    //     self.highlightNode(node, toggle, def.SEARCH_HIGHLIGHT);\r\n    //     self.prevHighlights.push(node);\r\n    //   }\r\n    // });\r\n  };\r\n\r\n  self.removeSelected = function() {\r\n    for (var i = 0; i < self.selection.length; i++) {\r\n      self.removeNode(self.selection[i]);\r\n    }\r\n    self.selection = [];\r\n  };\r\n\r\n  self.removeNodesByIds = function(nodeids) {\r\n    for (var i = 0; i < nodeids.length; i++) {\r\n      const node = self.graph.getNode(nodeids[i]);\r\n      if (node) {\r\n        self.removeNode(node);\r\n      }\r\n    }\r\n    self.selection = [];\r\n  };\r\n\r\n  self.getSelected = function() {\r\n    return self.selection;\r\n  };\r\n\r\n  self.getSelectedIds = function() {\r\n    return self.selection.map(n => n.id);\r\n  };\r\n};","// import appState from '../../stores/index';\r\nconst { default: appState } = require(\"../../stores\");\r\nvar def = require(\"./imports\").default;\r\nvar THREE = def.THREE;\r\nvar Edge = def.Edge;\r\nvar Node = def.Node;\r\nvar OrbitControls = def.OrbitControls;\r\nvar d3 = def.d3;\r\nvar ee = def.ee;\r\n\r\n\r\nmodule.exports = function (self) {\r\n  /**\r\n   *  Update the position and color of the edges\r\n   */\r\n  self.updateEdges = function () {\r\n    self.edges.setDrawRange(0, self.drawCount + 6);\r\n    var total = self.drawCount + 6;\r\n    var positions = self.edges.attributes.position.array;\r\n    var colors = self.edges.attributes.color.array;\r\n    // var width = self.edges.attributes.width.array;\r\n\r\n    //directed arrows\r\n    self.directedArrows.attributes.position.array = new Float32Array(self.MAX_LINES * 3);\r\n    var arrowPosition = self.directedArrows.attributes.position.array;\r\n    var arrowColor = self.directedArrows.attributes.color.array;\r\n\r\n    for (var i = 0; i < total; i += 2) {\r\n      if (self.lineIndices[i / 2]) {\r\n        if (self.lineIndices[i / 2].hide) {\r\n          var v1pos = self.lineObjects[i].renderData.draw_object.position;\r\n          var v2pos = self.lineObjects[i + 1].renderData.draw_object.position;\r\n          positions[i * 3] = v1pos.x;\r\n          positions[i * 3 + 1] = v1pos.y;\r\n          positions[i * 3 + 3] = v2pos.x;\r\n          positions[i * 3 + 4] = v2pos.y;\r\n          colors[i * 3] = 255;\r\n          colors[i * 3 + 1] = 255;\r\n          colors[i * 3 + 2] = 255;\r\n          colors[i * 3 + 3] = 255;\r\n          colors[i * 3 + 4] = 255;\r\n          colors[i * 3 + 5] = 255;\r\n        } else {\r\n          var v1pos = self.lineObjects[i].renderData.draw_object.position;\r\n          var v2pos = self.lineObjects[i + 1].renderData.draw_object.position;\r\n          var v1color = self.lineIndices[i / 2].linecolor;\r\n          var v2color = self.lineIndices[i / 2].linecolor;\r\n          positions[i * 3] = v1pos.x;\r\n          positions[i * 3 + 1] = v1pos.y;\r\n          positions[i * 3 + 3] = v2pos.x;\r\n          positions[i * 3 + 4] = v2pos.y;\r\n          colors[i * 3] = v1color.r;\r\n          colors[i * 3 + 1] = v1color.g;\r\n          colors[i * 3 + 2] = v1color.b;\r\n          colors[i * 3 + 3] = v2color.r;\r\n          colors[i * 3 + 4] = v2color.g;\r\n          colors[i * 3 + 5] = v2color.b;\r\n          // width[i * 3] = 5;\r\n          // width[i * 3 + 1] = 5;\r\n          // width[i * 3 + 2] = 5;\r\n          // width[i * 3 + 3] = 5;\r\n          // width[i * 3 + 4] = 5;\r\n          // width[i * 3 + 5] = 5;\r\n\r\n          //directed edges\r\n          if (appState.graph.directedOrNot) {\r\n            self.arrow.visible = true;\r\n            var midPointX = (v1pos.x + v2pos.x) / 2;\r\n            var midPointY = (v1pos.y + v2pos.y) / 2;\r\n\r\n            var dX = v2pos.x - v1pos.x;\r\n            var dY = v2pos.y - v1pos.y;\r\n\r\n            if (dX === 0) {\r\n              dX = 0.001;\r\n            }\r\n            var radianDegree = Math.atan(dY / dX);\r\n            // var tempXCorner = midPointX - Math.cos(radianDegree) * 0.866;\r\n            // var tempYCorner = midPointY - Math.sin(radianDegree) * 0.866;\r\n\r\n            // var degreeDifference = Math.PI/2 - radianDegree\r\n            arrowPosition[i / 2 * 9] = midPointX;\r\n            arrowPosition[i / 2 * 9 + 1] = midPointY;\r\n\r\n            if (dX >= 0) {\r\n              var tempXCorner = midPointX - Math.cos(radianDegree) * 0.866;\r\n              var tempYCorner = midPointY - Math.sin(radianDegree) * 0.866;\r\n              var degreeDifference = Math.PI / 2 - radianDegree;\r\n              arrowPosition[i / 2 * 9 + 3] = tempXCorner - 0.5 * Math.cos(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 4] = tempYCorner + 0.5 * Math.sin(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 6] = tempXCorner + 0.5 * Math.cos(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 7] = tempYCorner - 0.5 * Math.sin(degreeDifference);\r\n\r\n            } else {\r\n              var tempXCorner = midPointX + Math.cos(radianDegree) * 0.866;\r\n              var tempYCorner = midPointY + Math.sin(radianDegree) * 0.866;\r\n              var degreeDifference = Math.PI / 2 - radianDegree;\r\n              arrowPosition[i / 2 * 9 + 3] = tempXCorner + 0.5 * Math.cos(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 4] = tempYCorner - 0.5 * Math.sin(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 6] = tempXCorner - 0.5 * Math.cos(degreeDifference);\r\n              arrowPosition[i / 2 * 9 + 7] = tempYCorner + 0.5 * Math.sin(degreeDifference);\r\n            }\r\n          } else {\r\n            self.arrow.visible = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    self.edges.attributes.position.needsUpdate = true;\r\n    self.edges.attributes.color.needsUpdate = true;\r\n\r\n    self.directedArrows.attributes.position.needsUpdate = true;\r\n    self.directedArrows.attributes.color.needsUpdate = true;\r\n  };\r\n\r\n  /**\r\n   *  Update the position of the labels\r\n   */\r\n  self.updateLabels = function () {\r\n    var nodes = self.force.nodes();\r\n    for (var i = 0; i < nodes.length; i++) {\r\n      let thisNode = self.graph.getNode(nodes[i].id);\r\n      if (thisNode.renderData.textHolder != undefined) {\r\n        if (\r\n          //thisNode.renderData.textHolder.children[0].element.hideme != false &&\r\n          !thisNode.renderData.textHolder.children[0].element.override\r\n        ) {\r\n          thisNode.renderData.textHolder.children[0].element.hidden = true;\r\n        } else {\r\n          thisNode.renderData.textHolder.children[0].element.hidden = false;\r\n        }\r\n      }\r\n      thisNode.renderData.textHolder.position.x =\r\n        thisNode.renderData.size + thisNode.renderData.draw_object.position.x;\r\n      thisNode.renderData.textHolder.position.y =\r\n        thisNode.renderData.draw_object.position.y;\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  Update the position and color of the edges\r\n   */\r\n  self.updateNodes = function () {\r\n    // console.log(\"triggered\");\r\n    if (self.options.layout == \"ngraph\") {\r\n      self.graph.forEachNode(function (node) {\r\n        if (node.renderData) {\r\n          node.renderData.draw_object.position.x = self.force.getNodePosition(\r\n            node.id\r\n          ).x;\r\n          node.renderData.draw_object.position.y = self.force.getNodePosition(\r\n            node.id\r\n          ).y;\r\n        }\r\n      });\r\n      if (!self.paused) {\r\n        self.force.step();\r\n      }\r\n    } else if (self.options.layout == \"d3\") {\r\n      var nodes = self.force.nodes();\r\n      for (var i = 0; i < nodes.length; i++) {\r\n        nodes[i].x = Math.max(\r\n          -self.renderWidth,\r\n          Math.min(self.renderWidth, nodes[i].x)\r\n        );\r\n        nodes[i].y = Math.max(\r\n          -self.renderHeight,\r\n          Math.min(self.renderHeight, nodes[i].y)\r\n        );\r\n        let thisNode = self.graph.getNode(nodes[i].id);\r\n        if (thisNode && thisNode.renderData.draw_object) {\r\n          if (!thisNode.pinnedx) {\r\n            thisNode.fx = null;\r\n            thisNode.renderData.draw_object.children[1].visible = false;\r\n          } else {\r\n            thisNode.fx = thisNode.x;\r\n            thisNode.renderData.draw_object.children[1].visible = true;\r\n          }\r\n          if (!thisNode.pinnedy) {\r\n            thisNode.fy = null;\r\n          } else {\r\n            thisNode.fy = thisNode.y;\r\n          }\r\n          thisNode.renderData.draw_object.position.x = nodes[i].x;\r\n          thisNode.renderData.draw_object.position.y = nodes[i].y;\r\n        }\r\n      }\r\n\r\n      if (!self.paused) {\r\n        self.force.tick();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Restrict camera translation\r\n   */\r\n  self.updateCamera = function () {\r\n    self.controls.target.x -=\r\n      self.controls.object.position.x -\r\n      Math.max(\r\n        -self.renderWidth,\r\n        Math.min(self.renderWidth, self.controls.object.position.x)\r\n      );\r\n    self.controls.object.position.x -=\r\n      self.controls.object.position.x -\r\n      Math.max(\r\n        -self.renderWidth,\r\n        Math.min(self.renderWidth, self.controls.object.position.x)\r\n      );\r\n    self.controls.target.y -=\r\n      self.controls.object.position.y -\r\n      Math.max(\r\n        -self.renderHeight,\r\n        Math.min(self.renderHeight, self.controls.object.position.y)\r\n      );\r\n    self.controls.object.position.y -=\r\n      self.controls.object.position.y -\r\n      Math.max(\r\n        -self.renderHeight,\r\n        Math.min(self.renderHeight, self.controls.object.position.y)\r\n      );\r\n    self.setViewPortSize(self.ccamera);\r\n  };\r\n\r\n  /**\r\n   * Given an ngraph, update the current ngraph and add or remove inconsistent nodes\r\n   */\r\n  self.updateGraph = function (graph) {\r\n    var numNodesAdded = 0;\r\n    graph.forEachNode(function (node) {\r\n      var oldNode = self.graph.getNode(node.id);\r\n      if (!oldNode) {\r\n        if (!self.newNodeIds) {\r\n          self.newNodeIds = [];\r\n        }\r\n        self.newNodeIds.push(node.id);\r\n        self.addNode(node);\r\n        numNodesAdded += 1;\r\n        self.lastNode = self.graph.getNode(node.id);\r\n      } else {\r\n        self.updateNode(oldNode, node);\r\n      }\r\n    });\r\n    graph.forEachLink(function (link) {\r\n      if (!self.graph.getLink(link.fromId, link.toId)) {\r\n        self.addEdge(\r\n          self.graph.getNode(link.fromId),\r\n          self.graph.getNode(link.toId)\r\n        );\r\n      }\r\n    });\r\n\r\n    self.graph.forEachNode(function (node) {\r\n      var oldNode = graph.getNode(node.id);\r\n      if (!oldNode) {\r\n        self.removeNode(node);\r\n      }\r\n      \r\n    });\r\n    \r\n\r\n    self.force.alpha(1);\r\n    self.force.stop();\r\n\r\n    if (numNodesAdded > 10) {\r\n      // This seems unnecessary for now\r\n      // self.tickToStatic = true;\r\n      self.tickToStatic = false;\r\n    } else {\r\n      self.tickToStatic = false;\r\n    }\r\n\r\n    if (self.newNodeIds) {\r\n      // Highlight every new node.\r\n      self.highlightNodeIds(self.newNodeIds, true);\r\n\r\n      // Select every new node if there aren't too many of them.\r\n      if (self.newNodeIds.length < 10) {\r\n        for (let i = 0; i < self.newNodeIds.length; i++) {\r\n          self.selection.push(self.graph.getNode(self.newNodeIds[i]));\r\n          appState.graph.selectedNodes.push(self.graph.getNode(self.newNodeIds[i]));\r\n        }\r\n        // self.ee.emit(\"select-nodes\", self.selection);\r\n        \r\n        //  = self.selection \r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * update positions in the ngraph given a list of positions\r\n   */\r\n  self.updatePositions = function (positions) {\r\n    self.graph.forEachNode(function (node) {\r\n      var pos = positions[node.id];\r\n      if (pos) {\r\n        node.x = pos[0];\r\n        node.y = pos[1];\r\n        if (node.pinnedx) {\r\n          node.fx = pos[0];\r\n        }\r\n        if (node.pinnedy) {\r\n          node.fy = pos[1];\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Update a node given a new node\r\n   */\r\n  self.updateNode = function (node, newNode) {\r\n    if (newNode.data) {\r\n      if (node.data.color && newNode.data.color) {\r\n        node.data.color = newNode.data.color;\r\n        node.renderData.color = node.data.color;\r\n        node.renderData.draw_object.material.color.set(\r\n          new THREE.Color(node.data.color)\r\n        );\r\n      }\r\n      if (newNode.data.size && newNode.data.size > 0) {\r\n        node.data.size = newNode.data.size;\r\n        node.renderData.size = newNode.data.size;\r\n        node.renderData.draw_object.scale.set(\r\n          newNode.data.size,\r\n          newNode.data.size,\r\n          1\r\n        );\r\n        var hsize = 1 + def.HIGHLIGHT_SIZE / newNode.data.size;\r\n        node.renderData.draw_object.children[0].scale.set(hsize, hsize, 1);\r\n      }\r\n      if (newNode.data.label) {\r\n        node.data.label = newNode.data.label;\r\n        node.renderData.label = node.data.label;\r\n        node.renderData.textHolder.children[0].element.childNodes[0].innerText =\r\n          node.data.label;\r\n      }\r\n      if (newNode.data.shape) {\r\n        node.data.shape = newNode.data.shape;\r\n        node.renderData.shape = node.data.shape;\r\n        self.setNodeShape(node, node.data.shape);\r\n      }\r\n    }\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { Button, Classes, Dialog, Intent, Switch } from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport { requestChangeWorkspace } from \"../ipc/client\";\r\n\r\n@observer\r\nclass PreferencesDialog extends React.Component {\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        iconName=\"cog\"\r\n        className={classnames({\r\n          [Classes.DARK]: appState.preferences.darkMode\r\n        })}\r\n        isOpen={appState.preferences.dialogOpen}\r\n        onClose={() => {\r\n          appState.preferences.dialogOpen = false;\r\n        }}\r\n        title=\"Preferences\"\r\n      >\r\n        <div className=\"pt-dialog-body\">\r\n          <Switch\r\n            label=\"Dark Mode\"\r\n            checked={appState.preferences.darkMode}\r\n            onChange={() => {\r\n              appState.preferences.darkMode = !appState.preferences.darkMode;\r\n              appState.preferences.saveUserConfig();\r\n              if (appState.graph.frame) {\r\n                appState.graph.frame.toggleDark();\r\n              }\r\n            }}\r\n          />\r\n          \r\n          <Switch\r\n           label=\"Minimap\"\r\n           checked={appState.preferences.minimapShowing}\r\n           onChange={() => {\r\n            appState.preferences.minimapShowing = !appState.preferences.minimapShowing;\r\n            appState.preferences.saveUserConfig();\r\n            if (appState.graph.frame) {\r\n              if (appState.preferences.minimapShowing) {\r\n                appState.graph.frame.showMiniMap();\r\n              } else {\r\n                appState.graph.frame.hideMiniMap();\r\n              }\r\n            } else {\r\n              console.log(\"Frame not ready when trying to toggle minimap.\");\r\n            }\r\n           }}\r\n          />\r\n        </div>\r\n        <div className=\"pt-dialog-footer\">\r\n          <div className=\"pt-dialog-footer-actions\">\r\n            <Button\r\n              intent={Intent.PRIMARY}\r\n              onClick={() => {\r\n                appState.preferences.dialogOpen = false;\r\n              }}\r\n              text=\"Done\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PreferencesDialog;","import React from \"react\";\r\nimport { Button, Classes, Collapse } from \"@blueprintjs/core\";\r\nimport classnames from \"classnames\";\r\n\r\nexport default ({ name, isOpen, onToggle, children }) => (\r\n  <div>\r\n    <Button\r\n      className={classnames(Classes.LARGE, Classes.FILL, Classes.MINIMAL, \"text-align-left\")}\r\n      rightIconName={isOpen ? \"chevron-up\" : \"chevron-down\"}\r\n      onClick={onToggle}\r\n    >\r\n      {name}\r\n    </Button>\r\n    <Collapse isOpen={isOpen}>{children}</Collapse>\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport { Classes, MenuItem } from \"@blueprintjs/core\";\r\n\r\nexport default ({ handleClick, item, isActive }) => (\r\n  \r\n\r\n  <MenuItem\r\n  iconName={item.charAt(0).toUpperCase() + item.slice(1).toLowerCase() == \"Distance to center\" \r\n            ||item.charAt(0).toUpperCase() + item.slice(1).toLowerCase() == \"Shortest path\" \r\n            ||item.charAt(0).toUpperCase() + item.slice(1).toLowerCase() == \"Pair distance\"\r\n            ? \"globe\" : \"graph\"}\r\n    className={isActive ? Classes.ACTIVE : \"\"}\r\n    key={item}\r\n    onClick={handleClick}\r\n    text={item.replace(/\\w+/g, function(word) {\r\n      return ['to'].includes(word.toLowerCase()) ? word : word.charAt(0).toUpperCase() + word.slice(1);\r\n    })}\r\n  />\r\n);\r\n","import React from \"react\";\r\nimport { Button, Classes } from \"@blueprintjs/core\";\r\nimport { Select } from \"@blueprintjs/labs\";\r\nimport CommonItemRenderer from \"./CommonItemRenderer\";\r\nimport { Icon } from \"@blueprintjs/core\";\r\nexport default ({ items, onSelect, value, fill = false }) => (\r\n  <Select\r\n    items={items}\r\n    itemRenderer={CommonItemRenderer}\r\n    filterable={false}\r\n    onItemSelect={onSelect}\r\n  >\r\n        {/* <button style={{height: \"100%\" ,marginLeft: \"2px\"}} type=\"button\">\r\n          {value.charAt(0).toUpperCase() + value.slice(1).toLowerCase()}\r\n        </button> */}\r\n        <Button className={fill ? Classes.FILL : null} text={value} />\r\n\r\n  </Select>\r\n);\r\n","/* eslint-disable jsx-a11y/label-has-for */\r\nimport React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n  Switch,\r\n  FileInput\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\n\r\n@observer\r\nclass PostImportOptions extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n            After import, show:\r\n            <SimpleSelect\r\n                items={Object.keys(appState.import.postImportFilteringOptions)}\r\n                value={appState.import.selectedPostImportFilteringOption}\r\n                onSelect={(selected) => {\r\n                    appState.import.selectedPostImportFilteringOption = selected;\r\n                }}\r\n            />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PostImportOptions;","/* eslint-disable jsx-a11y/label-has-for */\r\nimport React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n  Switch\r\n} from \"@blueprintjs/core\";\r\nimport { Cell, Column, Table } from \"@blueprintjs/table\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport {\r\n  requestChooseEdgeFile,\r\n  requestChooseNodeFile,\r\n  requestImportGraphFromCSV,\r\n  requestCreateNewProject\r\n} from \"../ipc/client\";\r\nimport Collapsable from \"./utils/Collapsable\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\nimport { NODE_AND_EDGE_FILE, ONLY_EDGE_FILE } from \"../constants/index\";\r\nimport PostImportOptions from './PostImportOptions';\r\n\r\n@observer\r\nclass PreviewTable extends React.Component {\r\n  render() {\r\n    const file = this.props.file;\r\n    return (\r\n      <Table\r\n        className=\"import-preview-table\"\r\n        numRows={file.topN.length}\r\n        selectedRegions={Object.values(file.mapping)\r\n          .map(it => file.columns.indexOf(it))\r\n          .map(it => ({ rows: null, cols: [it, it] }))}\r\n      >\r\n        {file.columns.map(it => (\r\n          <Column\r\n            key={it}\r\n            name={it}\r\n            renderCell={i => <Cell>{file.topN[i][it]}</Cell>}\r\n          />\r\n        ))}\r\n      </Table>\r\n    );\r\n  }\r\n}\r\n\r\n@observer\r\nclass ImportDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      available: NODE_AND_EDGE_FILE,\r\n      nodesOpen: true,\r\n      edgesOpen: true,\r\n      delimiter: ','\r\n    };\r\n  }\r\n\r\n  changeAvailable = targetValue => {\r\n    if (targetValue === ONLY_EDGE_FILE) {\r\n      appState.import.importConfig.edgeFile.createMissing = true;\r\n    }\r\n    this.setState({ available: targetValue });\r\n  };\r\n\r\n  canImport = () => {\r\n    if (this.state.available === NODE_AND_EDGE_FILE) {\r\n      return (\r\n        appState.import.importConfig.edgeFile.ready &&\r\n        appState.import.importConfig.nodeFile.ready\r\n      );\r\n    } else if (this.state.available === ONLY_EDGE_FILE) {\r\n      return appState.import.importConfig.edgeFile.ready;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  renderNodesSelection = () => {\r\n    const nodeFile = appState.import.importConfig.nodeFile;\r\n    if (this.state.available === ONLY_EDGE_FILE) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Collapsable\r\n        name=\"Nodes\"\r\n        isOpen={this.state.nodesOpen}\r\n        onToggle={() => this.setState({ nodesOpen: !this.state.nodesOpen })}\r\n      >\r\n        <div className={classnames(Classes.CONTROL_GROUP)} style={{margin: \"10px\"}}>\r\n        <div className={classnames(Classes.CONTROL_GROUP)}>\r\n          <div style={{lineHeight:\"10px\"}} className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n            <input\r\n              type=\"file\"\r\n              className={classnames(Classes.DISABLED)}\r\n              onChange={(event) => {\r\n                if (event.target.files.length < 1) {\r\n                  return;\r\n                }\r\n                appState.import.selectedNodeFileFromInput = event.target.files[0];\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        </div>\r\n        {/* <Switch\r\n          label=\"Has Headers\"\r\n          checked={nodeFile.hasColumns}\r\n          onChange={() => (nodeFile.hasColumns = !nodeFile.hasColumns)}\r\n        /> */}\r\n        {nodeFile.ready && (\r\n          <div className=\"column-selection\">\r\n            <PreviewTable file={nodeFile} />\r\n            Column for Node ID:\r\n            <SimpleSelect\r\n              items={nodeFile.columns}\r\n              value={nodeFile.mapping.id}\r\n              onSelect={it => (nodeFile.mapping.id = it)}\r\n            />\r\n            <p sytle = {{margin: '0 0 0px',padding: '0'}}></p>\r\n            Column for Node Longitude:\r\n            <SimpleSelect\r\n              items={nodeFile.columns}\r\n              value={nodeFile.mapping.LonX}\r\n              onSelect={it => (nodeFile.mapping.LonX = it)}\r\n            />\r\n            <p sytle = {{margin: '0 0 0px',padding: '0'}}></p>\r\n            Column for Node Latitude:\r\n            <SimpleSelect\r\n              items={nodeFile.columns}\r\n              value={nodeFile.mapping.LatY}\r\n              onSelect={it => (nodeFile.mapping.LatY = it)}\r\n            />\r\n          </div>\r\n        )}\r\n      </Collapsable>\r\n    );\r\n  };\r\n\r\n  renderEdgesSelection = () => {\r\n    const edgeFile = appState.import.importConfig.edgeFile;\r\n    return (\r\n      <Collapsable\r\n        name=\"Edges\"\r\n        isOpen={this.state.edgesOpen}\r\n        onToggle={() => this.setState({ edgesOpen: !this.state.edgesOpen })}\r\n      >\r\n        <div className={classnames(Classes.CONTROL_GROUP)} style={{margin: \"10px\"}}>\r\n          <div style={{lineHeight:\"10px\"}} className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n            <input\r\n              type=\"file\"\r\n              className={classnames(Classes.DISABLED)}\r\n              onChange={(event) => {\r\n                if (event.target.files.length < 1) {\r\n                  return;\r\n                }\r\n                appState.import.selectedEdgeFileFromInput = event.target.files[0];\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* <Switch\r\n          label=\"Has Headers\"\r\n          checked={edgeFile.hasColumns}\r\n          onChange={() => (edgeFile.hasColumns = !edgeFile.hasColumns)}\r\n        /> */}\r\n        {/* <Switch\r\n          label=\"Create Missing Nodes\"\r\n          checked={edgeFile.createMissing}\r\n          disabled={this.state.available === ONLY_EDGE_FILE}\r\n          onChange={() => (edgeFile.createMissing = !edgeFile.createMissing)}\r\n        /> */}\r\n        {edgeFile.ready && (\r\n          <div className=\"column-selection\">\r\n            <PreviewTable file={edgeFile} />\r\n            Column for Source ID:\r\n            <SimpleSelect\r\n              items={edgeFile.columns}\r\n              value={edgeFile.mapping.fromId}\r\n              onSelect={it => (edgeFile.mapping.fromId = it)}\r\n            />{\" \"}\r\n            <br />\r\n            Column for Target ID:\r\n            <SimpleSelect\r\n              items={edgeFile.columns}\r\n              value={edgeFile.mapping.toId}\r\n              onSelect={it => (edgeFile.mapping.toId = it)}\r\n            />\r\n          </div>\r\n        )}\r\n      </Collapsable>\r\n    );\r\n  };\r\n\r\n  updateDelimiter (newDelimiter) {\r\n    this.setState({delimiter: newDelimiter});\r\n\r\n    if (newDelimiter == \"\\\\t\") {\r\n      newDelimiter = \"\\t\"\r\n    }\r\n\r\n    appState.import.importConfig.edgeFile.delimiter = newDelimiter\r\n    appState.import.importConfig.nodeFile.delimiter = newDelimiter\r\n  }\r\n\r\n  renderDelimiterSelection() {\r\n    return (\r\n      <div className=\"column-selection\">\r\n        Selected Delimiter: \r\n        <SimpleSelect\r\n          items={[\",\", \"\\\\t\", \";\"]}\r\n          value={this.state.delimiter}\r\n          onSelect={it => { this.updateDelimiter(it) }}\r\n        />{\" \"}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderExampleDataset(){\r\n    return(\r\n      <div id=\"exampleTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n        <p>Required attributes for nodelist.csv. Each row of the node table should represent attributes of a node, including at least a unique node ID and the node's longitude and latitude. </p>\r\n                    <table id=\"exampleNodeTable\" className={Classes.TABLE} style={{width: '100%' }}>\r\n                        <thead >\r\n                            <tr>\r\n                                <th > ID (unique node ID field) </th>\r\n                                <th> LonX (node longitude ) </th>\r\n                                <th> LatY (node latitude ) </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>\"APL\"</td>\r\n                                <td>67.2391</td>\r\n                                <td>-102.3472</td>\r\n                            </tr>\r\n                            \r\n                        </tbody>\r\n                    </table>\r\n                    <p>Required attributes for edgelist.csv. Each row of the edge table should represent attributes of an edge, including at least a source and target column corresponding to the node ID. </p>\r\n                    <table id = \"exampleEdgeTable\" className={Classes.TABLE} style={{width: '100%' }}>\r\n                        <thead>\r\n                            <tr>\r\n                                <th > Source </th>\r\n                                <th> Target </th>\r\n                              \r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>\"APL\"</td>\r\n                                <td>\"FWL\"</td>\r\n                \r\n                            </tr>\r\n                            \r\n                        </tbody>\r\n                    </table>\r\n                    <p>Example Dataset:</p>\r\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" className=\"pt-button pt-icon-document\"  href=\"https://drive.google.com/file/d/1_OIDSbUyM9gTqziVdcqU_NsGxkk6HMTo/view?usp=share_link\"> US_airport_nodelist.csv</a>\r\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" className=\"pt-button pt-icon-document\"  href=\"https://drive.google.com/file/d/1cvOUir8gKDlS_hhNGL0qQOn2eNHCDsOU/view?usp=share_link\"> US_airport_edgelist.csv</a>\r\n                </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        iconName=\"import\"\r\n        className={classnames({\r\n          [Classes.DARK]: appState.preferences.darkMode\r\n        })}\r\n        isOpen={appState.import.dialogOpen}\r\n        onClose={() => {\r\n          appState.import.dialogOpen = false;\r\n        }}\r\n        title=\"Import CSV\"\r\n      >\r\n        {appState.import.loading ? (\r\n          <Spinner />\r\n        ) : (\r\n          <div>\r\n            <div className={classnames(Classes.DIALOG_BODY, \"import-dialog\")}>\r\n              I have:\r\n              <SimpleSelect\r\n                items={[ NODE_AND_EDGE_FILE]}\r\n                value={this.state.available}\r\n                onSelect={this.changeAvailable}\r\n              />\r\n              {this.renderNodesSelection()}\r\n              {this.renderEdgesSelection()}\r\n              {this.renderExampleDataset()}\r\n              {/* {this.renderDelimiterSelection()} */}\r\n              <hr />\r\n              <PostImportOptions />\r\n            </div>\r\n            <div className={Classes.DIALOG_FOOTER}>\r\n              <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n                <Button\r\n                  className={classnames({\r\n                    [Classes.DISABLED]: !this.canImport()\r\n                  })}\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={() => {\r\n                    // TODO: this might be unsafe, check if there's racing condition\r\n\r\n                    //active layout when new graph imported\r\n                    appState.graph.runActiveLayout();\r\n\r\n                    requestCreateNewProject({\r\n                      name: appState.project.newProjectName,\r\n                      createdDate: new Date().toLocaleString(),\r\n                    });\r\n                    requestImportGraphFromCSV( //edgefile.delimiter and nodefile.delimiter are the same\r\n                      this.state.available === NODE_AND_EDGE_FILE, appState.import.importConfig.edgeFile.delimiter, appState.project.newProjectName\r\n                    );\r\n\r\n                    // Importing a graph means no label would be shown by default,\r\n                    // thus turn off label CSSRenderer for better performance.\r\n                    appState.graph.frame.turnOffLabelCSSRenderer();\r\n                  }}\r\n                  text=\"Import\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImportDialog;","/* eslint-disable jsx-a11y/label-has-for */\r\nimport React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport {\r\n  requestImportGraphFromGexf\r\n} from \"../ipc/client\";\r\nimport PostImportOptions from './PostImportOptions';\r\n\r\n@observer\r\nclass GEXFImportDialog extends React.Component {\r\n\r\n  renderImportButton() {\r\n    return (\r\n      <div className={Classes.DIALOG_FOOTER}>\r\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n          <Button\r\n            className={classnames({\r\n              [Classes.DISABLED]: appState.import.selectedGexfFileFromInput == null\r\n            })}\r\n            intent={Intent.PRIMARY}\r\n            onClick={() => {\r\n              // Temp\r\n              \r\n               //active layout when new graph imported\r\n               appState.graph.runActiveLayout();\r\n\r\n              appState.import.loading = true;\r\n              requestImportGraphFromGexf();\r\n            }}\r\n            text=\"Import\"\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        iconName=\"import\"\r\n        className={classnames({\r\n          [Classes.DARK]: appState.preferences.darkMode\r\n        })}\r\n        isOpen={appState.import.gexfDialogOpen}\r\n        onClose={() => {\r\n          appState.import.gexfDialogOpen = false;\r\n          appState.import.loading = false;\r\n        }}\r\n        title=\"Import GEXF\"\r\n      >\r\n        {appState.import.loading ? (\r\n          <Spinner />\r\n        ) : (\r\n          <div className={classnames(Classes.DIALOG_BODY, \"import-dialog\")}>\r\n            <div>\r\n              <div className={classnames(Classes.CONTROL_GROUP)}>\r\n                <div className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n                <input\r\n                  type=\"file\"\r\n                  className={classnames(Classes.DISABLED)}\r\n                  onChange={(event) => {\r\n                    if (event.target.files.length < 1) {\r\n                      return;\r\n                    }\r\n                    appState.import.selectedGexfFileFromInput = event.target.files[0];\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <hr />\r\n            <PostImportOptions />\r\n          </div>\r\n            {this.renderImportButton()}\r\n          </div>\r\n        )}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GEXFImportDialog;","/* eslint-disable jsx-a11y/label-has-for */\r\n\r\n/**\r\n * [Deprecated] This dialog is only used to open SQlite-based\r\n * graph file and optionally along with a snapshot file.\r\n * \r\n * For Argo-lite, which only has the JSON snapshot file,\r\n * use OpenSnapshotDialog.\r\n */\r\nimport React from \"react\";\r\nimport { Button, Classes, Dialog, Intent, Spinner } from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport {\r\n  requestChooseGraphFile,\r\n  requestChooseStateFile,\r\n  requestOpen\r\n} from \"../ipc/client\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\nimport {\r\n  GRAPH_AND_STATE_FILE,\r\n  ONLY_EDGE_FILE,\r\n  ONLY_GRAPH_FILE\r\n} from \"../constants\";\r\n\r\n@observer\r\nclass OpenDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      available: ONLY_GRAPH_FILE,\r\n      selectedGraph: null,\r\n      selectedState: null\r\n    };\r\n  }\r\n\r\n  canImport = () => {\r\n    if (this.state.available === GRAPH_AND_STATE_FILE) {\r\n      return appState.import.stateFile && appState.import.graphFile;\r\n    } else {\r\n      return appState.import.graphFile;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  changeAvailable = targetValue => {\r\n    if (targetValue === ONLY_EDGE_FILE) {\r\n      appState.import.importConfig.edgeFile.createMissing = true;\r\n    }\r\n    this.setState({ available: targetValue });\r\n  };\r\n\r\n  renderSelectGraph = () => {\r\n    return (\r\n      <div className={classnames(Classes.CONTROL_GROUP)}>\r\n        <div className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n          <input\r\n            type=\"text\"\r\n            className={classnames(Classes.DISABLED, Classes.INPUT)}\r\n            placeholder=\"Select graph file\"\r\n            readOnly\r\n            value={appState.import.graphFile}\r\n          />\r\n        </div>\r\n        <Button \r\n        style={{height:'15px'}}\r\n        intent={Intent.PRIMARY} onClick={requestChooseGraphFile}>\r\n          Choose File\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderSelectState = () => {\r\n    return (\r\n      <div className={classnames(Classes.CONTROL_GROUP)}>\r\n        <div className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n          <input\r\n            type=\"text\"\r\n            className={classnames(Classes.DISABLED, Classes.INPUT)}\r\n            placeholder=\"Select snapshot file\"\r\n            readOnly\r\n            value={appState.import.stateFile}\r\n          />\r\n        </div>\r\n        <Button \r\n        style={{height:'15px'}}\r\n        intent={Intent.PRIMARY} onClick={requestChooseStateFile}>\r\n          Choose File\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        iconName=\"import\"\r\n        className={classnames({\r\n          [Classes.DARK]: appState.preferences.darkMode\r\n        })}\r\n        isOpen={appState.preferences.openDialogOpen}\r\n        onClose={() => {\r\n          appState.preferences.openDialogOpen = false;\r\n        }}\r\n        title=\"Open File\"\r\n      >\r\n        {appState.import.loading ? (\r\n          <Spinner />\r\n        ) : (\r\n          <div>\r\n            <div className={classnames(Classes.DIALOG_BODY, \"import-dialog\")}>\r\n              I have:\r\n              <SimpleSelect\r\n                items={[GRAPH_AND_STATE_FILE, ONLY_GRAPH_FILE]}\r\n                value={this.state.available}\r\n                onSelect={this.changeAvailable}\r\n              />\r\n              {this.renderSelectGraph()}\r\n              {this.state.available === GRAPH_AND_STATE_FILE &&\r\n                this.renderSelectState()}\r\n            </div>\r\n            <div className={Classes.DIALOG_FOOTER}>\r\n              <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n                <Button\r\n                  className={classnames({\r\n                    [Classes.DISABLED]: !this.canImport()\r\n                  })}\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={() => {\r\n                    appState.preferences.openDialogOpen = false;\r\n                    requestOpen();\r\n                  }}\r\n                  text=\"Open\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OpenDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n  Switch\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass NewProjectDialog extends React.Component {\r\n  \r\n  render() {\r\n    const isNewProjectNameDuplicate = appState.project.projects.some(p => p.name === appState.project.newProjectName);\r\n    const isNewProjectNameEmpty = appState.project.newProjectName.trim() === '';\r\n    const isValidated = !(isNewProjectNameDuplicate || isNewProjectNameEmpty);\r\n  \r\n    return (\r\n      <Dialog\r\n        iconName=\"projects\"\r\n        isOpen={appState.project.isNewProjectDialogOpen}\r\n        onClose={() => {\r\n          appState.project.isNewProjectDialogOpen = false;\r\n        }}\r\n        title=\"Create New Project\"\r\n      >\r\n        <div className={Classes.DIALOG_BODY}>\r\n          <label className=\"pt-label .modifier\">\r\n            Project Name\r\n            <span className=\"pt-text-muted\"> (required){isNewProjectNameDuplicate && ' (This name has already been taken!)'}</span>\r\n            <input\r\n              className=\"pt-input\"\r\n              type=\"text\"\r\n              placeholder=\"New Project\"\r\n              dir=\"auto\"\r\n              value={appState.project.newProjectName}\r\n              onChange={event => {\r\n                appState.project.newProjectName = event.target.value;\r\n              }}\r\n            />\r\n          </label>\r\n        </div>\r\n        <div className={Classes.DIALOG_FOOTER}>\r\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n            <Button\r\n              className={classnames({\r\n                [Classes.DISABLED]: !isValidated\r\n              })}\r\n              intent={Intent.PRIMARY}\r\n              onClick={() => {\r\n                if (isValidated) {\r\n                  appState.project.isNewProjectDialogOpen = false;\r\n                  appState.import.dialogOpen = true;\r\n                }\r\n              }}\r\n              text=\"Next\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NewProjectDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Card,\r\n  Icon,\r\n  Dialog,\r\n  Intent,\r\n  Spinner\r\n} from \"@blueprintjs/core\";\r\nimport { requestOpen, requestDelete } from \"../ipc/client\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass ProjectDetailDialog extends React.Component {\r\n  render() {\r\n    return (\r\n      appState.project.currentProject && (\r\n        <Dialog\r\n          iconName=\"projects\"\r\n          isOpen={appState.project.isProjectDetailDialogOpen}\r\n          onClose={() => {\r\n            appState.project.isProjectDetailDialogOpen = false;\r\n          }}\r\n          title={`Load ${appState.project.currentProject.name} Project`}\r\n        >\r\n          {appState.project.currentProject.hasGraphData ? (\r\n            <div className={Classes.DIALOG_BODY}>\r\n              <Card\r\n                interactive={true}\r\n                elevation={Card.ELEVATION_TWO}\r\n                onClick={() => {\r\n                  appState.import.graphFile =\r\n                    appState.project.currentProject.graphDataPath;\r\n                  appState.project.isProjectDetailDialogOpen = false;\r\n                  requestOpen();\r\n                }}\r\n              >\r\n                <Icon iconName=\"graph\" /> Start fresh from original graph\r\n              </Card>\r\n              <hr />\r\n              <div className=\"argo-menu-list-header\">Load recent snapshots</div>\r\n              <div>\r\n                {appState.project.currentProject.snapshotPaths.map(\r\n                  snapshotPath => {\r\n                    return (\r\n                      <div key={snapshotPath}>\r\n                        <Card\r\n                          interactive={false}\r\n                          elevation={Card.ELEVATION_TWO}\r\n                        >\r\n                          {/* <Icon iconName=\"layout\" /> */}\r\n                          <h5>\r\n                            {snapshotPath\r\n                              .replace(/^.*[\\\\\\/]/, \"\")\r\n                              .replace(/\\.[^/.]+$/, \"\")}\r\n                          </h5>\r\n                          <Button\r\n                            className={classnames([\r\n                              Classes.BUTTON,\r\n                              Classes.INTENT_PRIMARY\r\n                            ])}\r\n                            onClick={() => {\r\n                              appState.import.graphFile =\r\n                                appState.project.currentProject.graphDataPath;\r\n                              appState.import.stateFile = snapshotPath;\r\n                              appState.project.currentSnapshotName = snapshotPath\r\n                                .replace(/^.*[\\\\\\/]/, \"\")\r\n                                .replace(/\\.[^/.]+$/, \"\");\r\n                              appState.project.isProjectDetailDialogOpen = false;\r\n                              requestOpen();\r\n                            }}\r\n                          >\r\n                            Load Snapshot\r\n                          </Button>\r\n                          <Button\r\n                            className={classnames([Classes.BUTTON])}\r\n                            onClick={() => {\r\n                                requestDelete(snapshotPath);\r\n                                appState.project.currentProject.snapshotPaths = appState.project.currentProject.snapshotPaths.filter(\r\n                                  path => path !== snapshotPath\r\n                                );\r\n                            }}\r\n                          >\r\n                            Delete\r\n                          </Button>\r\n                        </Card>\r\n                      </div>\r\n                    );\r\n                  }\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              Error: Cannot find .argograph file in this project directory.\r\n            </div>\r\n          )}\r\n        </Dialog>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProjectDetailDialog;","/**\r\n * [Argo-lite Modified]\r\n * In electron Argo, snapshots are saved to the active project folder.\r\n * In Argo-lite, snapshots are saved as a file download.\r\n * Sometimes, it's tricky to let browser download something without a backend\r\n * hosting the file. Thus we also allow user to copy paste from\r\n * a text area containing our snapshot JSON.\r\n * \r\n * Remember to change appState.project.stringCopyOfSnapshot\r\n * before showing the dialog.\r\n */\r\nimport React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Card,\r\n  Icon,\r\n  Dialog,\r\n  Intent,\r\n  Spinner\r\n} from \"@blueprintjs/core\";\r\nimport { requestSaveSnapshot } from \"../ipc/client\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass SaveSnapshotDialog extends React.Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  //   this.state = {\r\n  //     name: \"Quick Save\",\r\n  //   };\r\n  // }\r\n\r\n  render() {\r\n    return (\r\n        <Dialog\r\n          iconName=\"projects\"\r\n          isOpen={appState.project.isSaveSnapshotDialogOpen}\r\n          onClose={() => {\r\n            appState.project.isSaveSnapshotDialogOpen = false;\r\n          }}\r\n          title={`Save Snapshot`}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n            {/* <label className=\"pt-label .modifier\">\r\n              Snapshot Name\r\n              <span className=\"pt-text-muted\"> (required)</span>\r\n              <input\r\n                className=\"pt-input\"\r\n                type=\"text\"\r\n                placeholder=\"My Snapshot\"\r\n                dir=\"auto\"\r\n                value={this.state.name}\r\n                onChange={event => this.setState({ name: event.target.value })}\r\n              />\r\n            </label> */}\r\n            <p>If your browser doesn't start downloading the file, you can manually copy the content below and save to a plain text file.</p>\r\n            <input id=\"snapshot-textarea\" type=\"textarea\" value={appState.project.stringCopyOfSnapshot} readOnly />\r\n            <button\r\n              onClick={() => {\r\n                document.getElementById('snapshot-textarea').select();\r\n                document.execCommand(\"copy\");\r\n              }}\r\n            >\r\n              Copy to Clipboard\r\n            </button>\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                // className={classnames({\r\n                //   [Classes.DISABLED]: !this.state.name\r\n                // })}\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.project.isSaveSnapshotDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SaveSnapshotDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Card,\r\n  Icon,\r\n  Dialog,\r\n  Intent,\r\n  Spinner\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass SaveSnapshotDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <Dialog\r\n          iconName=\"projects\"\r\n          isOpen={appState.project.isRenameSnapshotDialogOpen}\r\n          onClose={() => {\r\n            appState.project.isRenameSnapshotDialogOpen = false;\r\n          }}\r\n          title={`Rename Snapshot`}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n            <label className=\"pt-label .modifier\">\r\n              Snapshot Name\r\n              <span className=\"pt-text-muted\"> (required)</span>\r\n              <input\r\n                className=\"pt-input\"\r\n                type=\"text\"\r\n                placeholder=\"My Snapshot\"\r\n                dir=\"auto\"\r\n                value={this.state.name}\r\n                onChange={event => this.setState({ name: event.target.value })}\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                className={classnames({\r\n                  [Classes.DISABLED]: !this.state.name\r\n                })}\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.graph.metadata.snapshotName = this.state.name;\r\n                  appState.project.isRenameSnapshotDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SaveSnapshotDialog;","/**\r\n * [Argo-lite] Open the Argo-lite JSON graph snapshot file\r\n */\r\nimport React from \"react\";\r\nimport { Button, Classes, Dialog, Intent } from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\nimport { toaster } from '../notifications/client';\r\n\r\n@observer\r\nclass OpenSnapshotDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        selectedFile: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Dialog\r\n        iconName=\"import\"\r\n        className={classnames({\r\n          [Classes.DARK]: appState.preferences.darkMode\r\n        })}\r\n        isOpen={appState.preferences.openSnapshotDialogOpen}\r\n        onClose={() => {\r\n          appState.preferences.openSnapshotDialogOpen = false;\r\n        }}\r\n        title=\"Open File\"\r\n      >\r\n        <div>\r\n            <div className={classnames(Classes.DIALOG_BODY)}>\r\n                <div className={classnames(Classes.CONTROL_GROUP)}>\r\n                    <div className={classnames(Classes.INPUT_GROUP, Classes.FILL)}>\r\n                        <input\r\n                            type=\"file\"\r\n                            className={classnames(Classes.DISABLED)}\r\n                            onChange={(event) => {\r\n                                if (event.target.files.length < 1) {\r\n                                    return;\r\n                                }\r\n                                this.setState({\r\n                                    selectedFile: event.target.files[0]\r\n                                });\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={Classes.DIALOG_FOOTER}>\r\n              <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n                <Button\r\n                  className={classnames({\r\n                    [Classes.DISABLED]: !this.state.selectedFile\r\n                  })}\r\n                  intent={Intent.PRIMARY}\r\n                  onClick={() => {\r\n                    // This dialog is closed when user is done selecting file\r\n                    appState.preferences.openSnapshotDialogOpen = false;\r\n\r\n                    // Show user a notification\r\n                    toaster.show({\r\n                        message: 'Loading Graph Snapshot. Please wait...',\r\n                        intent: Intent.NONE,\r\n                        timeout: 2000\r\n                    });\r\n                    \r\n                    // Read the file and load snapshot\r\n                    const reader = new FileReader();\r\n                    reader.readAsText(this.state.selectedFile);\r\n\r\n                    reader.onload = () => {\r\n                        const fileAsString = reader.result;\r\n                        appState.graph.loadImmediateStates(fileAsString);\r\n                    }\r\n                  }}\r\n                  text=\"Open\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OpenSnapshotDialog;","import React from \"react\";\r\nimport {\r\n    Button,\r\n    Classes,\r\n    Card,\r\n    Icon,\r\n    Dialog,\r\n    Intent,\r\n    Spinner\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport { toaster } from '../notifications/client';\r\nimport * as Blueprint from \"@blueprintjs/core\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport { BACKEND_URL } from \"../constants\";\r\n\r\nconst uuidv4 = require('uuid/v4');\r\n\r\n@observer\r\nclass ShareDialog extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isShared: false,\r\n            isFetching: false,\r\n            sharedURL: 'Error: Sharing failed',\r\n            selectedContinue: false,\r\n        };\r\n\r\n        this.handleRequest = this.handleRequest.bind(this);\r\n    }\r\n\r\n\r\n\r\n\r\n    async handleRequest(uuid) {\r\n        // return await new Promise(resolve => setTimeout(resolve, 2000));\r\n        const backendURL = `${BACKEND_URL}/snapshots`;\r\n        // TODO: add better error handling\r\n        return await fetch(backendURL, {\r\n            method: 'POST',\r\n            mode: 'cors',\r\n            cache: 'no-cache',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            referrer: 'no-referrer',\r\n            body: JSON.stringify({\r\n                uuid,\r\n                body: window.saveSnapshotToString()\r\n            }),\r\n        }).then(response => response.ok).catch(error => {\r\n            toaster.show({\r\n                message: 'Failed to publish to sharing server. Unexpected error.',\r\n                intent: Intent.DANGER,\r\n                timeout: -1\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n\r\n        return (\r\n            <Dialog\r\n                iconName=\"projects\"\r\n                isOpen={appState.preferences.shareDialogOpen}\r\n                onClose={() => {\r\n                    appState.preferences.shareDialogOpen = false;\r\n                    this.setState({\r\n                        ...this.state,\r\n                        selectedContinue: false,\r\n                    });\r\n                }}\r\n                title={`Share Graph Snapshot`}\r\n                style={{ width: !this.state.selectedContinue ? 735 : 580 }}\r\n            >\r\n                <div className={classnames(Classes.DIALOG_BODY)}>\r\n                    {\r\n                        !this.state.selectedContinue && (\r\n                            <div>\r\n                                <p style={{ display: \"inline\", marginRight: \"20px\" }}>You can share your snapshot as\r\n                        <b> a public URL</b>, an <b> HTML iframe</b>, or a <b>Jupyter Notebook IFrame</b></p>\r\n                                {\r\n                                    !this.state.selectedContinue && (\r\n                                        <Button\r\n                                            className={classnames({\r\n                                                [Classes.DISABLED]: this.state.isFetching\r\n                                            })}\r\n                                            intent={Intent.PRIMARY}\r\n                                            onClick={async () => {\r\n                                                this.setState({ isFetching: true });\r\n                                                // Generate a random UUID\r\n                                                const uuid = uuidv4();\r\n                                                // Generate URL corresponding to the UUID\r\n                                                const sharedURL = `https://poloclub.github.io/argo-graph-lite/#${uuid}`;\r\n\r\n                                                // Wait for backend response\r\n                                                const requestSuccess = await this.handleRequest(uuid);\r\n                                                // Update local state\r\n                                                if (requestSuccess) {\r\n                                                    this.setState({ isFetching: false, isShared: true, sharedURL });\r\n                                                } else {\r\n                                                    // request fails, toast fires\r\n                                                    this.setState({ isFetching: false, isShared: false });\r\n                                                    toaster.show({\r\n                                                        message: 'Failed to publish to sharing server. Please try again later.',\r\n                                                        intent: Intent.DANGER,\r\n                                                        timeout: -1\r\n                                                    });\r\n                                                }\r\n                                                this.setState({\r\n                                                    ...this.state,\r\n                                                    selectedContinue: true,\r\n                                                });\r\n                                            }}\r\n                                            text=\"Continue\"\r\n                                        />\r\n                                    )\r\n                                }\r\n                                <hr />\r\n                                {/**pt-callout pt-intent-primary .modifier */}\r\n                                <div className=\"pt-callout pt-intent-warning\" style={{marginBottom: \"20px\",}}>\r\n                                    <p className=\"pt-callout-title\">This snapshot is “static”, like taking a photo of your visualization. This means that if your graph is changed in any ways (e.g., move nodes around) after creating a URL and you want to re-share those updates, you will need to create a new URL by selecting <b>Share Again to a new URL</b> in the next window.</p>\r\n                                </div>\r\n                                <div className=\"pt-callout pt-intent-danger\">\r\n                                    <p className=\"pt-callout-title \"><b>IMPORTANT!</b> This will make your graph snapshot public. If you are working with sensitive data (with custom access control), or large data (>400MB), please follow our guide on Github to easily deploy your own sharing server.</p>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    }\r\n                    {\r\n                        this.state.isFetching && (\r\n                            <p style={{marginTop: \"10px\"}}><b>Sharing in progress. Please wait...</b></p>\r\n                        )\r\n                    }\r\n                    {\r\n                        this.state.selectedContinue && (\r\n                            <div>\r\n                                {/** graph URL */}\r\n                        Your current snapshot has been shared to\r\n                                <br />\r\n                                <input\r\n                                    id=\"snapshot-textarea\"\r\n                                    type=\"textarea\"\r\n                                    value={this.state.sharedURL}\r\n                                    readOnly\r\n                                    style={{\r\n                                        width: '400px',\r\n                                        marginTop: \"5px\"\r\n                                    }}\r\n                                />\r\n                                <button\r\n                                    onClick={() => {\r\n                                        document.getElementById('snapshot-textarea').select();\r\n                                        document.execCommand(\"copy\");\r\n                                    }}\r\n                                    className=\"copy-to-clipboard\"\r\n                                >\r\n                                    Copy to Clipboard\r\n                        </button>\r\n                                <br />\r\n                                <hr />\r\n\r\n                                {/** Embedding as HTML iframe */}\r\n                        Embed as an <b>HTML iframe</b>:\r\n                                <br />\r\n                                <input\r\n                                    id=\"iframe-html-textarea\"\r\n                                    type=\"textarea\"\r\n                                    value={`<iframe src=\"${this.state.sharedURL}\" width=\"850\" height=\"500\"></iframe>`}\r\n                                    style={{\r\n                                        width: '400px',\r\n                                        marginTop: \"5px\"\r\n                                    }}\r\n                                    readOnly\r\n                                />\r\n                                <button\r\n                                    onClick={() => {\r\n                                        document.getElementById('iframe-html-textarea').select();\r\n                                        document.execCommand(\"copy\");\r\n                                    }}\r\n                                    className=\"copy-to-clipboard\"\r\n                                >\r\n                                    Copy to Clipboard\r\n                        </button>\r\n                                <br />\r\n                                <hr />\r\n\r\n                                {/** Embedding as Jupyter Notebook IFrame */}\r\n                        Embed as a <b>Jupyter Notebook IFrame</b>:\r\n                                <br />\r\n                                <textarea\r\n                                    id=\"iframe-jupyter-textarea\"\r\n                                    rows=\"2\"\r\n                                    cols=\"60\"\r\n                                    style={{\r\n                                        overflow: \"hidden\",\r\n                                        marginTop: \"5px\",\r\n                                        width: \"400px\",\r\n                                        resize: \"none\"\r\n                                    }}\r\n                                    readOnly=\"true\"\r\n                                    value={`from IPython.display import IFrame` + \"\\n\" + `IFrame(\"${this.state.sharedURL}\", width=700, height=350)`} />\r\n                                <button\r\n                                    onClick={() => {\r\n                                        document.getElementById('iframe-jupyter-textarea').select();\r\n                                        document.execCommand(\"copy\");\r\n                                    }}\r\n                                    className=\"copy-to-clipboard\"\r\n                                    style={{\r\n                                        position: \"absolute\",\r\n                                        marginTop: \"20px\",\r\n                                    }}\r\n                                >\r\n                                    Copy to Clipboard\r\n                        </button>\r\n                            </div>\r\n                        )\r\n                    }\r\n                </div>\r\n\r\n                <div className={Classes.DIALOG_FOOTER}>\r\n                    <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n                        {\r\n                            this.state.selectedContinue && (\r\n\r\n\r\n                                <Button\r\n                                    className={classnames({\r\n                                        [Classes.DISABLED]: this.state.isFetching\r\n                                    })}\r\n                                    intent={Intent.PRIMARY}\r\n                                    onClick={async () => {\r\n                                        this.setState({ isFetching: true, isShared: false });\r\n                                        // Generate a random UUID\r\n                                        const uuid = uuidv4();\r\n                                        // Generate URL corresponding to the UUID\r\n                                        const sharedURL = `https://poloclub.github.io/argo-graph-lite/#${uuid}`;\r\n\r\n                                        // Wait for backend response\r\n                                        const requestSuccess = await this.handleRequest(uuid);\r\n                                        // Update local state\r\n                                        if (requestSuccess) {\r\n                                            this.setState({ isFetching: false, isShared: true, sharedURL });\r\n                                        } else {\r\n                                            // request fails, toast fires\r\n                                            this.setState({ isFetching: false, isShared: false });\r\n                                            toaster.show({\r\n                                                message: 'Failed to publish to sharing server. Please try again later.',\r\n                                                intent: Intent.DANGER,\r\n                                                timeout: -1\r\n                                            });\r\n                                        }\r\n\r\n                                    }}\r\n                                    text=\"Share Snapshot as New URL\"\r\n                                />\r\n                            )\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <style dangerouslySetInnerHTML={{\r\n                    __html:\r\n                        `\r\n                    .copy-to-clipboard{\r\n                        margin-top: 5px;\r\n                        margin-left: 5px;\r\n                        border-style: solid;\r\n                    }\r\n                    \r\n            `}} />\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShareDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Card,\r\n  Icon,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n  Switch\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass StatisticsDialog extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//   }\r\n\r\n  render() {\r\n    return (\r\n        <Dialog\r\n          iconName=\"projects\"\r\n          isOpen={appState.preferences.statisticsDialogOpen}\r\n          onClose={() => {\r\n            appState.preferences.statisticsDialogOpen = false;\r\n          }}\r\n          title={`Statistics`}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n            <table className={Classes.TABLE} style={{width: '100%'}}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Statistics</th>\r\n                        <th>Value</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td># Nodes</td>\r\n                        <td>{appState.graph.metadata.fullNodes}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td># Edges</td>\r\n                        <td>{appState.graph.metadata.fullEdges}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Average Degree</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.degree().toFixed(3) : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Graph Density</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.density().toFixed(3) : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Graph Diameter</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.diameter() : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Clustering Coefficient</td>\r\n                        <td>{(appState.graph.hasGraph & appState.preferences.statisticsDialogOpen) ? appState.graph.averageClustering().toFixed(3) : 'loading graph'}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Connected Component</td>\r\n                        <td>{(appState.graph.hasGraph & appState.preferences.statisticsDialogOpen) ? appState.graph.components() : 'loading graph'}</td>\r\n\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.preferences.statisticsDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StatisticsDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Card,\r\n  Icon,\r\n  Dialog,\r\n  Intent,\r\n  Spinner,\r\n  Switch\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass FilterDialog extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//   }\r\n\r\n  render() {\r\n    return (\r\n        <Dialog\r\n          iconName=\"projects\"\r\n          isOpen={appState.preferences.filterDialogOpen}\r\n          onClose={() => {\r\n            appState.preferences.filterDialogOpen = false;\r\n          }}\r\n          title={`Filters`}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n            <table className={Classes.TABLE} style={{width: '100%'}}>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Statistics</th>\r\n                        <th>Value</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td># Nodes</td>\r\n                        <td>{appState.graph.metadata.fullNodes}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td># Edges</td>\r\n                        <td>{appState.graph.metadata.fullEdges}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Average Degree</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.degree : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Graph Density</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.density : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Graph Diameter</td>\r\n                        <td>\r\n                          {appState.graph.hasGraph ? appState.graph.diameter : 'loading graph'}\r\n                        </td>\r\n                    </tr>\r\n                    {/* <tr>\r\n                        <td>Clustering Coefficient</td>\r\n                        <td>{(appState.graph.hasGraph & appState.preferences.filterDialogOpen) ? appState.graph.averageClustering : 'loading graph'}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Connected Component</td>\r\n                        <td>{(appState.graph.hasGraph & appState.preferences.filterDialogOpen) ? appState.graph.components : 'loading graph'}</td>\r\n\r\n                    </tr> */}\r\n                </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.preferences.filterDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FilterDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\n\r\n@observer\r\nclass HelpDialog extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n        <Dialog\r\n          iconName=\"help\"\r\n          isOpen={appState.preferences.helpDialogOpen}\r\n          onClose={() => {\r\n            appState.preferences.helpDialogOpen = false;\r\n          }}\r\n          title={`Help`}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n          <a target=\"_blank\" rel=\"noopener noreferrer\" className=\"pt-button pt-icon-document\"  href=\"https://gatech.co1.qualtrics.com/jfe/form/SV_3kjYXeZT37404PY\"> Please fill out the participant survey here</a>\r\n            <p> SNoMaN supports both mouse/trackpad and touchscreen. </p>\r\n            <div className=\"argo-table-container\">\r\n              <table className=\"argo-table-container__table pt-table pt-bordered pt-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Basic Operation</th>\r\n                    <th>Mouse</th>\r\n                    <th>Touchscreen</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr>\r\n                    <td>Clear Selection</td>\r\n                    <td>Click blank area in the Network or Map View</td>\r\n                    <td>Tap blank area in the Network or Map View</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Zoom</td>\r\n                    <td>Mouse wheel</td>\r\n                    <td>2 finger zoom gesture</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Pan</td>\r\n                    <td>In the Network: drag with right mouse button down OR Move mouse with space key pressed; in the Map: drag the map</td>\r\n                    <td>Drag with 3 finger</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Adjust view size</td>\r\n                    <td>Drag the view borders between the left and right view and between the top and bottom view. </td>\r\n                    <td>Not supported</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Select single node to view details and highlight its eco-centric network</td>\r\n                    <td>Single click or drag to select one node in the Network or Map view</td>\r\n                    <td>Tap or drag with 1 finger to select one node</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Select multiple nodes to view details</td>\r\n                    <td>In the Network: Drag left mouse button from empty area; in the map: move mouse with CTRL key pressed;</td>\r\n                    <td>Drag 1 finger from empty area; </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Move and pin a node</td>\r\n                    <td>Click one node and drag with left mouse button down in the Network view</td>\r\n                    <td>Drag with 1 finger</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Move and pin a set of nodes</td>\r\n                    <td>Drag left mouse button from empty area to select, then click one of the hilighted nodes and drag to move in the Network view</td>\r\n                    <td>Drag with 1 finger</td>\r\n                  </tr>\r\n                  \r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.preferences.helpDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HelpDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  Switch,\r\n  ButtonGroup\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\n\r\n@observer\r\nclass NodeTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            sortBy: 'pagerank',\r\n            sortOrder: 'descending', // or 'ascending'\r\n        };\r\n    }\r\n\r\n  render() {\r\n    let filteredNodes = this.props.nodes;\r\n    \r\n    filteredNodes.sort((n1, n2) => {\r\n        const n1val = n1[this.state.sortBy];\r\n        const n2val = n2[this.state.sortBy];\r\n        if (n1val && n2val) {\r\n            // Check if these are numerical fields, if so sort by number.\r\n            const n1valAsNum = Number(n1val);\r\n            const n2valAsNum = Number(n2val);\r\n            if (!Number.isNaN(n1valAsNum) && !Number.isNaN(n2valAsNum)) {\r\n                // both values are numeric, compare by their value.\r\n                if (this.state.sortOrder === 'descending') {\r\n                    return n2valAsNum - n1valAsNum;\r\n                }\r\n                return n1valAsNum - n2valAsNum;\r\n            } else {\r\n                // not all values are numeric, sort by string order.\r\n                const n1valAsString = n1val.toString();\r\n                const n2valAsString = n2val.toString();\r\n                return (this.state.sortOrder === 'descending' ? -1 : 1) * n1valAsString.localeCompare(n2valAsString);\r\n            }\r\n        }\r\n        return 0;\r\n    });\r\n\r\n    const nodeAttributesOrig = appState.graph.allPropertiesKeyList.filter((k) => k !== 'pagerank' && k !== 'degree');\r\n    \r\n    return (\r\n            <div className=\"argo-table-container\">\r\n                Sort By {' '}\r\n                <SimpleSelect\r\n                    items={['pagerank', 'degree', ...nodeAttributesOrig]}\r\n                    value={this.state.sortBy}\r\n                    onSelect={(selected) => {\r\n                        this.setState({sortBy: selected});\r\n                    }}\r\n                />\r\n                <SimpleSelect\r\n                    items={['descending', 'ascending']}\r\n                    value={this.state.sortOrder}\r\n                    onSelect={(selected) => {\r\n                        this.setState({sortOrder: selected});\r\n                    }}\r\n                />\r\n                <table className=\"argo-table-container__table pt-table pt-bordered pt-striped\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th><b>Show</b></th>\r\n                            <th><b>Node ID</b></th>\r\n                            {\r\n                                appState.graph.allPropertiesKeyList.map((it, i) => {\r\n                                    if (it !== 'id') {\r\n                                        return <th key={`${it}-${i}`}>{it}</th>;\r\n                                    }\r\n                                    return null;\r\n                                })\r\n                            }\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            filteredNodes.map((node) => (\r\n                                <tr key={node.id}>\r\n                                    <td>\r\n                                        <Switch\r\n                                            checked={!node.isHidden}\r\n                                            onChange={() => {\r\n                                                if (node.isHidden) {\r\n                                                    appState.graph.showNodes([node.id]);\r\n                                                } else {\r\n                                                    appState.graph.hideNodes([node.id]);\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </td>\r\n                                    <td>{node.id}</td>\r\n                                    {\r\n                                        appState.graph.allPropertiesKeyList.map((it, i) => {\r\n                                            if (it !== 'id') {\r\n                                                return <td key={`${it}-${i}`}>{node[it]}</td>\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                </tr>\r\n                            ))\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NodeTable;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  ButtonGroup,\r\n  NumericInput,\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport NodeTable from './NodeTable';\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\n\r\n@observer\r\nclass NeighborDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showMoreBy: 'pagerank',\r\n      showMoreNum: 5,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    // Compare function for nodes used for sorting descendingly.\r\n    const compareByPageRank = (n1, n2) => {\r\n        if (n1[\"pagerank\"] && n2[\"pagerank\"]) {\r\n            return n2[\"pagerank\"] - n1[\"pagerank\"];\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    let filteredNodes = [];\r\n    // When only one node is selected, show the neighbors of this selected node.\r\n    if (appState.graph.lastSelectedSingleNode) {\r\n        const selectedNodeId = appState.graph.lastSelectedSingleNode.data.ref.id.toString();\r\n        filteredNodes = appState.graph.getNeighborNodesFromRawGraph(selectedNodeId);\r\n\r\n        // Sort by pagerank if available.\r\n        filteredNodes.sort(compareByPageRank);\r\n    }\r\n\r\n    const showNMoreByAttribute = (numberToShow, attributeName) => {\r\n      const hiddenNodes = filteredNodes.filter(n => n.isHidden);\r\n      hiddenNodes.sort((n1, n2) => {\r\n        if (n1[attributeName] && n2[attributeName]) {\r\n            return n2[attributeName] - n1[attributeName];\r\n        }\r\n        return 0;\r\n      });\r\n      const ids = [];\r\n      for (let i = 0; i < numberToShow && i < hiddenNodes.length; i++) {\r\n          ids.push(hiddenNodes[i].id);\r\n      }\r\n      appState.graph.showNodes(ids);\r\n    };\r\n    \r\n    return (\r\n        <Dialog\r\n          iconName=\"graph\"\r\n          isOpen={appState.preferences.neighborDialogOpen}\r\n          onClose={() => {\r\n            appState.preferences.neighborDialogOpen = false;\r\n          }}\r\n          title='Neighbors'\r\n          style={{minWidth: '80vw'}}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n\r\n            <ButtonGroup>\r\n                <Button onClick={() => {appState.graph.showNodes(filteredNodes.map(n => n.id))}}>Show All</Button>\r\n                <Button onClick={() => {appState.graph.hideNodes(filteredNodes.map(n => n.id))}}>Hide All</Button>\r\n            </ButtonGroup>\r\n\r\n            <hr />\r\n\r\n            <div>\r\n              <Button\r\n              style={{display: 'inline'}}\r\n              intent={Intent.PRIMARY}\r\n              text='Show'\r\n              onClick={() => {\r\n                showNMoreByAttribute(this.state.showMoreNum, this.state.showMoreBy);\r\n              }} /> <NumericInput onValueChange={(valAsNumber, valAsString) => {this.setState({showMoreNum: Number(valAsString)})}} value={this.state.showMoreNum} style={{display: 'inline-flex', width: '30px'}} /> {' '}\r\n              more nodes with highest <SimpleSelect items={['pagerank', 'degree']} value={this.state.showMoreBy} onSelect={(selected) => {this.setState({showMoreBy: selected})}} />\r\n            </div>\r\n\r\n            <hr />\r\n\r\n            <NodeTable nodes={filteredNodes} />\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.preferences.neighborDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NeighborDialog;","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  Dialog,\r\n  Intent,\r\n  ButtonGroup,\r\n  NumericInput,\r\n} from \"@blueprintjs/core\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores/index\";\r\nimport NodeTable from './NodeTable';\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\n\r\n\r\n@observer\r\nclass DataSheetDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showMoreBy: 'pagerank',\r\n      showMoreNum: 5,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let filteredNodes = [...appState.graph.rawGraph.nodes];\r\n\r\n    const showNMoreByAttribute = (numberToShow, attributeName) => {\r\n      const hiddenNodes = filteredNodes.filter(n => n.isHidden);\r\n      hiddenNodes.sort((n1, n2) => {\r\n        if (n1[attributeName] && n2[attributeName]) {\r\n            return n2[attributeName] - n1[attributeName];\r\n        }\r\n        return 0;\r\n      });\r\n      const ids = [];\r\n      for (let i = 0; i < numberToShow && i < hiddenNodes.length; i++) {\r\n          ids.push(hiddenNodes[i].id);\r\n      }\r\n      appState.graph.showNodes(ids);\r\n    };\r\n    \r\n    return (\r\n        <Dialog\r\n          iconName=\"database\"\r\n          isOpen={appState.preferences.dataSheetDialogOpen}\r\n          onClose={() => {\r\n            appState.preferences.dataSheetDialogOpen = false;\r\n          }}\r\n          title='Data Sheet'\r\n          style={{minWidth: '80vw'}}\r\n        >\r\n          <div className={classnames(Classes.DIALOG_BODY)}>\r\n\r\n            <ButtonGroup>\r\n                <Button onClick={() => {appState.graph.showNodes(filteredNodes.map(n => n.id))}}>Show All</Button>\r\n                <Button onClick={() => {appState.graph.hideNodes(filteredNodes.map(n => n.id))}}>Hide All</Button>\r\n            </ButtonGroup>\r\n\r\n            <hr />\r\n\r\n            <div>\r\n              <Button\r\n              style={{display: 'inline'}}\r\n              intent={Intent.PRIMARY}\r\n              text='Show'\r\n              onClick={() => {\r\n                showNMoreByAttribute(this.state.showMoreNum, this.state.showMoreBy);\r\n              }} /> <NumericInput onValueChange={(valAsNumber, valAsString) => {this.setState({showMoreNum: Number(valAsString)})}} value={this.state.showMoreNum} style={{display: 'inline-flex', width: '30px'}} /> {' '}\r\n              more nodes with highest <SimpleSelect items={['pagerank', 'degree']} value={this.state.showMoreBy} onSelect={(selected) => {this.setState({showMoreBy: selected})}} />\r\n            </div>\r\n\r\n            <hr />\r\n\r\n            <NodeTable nodes={filteredNodes} />\r\n          </div>\r\n\r\n          <div className={Classes.DIALOG_FOOTER}>\r\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\r\n              <Button\r\n                intent={Intent.PRIMARY}\r\n                onClick={() => {\r\n                  appState.preferences.dataSheetDialogOpen = false;\r\n                }}\r\n                text=\"Done\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSheetDialog;","import React from \"react\";\r\nimport PreferencesDialog from \"./PreferencesDialog\";\r\nimport ImportDialog from \"./ImportDialog\";\r\nimport GEXFImportDialog from \"./GEXFImportDialog\"\r\nimport OpenDialog from \"./OpenDialog\";\r\nimport NewProjectDialog from \"./NewProjectDialog\";\r\nimport ProjectDetailDialog from \"./ProjectDetailDialog\";\r\nimport SaveSnapshotDialog from \"./SaveSnapshotDialog\";\r\nimport RenameSnapshotDialog from \"./RenameSnapshotDialog\";\r\nimport OpenSnapshotDialog from \"./OpenSnapshotDialog\";\r\nimport ShareDialog from './ShareDialog';\r\nimport StatisticsDialog from './StatisticsDialog';\r\nimport FilterDialog from './FilterDialog';\r\nimport HelpDialog from './HelpDialog';\r\nimport NeighborDialog from './NeighborDialog';\r\nimport DataSheetDialog from './DataSheetDialog';\r\nimport ResizableDraggableDialog from \"./ResizableDraggableDialog\"\r\n\r\nexport default class Dialogs extends React.Component {\r\n  render() {\r\n    return (\r\n      <div style={{ }}>\r\n        <PreferencesDialog />\r\n        <ImportDialog />\r\n        <GEXFImportDialog />\r\n        <OpenDialog />\r\n        <OpenSnapshotDialog />\r\n        <NewProjectDialog />\r\n        <ProjectDetailDialog />\r\n        <SaveSnapshotDialog />\r\n        <RenameSnapshotDialog />\r\n        <ShareDialog />\r\n        <StatisticsDialog />\r\n        {/* <ResizableDraggableDialog /> */}\r\n        <FilterDialog />\r\n        <HelpDialog />\r\n        <NeighborDialog />\r\n        <DataSheetDialog />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import {Rnd} from \"react-rnd\";\r\nimport React from \"react\";\r\n// import \"./style.css\";\r\nimport { Dialog } from \"@blueprintjs/core\";\r\nimport appState from \"../stores/index\";\r\nimport { observer } from \"mobx-react\";\r\n\r\n@observer\r\nclass ResizableDraggableDialog extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      \r\n    }\r\n  \r\n    render() {\r\n      const w = window,\r\n      d = document,\r\n      e = d.documentElement,\r\n      g = d.getElementsByTagName(\"body\")[0],\r\n      windowWidth = w.innerWidth || e.clientWidth || g.clientWidth,\r\n      windowHeight = w.innerHeight || e.clientHeight || g.clientHeight;\r\n      return (\r\n        \r\n<div\r\n      className={\"tg-pt-dialog-resizable-draggable\"}\r\n      style={{ top: 0, left: 0, position: \"fixed\" }}\r\n    >\r\n         <Rnd\r\n        style={{backgroundColor:'red'}}\r\n        bounds={\"body\"}\r\n        default={{\r\n          x: window.innerWidth/3,\r\n          y: window.innerHeight/3,\r\n          width: 320,\r\n          height: 200,\r\n        }}\r\n      > \r\n        \r\n        \r\n      </Rnd>\r\n    </div>\r\n     \r\n  //       <div\r\n  //       className={\"tg-pt-dialog-resizable-draggable\"}\r\n  //       style={{ top: 300, left: 300, position: \"fixed\" }}\r\n  //     >\r\n  //       <Rnd\r\n  //         enableResizing={{\r\n  //           bottomLeft: true,\r\n  //           bottomRight: true,\r\n  //           topLeft: true,\r\n  //           topRight: true\r\n  //         }}\r\n  //         bounds={\"body\"}\r\n  //         default={{\r\n  //           x: Math.max((windowWidth - 400) / 2, 0),\r\n  //           y: Math.max((windowHeight - 450) / 2, 0),\r\n  //           width: Math.min(400, windowWidth),\r\n  //           height: Math.min(450, windowHeight)\r\n  //         }}\r\n  //         dragHandleClassName={\".pt-dialog-header\"}\r\n  //         // {...RndProps}\r\n  //       >\r\n  \r\n  // <Dialog\r\n  //           iconName=\"projects\"\r\n  //           isOpen={appState.preferences.isScatterPlotDialogOpen}\r\n  //           onClose={() => {\r\n  //             appState.preferences.isScatterPlotDialogOpen = false;\r\n  //           }}\r\n  //           title={`Scatterplot`}\r\n  //           hasBackdrop={false} usePortal={false}\r\n            \r\n  //         >\r\n  //         </Dialog>\r\n          \r\n  //       </Rnd>\r\n  //     </div>\r\n      )\r\n    }}\r\n    \r\nexport default ResizableDraggableDialog;\r\n\r\n\r\n","import React from \"react\";\r\nimport { Button, Classes, RangeSlider } from \"@blueprintjs/core\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport { Popover2, Select } from \"@blueprintjs/labs\";\r\nimport classnames from \"classnames\";\r\nimport { runInAction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport pluralize from \"pluralize\";\r\nimport appState from \"../../stores\";\r\nimport { scales } from \"../../constants/index\";\r\nimport Collapsable from \"../utils/Collapsable\";\r\nimport SimpleSelect from \"../utils/SimpleSelect\";\r\nimport CommonItemRenderer from \"../utils/CommonItemRenderer\";\r\n\r\n@observer\r\nclass GlobalPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      timeOutRef: null,\r\n      sizeOptionOpen: false,\r\n      colorOptionOpen: false,\r\n      shapeOptionOpen: false\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {/* Collapsable Option: Color */}\r\n        <Collapsable\r\n          name=\"Color\"\r\n          isOpen={this.state.colorOptionOpen}\r\n          onToggle={() =>\r\n            this.setState({\r\n              colorOptionOpen: !this.state.colorOptionOpen\r\n            })\r\n          }\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <div> \r\n                <p style={{display: \"inline\"}}>Color By: </p>\r\n                <span style={{float:\"right\"}}>\r\n                  <SimpleSelect  \r\n                    items={appState.graph.filterKeyList}\r\n                    onSelect={it => {appState.graph.nodes.colorBy = it\r\n                      appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                    value={appState.graph.nodes.colorBy}\r\n                  />\r\n                </span>\r\n              </div>\r\n            \r\n              <div style={{marginTop:\"10px\"}}> \r\n                <p style={{display: \"inline\"}}>Scale Type: </p>\r\n                <span style={{float:\"right\"}}>\r\n                  <SimpleSelect\r\n                    items={Object.keys(scales)}\r\n                    onSelect={it => {appState.graph.nodes.color.scale = it\r\n                      appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                    value={appState.graph.nodes.color.scale}\r\n                  />\r\n                </span>\r\n              </div>\r\n          \r\n            <div>\r\n              <div style={{marginTop:\"10px\"}}> \r\n                <p style={{display: \"inline\"}}>Gradient: &nbsp;</p>\r\n                <span style={{float:\"right\"}}>\r\n                    <Popover2\r\n                        placement=\"bottom\"\r\n                        modifiers={{\r\n                            preventOverflow: {\r\n                              enabled: false,\r\n                            },\r\n                          }}\r\n                    >\r\n                      <Button                  \r\n                        text=\"  \"\r\n                        style={{\r\n                          backgroundImage: \"inherit\",\r\n                          backgroundColor: appState.graph.nodes.color.from\r\n                        }}\r\n                      />\r\n                      <SketchPicker\r\n                        color={appState.graph.nodes.color.from}\r\n                        onChange={it => {appState.graph.nodes.color.from = it.hex\r\n                          appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                      />\r\n                    </Popover2>\r\n                    &nbsp; &#8594; &nbsp;\r\n                    <Popover2 \r\n                    placement=\"bottom\"\r\n                                modifiers={{\r\n                                    preventOverflow: {\r\n                                      enabled: false,\r\n                                    },\r\n                                  }}\r\n                                  >\r\n                    <Button\r\n                      text=\"  \"\r\n                      style={{\r\n                        backgroundImage: \"inherit\",\r\n                        backgroundColor: appState.graph.nodes.color.to\r\n                      }}\r\n                    />\r\n                    <SketchPicker\r\n                      color={appState.graph.nodes.color.to}\r\n                      onChange={it => {appState.graph.nodes.color.to = it.hex\r\n                        appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                    />\r\n                  </Popover2>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div style={{marginTop:\"-1em\"}}>\r\n              <svg width=\"100%\" height=\"10\" className=\"gradient-preview\">\r\n              <defs>\r\n                <linearGradient\r\n                  x1=\"0%\"\r\n                  y1=\"50%\"\r\n                  x2=\"100%\"\r\n                  y2=\"50%\"\r\n                  id=\"theGradient\"\r\n                >\r\n                  <stop\r\n                    stopColor={appState.graph.nodes.color.from}\r\n                    stopOpacity=\"1\"\r\n                    offset=\"0%\"\r\n                  />\r\n                  <stop\r\n                    stopColor={appState.graph.nodes.color.to}\r\n                    stopOpacity=\"1\"\r\n                    offset=\"100%\"\r\n                  />\r\n                </linearGradient>\r\n              </defs>\r\n              <rect\r\n                x=\"0\"\r\n                y=\"0\"\r\n                width=\"100%\"\r\n                height=\"50\"\r\n                fill=\"url(#theGradient)\"\r\n              />\r\n            </svg>\r\n            </div>\r\n          </div>\r\n        </Collapsable>\r\n        \r\n        {/* Collapsable Option: Size */}\r\n        <Collapsable\r\n          name=\"Size\"\r\n          isOpen={this.state.sizeOptionOpen}\r\n          onToggle={() =>\r\n            this.setState({\r\n              sizeOptionOpen: !this.state.sizeOptionOpen\r\n            })\r\n          }\r\n        >\r\n         \r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <div> \r\n                <p style={{display: \"inline\"}}>Scale By:</p>\r\n                <span style={{float:\"right\"}}>\r\n                  <SimpleSelect\r\n                    items={appState.graph.filterKeyList}\r\n                    // itemRenderer={CommonItemRenderer}\r\n                    // filterable={false}\r\n                    onSelect={it => {appState.graph.nodes.sizeBy = it\r\n                      appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                    // onItemSelect={it => (appState.graph.nodes.sizeBy = it)}\r\n                    value={appState.graph.nodes.sizeBy}\r\n                    />\r\n                </span>\r\n              \r\n            </div>\r\n            <div style={{marginTop:\"10px\"}}> \r\n                <p style={{display: \"inline\"}}>Scale Type:</p>\r\n                <span style={{float:\"right\"}}>\r\n                  <SimpleSelect\r\n                  items={Object.keys(scales)}\r\n                  itemRenderer={CommonItemRenderer}\r\n                  filterable={false}\r\n                  onSelect={it => {appState.graph.nodes.size.scale = it\r\n                    appState.graph.watchAppearance = appState.graph.watchAppearance + 1}}\r\n                  // onItemSelect={it => (appState.graph.nodes.size.scale = it)}\r\n                  value={appState.graph.nodes.size.scale}\r\n                  />\r\n                </span>\r\n            </div>\r\n         \r\n            <div style={{marginTop:\"10px\"}}> \r\n              <p style={{display: \"inline\"}}>Size Range:</p>\r\n            <br />\r\n            <RangeSlider\r\n              min={1}\r\n              max={20}\r\n              stepSize={0.1}\r\n              labelStepSize={5}\r\n              onChange={([a, b]) => {\r\n                runInAction(\"update scale\", () => {\r\n                  appState.graph.nodes.size.min = a;\r\n                  appState.graph.nodes.size.max = b;\r\n                });\r\n              }}\r\n              value={[\r\n                appState.graph.nodes.size.min,\r\n                appState.graph.nodes.size.max\r\n              ]}\r\n            />\r\n            </div>\r\n              <div style = {{height:\"15px\"}}>\r\n\r\n              </div>\r\n\r\n          </div>\r\n        </Collapsable>\r\n        \r\n        {/* Collapsable Option: Shape */}\r\n        <Collapsable\r\n          name=\"Shape\"\r\n          isOpen={this.state.shapeOptionOpen}\r\n          onToggle={() =>\r\n            this.setState({\r\n              shapeOptionOpen: !this.state.shapeOptionOpen\r\n            })\r\n          }\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n          <div>\r\n          <p style={{display: \"inline\"}}>Node Shape:</p>\r\n          <span style={{float:\"right\"}}>\r\n            <Select\r\n                items={[\r\n                  \"circle\",\r\n                  \"square\",\r\n                  \"triangle\",\r\n                  \"pentagon\",\r\n                  \"hexagon\",\r\n                  \"octagon\"\r\n                ]}\r\n                itemRenderer={CommonItemRenderer}\r\n                filterable={false}\r\n                onItemSelect={it => (appState.graph.nodes.shape = it)}\r\n              >\r\n                <Button  text={appState.graph.nodes.shape} />\r\n              </Select>\r\n              </span>\r\n            </div>        \r\n          </div>\r\n        </Collapsable>\r\n        <br/>\r\n        <text style={{fontSize: \"12px\"}}>\r\n          \r\n          {pluralize(\"node\", appState.graph.overrides.size, true)}<span> </span>\r\n          have override styles.  &nbsp;  \r\n          <Button className={\"pt-small\"} text=\"Clear\" onClick={() => (appState.graph.overrides = new Map())} />\r\n        </text>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GlobalPanel;","import React from \"react\";\r\nimport { Classes, Collapse, Switch } from \"@blueprintjs/core\";\r\n\r\nexport default ({ name, isOpen, onToggle, children }) => (\r\n  <div>\r\n    <Switch\r\n      label={name}\r\n      checked={isOpen}\r\n      onChange={onToggle}\r\n      className={Classes.ALIGN_RIGHT}\r\n    />\r\n    <Collapse isOpen={isOpen}>{children}</Collapse>\r\n  </div>\r\n);\r\n","import React from \"react\";\r\nimport { Button, Classes, Slider } from \"@blueprintjs/core\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport { Popover2, Select } from \"@blueprintjs/labs\";\r\nimport classnames from \"classnames\";\r\nimport { runInAction } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport appState from \"../../stores\";\r\nimport SwitchCollapsable from \"../utils/SwitchCollapsable\";\r\nimport CommonItemRenderer from \"../utils/CommonItemRenderer\";\r\nimport Collapsable from \"../utils/Collapsable\";\r\n\r\n@observer\r\nclass SelectionPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      shapeOptionOpen: false,\r\n      sizeOptionOpen: false,\r\n      colorOptionOpen: false,\r\n      labelOptionOpen: false\r\n    };\r\n  }\r\n\r\n  twoLayerUpdate = (nodeId, key, value) => {\r\n    if (!appState.graph.overrides.has(nodeId)) {\r\n      appState.graph.overrides.set(nodeId, new Map());\r\n    }\r\n    const nodeAttrs = appState.graph.overrides.get(nodeId);\r\n    if (value !== null) {\r\n      nodeAttrs.set(key, value);\r\n    } else {\r\n      nodeAttrs.delete(key);\r\n      if (nodeAttrs.size === 0) {\r\n        appState.graph.overrides.delete(nodeId);\r\n      }\r\n    }\r\n  };\r\n\r\n  batchTwoLayerUpdate = (nodes, key, value) => {\r\n    runInAction(\"update entire selection\", () => {\r\n      nodes.forEach(n => this.twoLayerUpdate(n.data.ref.id, key, value));\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <br/>\r\n        <SwitchCollapsable\r\n          name=\"Override Size\"\r\n          isOpen={this.state.sizeOptionOpen}\r\n          onToggle={() => {\r\n            if (this.state.sizeOptionOpen) {\r\n              this.setState(\r\n                {\r\n                  sizeOptionOpen: false\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"size\",\r\n                    null\r\n                  )\r\n              );\r\n            } else {\r\n              this.setState(\r\n                {\r\n                  sizeOptionOpen: true\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"size\",\r\n                    appState.graph.overrideConfig.size\r\n                  )\r\n              );\r\n            }\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <Slider\r\n              min={1}\r\n              max={20}\r\n              stepSize={0.1}\r\n              labelStepSize={5}\r\n              onChange={it => {\r\n                appState.graph.overrideConfig.size = it;\r\n                this.batchTwoLayerUpdate(\r\n                  appState.graph.selectedNodes,\r\n                  \"size\",\r\n                  it\r\n                );\r\n              }}\r\n              value={appState.graph.overrideConfig.size}\r\n            />\r\n          </div>\r\n        </SwitchCollapsable>\r\n        <br/>\r\n        <SwitchCollapsable\r\n          name=\"Override Color\"\r\n          isOpen={this.state.colorOptionOpen}\r\n          onToggle={() => {\r\n            if (this.state.colorOptionOpen) {\r\n              this.setState(\r\n                {\r\n                  colorOptionOpen: false\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"color\",\r\n                    null\r\n                  )\r\n              );\r\n            } else {\r\n              this.setState(\r\n                {\r\n                  colorOptionOpen: true\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"color\",\r\n                    appState.graph.overrideConfig.color\r\n                  )\r\n              );\r\n            }\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <div>\r\n              <p style={{display: \"inline\"}}>Choose Color:</p>\r\n              <span style={{float:\"right\"}}>\r\n            <Popover2\r\n              placement=\"bottom\"\r\n              modifiers={{\r\n                preventOverflow: {\r\n                  enabled: false,\r\n                },\r\n              }}>\r\n              <Button\r\n                text=\"  \"\r\n                style={{\r\n                  backgroundImage: \"inherit\",\r\n                  backgroundColor: appState.graph.overrideConfig.color\r\n                }}\r\n              />\r\n              <SketchPicker\r\n                color={appState.graph.overrideConfig.color}\r\n                onChange={it => {\r\n                  appState.graph.overrideConfig.color = it.hex;\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"color\",\r\n                    it.hex\r\n                  );\r\n                }}\r\n              />\r\n            </Popover2>\r\n            </span>\r\n            </div>\r\n          </div>\r\n        </SwitchCollapsable>\r\n        <br/>\r\n        <Collapsable\r\n                    name=\"Color By Distance\"\r\n                    isOpen={this.state.colorByDistance}\r\n                    onToggle={() =>\r\n                        this.setState({\r\n                          colorByDistance: !this.state.colorByDistance\r\n                        })\r\n                    }\r\n                    >\r\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n                        <section>\r\n                            <p>Node Color by Distance: </p>\r\n                            <span>\r\n                            <label class=\".pt-large\">\r\n                            <input \r\n                                 type=\"checkbox\"\r\n                                 onChange={it => {\r\n                                     console.log(appState.graph.colorByDistance);\r\n                                     appState.graph.colorByDistance = !appState.graph.colorByDistance;\r\n                                 }\r\n                                 }\r\n                               />\r\n                            </label>\r\n                            </span>\r\n                        </section>\r\n                    </div>\r\n                </Collapsable>\r\n                <br />\r\n        <SwitchCollapsable\r\n          name=\"Override Label\"\r\n          isOpen={this.state.labelOptionOpen}\r\n          onToggle={() => {\r\n            if (this.state.labelOptionOpen) {\r\n              this.setState(\r\n                {\r\n                  labelOptionOpen: false\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"label\",\r\n                    null\r\n                  )\r\n              );\r\n            } else {\r\n              this.setState(\r\n                {\r\n                  labelOptionOpen: true\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"label\",\r\n                    appState.graph.overrideConfig.label\r\n                  )\r\n              );\r\n            }\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <p style={{display: \"inline\"}}>Custom Label:</p>\r\n            <input\r\n              value={appState.graph.overrideConfig.label}\r\n              onChange={it => {\r\n                appState.graph.overrideConfig.label = it.target.value;\r\n                this.batchTwoLayerUpdate(\r\n                  appState.graph.selectedNodes,\r\n                  \"label\",\r\n                  it.target.value\r\n                );\r\n              }}\r\n            />\r\n          </div>\r\n        </SwitchCollapsable>\r\n        <br/>\r\n        <SwitchCollapsable\r\n          name=\"Override Shape\"\r\n          isOpen={this.state.shapeOptionOpen}\r\n          onToggle={() => {\r\n            if (this.state.shapeOptionOpen) {\r\n              this.setState(\r\n                {\r\n                  shapeOptionOpen: false\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"shape\",\r\n                    null\r\n                  )\r\n              );\r\n            } else {\r\n              this.setState(\r\n                {\r\n                  shapeOptionOpen: true\r\n                },\r\n                () =>\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"shape\",\r\n                    appState.graph.overrideConfig.shape\r\n                  )\r\n              );\r\n            }\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <div> \r\n              <p style={{display: \"inline\"}}>Node Shape:</p>\r\n              <span style={{float:\"right\"}}>\r\n                <Select\r\n                items={[\r\n                  \"circle\",\r\n                  \"square\",\r\n                  \"triangle\",\r\n                  \"pentagon\",\r\n                  \"hexagon\",\r\n                  \"octagon\"\r\n                ]}\r\n                itemRenderer={CommonItemRenderer}\r\n                filterable={false}\r\n                onItemSelect={it => {\r\n                  appState.graph.overrideConfig.shape = it;\r\n                  this.batchTwoLayerUpdate(\r\n                    appState.graph.selectedNodes,\r\n                    \"shape\",\r\n                    it\r\n                  );\r\n                }}\r\n              >\r\n                <Button text={appState.graph.overrideConfig.shape} />\r\n              </Select>\r\n              </span>        \r\n            </div>\r\n          </div>\r\n        </SwitchCollapsable>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectionPanel;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport pluralize from \"pluralize\";\r\nimport appState from \"../../stores\";\r\nimport GlobalPanel from \"./GlobalPanel\";\r\nimport SelectionPanel from \"./SelectionPanel\";\r\n\r\n@observer\r\nclass NodesPanel extends React.Component {\r\n  getRenderedNodes = () => {\r\n    if (appState.graph.selectedNodes.length === 0) {\r\n      return (\r\n        <div>\r\n          <text style={{fontSize:\"12px\"}}>Modifying All Nodes</text>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <p>{`Modifying ${pluralize(\r\n        \"Node\",\r\n        appState.graph.selectedNodes.length,\r\n        true\r\n      )}`}</p>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.getRenderedNodes()}\r\n        {appState.graph.selectedNodes.length === 0 ? (\r\n          <GlobalPanel />\r\n        ) : (\r\n          <SelectionPanel />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NodesPanel;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport appState from \"../../stores\";\r\nimport { Button, Checkbox, Classes, RangeSlider } from \"@blueprintjs/core\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport { Popover2, Select } from \"@blueprintjs/labs\";\r\nimport classnames from \"classnames\";\r\nimport Collapsable from \"../utils/Collapsable\";\r\nimport SimpleSelect from \"../utils/SimpleSelect\";\r\nimport mouse from \"../../graph-frontend/src/select\";\r\n\r\n@observer\r\nclass EdgesPanel extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          timeOutRef: null,\r\n        //   sizeOptionOpen: false,\r\n          colorOptionOpen:false,\r\n          directionOptionOpen:false,\r\n        //   colorOptionOpen:false,\r\n          thicknessOptionOpen: false,\r\n        };\r\n      }\r\n\r\n    render() {\r\n        let graph = appState.graph.graph;\r\n        return (\r\n            <div>\r\n                <text style={{fontSize:\"12px\"}}>{`Modifying All Edges`}</text>\r\n\r\n\r\n                {/* Collapsable Option: Color */}\r\n                <Collapsable\r\n                    name=\"Color\"\r\n                    isOpen={this.state.colorOptionOpen}\r\n                    onToggle={() =>\r\n                        this.setState({\r\n                        colorOptionOpen: !this.state.colorOptionOpen\r\n                        })\r\n                    }\r\n                    >\r\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n                        <div> \r\n                            <p style={{display: \"inline\"}}>Select Edge Color: </p>\r\n                            <span style={{float:\"right\"}}>\r\n                                <Popover2 \r\n                                placement=\"bottom\"\r\n                                modifiers={{\r\n                                    preventOverflow: {\r\n                                      enabled: false,\r\n                                    },\r\n                                  }}>\r\n                                    <Button\r\n                                    text=\"  \"\r\n                                    style={{\r\n                                        backgroundImage: \"inherit\",\r\n                                        backgroundColor: appState.graph.edges.color\r\n                                    }}\r\n                                    />\r\n                                    <SketchPicker\r\n                                    color={appState.graph.edges.color}\r\n                                    onChange={(it) => {\r\n                                        appState.graph.process.graph.forEachNode(n => {\r\n                                             \r\n                                             let red = new THREE.Color(appState.graph.edges.color).r;\r\n                                             let blue = new THREE.Color(appState.graph.edges.color).g;\r\n                                             let green = new THREE.Color(appState.graph.edges.color).b;\r\n                                             n.renderData.linecolor.r = red;\r\n                                             n.renderData.linecolor.g = blue;\r\n                                             n.renderData.linecolor.b = green;\r\n                                           });\r\n                                        (appState.graph.edges.color = it.hex);\r\n                                        /**update edge color in real time*/\r\n                                        appState.graph.process.onHover(); \r\n                                    }}\r\n                                    />\r\n                                </Popover2>\r\n                            </span>\r\n                            </div>\r\n                        \r\n                    </div>\r\n                </Collapsable>\r\n            \r\n                {/* <Collapsable\r\n                    name=\"Direction\"\r\n                    isOpen={this.state.directionOptionOpen}\r\n                    onToggle={() =>\r\n                        this.setState({\r\n                        directionOptionOpen: !this.state.directionOptionOpen\r\n                        })\r\n                    }\r\n                    >\r\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n                        <div> \r\n                            <p style={{display: \"inline\"}}>Show Edge Direction: </p>\r\n                            <span style={{float:\"right\"}}>\r\n                            <label class=\".pt-large\">\r\n                            <input \r\n                                 type=\"checkbox\"\r\n                                 onChange={it => {\r\n                                     console.log(appState.graph.directedOrNot);\r\n                                     appState.graph.directedOrNot = !appState.graph.directedOrNot;\r\n                                 }\r\n                                 }\r\n                               />\r\n                            </label>\r\n                            </span>\r\n                            </div>\r\n                        \r\n                    </div>\r\n                </Collapsable> */}\r\n{/* \r\n                <div>\r\n                     <section style = {{marginTop: \"15px\"}}>\r\n                         <p style={{display: \"inline\"}}>Show Edge Direction: </p>\r\n                         <div style={{display: \"inline\", float: \"right\"}}>\r\n                               <input \r\n                                 type=\"checkbox\"\r\n                                 onChange={it => {\r\n                                     console.log(appState.graph.directedOrNot);\r\n                                     appState.graph.directedOrNot = !appState.graph.directedOrNot;\r\n                                 }\r\n                                 }\r\n                               />\r\n                         </div>\r\n                     </section>\r\n                 </div> */}\r\n\r\n                {/* <Collapsable\r\n                    name=\"Thickness\"\r\n                    isOpen={this.state.thicknessOptionOpen}\r\n                    onToggle={() =>\r\n                        this.setState({\r\n                            thicknessOptionOpen: !this.state.thicknessOptionOpen\r\n                        })\r\n                    }\r\n                    >\r\n                    <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n                        <section>\r\n                            <p>Edge Thickness by distance: </p>\r\n                            <span style={{float:\"right\"}}>\r\n                            <label class=\".pt-large\">\r\n                            <input \r\n                                 type=\"checkbox\"\r\n                                 onChange={it => {\r\n                                     console.log(appState.graph.edgeThicknessByDistance);\r\n                                     appState.graph.edgeThicknessByDistance = !appState.graph.edgeThicknessByDistance;\r\n                                 }\r\n                                 }\r\n                               />\r\n                            </label>\r\n                            </span>\r\n                        </section>\r\n                    </div>\r\n                </Collapsable> */}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default EdgesPanel;","import React from \"react\";\r\nimport { Button, Classes, Slider } from \"@blueprintjs/core\";\r\nimport { Select } from \"@blueprintjs/labs\";\r\nimport { observer } from \"mobx-react\";\r\nimport appState from \"../../stores\";\r\nimport CommonItemRenderer from \"../utils/CommonItemRenderer\";\r\n\r\n@observer\r\nclass LabelsPanel extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <span style={{display: \"inline-block\"}}>\r\n        <Button\r\n          style={{\r\n            // width:\"100px\",\r\n            display:\"inline\"}}\r\n          id=\"showAll\"\r\n          iconName=\"eye-on\"\r\n          className={Classes.FILL}\r\n          onClick={() => appState.graph.frame.showAllLabels()}\r\n        >\r\n          Show All\r\n        </Button>\r\n        <Button\r\n          style={{display:\"inline\"}}\r\n          id=\"hideAll\"\r\n          iconName=\"eye-off\"\r\n          className={Classes.FILL}\r\n          onClick={() => appState.graph.frame.hideAllLabels()}\r\n        >\r\n          Hide All\r\n        </Button>\r\n        \r\n        {/* <Button\r\n          style={{\r\n            // width:\"140px\"\r\n            // marginLeft:\"10px\"\r\n          }}\r\n          id=\"hideSelected\"\r\n          iconName=\"eye-off\"\r\n          className={Classes.FILL}\r\n          onClick={() => appState.graph.frame.hideSelectedLabels()}\r\n        >\r\n          Hide Selected\r\n        </Button> */}\r\n        <Button\r\n          style={{display:\"inline\"}}\r\n          id=\"showSelected\"\r\n          iconName=\"eye-on\"\r\n          className={Classes.FILL}\r\n          onClick={() => appState.graph.frame.showSelectedLabels()}\r\n        >\r\n          Show Selected\r\n        </Button>\r\n        </span>\r\n        <div style={{height: '20px'}} />\r\n        <text className=\"option-font\">Label Size</text>\r\n        <Slider\r\n        style ={{left:\"10%\", width:\"80%\"}}\r\n          min={1}\r\n          max={2}\r\n          stepSize={0.1}\r\n          labelStepSize={0.5}\r\n          onChange={value => {\r\n            appState.graph.nodes.labelSize = value;\r\n            appState.graph.watchAppearance = appState.graph.watchAppearance +1;\r\n          }}\r\n          value={appState.graph.nodes.labelSize}\r\n        />\r\n        <div style={{height: '20px'}} />\r\n        <text className=\"option-font\">Label Length</text>\r\n        <Slider\r\n        style ={{left:\"10%\", width:\"80%\"}}\r\n          min={1}\r\n          max={40}\r\n          \r\n          stepSize={1}\r\n          labelStepSize={5}\r\n          onChange={value => {\r\n            appState.graph.nodes.labelLength = value;\r\n            appState.graph.watchAppearance = appState.graph.watchAppearance +1\r\n          }}\r\n          value={appState.graph.nodes.labelLength}\r\n        />\r\n        <div style={{height: '20px'}} />\r\n        <text className=\"option-font\">Label By</text>\r\n        <Select\r\n          items={appState.graph.filterKeyList}\r\n          itemRenderer={CommonItemRenderer}\r\n          filterable={false}\r\n          onItemSelect={it => {appState.graph.nodes.labelBy = it; appState.graph.watchAppearance = appState.graph.watchAppearance +1\r\n          }}\r\n        >\r\n          <Button text={appState.graph.nodes.labelBy} />\r\n        </Select>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LabelsPanel;","import React from \"react\";\r\nimport { Button, Classes ,Intent, TagProps} from \"@blueprintjs/core\";\r\nimport { MultiSelect } from \"@blueprintjs/labs\";\r\nimport CommonItemRenderer from \"./CommonItemRenderer\";\r\n\r\nexport default ({ items, onSelect, value, fill = false , tag,tagprops }) => {\r\n\r\nconst clearButton = <Button icon=\"cross\"  /> ;\r\n// this.state = {\r\n//   selecteditems : value\r\n// }\r\n\r\nreturn (\r\n\r\n  <MultiSelect\r\n  popoverProps={{\r\n    popoverClassName: \"filter-scroll\",\r\n   \r\n    targetTagName: 'div' \r\n  }}\r\n//  placeholder={'Search for a country'} \r\n  resetOnSelect={true}\r\n    items={items}\r\n    itemRenderer={CommonItemRenderer}\r\n    filterable={true}\r\n    onItemSelect={onSelect}\r\n    tagRenderer = {tag}\r\n    selectedItems = {value}\r\n    tagInputProps = {tagprops}\r\n    \r\n\r\n    // tagInputProps={{ tagProps: {intent: Intent.PRIMARY, interactive: true,values: value}}}\r\n    // tagInputProps={{\r\n    //   onRemove: {appState.graph.nodes.filter = {}},\r\n    //   rightElement: {appState.graph.nodes.filter ? <Button icon=\"cross\" minimal={true} onClick={this.handleClear} /> : undefined;},\r\n    //     values: value,\r\n    //     // rightElement: clearButton,\r\n    //     tagProps: (_value: React.ReactNode, index: number): TagProps => ({\r\n    //       intent: this.state.intent ? INTENTS[index % INTENTS.length] : Intent.NONE,\r\n    //       minimal: false,\r\n    //   }),\r\n    // }}\r\n  >\r\n    {/* <Button className={fill ? Classes.FILL : null} text={value} /> */}\r\n  </MultiSelect>\r\n\r\n)\r\n  \r\n  };\r\n","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport pluralize from \"pluralize\";\r\nimport appState from \"../../stores\";\r\nimport GlobalPanel from \"./GlobalPanel\";\r\nimport SelectionPanel from \"./SelectionPanel\";\r\nimport Collapsable from \"../utils/Collapsable\";\r\nimport { Button, Classes, RangeSlider } from \"@blueprintjs/core\";\r\nimport SimpleSelect from \"../utils/SimpleSelect\";\r\nimport MultiSelects from \"../utils/MultiSelects\";\r\nimport classnames from \"classnames\";\r\nimport uniq from \"lodash/uniq\";\r\nimport { runInAction } from \"mobx\";\r\n\r\n@observer\r\nclass NodesFilterPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    }\r\n    appState.graph.filterKeyList.forEach(it => {\r\n      this.state[it + 'isOpen'] = false;\r\n      this.state[it + '_filterlist'] = []\r\n    });\r\n    // console.log(this.state)\r\n    // this.state = \r\n    // {\r\n    //   timeOutRef: null,\r\n    //   sizeOptionOpen: false,\r\n    //   colorOptionOpen: false,\r\n    //   shapeOptionOpen: false\r\n    // };\r\n  }\r\n\r\n  // getRenderedNodes = () => {\r\n  //   if (appState.graph.selectedNodes.length === 0) {\r\n  //     return (\r\n  //       <div>\r\n  //         <p>Modifying All Nodes</p>\r\n  //       </div>\r\n  //     );\r\n  //   }\r\n  //   return (\r\n  //     <p>{`Modifying ${pluralize(\r\n  //       \"Node\",\r\n  //       appState.graph.selectedNodes.length,\r\n  //       true\r\n  //     )}`}</p>\r\n  //   );\r\n  // };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {appState.graph.filterKeyList.map((it, i) => (\r\n          <Collapsable\r\n            name={it}\r\n            isOpen={this.state[it + 'isOpen']}\r\n            onToggle={() =>\r\n              this.setState({\r\n                [it + 'isOpen']: !this.state[it + 'isOpen']\r\n              })\r\n            }\r\n          >\r\n            <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n              { (it === 'community' || isNaN(appState.graph.rawGraph.nodes[0][it]) ) ?\r\n                <MultiSelects\r\n                  items={[...new Set(appState.graph.rawGraph.nodes.map(n => n[it]))]}\r\n                  onSelect={selectit => {\r\n                    appState.graph.filter[it] ? appState.graph.filter[it].push(selectit) : appState.graph.filter[it] = [selectit]\r\n                    appState.graph.filterNodes()\r\n\r\n                    this.setState({\r\n                      [it + '_filterlist']: appState.graph.filter[it]\r\n                    })\r\n                    \r\n\r\n                    // console.log(this.state[it + '_filterlist'])\r\n                    // return selectit\r\n                    // console.log(appState.graph.filter[it][0])\r\n                  }}\r\n                  tag={selectit => { return selectit }}\r\n                  value={(Object.keys(appState.graph.filter).length === 0) ? []:appState.graph.filter[it]}\r\n\r\n                  tagprops={{\r\n                    fill:true ,\r\n                    placeholder: '  ',\r\n                    onRemove: selectit => {\r\n                      var self = this\r\n                      // var deselectIndex0 = this.state[it + '_filterlist'].indexOf(selectit)\r\n                      var deselectIndex1 = appState.graph.filter[it].indexOf(selectit)\r\n                      if (deselectIndex1 > -1) {\r\n                        appState.graph.filter[it] = appState.graph.filter[it].filter(item => item !== selectit)\r\n\r\n                        // appState.graph.filter[it].splice(deselectIndex1, 1)\r\n                        appState.graph.filterNodes()\r\n                      }\r\n                      if (deselectIndex1 > -1) {\r\n                        this.setState({\r\n                          [it + '_filterlist']:appState.graph.filter[it]\r\n                          //  this.state[it + '_filterlist'].splice(deselectIndex0, 1)\r\n                        })\r\n                       \r\n                      }\r\n                      \r\n                      // var deselectIndex1 = appState.graph.filter[it].indexOf(selectit)\r\n                      // if (deselectIndex1 > -1) {\r\n                      //   appState.graph.filter[it] = appState.graph.filter[it].filter(item => item !== selectit)\r\n\r\n                      //   // appState.graph.filter[it].splice(deselectIndex1, 1)\r\n                      //   appState.graph.filterNodes()\r\n                      // }\r\n\r\n\r\n                      console.log(this.state[it + '_filterlist'])\r\n                      // return selectit\r\n                      // console.log(appState.graph.filter[it][0])\r\n                    },\r\n                    // tagProps: getTagProps,\r\n                  }}\r\n                />\r\n                :\r\n                <RangeSlider\r\n                  min={Math.min(... appState.graph.rawGraph.nodes.map(n => n[it]))}   //uniqueValue[it][0] is computed min \r\n                  max={Math.max(... appState.graph.rawGraph.nodes.map(n => n[it]))} //uniqueValue[it][1] is computed max\r\n                  stepSize={1}\r\n                  labelStepSize={10000}\r\n                  className=\"range-slider-container\"\r\n                  onChange={([a, b]) => {\r\n                    runInAction(\"update scale\", () => {\r\n                      this.setState({\r\n                        [it + '_filterlist']: {\r\n                          \"min\":a,\r\n                          \"max\":b\r\n                        }\r\n                      })\r\n                      appState.graph.filter[it] ={\r\n                        \"min\":a,\r\n                        \"max\":b\r\n                      }\r\n                    })\r\n                    \r\n                  }}\r\n                  onRelease={([a, b]) => {\r\n                  // console.log(Math.max(... appState.graph.rawGraph.nodes.map(n => n[it])));\r\n                  this.setState({\r\n                    [it + '_filterlist']: {\r\n                      \"min\":a,\r\n                      \"max\":b\r\n                    }\r\n                  })\r\n                  appState.graph.filter[it] ={\r\n                    \"min\":a,\r\n                    \"max\":b\r\n                  }\r\n                  appState.graph.filterNodes()\r\n                  \r\n                \r\n                 \r\n                }}\r\n                value={(appState.graph.filter[it])?\r\n                [\r\n                  appState.graph.filter[it][\"min\"],\r\n                  appState.graph.filter[it][\"max\"]\r\n                ]:\r\n              [\r\n                Math.min(... appState.graph.rawGraph.nodes.map(n => n[it])),\r\n                Math.max(... appState.graph.rawGraph.nodes.map(n => n[it]))\r\n\r\n              ]}\r\n                />\r\n\r\n              }\r\n            </div>\r\n\r\n          </Collapsable>\r\n\r\n\r\n        ))}\r\n\r\n\r\n\r\n        {/* <Collapsable\r\n          name=\"Color\"\r\n          isOpen={this.state.colorOptionOpen}\r\n          onToggle={() =>\r\n            this.setState({\r\n              colorOptionOpen: !this.state.colorOptionOpen\r\n            })\r\n          }\r\n        >\r\n          <div className={classnames(Classes.CARD, \"sub-option\")}>\r\n            <div>\r\n              <p style={{ display: \"inline\" }}>Color By: </p>\r\n              <span style={{ float: \"right\" }}>\r\n                <SimpleSelect\r\n                  items={appState.graph.allPropertiesKeyList}\r\n                  onSelect={it => (appState.graph.nodes.colorBy = it)}\r\n                  value={appState.graph.nodes.colorBy}\r\n                />\r\n              </span>\r\n            </div>\r\n\r\n            <div style={{ marginTop: \"10px\" }}>\r\n              <p style={{ display: \"inline\" }}>Scale Type: </p>\r\n              <span style={{ float: \"right\" }}>\r\n                <SimpleSelect\r\n                  items={Object.keys(scales)}\r\n                  onSelect={it => (appState.graph.nodes.color.scale = it)}\r\n                  value={appState.graph.nodes.color.scale}\r\n                />\r\n              </span>\r\n            </div>\r\n\r\n            <div>\r\n              <div style={{ marginTop: \"10px\" }}>\r\n                <p style={{ display: \"inline\" }}>Gradient: &nbsp;</p>\r\n                <span style={{ float: \"right\" }}>\r\n                  <Popover2\r\n                    placement=\"bottom\"\r\n                    modifiers={{\r\n                      preventOverflow: {\r\n                        enabled: false,\r\n                      },\r\n                    }}\r\n                  >\r\n                    <Button\r\n                      text=\"  \"\r\n                      style={{\r\n                        backgroundImage: \"inherit\",\r\n                        backgroundColor: appState.graph.nodes.color.from\r\n                      }}\r\n                    />\r\n                    <SketchPicker\r\n                      color={appState.graph.nodes.color.from}\r\n                      onChange={it => (appState.graph.nodes.color.from = it.hex)}\r\n                    />\r\n                  </Popover2>\r\n                  &nbsp; &#8594; &nbsp;\r\n                  <Popover2\r\n                    placement=\"bottom\"\r\n                    modifiers={{\r\n                      preventOverflow: {\r\n                        enabled: false,\r\n                      },\r\n                    }}\r\n                  >\r\n                    <Button\r\n                      text=\"  \"\r\n                      style={{\r\n                        backgroundImage: \"inherit\",\r\n                        backgroundColor: appState.graph.nodes.color.to\r\n                      }}\r\n                    />\r\n                    <SketchPicker\r\n                      color={appState.graph.nodes.color.to}\r\n                      onChange={it => (appState.graph.nodes.color.to = it.hex)}\r\n                    />\r\n                  </Popover2>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div style={{ marginTop: \"-1em\" }}>\r\n              <svg width=\"100%\" height=\"10\" className=\"gradient-preview\">\r\n                <defs>\r\n                  <linearGradient\r\n                    x1=\"0%\"\r\n                    y1=\"50%\"\r\n                    x2=\"100%\"\r\n                    y2=\"50%\"\r\n                    id=\"theGradient\"\r\n                  >\r\n                    <stop\r\n                      stopColor={appState.graph.nodes.color.from}\r\n                      stopOpacity=\"1\"\r\n                      offset=\"0%\"\r\n                    />\r\n                    <stop\r\n                      stopColor={appState.graph.nodes.color.to}\r\n                      stopOpacity=\"1\"\r\n                      offset=\"100%\"\r\n                    />\r\n                  </linearGradient>\r\n                </defs>\r\n                <rect\r\n                  x=\"0\"\r\n                  y=\"0\"\r\n                  width=\"100%\"\r\n                  height=\"50\"\r\n                  fill=\"url(#theGradient)\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </Collapsable> */}\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NodesFilterPanel;","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  InputGroup,\r\n  Intent,\r\n  Position,\r\n  Tooltip,\r\n  Popover,\r\n  Menu,\r\n  MenuItem,\r\n  MenuDivider,\r\n  Navbar\r\n} from \"@blueprintjs/core\";\r\n\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\n\r\nimport { observer } from \"mobx-react\";\r\n\r\nimport appState from \"../stores/index\";\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\r\nimport argologo_dark from '../images/Snoman title.png';\r\nimport argologo_light from '../images/Snoman logo.png';\r\nimport { toaster } from '../notifications/client';\r\nimport { LOGO_URL, GITHUB_URL, SAMPLE_GRAPH_SNAPSHOTS } from '../constants';\r\n\r\n\r\n\r\nimport axios from 'axios'\r\nimport { observable, computed,reaction, action, runInAction } from \"mobx\";\r\n\r\nimport { Tab2, Tabs2, Tag } from \"@blueprintjs/core\";\r\nimport NodesPanel from \"./panels/NodesPanel\";\r\nimport EdgesPanel from \"./panels/EdgesPanel\";\r\nimport LabelsPanel from \"./panels/LabelsPanel\";\r\nimport NodesFilterPanel from \"./panels/NodesFilterPanel\";\r\n\r\n@observer\r\nclass RegularNavbar extends React.Component {\r\n  @observable modularity = undefined;\r\n\r\n  // reaction(\r\n  //   () => appState.graph.smartPause.smartPaused,\r\n  //   () => {\r\n  //       this.forceUpdate()\r\n  //     }\r\n    \r\n  // );\r\n\r\n  \r\n  runcommunity = () => {\r\n    appState.graph.convexPolygons = []\r\n\r\n    var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.source_id\r\n    })\r\n    var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.target_id\r\n    })\r\n    var querydict = {\r\n      \"type\": 'edgelist',\r\n      \"message\": {\r\n        'name': 'community'\r\n      },\r\n      \"fromedgelist\": fromedgelist,\r\n      \"toedgelist\": toedgelist\r\n    }\r\n    axios.post('https://snoman.herokuapp.com/flask/community', querydict).then(\r\n      (response) => {\r\n        var communityDict = response.data.message;\r\n        this.modularity = response.data.modularity;\r\n        appState.graph.rawGraph.nodes.forEach((node) => {\r\n          node.community = communityDict[node.id] ? communityDict[node.id] : -1\r\n        })\r\n        const nodesArr = appState.graph.rawGraph.nodes\r\n        const nodekeyList = Object.keys(nodesArr[1])\r\n        const nodePropertyTypes = {}\r\n        nodekeyList.forEach(function (k) {\r\n          nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n        })\r\n        const uniqueValue = {}\r\n        nodekeyList.forEach(function (k, i) {\r\n\r\n          if (nodePropertyTypes[k] == 'string') {\r\n            uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n          } else {\r\n            const valuea = nodesArr.map(function (el) { return el[k]; })\r\n            const minv = Math.min(...valuea)\r\n            const maxv = Math.max(...valuea)\r\n            uniqueValue[k] = [minv, maxv]\r\n          }\r\n        })\r\n        appState.graph.metadata.uniqueValue = uniqueValue\r\n        appState.graph.metadata.nodeProperties = nodekeyList\r\n        appState.graph.metadata.nodePropertyTypes = nodePropertyTypes\r\n        appState.graph.nodes.colorBy = \"community\"\r\n        appState.graph.nodes.color.scale = \"Nominal Scale\"\r\n        // console.log(result);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  findcliques = () => {\r\n\r\n    var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.source_id\r\n    })\r\n    var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.target_id\r\n    })\r\n    var querydict = {\r\n      \"type\": 'edgelist',\r\n      \"message\": {\r\n        'name': 'clique'\r\n      },\r\n      \"fromedgelist\": fromedgelist,\r\n      \"toedgelist\": toedgelist\r\n    }\r\n    axios.post('https://snoman.herokuapp.com/flask/Cliques', querydict).then(\r\n      (response) => {\r\n        var cliques = response.data.message;\r\n        console.log(cliques)\r\n        // appState.graph.rawGraph.nodes.forEach((node) => {\r\n        //     node.community = communityDict[node.id]\r\n        // })\r\n        // const nodesArr = appState.graph.rawGraph.nodes\r\n        // const nodekeyList = Object.keys(nodesArr[1])\r\n        // const nodePropertyTypes = {}\r\n        // nodekeyList.forEach(function (k) {\r\n        //     nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n        // })\r\n        // const uniqueValue = {}\r\n        // nodekeyList.forEach(function (k, i) {\r\n\r\n        //     if (nodePropertyTypes[k] == 'string') {\r\n        //         uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n        //     } else {\r\n        //         const valuea = nodesArr.map(function (el) { return el[k]; })\r\n        //         const minv = Math.min(...valuea)\r\n        //         const maxv = Math.max(...valuea)\r\n        //         uniqueValue[k] = [minv, maxv]\r\n        //     }\r\n        // })\r\n        // appState.graph.metadata.uniqueValue = uniqueValue\r\n        // appState.graph.metadata.nodeProperties = nodekeyList\r\n        // appState.graph.metadata.nodePropertyTypes= nodePropertyTypes\r\n        // console.log(result);\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  convexhull = (group) => {\r\n\r\n    var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.source_id\r\n    })\r\n    var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n      return edge.target_id\r\n    })\r\n    var querydict = {\r\n      \"type\": 'edgelist',\r\n      \"message\": {\r\n        'name': 'convex'\r\n      },\r\n      \"group\": group,\r\n      \"nodes\": appState.graph.rawGraph.nodes\r\n\r\n    }\r\n    axios.post('https://snoman.herokuapp.com/flask/convexhull', querydict).then(\r\n      (response) => {\r\n        var jsondata = JSON.parse(response.data)\r\n        var convexDict = jsondata.message;\r\n\r\n\r\n        appState.graph.rawGraph.nodes.forEach((node) => {\r\n          node.isconvex = convexDict[node.id]\r\n        })\r\n        const nodesArr = appState.graph.rawGraph.nodes\r\n        const nodekeyList = Object.keys(nodesArr[1])\r\n        const nodePropertyTypes = {}\r\n        nodekeyList.forEach(function (k) {\r\n          nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n        })\r\n        const uniqueValue = {}\r\n        nodekeyList.forEach(function (k, i) {\r\n\r\n          if (nodePropertyTypes[k] == 'string') {\r\n            uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n          } else {\r\n            const valuea = nodesArr.map(function (el) { return el[k]; })\r\n            const minv = Math.min(...valuea)\r\n            const maxv = Math.max(...valuea)\r\n            uniqueValue[k] = [minv, maxv]\r\n          }\r\n        })\r\n        appState.graph.metadata.uniqueValue = uniqueValue\r\n        appState.graph.metadata.nodeProperties = nodekeyList\r\n        appState.graph.metadata.nodePropertyTypes = nodePropertyTypes\r\n\r\n\r\n        // const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n        //     // console.log(node)\r\n        //     node.data.ref.isconvex\r\n\r\n        // )\r\n        // // highlight for the mapview \r\n        // appState.graph.convexNodes = selectionNode\r\n        appState.graph.convexPolygons = jsondata.multipolygon;\r\n        console.log(appState.graph.convexPolygons)\r\n        //highlight in the network view \r\n        // appState.graph.frame.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n        //     appState.graph.frame.colorNodeOpacity(n, 0.2);\r\n\r\n        // });\r\n\r\n        // appState.graph.frame.lineIndices.forEach(function (link) {\r\n        //     link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n        //     link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n        //     link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n        // })\r\n\r\n        // for (var i = 0; i < selectionNode.length; i++) {\r\n        //     appState.graph.frame.colorNodeOpacity(selectionNode[i], 1);\r\n        //   }\r\n\r\n\r\n\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n  density_distance = (group) => {\r\n\r\n    // var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n    //     return edge.source_id\r\n    // })\r\n    // var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n    //     return edge.target_id\r\n    // })\r\n    var querydict = {\r\n      \"type\": 'edgelist',\r\n      \"message\": {\r\n        'name': 'density_distance'\r\n      },\r\n      \"group\": group,\r\n      \"nodes\": appState.graph.rawGraph.nodes,\r\n      \"edges\": appState.graph.rawGraph.edges\r\n\r\n\r\n    }\r\n    axios.post('http://snoman.herokuapp.com/flask/densitydistance', querydict).then(\r\n      (response) => {\r\n        var jsondata = JSON.parse(response.data)\r\n        // var convexDict = jsondata.message;\r\n\r\n        appState.graph.metadata.nodeComputed.push('standard distance')\r\n        appState.graph.metadata.nodeComputed.push('network density')\r\n\r\n\r\n\r\n        appState.graph.densityDistance = jsondata.density_distance\r\n        appState.graph.scatterplot.y = 'standard distance'\r\n        appState.graph.scatterplot.x = 'network density'\r\n        appState.graph.groupby = group\r\n\r\n\r\n      },\r\n      (error) => {\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <nav className={classnames([Classes.NAVBAR], 'navbar-head')} style={{display:\"block\", height:\"5vh\"}}>\r\n        <div className={classnames([Classes.NAVBAR_GROUP, Classes.ALIGN_LEFT])} style={{height:\"100%\"}}>\r\n          <a href={LOGO_URL} target=\"_blank\">\r\n            <img title=\"Snoman\" id=\"SNoMAN logo\"\r\n              src={appState.preferences.darkMode ? argologo_dark : argologo_light}\r\n              height=\"28px\"></img>\r\n          </a>\r\n          <span>SNoMaN</span>\r\n          <div className={classnames([Classes.NAVBAR_HEADING])} style={{height:\"100%\"}}></div>\r\n          {/* <a\r\n            href=\"https://poloclub.github.io/argo-graph/\"\r\n            target='_blank'\r\n            style={{\r\n              padding: '6px 10px 6px 10px',\r\n              backgroundColor: 'pink',\r\n              color: 'white',\r\n              borderRadius: '4px',\r\n              textDecoration: 'none'\r\n            }}\r\n          >\r\n            Learn more about Argo\r\n          </a> */}\r\n          <Popover\r\n            content={\r\n              <Menu>\r\n                <MenuItem text=\"Load Sample\" iconName=\"graph\">\r\n                  {\r\n                    SAMPLE_GRAPH_SNAPSHOTS.map((sample) => {\r\n                      const sampleSnapshotTitle = sample[0];\r\n                      const sampleSnapshotStrapiUuid = sample[1];\r\n\r\n                      return (\r\n                        <MenuItem\r\n                          style={{ width: \"300px\" }}\r\n                          key={sampleSnapshotTitle}\r\n                          iconName=\"graph\"\r\n                          text={sampleSnapshotTitle}\r\n                          onClick={() => {\r\n                            window.loadAndDisplaySnapshotFromStrapi(sampleSnapshotStrapiUuid);\r\n                          }}\r\n                        />\r\n                      );\r\n                    })\r\n                  }\r\n\r\n                </MenuItem>\r\n                <MenuDivider />\r\n                <MenuItem\r\n                  iconName=\"import\"\r\n                  text=\"Import from CSV...\"\r\n                  onClick={() => (appState.import.dialogOpen = true)}\r\n                />\r\n                {/* <MenuItem\r\n                  iconName=\"import\"\r\n                  text=\"Import from GEXF...\"\r\n                  onClick={() => (appState.import.gexfDialogOpen = true)}\r\n                /> */}\r\n                {/* <MenuItem\r\n                  iconName=\"pt-icon-document-open\"\r\n                  text=\"Open Snapshot\"\r\n                  onClick={() => { appState.preferences.openSnapshotDialogOpen = true }}\r\n                /> */}\r\n                <MenuDivider />\r\n                <MenuItem\r\n                  iconName=\"download\"\r\n                  text=\"Save Snapshot\"\r\n                  onClick={() => {\r\n                    appState.project.stringCopyOfSnapshot = appState.graph.saveImmediateStates();\r\n                    appState.project.isSaveSnapshotDialogOpen = true\r\n                  }}\r\n                />\r\n                <MenuItem\r\n                  iconName=\"pt-icon-document-share\"\r\n                  text=\"Publish and Share Snapshot\"\r\n                  onClick={() => { appState.preferences.shareDialogOpen = true }}\r\n                />\r\n              </Menu>\r\n            }\r\n            position={Position.BOTTOM}\r\n            style={{height:\"100%\"}}\r\n          >\r\n            <Button\r\n              className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n              style={{height:\"100%\"}}\r\n              iconName=\"document\"\r\n            >\r\n              File\r\n            </Button>\r\n          </Popover>\r\n          <Popover\r\n            content={\r\n              <Menu>\r\n                <MenuItem\r\n                  text=\"View Table\"\r\n                  iconName=\"pt-icon-database\"\r\n                  onClick={() => {\r\n                    appState.graph.frame.pauseLayout();\r\n                    appState.preferences.dataSheetDialogOpen = true;\r\n                    this.forceUpdate();\r\n                  }}\r\n                />\r\n                {/* <MenuItem\r\n                  text=\"Statistics\"\r\n                  iconName=\"pt-icon-timeline-bar-chart\"\r\n                  onClick={() => { appState.preferences.statisticsDialogOpen = true }}\r\n                /> */}\r\n                {/* <MenuItem text=\"Community Detection\" iconName=\"graph\">\r\n                  <MenuItem\r\n                    text=\"Convex Hull\"\r\n                    onClick={() => {\r\n                      appState.graph.showNodes(appState.graph.rawGraph.nodes.map(n => n.id));\r\n                    }}\r\n                  />\r\n                  <MenuItem\r\n                    text=\"Show only nodes with top 5 PageRank\"\r\n                    onClick={() => {\r\n                      appState.graph.hideNodes(appState.graph.rawGraph.nodes.map(n => n.id));\r\n                      const sortedNodeList = [...appState.graph.rawGraph.nodes];\r\n                      sortedNodeList.sort((n1, n2) => {\r\n                        if (n1[\"pagerank\"] && n2[\"pagerank\"]) {\r\n                          return n2[\"pagerank\"] - n1[\"pagerank\"];\r\n                        }\r\n                        return 0;\r\n                      });\r\n                      const ids = [];\r\n                      for (let i = 0; i < 5 && i < sortedNodeList.length; i++) {\r\n                        ids.push(sortedNodeList[i].id);\r\n                      }\r\n                      appState.graph.showNodes(ids);\r\n                    }}\r\n                  />\r\n                  <MenuItem\r\n                    text=\"Show only nodes with top 5 Degree\"\r\n                    onClick={() => {\r\n                      appState.graph.hideNodes(appState.graph.rawGraph.nodes.map(n => n.id));\r\n                      const sortedNodeList = [...appState.graph.rawGraph.nodes];\r\n                      sortedNodeList.sort((n1, n2) => {\r\n                        if (n1[\"degree\"] && n2[\"degree\"]) {\r\n                          return n2[\"degree\"] - n1[\"degree\"];\r\n                        }\r\n                        return 0;\r\n                      });\r\n                      const ids = [];\r\n                      for (let i = 0; i < 5 && i < sortedNodeList.length; i++) {\r\n                        ids.push(sortedNodeList[i].id);\r\n                      }\r\n                      appState.graph.showNodes(ids);\r\n                    }}\r\n                  />\r\n                  <MenuItem\r\n                    text=\"Hide All Nodes\"\r\n                    onClick={() => {\r\n                      appState.graph.hideNodes(appState.graph.rawGraph.nodes.map(n => n.id));\r\n                    }}\r\n                  />\r\n                </MenuItem> */}\r\n              </Menu>\r\n            }\r\n            position={Position.BOTTOM}\r\n          >\r\n            <Button\r\n              className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n              iconName=\"pt-icon-wrench\"\r\n            >\r\n              View\r\n            </Button>\r\n          </Popover>\r\n        </div>\r\n        <div className={classnames([Classes.NAVBAR_GROUP, Classes.ALIGN_LEFT]) } style={{height:\"100%\"}}>\r\n          <span className={Classes.NAVBAR_DIVIDER} style={{height:\"100%\"}}/>\r\n          {appState.graph.hasGraph && appState.graph.frame && (\r\n            <div style={{ display: \"inline\" }}>\r\n\r\n              {/** Smart Pause functionality: pauses graph when no interaction */}\r\n              {(() => {\r\n                let self = this;\r\n                setInterval(function () {\r\n                  let timeNow = Date.now();\r\n                  /**stops initial default active layout*/\r\n                  if (appState.graph.smartPause.defaultActive.isActive) {\r\n                    if (timeNow - appState.graph.smartPause.defaultActive.startTime > appState.graph.smartPause.defaultActive.duration\r\n                      || appState.graph.smartPause.interactingWithGraph) {\r\n                      appState.graph.smartPause.defaultActive.isActive = false;\r\n                    }\r\n                  } else {\r\n                    /**smart pausing*/\r\n                    if (!appState.graph.frame.paused &&\r\n                      !appState.graph.smartPause.interactingWithGraph) {\r\n                      appState.graph.frame.pauseLayout();\r\n                      appState.graph.frame.paused = true;\r\n                      appState.graph.smartPause.smartPaused = true;\r\n                      self.forceUpdate();\r\n                    }\r\n                    /**old code using lastUnpaused:*/\r\n                    /**\r\n                     * if(!appState.graph.frame.paused && \r\n                      appState.graph.smartPause.lastUnpaused && \r\n                      !appState.graph.smartPause.interactingWithGraph && timeNow - appState.graph.smartPause.lastUnpaused > 300){\r\n                        appState.graph.frame.pauseLayout();\r\n                        appState.graph.frame.paused = true;\r\n                        appState.graph.smartPause.smartPaused = true;\r\n                        self.forceUpdate();\r\n                    }\r\n                     */\r\n\r\n                    /**un-smart pausing*/\r\n                    if (appState.graph.smartPause.smartPaused && appState.graph.smartPause.interactingWithGraph) {\r\n                      appState.graph.frame.resumeLayout();\r\n                      appState.graph.frame.paused = false;\r\n                      appState.graph.smartPause.smartPaused = false;\r\n                      self.forceUpdate();\r\n                    }\r\n                  }\r\n                }, 10)\r\n              })()}\r\n\r\n{<Tooltip\r\n                content={(appState.graph.frame.paused) ? \"Resume Layout Algorithm\" : \"Pause Layout Algorithm\"}\r\n                position={Position.BOTTOM}\r\n              >\r\n                <Button\r\n                  className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n                  iconName={(!appState.graph.smartPause.smartPaused && appState.graph.frame.paused) ? \"play\" : \"pause\"}\r\n                  text={(!appState.graph.smartPause.smartPaused && appState.graph.frame.paused) ? \"Resume Force-Directed Layout\" : \"Pause Force-Directed Layout\"}\r\n                  onClick={() => {\r\n                    if (appState.graph.frame.paused && !appState.graph.smartPause.smartPaused) {\r\n                      /**graph is going from \"pause layout\" mode to \"resume layout\"*/\r\n\r\n                      /** graph runs for default duration when unpaused */\r\n                      appState.graph.runActiveLayout();\r\n\r\n                      appState.graph.frame.resumeLayout();\r\n                      this.forceUpdate();\r\n                      /**appState.graph.smartPause.lastUnpaused = Date.now(); //old code using lastUnpaused*/\r\n                    } else if (appState.graph.smartPause.smartPaused) {\r\n                      /**graph is going from smart paused \"resume layout\" mode to \"pause layout\" mode*/\r\n                      appState.graph.frame.paused = true;\r\n                      appState.graph.smartPause.smartPaused = false;\r\n                    } else {\r\n                      /**graph is going from in \"resume layout\" mode to \"pause layout\" mode*/\r\n                      appState.graph.frame.pauseLayout();\r\n                      this.forceUpdate();\r\n                    }\r\n                  }}\r\n                />\r\n              </Tooltip>\r\n              }\r\n              {/* {                    {appState.graph.hasGraph && <Button className={\"pt-small\"} text=\"Clear Selection and Filter\" onClick={() => (appState.graph.overrides = new Map())} />}} */}\r\n              <div className=\"pt-button-group\">\r\n              <a className=\"pt-button pt-icon-refresh\"  role=\"button\" onClick={() => {\r\n                appState.graph.mapClicked = undefined;\r\n                appState.graph.areaSelected = undefined;\r\n                appState.graph.selectedNodes = [];\r\n                appState.graph.frame.selection = []\r\n                appState.graph.filter  = {}\r\n                appState.graph.currentlyHovered = undefined;\r\n                appState.graph.pathHovered = undefined;\r\n                appState.graph.pathHoveredList = [];\r\n                appState.graph.edgeselection = [];\r\n                appState.graph.degreeselection = [];\r\n                appState.graph.degreebrushed = false;\r\n                appState.graph.distanceDensityCurrentlyHovered = undefined;\r\n                appState.graph.distanceDensityCurrentlyClicked = [];\r\n                appState.graph.clearBrush = true;\r\n                appState.graph.filterNodes()\r\n                appState.graph.frame.updateSelectionOpacity()\r\n\r\n                // this.forceUpdate();\r\n              }}>Clear All Selections and Filters</a>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {/* {!appState.graph.smartPause.smartPaused && this.forceUpdate()} */}\r\n        </div>\r\n        <div\r\n          className={classnames([Classes.NAVBAR_GROUP, Classes.ALIGN_RIGHT])} style={{height:\"100%\"}}\r\n        >\r\n          {/* <Button\r\n            className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n            iconName=\"graph\"\r\n            onClick={() => {\r\n              appState.project.isRenameSnapshotDialogOpen = true;\r\n            }}\r\n          >\r\n            {appState.graph.metadata.snapshotName || \"Untitled Graph\"}\r\n          </Button> */}\r\n          <span className={Classes.NAVBAR_DIVIDER} />\r\n          {/* <Button\r\n            className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n            iconName=\"cog\"\r\n            onClick={() => {\r\n              appState.preferences.dialogOpen = true;\r\n            }}\r\n          /> */}\r\n          <Button\r\n            className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n            style={{height:\"100%\"}}\r\n            iconName=\"help\"\r\n            onClick={() => {\r\n              appState.preferences.helpDialogOpen = true;\r\n            }}\r\n          />\r\n          <Button\r\n            className={classnames([Classes.BUTTON, Classes.MINIMAL])}\r\n            style={{height:\"100%\"}}\r\n            iconName=\"minimize\"\r\n            onClick={() => {\r\n              appState.preferences.turnOnMinimalMode()\r\n            }}\r\n          />\r\n          <span className={Classes.NAVBAR_DIVIDER} style={{height:\"100%\"}}/>\r\n          <a\r\n            href={GITHUB_URL}\r\n            target='_blank'\r\n            style={{\r\n              color: appState.preferences.darkMode ? 'white' : 'black',\r\n              fontSize: '120%',\r\n              textDecoration: 'none'\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faGithub} />\r\n          </a>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\n@observer\r\nclass MinimalNavbar extends React.Component {\r\n  render() {\r\n    return appState.graph.frame && (\r\n      <div>\r\n        <div\r\n          className={classnames(\"minimal-navbar-left\")}\r\n          style={{\r\n            backgroundColor: appState.preferences.darkMode ? '#30404D' : '#FFFFFF',\r\n          }}\r\n        >\r\n          <Tooltip\r\n            content={(appState.graph.frame.paused) ? \"Resume Layout Algorithm\" : \"Pause Layout Algorithm\"}\r\n            position={Position.BOTTOM}\r\n          >\r\n             <div className=\"pt-button-group\">\r\n            <a\r\n              className={classnames(\"pt-button pt-icon-maximize\", (!appState.graph.smartPause.smartPaused && appState.graph.frame.paused) ? \"pt-icon-play\" : \"pt-icon-pause\")}\r\n              role=\"button\"\r\n              onClick={() => {\r\n                if (appState.graph.frame.paused && !appState.graph.smartPause.smartPaused) {\r\n                  /**graph is going from \"pause layout\" mode to \"resume layout\"*/\r\n\r\n                  /** graph runs for default duration when unpaused */\r\n                  appState.graph.runActiveLayout();\r\n\r\n                  appState.graph.frame.resumeLayout();\r\n                  this.forceUpdate();\r\n                  /**appState.graph.smartPause.lastUnpaused = Date.now(); //old code using lastUnpaused*/\r\n                } else if (appState.graph.smartPause.smartPaused) {\r\n                  /**graph is going from smart paused \"resume layout\" mode to \"pause layout\" mode*/\r\n                  appState.graph.frame.paused = true;\r\n                  appState.graph.smartPause.smartPaused = false;\r\n                } else {\r\n                  /**graph is going from in \"resume layout\" mode to \"pause layout\" mode*/\r\n                  appState.graph.frame.pauseLayout();\r\n                  this.forceUpdate();\r\n                }\r\n              }}\r\n            // onClick={() => {\r\n            //   if (appState.graph.frame.paused) {\r\n            //     appState.graph.frame.resumeLayout();\r\n            //     this.forceUpdate();\r\n            //   } else {\r\n            //     appState.graph.frame.pauseLayout();\r\n            //     this.forceUpdate();\r\n            //   }\r\n            // }}\r\n            />\r\n          </div>\r\n          </Tooltip>\r\n         \r\n        </div>\r\n        <div\r\n          className={classnames(\"minimal-navbar-right\")}\r\n          style={{\r\n            backgroundColor: appState.preferences.darkMode ? '#30404D' : '#FFFFFF',\r\n          }}\r\n        >\r\n          <div className=\"pt-button-group\">\r\n            <a className=\"pt-button pt-icon-maximize\"  role=\"button\" onClick={() => appState.preferences.turnOffMinimalMode()}></a>\r\n            <a className=\"pt-button pt-icon-help\"  role=\"button\" onClick={() => appState.preferences.helpDialogOpen = true}></a>\r\n            <a className=\"pt-button pt-icon-document-open\"  role=\"button\" href={window.location} target=\"_blank\"></a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n@observer\r\nclass NavbarSelector extends React.Component {\r\n  render() {\r\n    return appState.preferences.isNavbarInMinimalMode ? <MinimalNavbar /> : <RegularNavbar />;\r\n  }\r\n}\r\n\r\nexport default NavbarSelector;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  Card,\r\n  Classes,\r\n  Spinner,\r\n  NonIdealState,\r\n  FocusStyleManager\r\n} from \"@blueprintjs/core\";\r\nimport appState from \"../stores/index\";\r\nimport { requestOpenWorkspaceFolder } from \"../ipc/client\";\r\n\r\n// Argo-lite: In lite, home screen is replaced by a loading screen\r\n// since there will always be a default graph showing.\r\n@observer\r\nclass WorkspaceView extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"workspace\">\r\n        {/* <Card\r\n          interactive={true}\r\n          elevation={Card.ELEVATION_TWO}\r\n          onClick={() => {\r\n            appState.project.isNewProjectDialogOpen = true;\r\n          }}\r\n        >\r\n          <Icon iconName=\"plus\" /> Create New Project\r\n        </Card>\r\n        <Card\r\n          interactive={true}\r\n          elevation={Card.ELEVATION_TWO}\r\n          onClick={() => {\r\n            requestOpenWorkspaceFolder();\r\n          }}\r\n        >\r\n          <Icon iconName=\"cog\" /> Manage Workspace\r\n        </Card>\r\n        <hr />\r\n        <div className=\"argo-menu-list-header\">My Projects</div>\r\n        <div style={{ paddingBottom: '100px' }}>\r\n          {appState.project.isFetching ? (\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <Spinner />\r\n            </div>\r\n          ) : appState.project.projects.length > 0 ? (\r\n            appState.project.projects.map(project => {\r\n              return (\r\n                <div key={project.name}>\r\n                  <Card\r\n                    interactive={true}\r\n                    elevation={Card.ELEVATION_TWO}\r\n                    onClick={() => {\r\n                      appState.project.currentProject = project;\r\n                      appState.project.isProjectDetailDialogOpen = true;\r\n                    }}\r\n                  >\r\n                    <h5>{project.name}</h5>\r\n                    <p>Created: {project.createdDate || 'Unknown'}</p>\r\n                  </Card>\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            <div style={{ textAlign: \"center\" }}>\r\n              Workspace is empty. Start by creating a new project.\r\n            </div>\r\n          )}\r\n        </div> */}\r\n        <div style={{ textAlign: \"center\", height: \"100vh\" }}>\r\n          <Spinner />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WorkspaceView;","import React from \"react\";\r\nimport appState from \"../stores\";\r\nimport {Tag } from \"@blueprintjs/core\";\r\n\r\n\r\nexport default class ThreeJSVis extends React.Component {\r\n  componentDidMount() {\r\n    appState.graph.setUpFrame();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        id=\"graph-container\"\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          // flex: \"1\",\r\n          // border:'#C0C0C0',\r\n          // borderStyle:'solid',\r\n          // position: \"absolute\"\r\n        }}\r\n      >\r\n       \r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport appState from '../stores';\r\n\r\nvar def = require(\"../graph-frontend/src/imports\").default;\r\n\r\n\r\nexport default function AreaSelect() {\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n    if (!map.selectArea) return;\r\n\r\n    map.selectArea.enable();\r\n\r\n    map.on(\"areaselectstart\", (e) => {\r\n        //empty selection \r\n        // appState.graph.frame.selection.forEach(function(node){\r\n        //   node.renderData.draw_object.children[0].material.color.set(\r\n        //     node.renderData.hcolor\r\n        //   )\r\n        //   node.renderData.draw_object.children[0].visible = false\r\n        // })\r\n        appState.graph.frame.selection = []\r\n        appState.graph.selectedNodes = []\r\n        appState.graph.edgeselection = []\r\n        appState.graph.areaSelected = undefined;\r\n\r\n\r\n      });\r\n\r\n    map.on(\"areaselected\", (e) => {\r\n      console.log(e.bounds.toBBoxString()); // lon, lat, lon, lat\r\n      L.rectangle(e.bounds, { color: \"blue\", weight: 1 });\r\n      // const mapselection = []\r\n      // if(appState.graph.rawGraph.nodes[0].LatY !== undefined){\r\n      //   map.eachLayer((pointLayer) => { \r\n      //       if (pointLayer instanceof L.CircleMarker && e.bounds.contains(pointLayer.getLatLng())) {\r\n      //           mapselection.push(pointLayer.options.data)\r\n      //           pointLayer.options.data.renderData.draw_object.children[0].material.color.setHex(def.NODE_HIGHLIGHT);\r\n      //           pointLayer.options.data.renderData.draw_object.children[0].visible = true\r\n      //           appState.graph.frame.colorNodeOpacity(pointLayer.options.data,1)\r\n      //       }\r\n      //       // else if(pointLayer instanceof L.CircleMarker){\r\n      //       //   pointLayer.options.data.renderData.draw_object.children[0].material.color.setHex(pointLayer.options.data.renderData.hcolor);\r\n      //       //   pointLayer.options.data.renderData.draw_object.children[0].visible = false\r\n      //       //   appState.graph.frame.colorNodeOpacity(pointLayer.options.data,0.5)\r\n      //       // }\r\n      //     }\r\n      //       )\r\n      // }\r\n\r\n      // const northeast = e.bounds.getNorthEast()\r\n      // const southwest = e.bounds.getSouthWest()\r\n\r\n\r\n      const selectionNode = appState.graph.frame.getNodeList().filter(node =>( \r\n        e.bounds.contains(L.latLng(node.data.ref.LatY, node.data.ref.LonX)))\r\n      )\r\n      \r\n      // //highlight selected nodes \r\n      // if (appState.graph.selectedNodes.length > 0) {\r\n      //   if (appState.graph.selectedNodes.indexOf(node) == -1) {\r\n      //     return { fillColor: node.renderData.color , fillOpacity: 0.3, stroke: node.renderData.draw_object.children[0].material.color, zIndex:'auto' }\r\n      //   } else {\r\n  \r\n      //     return { fillColor: node.renderData.color , fillOpacity: 0.9, stroke: def.NODE_HIGHLIGHT, zIndex:'10000' }\r\n      //   }\r\n      // }\r\n      // appState.graph.selectedNodes = []\r\n      if (selectionNode.length === 0) return \r\n      appState.graph.selectedNodes = selectionNode\r\n      appState.graph.frame.selection = selectionNode\r\n      appState.graph.frame.updateSelectionOutOpacity();\r\n      appState.graph.areaSelected = true;\r\n      \r\n      // console.log(appState.graph.selectedNodes)\r\n    });\r\n\r\n    \r\n\r\n    // You can restrict selection area like this:\r\n    const bounds = map.getBounds().pad(-0.25); // save current map bounds as restriction area\r\n    // check restricted area on start and move\r\n    map.selectArea.setValidate((layerPoint) => {\r\n      return bounds.contains(this._map.layerPointToLatLng(layerPoint));\r\n    });\r\n\r\n    // now switch it off\r\n    map.selectArea.setValidate();\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n","import React from \"react\";\r\nimport appState, { AppState } from \"../stores/index\";\r\n\r\nimport { useMap } from \"react-leaflet\";\r\n\r\nimport { FeatureGroup, Circle } from 'react-leaflet';\r\nimport { EditControl } from \"react-leaflet-draw\"\r\n\r\n\r\nclass ReactLeafletToolbar extends React.Component {\r\n    \r\n    onCreate(e) {\r\n        this.clearMap()\r\n        const selectionNode = appState.graph.frame.getNodeList().filter(node =>( \r\n            e.layer._bounds.contains(L.latLng(node.data.ref.LatY, node.data.ref.LonX)))\r\n        )\r\n        appState.graph.selectedNodes = selectionNode\r\n        appState.graph.frame.selection = selectionNode\r\n        appState.graph.frame.updateSelectionOpacity()\r\n        appState.useToolbartoSelect = true\r\n    }\r\n    clearMap() {\r\n        const map = useMap();\r\n        map.eachLayer(function (layer) {\r\n          map.removeLayer(layer);\r\n        });\r\n      }\r\n    render() {\r\n        return (\r\n            <FeatureGroup>\r\n            <EditControl\r\n            position='bottomleft'\r\n            onEdited={this._onEditPath}\r\n            onCreated={this.onCreate}\r\n            onDeleted={this._onDeleted}\r\n            draw={{\r\n                marker: false,\r\n                polygon: false,\r\n                circlemarker: false,\r\n                circle: false,\r\n                polyline: false\r\n            }}\r\n            edit={{\r\n                edit: false\r\n            }}\r\n            />\r\n            <Circle center={[51.51, -0.06]} radius={200} />\r\n            </FeatureGroup>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ReactLeafletToolbar;","import { useEffect, useMemo } from \"react\";\r\nimport { useMap, useMapEvents } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport { latLngBounds } from 'leaflet'\r\nimport appState from '../stores';\r\nimport { observer } from \"mobx-react\";\r\n\r\n// @observer\r\nexport function ZoomMap() {\r\n  const map = useMap();\r\n\r\n  const bounds = useMemo(() => {\r\n    if (appState.graph.firstload) {\r\n      // if (appState.graph.frame.getNodeList() >0){\r\n      const nodeLoc = appState.graph.frame.getNodeList().map(function (node) {\r\n        return [parseFloat(node.data.ref.LatY), parseFloat(node.data.ref.LonX)]\r\n      })\r\n      const b = latLngBounds() // seemed to work without having to pass init arg\r\n      nodeLoc.forEach(coords => {\r\n        b.extend(coords)\r\n      })\r\n      if (Object.keys(b).length > 0) {\r\n        map.fitBounds(b)\r\n      }\r\n\r\n      // }\r\n      appState.graph.firstload = false\r\n      return null;\r\n    }   //first load\r\n    if (!appState.graph.autoZoom) return;\r\n    if (appState.graph.frame.selection.length == 0) {\r\n      // if (appState.graph.frame.getNodeList() >0){\r\n      const nodeLoc = appState.graph.frame.getNodeList().map(function (node) {\r\n        return [parseFloat(node.data.ref.LatY), parseFloat(node.data.ref.LonX)]\r\n      })\r\n      const b = latLngBounds() // seemed to work without having to pass init arg\r\n      nodeLoc.forEach(coords => {\r\n        b.extend(coords)\r\n      })\r\n      if (Object.keys(b).length > 0) {\r\n        map.fitBounds(b)\r\n      }\r\n\r\n      // }\r\n      return null;\r\n    }   //no selection \r\n    if (appState.graph.frame.selection.length == 1) { // only one node is selected \r\n      const nodeLoc = appState.graph.frame.selection.map(function (node) {\r\n        return [parseFloat(node.data.ref.LatY), parseFloat(node.data.ref.LonX)]\r\n      })\r\n      const b = latLngBounds() // seemed to work without having to pass init arg\r\n      nodeLoc.forEach(coords => {\r\n        b.extend(coords)\r\n      })\r\n      if (Object.keys(b).length > 0) {\r\n        map.fitBounds(b)\r\n      }\r\n      return;\r\n    }\r\n\r\n    const nodeLoc = appState.graph.frame.selection.map(function (node) {\r\n      return [parseFloat(node.data.ref.LatY), parseFloat(node.data.ref.LonX)]\r\n    })\r\n    // console.log(nodeLoc)\r\n    const b = latLngBounds() // seemed to work without having to pass init arg\r\n    nodeLoc.forEach(coords => {\r\n      b.extend(coords)\r\n    })\r\n    if (Object.keys(b).length > 0) {\r\n      map.fitBounds(b)\r\n    }\r\n  }, [appState.graph.frame.selection])\r\n\r\n  return null;\r\n}\r\n\r\n\r\nexport function MapClick() {\r\n\r\n  const map = useMapEvents({\r\n    click(e) {\r\n      if (appState.useToolbartoSelect) {\r\n        appState.useToolbartoSelect = false\r\n      } else {\r\n        appState.graph.frame.selection = []\r\n        appState.graph.selectedNodes = []\r\n        appState.graph.edgeselection = []\r\n        appState.graph.mapClicked = null\r\n        appState.graph.areaSelected = undefined;\r\n        // appState.graph.networkClicked = null\r\n        appState.graph.watchAppearance = appState.graph.watchAppearance + 1\r\n        appState.graph.frame.updateSelectionOpacity()\r\n\r\n      }\r\n\r\n\r\n    }\r\n  })\r\n  return null;\r\n}\r\n\r\nexport function DetectKeyPress() {\r\n  document.addEventListener('keydown', (event) => {\r\n    appState.graph.keydown = true\r\n  }, false);\r\n  document.addEventListener('keyup', (event) => {\r\n    appState.graph.keydown = false\r\n  }, false);\r\n  return null;\r\n}\r\n\r\n\r\n","import React, {useEffect} from 'react'\r\nimport L from 'leaflet'\r\nimport 'leaflet-curve'\r\nimport { useLeafletContext } from '@react-leaflet/core'\r\n\r\nconst Curve = (props) => {\r\n    const context = useLeafletContext()\r\n    const {path, options} = props\r\n\r\n    useEffect(() => {\r\n        const curve = new L.Curve(path, options)\r\n        const container = context.layerContainer || context.map\r\n        container.addLayer(curve)\r\n\r\n        return () => {\r\n            container.removeLayer(curve)\r\n        }\r\n    })\r\n\r\n    return null\r\n\r\n}\r\n\r\nexport default Curve","import React from 'react';\r\n// import L from 'leaflet';\r\nimport { MapContainer, CircleMarker, TileLayer, Tooltip, Polyline, Polygon, Pane, LayersControl, GeoJSON, FeatureGroup, Circle } from \"react-leaflet\";\r\nimport { EditControl } from \"react-leaflet-draw\"\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport appState from '../stores';\r\nimport { observer } from 'mobx-react';\r\nimport { observable, computed, action, runInAction } from \"mobx\";\r\nimport \"leaflet-area-select\";\r\nimport AreaSelect from \"../components/AreaSelect\"\r\nimport ReactLeafletToolbar from \"../components/ReactLeafletToolbar\"\r\nimport { ZoomMap, MapClick, DetectKeyPress } from \"../components/ZoomMap\"\r\nimport { useMap } from \"react-leaflet\";\r\nimport { Tag, Switch } from \"@blueprintjs/core\";\r\nimport * as turf from '@turf/turf'\r\nimport statejsonfile from \"../layerdata/us-state.json\"\r\nimport countyjsonfile from \"../layerdata/county_0_5m.json\"\r\nimport congressionjsonfile from \"../layerdata/congressional_5m.json\"\r\n\r\nimport \"../../node_modules/leaflet/dist/leaflet.css\"\r\nimport \"../../node_modules/leaflet-draw/dist/leaflet.draw.css\"\r\n\r\nimport Curve from \"../components/Curve\"\r\n\r\n// import { Button, Classes, Switch, Tag } from \"@blueprintjs/core\";\r\nvar def = require(\"../graph-frontend/src/imports\").default;\r\nvar d3 = def.d3;\r\n\r\n\r\n\r\n\r\n// import LocationFilter from \"../components/LocationFilter\"\r\n\r\n@observer\r\nclass MapView extends React.Component {\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    // this.stringified = JSON.stringify(statejsonfile);\r\n    //  this.statejson = JSON.parse(this.stringified);\r\n    //  this.statePolyPath = this.statejson.features.map(statedata =>{\r\n    //     statedata.geometry.coordinates[0]\r\n    // })\r\n    //  this.statePolygons = turf.polygon(this.statePolyPath);\r\n    // console.log(this.statePolygons)\r\n  }\r\n\r\n  // frameNode = []\r\n  // {\r\n\r\n  //   if (appState.graph.rawGraph.nodes[0].LatY !== undefined) {\r\n  //     frameNode = appState.graph.frame.getNodeIdList()\r\n  //   }\r\n\r\n\r\n  // }\r\n  // @observable neighborTosID = []\r\n  // @observable neighborFromsID = []\r\n\r\n\r\n\r\n  @computed\r\n  get neighborNodesID() {\r\n    const neighborIDs = []\r\n    // const neighborTosID = []\r\n    if (appState.graph.currentlyHovered && appState.graph.currentlyHovered.links) {\r\n      for (var j = 0; j < appState.graph.currentlyHovered.links.length; j++) {\r\n        neighborIDs.push(appState.graph.currentlyHovered.links[j].fromId);\r\n        neighborIDs.push(appState.graph.currentlyHovered.links[j].toId);\r\n      }\r\n    }\r\n\r\n    if (appState.graph.mapClicked) {\r\n      for (var j = 0; j < appState.graph.mapClicked.links.length; j++) {\r\n        neighborIDs.push(appState.graph.mapClicked.links[j].fromId);\r\n        neighborIDs.push(appState.graph.mapClicked.links[j].toId);\r\n      }\r\n    }\r\n    return neighborIDs\r\n  }\r\n\r\n  @computed\r\n  get nodesSelectedID() {\r\n    var edgesOfNodes = []\r\n\r\n    if (appState.graph.selectedNodes.length > 0) {\r\n      const filterNode = appState.graph.selectedNodes.filter((n) => n !== undefined)\r\n      edgesOfNodes = filterNode.map(function (node) {\r\n        return node.id\r\n      })\r\n    }\r\n    return edgesOfNodes\r\n  }\r\n\r\n  @computed\r\n  get edgeSelectionID() {\r\n    var edgeselectionID = []\r\n    // if (appState.graph.selectedNodes.length > 0) {\r\n\r\n      edgeselectionID = appState.graph.edgeselection.map(function (edge) {\r\n        return `${edge.source.id}👉 ${edge.target.id}`\r\n      })\r\n    // }\r\n    // console.log(edgeselectionID)\r\n    return edgeselectionID\r\n  }\r\n\r\n  // distance(fromlocLatY, fromlocLonX,tolocLatY,tolocLonX) {\r\n  //   const dx2 = Math.pow(fromlocLonX - tolocLonX, 2);\r\n  //   const dy2 = Math.pow(fromlocLatY - tolocLatY, 2);\r\n\r\n  //   return Math.sqrt(dx2 + dy2);\r\n  // }\r\n\r\n  // hypotenuse = Math.sqrt(1 + 1)\r\n\r\n  // segments= d3.scaleLinear()\r\n  //     .domain([0, this.hypotenuse])\r\n  //     .range([1, 10])\r\n\r\n\r\n  // generateSegments(nodes, links) {\r\n  //   // generate separate graph for edge bundling\r\n  //   // nodes: all nodes including control nodes\r\n  //   // links: all individual segments (source to target)\r\n  //   // paths: all segments combined into single path for drawing\r\n  //   let bundle = {nodes: [], links: [], paths: []};\r\n\r\n  //   // make existing nodes fixed\r\n  //   bundle.nodes = nodes.map(function(d, i) {\r\n  //     d.fx = d.LonX;\r\n  //     d.fy = d.LatY;\r\n  //     return d;\r\n  //   });\r\n\r\n  //   links.forEach(function(d, i) {\r\n  //     // calculate the distance between the source and target\r\n  //     let length = this.distance(d.data.fromlocLatY, d.data.fromlocLonX,d.data.tolocLatY,d.data.tolocLonX);\r\n\r\n  //     // calculate total number of inner nodes for this link\r\n  //     let total = Math.round(this.segments(length));\r\n\r\n  //     // create scales from source to target\r\n  //     let xscale = d3.scaleLinear()\r\n  //       .domain([0, total + 1]) // source, inner nodes, target\r\n  //       .range([d.data.fromlocLonX, d.data.tolocLonX]);\r\n\r\n  //     let yscale = d3.scaleLinear()\r\n  //       .domain([0, total + 1])\r\n  //       .range([d.data.fromlocLatY, d.data.tolocLatY]);\r\n\r\n  //     // initialize source node\r\n  //     let source = d.source;\r\n  //     let target = null;\r\n\r\n  //     // add all points to local path\r\n  //     let local = [source];\r\n\r\n  //     for (let j = 1; j <= total; j++) {\r\n  //       // calculate target node\r\n  //       target = {\r\n  //         x: xscale(j),\r\n  //         y: yscale(j)\r\n  //       };\r\n\r\n  //       local.push(target);\r\n  //       bundle.nodes.push(target);\r\n\r\n  //       bundle.links.push({\r\n  //         source: source,\r\n  //         target: target\r\n  //       });\r\n\r\n  //       source = target;\r\n  //     }\r\n\r\n  //     local.push(d.target);\r\n\r\n  //     // add last link to target node\r\n  //     bundle.links.push({\r\n  //       source: target,\r\n  //       target: d.target\r\n  //     });\r\n\r\n  //     bundle.paths.push(local);\r\n  //   });\r\n\r\n  //   return bundle;\r\n  // }\r\n\r\n\r\n\r\n  dec2hexString = (dec) => {\r\n    return '0x' + (dec + 0x10000).toString(16).substr(-4).toUpperCase();\r\n  }\r\n\r\n  onMouseOut = (e) => {\r\n    console.log('onMouseOut', e)\r\n  }\r\n\r\n\r\n\r\n\r\n  setEdgePathOption = (edge) => {\r\n    if (!appState.graph.mapEdgeShow) {\r\n      return { opacity: '0' }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    if (appState.graph.edgeselection.length !== 0) {  // && appState.graph.selectedNodes.length !== 0\r\n      const tempedgelist = this.edgeSelectionID\r\n      if (tempedgelist.indexOf(edge.id) !== -1) {\r\n        return { color: appState.graph.edges.crossColor, weight: '1.1', opacity: '1' }\r\n\r\n      }\r\n      // else if (this.nodesSelectedID.indexOf(edge.fromId) !== -1 || this.nodesSelectedID.indexOf(edge.toId) !== -1) {\r\n      //   return { color: appState.graph.edges.color, weight: '1', opacity: '1' }\r\n      // } \r\n      else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n\r\n\r\n    }\r\n\r\n    if (appState.graph.mapClicked) {\r\n      if (edge.fromId == appState.graph.mapClicked.id || edge.toId == appState.graph.mapClicked.id) {\r\n        return { color: appState.graph.edges.crossColor, weight: '1.1', opacity: '1' }\r\n      } else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n    }\r\n\r\n    //highlight branching out edges as well when select from map \r\n    if(appState.graph.areaSelected && appState.graph.selectedNodes.length > 0){\r\n      \r\n      if (this.nodesSelectedID.indexOf(edge.fromId) !== -1 || this.nodesSelectedID.indexOf(edge.toId) !== -1) {\r\n        return { color: appState.graph.edges.color, weight: '1.1', opacity: '1' }\r\n      } else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n    }\r\n\r\n    if(appState.graph.degreeselection.length>0){\r\n      const degreeselectionID = appState.graph.degreeselection.map(n=>n.id)\r\n      if (degreeselectionID.indexOf(edge.fromId) !== -1 && degreeselectionID.indexOf(edge.toId) !== -1) {\r\n        return { color: appState.graph.edges.color, weight: '1.1', opacity: '1' }\r\n      } else {\r\n\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0'}\r\n      }\r\n    }\r\n\r\n    if (appState.graph.pathHovered && appState.graph.pathHovered.pathnode.length>0) {\r\n\r\n      const pathnodeid = appState.graph.pathHovered[\"pathnode\"].map(p=>p.id)\r\n      const pathnodeall = [...appState.graph.pathHovered[\"sourceid\"], ...appState.graph.pathHovered[\"targetid\"], ...pathnodeid];\r\n      if (pathnodeall.indexOf(edge.fromId) !== -1 && pathnodeall.indexOf(edge.toId) !== -1) {\r\n        return { color: appState.graph.edges.crossColor, weight: '1.1', opacity: '1' }\r\n      } else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n      // for (let i = 0; i < pathnode.length - 1; i++) {\r\n      //   if ((edge.fromId == pathnode[i].id && edge.toId == pathnode[i + 1].id) || (edge.fromId == pathnode[i + 1].id && edge.toId == pathnode[i].id)) {\r\n      //     return { color: appState.graph.edges.crossColor, weight: '1.1', opacity: '1' }\r\n      //   }\r\n      // }\r\n      // return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n    }\r\n\r\n\r\n    if (!appState.graph.currentlyHovered && appState.graph.selectedNodes.length == 0 && !appState.graph.mapClicked ) {\r\n      return { color: appState.graph.edges.color, weight: '1', opacity: '1' }\r\n\r\n      // { color: edge.data.withinFamily ? appState.graph.edges.color : appState.graph.edges.crossColor, weight: '1', opacity: '1' }\r\n    }\r\n\r\n    \r\n\r\n    if (appState.graph.selectedNodes.length > 0) {\r\n      //highlight within selection edges , &&\r\n      if (this.nodesSelectedID.indexOf(edge.fromId) !== -1 && this.nodesSelectedID.indexOf(edge.toId) !== -1) {\r\n        return { color: appState.graph.edges.color, weight: '1.1', opacity: '1' }\r\n      } else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n\r\n\r\n      //else if (this.nodesSelectedID.indexOf(edge.fromId) !== -1 || this.nodesSelectedID.indexOf(edge.toId) !== -1) {\r\n        // return { color: appState.graph.edges.color, weight: '1', opacity: '1' }\r\n      // } \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    if (appState.graph.currentlyHovered) {\r\n      if (edge.fromId == appState.graph.currentlyHovered.id || edge.toId == appState.graph.currentlyHovered.id) {\r\n        return { color: appState.graph.edges.crossColor, weight: '1.1', opacity: '1' }\r\n      } else {\r\n        return { color: appState.graph.edges.color, weight: '0.01', opacity: '0' }\r\n      }\r\n    }\r\n\r\n   \r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  setNodeCircle = (node) => {\r\n    if (appState.graph.frame && appState.graph.nodes.size.max) {\r\n      // appState.graph.frame.updateGraph(appState.graph.computedGraph);\r\n      return node.data.size\r\n    }\r\n  }\r\n\r\n  setNodePathOption = (node) => {\r\n\r\n    //the order of if condition matters, because of return first \r\n\r\n    // return {fillColor: node.renderData.color , fillOpacity: node.renderData.draw_object.material.opacity, stroke: node.renderData.draw_object.children[0].material.color}\r\n\r\n    // //no hover and selection \r\n    console.log(appState.graph.watchAppearance)\r\n    // appState.graph.frame.paused = true;\r\n\r\n    if(appState.graph.degreeselection.length>0){\r\n      if (appState.graph.degreeselection.indexOf(node) == -1) {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n      } else {\r\n\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      }\r\n    }\r\n\r\n    if(appState.graph.degreebrushed && appState.graph.degreeselection.length==0){\r\n      return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n    }\r\n\r\n\r\n    if (appState.graph.convexNodes.length > 0) {\r\n      if (appState.graph.convexNodes.indexOf(node) == -1) {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n      } else {\r\n\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      }\r\n    }\r\n    if (!appState.graph.currentlyHovered && appState.graph.selectedNodes.length == 0 && !appState.graph.mapClicked && !appState.graph.pathHovered) {\r\n      return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, zIndex: 'auto' }\r\n    }\r\n\r\n\r\n    // //currently hovered node highlight \r\n    if (appState.graph.currentlyHovered) {\r\n      // currently node\r\n      if (node.id === appState.graph.currentlyHovered.id) {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      } else if (this.neighborNodesID.indexOf(node.id) !== -1) { // neighbors \r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, zIndex: '10000' }\r\n      } else { //others \r\n        return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n      }\r\n    }\r\n\r\n    if (appState.graph.mapClicked) {\r\n      // currently node\r\n      if (node.id === appState.graph.mapClicked.id) {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      } else if (this.neighborNodesID.indexOf(node.id) !== -1) { // neighbors \r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      } else { //others \r\n        return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n      }\r\n    }\r\n\r\n    //scatterplot path highlight \r\n    if (appState.graph.pathHovered && appState.graph.pathHovered[\"pathnode\"].length > 0) {\r\n      // if (  node.id == appState.graph.pathHovered[\"sourceid\"]  || node.id == appState.graph.pathHovered[\"targetid\"]) {\r\n      //   return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: true, color: 'green', zIndex: '10000' }\r\n      // }\r\n      // else if (appState.graph.pathHovered[\"pathnode\"].indexOf(node) == -1) {\r\n      //   return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n      // } else {\r\n\r\n      //   return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n      // }\r\n\r\n      if (  appState.graph.pathHovered[\"sourceid\"].indexOf(node.id) !== -1  || appState.graph.pathHovered[\"targetid\"].indexOf(node.id) !== -1) {\r\n          return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: true, color: 'green', zIndex: '10000' }\r\n        }\r\n        else if (appState.graph.pathHovered[\"pathnode\"].indexOf(node) == -1) {\r\n          return { fillColor: node.renderData.color, fillOpacity: 0.1, stroke: false, zIndex: 'auto' }\r\n        } else {\r\n  \r\n          return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n        }\r\n\r\n      \r\n    }\r\n\r\n\r\n\r\n    // select area highlight \r\n    if (appState.graph.selectedNodes.length > 0) {\r\n      const neighborIDs = appState.graph.selectedNeighborIDs\r\n      if (this.nodesSelectedID.indexOf(node.id) !== -1) {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n\r\n      } else if(neighborIDs.indexOf(node.id) !== -1){\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.5, stroke: false, color: 'orange', zIndex: '10000' }\r\n\r\n      }\r\n      else {\r\n        return { fillColor: node.renderData.color, fillOpacity: 0.03, stroke: false, zIndex: 'auto' }\r\n\r\n      }\r\n    }\r\n    else {\r\n      return { fillColor: node.renderData.color, fillOpacity: 0.8, stroke: false, color: 'orange', zIndex: '10000' }\r\n    }\r\n\r\n  }\r\n\r\n  setPolygonPath = (polygon, pi) => {\r\n    if (appState.graph.convexPolygonsShow && appState.graph.distanceDensityCurrentlyClicked.length > 0) {\r\n      if (appState.graph.distanceDensityCurrentlyClicked.includes(pi)) {\r\n        return { fillColor: appState.graph.nodeColorScale(pi), fillOpacity: 0.3, opacity: 0.8 }\r\n      }\r\n      else {\r\n        return { fillColor: appState.graph.nodeColorScale(pi), fillOpacity: 0, opacity: 0 }\r\n      }\r\n\r\n    }\r\n    if (appState.graph.convexPolygonsShow) {\r\n      return { fillColor: appState.graph.nodeColorScale(pi), fillOpacity: 0.3, opacity: 0.8 }\r\n    } else {\r\n      return { fillColor: appState.graph.nodeColorScale(pi), fillOpacity: 0, opacity: 0 }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // setPathOption = (node) => {\r\n  //   if (appState.graph.frame.selection.length > 0) {\r\n  //     if (appState.graph.frame.selection.indexOf(node) == -1) {\r\n  //       return { fillColor: 'blue', fillOpacity: 0.5, stroke: false, zIndex:'auto' }\r\n  //     } else {\r\n\r\n  //       return { fillColor: 'red', fillOpacity: 1, stroke: false,zIndex: '10000' }\r\n  //     }\r\n  //   }\r\n  //   if (appState.graph.currentlyHovered && node.id === appState.graph.currentlyHovered.id) {\r\n  //     return { fillColor: 'red', fillOpacity: 1, stroke: false }\r\n  //   } else {\r\n  //     return { fillColor: 'blue', fillOpacity: 0.5, stroke: false }\r\n  //   }\r\n\r\n\r\n  // }\r\n  onCreate = (e) => {\r\n    console.log(e);\r\n  }\r\n  \r\n\r\n  render() {\r\n\r\n    \r\n\r\n    return <div id=\"map\"\r\n      style={{\r\n        width: \"45vw\",\r\n        height: \"100%\",\r\n        flex: \"1 1 50%\",\r\n        zIndex: \"10\",\r\n        // border:'#C0C0C0',\r\n        //   borderStyle:'solid',\r\n        // position: \"absolute\"\r\n      }}\r\n    >\r\n\r\n      <Tag className=\"map-tag\">Map</Tag>\r\n\r\n      <MapContainer\r\n        style={{ height: \"100%\", width: \"100%\" }}\r\n        zoom={4}\r\n        center={[37.5, -97.5]}\r\n      >\r\n        \r\n        <LayersControl position=\"topright\">\r\n          <LayersControl.BaseLayer name=\"OpenStreetMap\" checked=\"true\">\r\n            <TileLayer url=\"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png?api_key=8f6a7e18-709d-4fe8-9dc9-fcce7bfa30d8\" />\r\n          </LayersControl.BaseLayer>\r\n          <LayersControl.BaseLayer name=\"DarkOpenStreetMap\">\r\n            <TileLayer url=\"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png\" />\r\n          </LayersControl.BaseLayer>\r\n          <LayersControl.BaseLayer name=\"Transport\">\r\n            <TileLayer url=\"'https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=<3e517e9e5dff41bdbfe201c3b1d72e69>\" />\r\n          </LayersControl.BaseLayer>\r\n          <LayersControl.Overlay name=\"income\">\r\n            <TileLayer url=\"https://www.justicemap.org/tile/{size}/income/{z}/{x}/{y}.png\"\r\n              size={'county'} />\r\n\r\n          </LayersControl.Overlay>\r\n          <LayersControl.Overlay name=\"US state\">\r\n\r\n            <GeoJSON data={statejsonfile} />\r\n          </LayersControl.Overlay>\r\n\r\n          <LayersControl.Overlay name=\"US county\">\r\n\r\n            <GeoJSON data={countyjsonfile} />\r\n          </LayersControl.Overlay>\r\n\r\n          <LayersControl.Overlay name=\"US Congressional\">\r\n\r\n            <GeoJSON data={congressionjsonfile} />\r\n          </LayersControl.Overlay>\r\n        </LayersControl>\r\n        \r\n\r\n        {/* <ReactLeafletToolbar /> */}\r\n        \r\n        <AreaSelect />\r\n        {(appState.graph.hasGraph && (!appState.import.loading)) ? (\r\n                    <ZoomMap /> \r\n                  ) : (\r\n                    <div></div>\r\n                  )}\r\n        <MapClick />\r\n        <DetectKeyPress />\r\n\r\n\r\n        <Pane name=\"edgepane\" style={{ zIndex: 10000 }}>\r\n            {/* <Curve path={[\"M\", [50, 14], \"Q\", [53, 20], [49, 25]]}\r\n          options={{color:'red',fill:false}}\r\n            /> */}\r\n          {appState.graph.rawGraph.edges[0].fromlocLatY !== undefined && appState.graph.rawGraph.edges[0].fromlocLatY !== 360 &&\r\n\r\n            appState.graph.frame && appState.graph.frame.getEdgeList().map((edge, i) => {\r\n              // if (this.frameNode.indexOf(edge.source_id) !== -1 && this.frameNode.indexOf(edge.target_id) !== -1) {\r\n\r\n              var edgepositions = [[edge.data.fromlocLatY, edge.data.fromlocLonX], [edge.data.tolocLatY, edge.data.tolocLonX]]\r\n              return (\r\n                // <Polyline key={i} pathOptions={this.setEdgePathOption(edge)} positions={edgepositions}\r\n                //   data={edge}\r\n                // // eventHandlers={{\r\n                // //   click: (e) => {\r\n                // //     console.log(e.target.options.data)\r\n                // //   }}}\r\n                // />\r\n                <Curve path={[\"M\", edgepositions[0], \"T\", edgepositions[1]]}\r\n          options={this.setEdgePathOption(edge)}\r\n            />\r\n                \r\n                \r\n\r\n              );\r\n\r\n\r\n\r\n\r\n            })\r\n          }\r\n        </Pane>\r\n\r\n\r\n        {appState.graph.convexPolygons.map((polygon, i) => {\r\n          var community = polygon.community\r\n          var polygonlist = polygon.points.map((p) => {\r\n            return [p[0], p[1]]\r\n          })\r\n          // console.log(polygonlist)\r\n\r\n          return <Polygon pathOptions={this.setPolygonPath(polygon, community)} positions={polygonlist} />\r\n\r\n        })\r\n\r\n        }\r\n        {/* </Pane> */}\r\n\r\n\r\n\r\n\r\n        <Pane name=\"custom\" style={{ zIndex: 10000 }}>\r\n          {appState.graph.rawGraph.nodes[0].LatY !== undefined && appState.graph.rawGraph.nodes[0].LonX !== undefined &&\r\n            appState.graph.frame && appState.graph.frame.getNodeList().map((node, i) => {\r\n\r\n              return (\r\n                <CircleMarker\r\n                  key={node.id}\r\n                  center={[node.data.ref.LatY, node.data.ref.LonX]}\r\n                  radius={this.setNodeCircle(node) * 1.5}\r\n                  pathOptions={this.setNodePathOption(node)}\r\n\r\n\r\n                  data={node}\r\n                  eventHandlers={{\r\n                    click: (e) => {\r\n                      e.originalEvent.view.L.DomEvent.stopPropagation(e)\r\n                      if (!appState.graph.mapClicked) { //no clicked circle before \r\n                        const thenode = e.target.options.data\r\n                        appState.graph.mapClicked = thenode  //control map update \r\n                        // appState.graph.currentlyHovered = null\r\n                        // appState.graph.frame.highlightNode(thenode, true);   //control socio update \r\n                        // appState.graph.frame.highlightEdges(thenode, true);\r\n                        // appState.graph.frame.selection = appState.graph.frame.getNeighborNodesFromGraph(thenode);\r\n                        appState.graph.selectedNodes = appState.graph.frame.getNeighborNodesFromGraph(thenode);\r\n                        appState.graph.frame.highlightClickNode(thenode);\r\n                      } else {  // click again to unselect \r\n                        appState.graph.mapClicked = null\r\n                        appState.graph.frame.selection = []\r\n                        appState.graph.selectedNodes = []\r\n                        appState.graph.edgeselection = []\r\n                      }\r\n\r\n\r\n                    },\r\n                    mouseover: (e) => {\r\n                      //when selection or mapclick, then freeze, no hover event \r\n                      if (appState.graph.mapClicked || appState.graph.frame.selection.length !== 0) return;\r\n                      if(appState.graph.pathHovered && appState.graph.pathHovered.pathnode.length>0) return;\r\n                      // var currentNode = e.target.options.data\r\n                      // appState.graph.selectedNodes = []\r\n                      // appState.graph.frame.selection = []\r\n\r\n\r\n                      appState.graph.currentlyHovered = e.target.options.data  // control map update \r\n                      // appState.graph.frame.highlightNode(e.target.options.data, true);   // control cosio update \r\n                      // appState.graph.frame.highlightEdges(e.target.options.data, true);\r\n                      const thenode = e.target.options.data\r\n                      // appState.graph.frame.selection = appState.graph.frame.getNeighborNodesFromGraph(thenode);\r\n                      // appState.graph.selectedNodes = appState.graph.frame.getNeighborNodesFromGraph(thenode);\r\n                      appState.graph.frame.highlightClickNode(thenode);\r\n                      // e.target.options.data.renderData.draw_object.children[0].material.color.setHex(def.NODE_HIGHLIGHT);\r\n                      // e.target.options.data.renderData.draw_object.children[0].visible = true\r\n\r\n                      // appState.graph.frame.lastHover = e.target.options.data\r\n                      // appState.graph.frame.highlightNode(e.target.options.data, true)\r\n                      // e.target.setStyle({fillOpacity: 1, fillColor:'red'})\r\n                      // console.log(e.target.options.data)\r\n                    },\r\n                    mouseout: (e) => {\r\n                      //when selection or mapclick, then freeze, no hover event \r\n                      if (appState.graph.mapClicked || appState.graph.frame.selection.length !== 0) return;\r\n                      if(appState.graph.pathHovered && appState.graph.pathHovered.pathnode.length>0) return;\r\n                      appState.graph.frame.graph.forEachNode(function (n) {\r\n                        // if (n !== appState.graph.mapClicked) {\r\n                        appState.graph.frame.colorNodeOpacity(n, 1);\r\n\r\n                        appState.graph.frame.highlightNode(n, false, def.ADJACENT_HIGHLIGHT);\r\n                        // }\r\n                      }\r\n                      );\r\n                      appState.graph.frame.colorNodeEdge(null);\r\n                      appState.graph.currentlyHovered = null;\r\n\r\n\r\n                      // e.target.options.data.renderData.draw_object.children[0].material.color.set(\r\n                      //   e.target.options.data.renderData.hcolor\r\n                      // )\r\n                      // e.target.options.data.renderData.draw_object.children[0].visible = false\r\n\r\n                      // appState.graph.currentlyHovered = null\r\n                      // appState.graph.frame.highlightNode(e.target.options.data,false)\r\n                      // e.target.setStyle({ fillOpacity: 0.5, fillColor: 'blue' })\r\n\r\n                      // console.log('marker out', e)\r\n                    }\r\n                  }}\r\n                // onMouseOver = {this.onMouseOver}\r\n                // {(e) => {\r\n                //   // appState.graph.currentlyHovered = \r\n                //   e.target.setStyle({fillOpacity: 1, stroke: true, color:'black', weight:3})\r\n                // }}\r\n                // onMouseOut={this.onMouseOut}\r\n                // {(e) => e.target.setStyle({fillOpacity: 0.5,stroke: false })}\r\n                >\r\n                  {(appState.graph.frame && node.renderData.textHolder.children[0].element.override) ?\r\n                    <Tooltip\r\n                    style = {{textAlign: \"left\"}}\r\n                      width={node.renderData.textHolder.children[0].element.children[0].style.width}\r\n                      fontSize={node.renderData.textHolder.children[0].element.children[0].style.mapfontSize}\r\n                      className = {`maptooltip maptooltip_${node.id}`} direction=\"right\" offset={[0, 0]} opacity={1} permanent>{node.renderData.label}</Tooltip> : \r\n                      <Tooltip   fontSize={node.renderData.textHolder.children[0].element.children[0].style.mapfontSize} style = {{textAlign: \"left\"}} className={`maptooltip maptooltip_${node.id}`} direction=\"right\" offset={[0, 0]} opacity={0} permanent>{node.renderData.label}</Tooltip>}\r\n\r\n                </CircleMarker>\r\n              );\r\n\r\n\r\n            })\r\n\r\n\r\n          }\r\n        </Pane>\r\n        <div>\r\n        <Switch style={{ position: 'fixed', top: '5vh', left: '97vw', zIndex: '1000' }}\r\n          defaultChecked={appState.graph.mapEdgeShow}\r\n          // checked={!node.isHidden}\r\n          onChange={(value) => {\r\n            appState.graph.mapEdgeShow = value.target.checked\r\n\r\n          }}\r\n        />\r\n        <span style={{ fontSize: '12px', position: 'fixed', top: '5vh', right: '4vw', zIndex: '1000' }}> Show Edges</span>\r\n\r\n\r\n        <Switch style={{ position: 'fixed', top: '8vh', left: '97vw', zIndex: '1000' }}\r\n          defaultChecked={appState.graph.convexPolygonsShow}\r\n          // checked={!node.isHidden}\r\n          onChange={(value) => {\r\n            appState.graph.convexPolygonsShow = value.target.checked\r\n\r\n          }}\r\n        />\r\n        <span style={{ fontSize: '12px', position: 'fixed', top: '8vh', right: '4vw', zIndex: '1000' }}> Show Community Convex Hull</span>\r\n\r\n        <Switch style={{ position: 'fixed', top: '11vh', left: '97vw', zIndex: '1000' }}\r\n          defaultChecked={appState.graph.autoZoom}\r\n          // checked={!node.isHidden}\r\n          onChange={(value) => {\r\n            appState.graph.autoZoom = value.target.checked\r\n\r\n          }}\r\n        />\r\n        <span style={{ fontSize: '12px', position: 'fixed', top: '11vh', right: '4vw', zIndex: '1000' }}> Automatic Zoom</span>\r\n        \r\n        <span style={{ fontSize: '12px', position: 'fixed', top: '14vh', right: '1vw', zIndex: '1000' }}> press CTRL key to select nodes on the map</span>\r\n\r\n        </div>\r\n        \r\n\r\n\r\n        {/* {(appState.graph.convexPolygonsShow && this.modularity) ? <Tag className=\"modularity-tag\" style={{ position: 'absolute', top: '55vh', left: '70vw', zIndex: '1000' }}>{\"Q value: \" + parseFloat(this.modularity).toFixed(3)}</Tag> : null} */}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      </MapContainer>\r\n      \r\n    </div>\r\n  }\r\n}\r\n\r\nexport default MapView;","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport uniq from \"lodash/uniq\";\r\nimport { Classes } from \"@blueprintjs/core\";\r\nimport appState from \"../../stores\";\r\nimport { observer } from \"mobx-react/index\";\r\n\r\n@observer\r\nclass NodeDetail extends React.Component {\r\n  render() {\r\n    // If input is number,\r\n    // currently format number between 0-1 (eg. pagerank)\r\n    // to show no more than 3 significant digits.\r\n    const formatLongFloat = (nodeAttributeValue) => {\r\n      const num = Number(nodeAttributeValue);\r\n      if (Number.isNaN(num) || num > 1 || num < 0) {\r\n        // Do not format just return original\r\n        return nodeAttributeValue;\r\n      }\r\n      // Format to no more than 3 significant digit.\r\n      return Number.parseFloat(num).toPrecision(3);\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className={classnames(\r\n          // 'overlay-card',\r\n          \"right-overlay-card\",\r\n          \"transparent-frame\"\r\n        )}\r\n      >\r\n        <div className={classnames(Classes.CARD, \"node-details-table\")}>\r\n          <table\r\n            className={classnames(Classes.TABLE, Classes.TABLE_STRIPED, \"node-details-table-content\")}\r\n            style={{\r\n              width: \"100%\",\r\n              padding: '0',\r\n              fontSize: \"12px\"\r\n            }}\r\n          >\r\n            \r\n            <thead>\r\n              <tr>\r\n                <th>Property</th>\r\n                <th>Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {appState.graph.allPropertiesKeyList.map((it, i) => (\r\n                <tr key={`${it}-${i}`}>\r\n                  <td style={{ padding: '5px 10px' }}>{it}</td>\r\n                  <td style={{ padding: '5px 10px', whiteSpace: 'normal' }}>{formatLongFloat(this.props.node[it])}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NodeDetail;","import React from \"react\";\r\nimport { Button, Classes } from \"@blueprintjs/core\";\r\nimport { Select } from \"@blueprintjs/labs\";\r\nimport CommonItemRenderer from \"./CommonItemRenderer\";\r\n\r\nexport default ({ items, onSelect, value, fill = false }) => (\r\n  <Select\r\n    items={items}\r\n    itemRenderer={CommonItemRenderer}\r\n    filterable={false}\r\n    onItemSelect={onSelect}\r\n  >\r\n        <Button className={`bp4-button  ${fill ? Classes.FILL : null}`} text={value} />\r\n\r\n  </Select>\r\n);\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport uniq from \"lodash/uniq\";\r\nimport { Button, Classes } from \"@blueprintjs/core\";\r\nimport appState from \"../../stores\";\r\nimport { observer } from \"mobx-react/index\";\r\nimport { observable, computed, action, runInAction } from \"mobx\";\r\nimport { scaleLinear, scalePoint, max, axisLeft, axisBottom, select, group } from \"d3\"\r\nimport { brush, brushY } from \"d3-brush\";\r\nimport XYSelect from \"../utils/XYSelect\";\r\nimport SVGBrush from 'react-svg-brush';\r\nimport path from 'ngraph.path';\r\nimport * as SvgSaver from 'svgsaver';\r\nimport { CSVLink, CSVDownload } from \"react-csv\";\r\nimport { transform } from \"lodash\";\r\n// import SvgSaver from svgsaver\r\n\r\nvar def = require(\"../../graph-frontend/src/imports\").default;\r\n\r\n\r\n\r\n\r\n\r\n// const settings = {\r\n//   width: 150,\r\n//   height: 150,\r\n//   padding: 10,\r\n//   // numDataPoints: 50,\r\n//   // maxRange: () => Math.random() * 1000\r\n// };\r\n\r\n@observer\r\nclass ScatterPlot extends React.Component {\r\n\r\n  @observable data = appState.graph.frame.getNodeList().filter(node => !isNaN(parseFloat(node.data.ref[appState.graph.scatterplot.x])) && !isNaN(parseFloat(node.data.ref[appState.graph.scatterplot.y])))\r\n\r\n  margin = { top: 40, right: 10, bottom: 60, left: 70 }\r\n  // clustermargin = {top: 50, right: 50, bottom: 50, left: 50}\r\n  width = window.innerWidth * 0.48 - this.margin.left - this.margin.right\r\n  height = window.innerHeight * 0.35 - this.margin.top - this.margin.bottom\r\n  cr = 3\r\n  maxhop = undefined\r\n  formatXtext = []\r\n  infinityhop = []\r\n\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.circles = React.createRef();\r\n    this.state = { csvarray: [] }\r\n  }\r\n\r\n  downloadCSV = () => {\r\n    appState.graph.frame.getNodeList().filter(node => !isNaN(parseFloat(node.data.ref[appState.graph.scatterplot.x])) && !isNaN(parseFloat(node.data.ref[appState.graph.scatterplot.y])))\r\n    let column1, column2\r\n\r\n    let header = [];\r\n    this.setState({\r\n      csvarray: []\r\n    });\r\n    // // this.state.;\r\n    // if (appState.graph.scatterplot.x === 'shortest path') {\r\n    //   column1 = this.infinityhop\r\n    //   header.push('shortest path')\r\n    // } else if (appState.graph.scatterplot.x === 'pair distance') {\r\n    //   column1 = appState.graph.rawGraph.paths.map((path, i) => {\r\n    //     return parseFloat(path['distance'])\r\n    //   })\r\n    //   header.push('pair distance')\r\n    // } else {\r\n    //   header.push(appState.graph.scatterplot.x)\r\n    //   column1 = appState.graph.frame.getNodeList().map((d) => {\r\n    //     return parseFloat(d.data.ref[appState.graph.scatterplot.x])\r\n    //   })\r\n    // }\r\n\r\n    // if (appState.graph.scatterplot.y === 'shortest path') {\r\n    //   column2 = this.infinityhop\r\n    //   header.push('shortest path')\r\n    // } else if (appState.graph.scatterplot.y === 'pair distance') {\r\n    //   column2 = appState.graph.rawGraph.paths.map((path, i) => {\r\n    //     return parseFloat(path['distance'])\r\n    //   })\r\n    //   header.push('pair distance')\r\n    // } else {\r\n    //   header.push(appState.graph.scatterplot.y)\r\n    //   column2 = appState.graph.frame.getNodeList().map((d) => {\r\n    //     return parseFloat(d.data.ref[appState.graph.scatterplot.y])\r\n    //   })\r\n    // }\r\n\r\n    //download for all \r\n    let temp = []\r\n    header = appState.graph.metadata.nodeComputed.filter(n => (n !== 'shortest path' && n !== 'pair distance'))\r\n    header.unshift('id')\r\n    temp.push(header)\r\n    // temp[0].unshift('id')\r\n    appState.graph.frame.getNodeList().forEach((node) => {\r\n      const noderow = []\r\n      // noderow.push(node.id)\r\n      header.forEach((column) => {\r\n        noderow.push(node.data.ref[column])\r\n      })\r\n      temp.push(noderow)\r\n    })\r\n\r\n\r\n    // temp.push(header)\r\n    // for (var i = 0; i < column2.length && i < column1.length; i++) {\r\n    //   temp.push([column1[i], column2[i]]);\r\n    // }\r\n    this.setState({\r\n      csvarray: temp\r\n    });\r\n\r\n\r\n  }\r\n\r\n  onBrushStart = ({ target, type, selection, sourceEvent }) => {\r\n    appState.graph.frame.selection = []\r\n    appState.graph.selectedNodes = []\r\n    appState.graph.edgeselection = []\r\n    appState.graph.mapClicked = null\r\n    appState.graph.clearBrush = false;\r\n\r\n  }\r\n  onBrush = ({ target, type, selection, sourceEvent }) => {\r\n\r\n  }\r\n  onBrushEnd = ({ target, type, selection, sourceEvent }) => {\r\n    appState.graph.selectedNodes = []\r\n    const selectionNodeID = []\r\n    const svgElement = select(this.svg)\r\n    const circles = svgElement.selectAll(\"circle\")\r\n    if (selection) {\r\n      const brushBounds = {\r\n        x0: selection[0][0] - this.margin.left,\r\n        x1: selection[1][0] - this.margin.left,\r\n        y0: selection[0][1] - this.margin.top - this.cr,\r\n        y1: selection[1][1] - this.margin.top - this.cr,\r\n      }\r\n      console.log(selection[0][1], selection[1][1], brushBounds.y1, brushBounds.y0);\r\n\r\n      circles.each(function (d, i) {\r\n        const nodecx = parseFloat(select(this).attr(\"cx\"))\r\n        const nodecy = parseFloat(select(this).attr(\"cy\"))\r\n        console.log(nodecx, nodecy);\r\n        if (nodecx >= brushBounds.x0 && nodecx <= brushBounds.x1 && nodecy >= brushBounds.y0 && nodecy <= brushBounds.y1) {\r\n          selectionNodeID.push(select(this).attr(\"id\"))\r\n        }\r\n\r\n\r\n\r\n      })\r\n\r\n\r\n      const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n        // console.log(node)\r\n        selectionNodeID.includes(node.id)\r\n\r\n      )\r\n      appState.graph.frame.selection = selectionNode\r\n      appState.graph.selectedNodes = selectionNode\r\n\r\n\r\n      // console.log(selectionNode)\r\n      appState.graph.frame.updateSelectionOpacity()\r\n    } else {   //click to clear selection \r\n      appState.graph.frame.selection = []\r\n      appState.graph.frame.updateSelectionOpacity()\r\n\r\n    }\r\n\r\n\r\n  }\r\n  renderBrush = () => (\r\n    <SVGBrush\r\n      // Defines the boundary of the brush.\r\n      // Strictly uses the format [[x0, y0], [x1, y1]] for both 1d and 2d brush.\r\n      // Note: d3 allows the format [x, y] for 1d brush.\r\n      // transform={\"translate(0,\" + this.margin.top +\")\"}\r\n      selection={appState.graph.clearBrush ? null : undefined}\r\n      extent={\r\n        [[this.margin.left, this.margin.top], [this.width + this.margin.left, this.height + this.margin.top]]\r\n      }\r\n      // Obtain mouse positions relative to the current svg during mouse events.\r\n      // By default, getEventMouse returns [event.clientX, event.clientY]\r\n      getEventMouse={event => {\r\n        const { clientX, clientY } = event;\r\n        const { left, top } = this.svg.getBoundingClientRect();\r\n        // console.log([clientX - left, clientY - top])\r\n        return [clientX - left, clientY - top];\r\n      }}\r\n      brushType=\"2d\" // \"x\"\r\n      onBrushStart={this.onBrushStart}\r\n      onBrush={this.onBrush}\r\n      onBrushEnd={this.onBrushEnd}\r\n    />\r\n  )\r\n\r\n\r\n  // componentDidMount() {\r\n  //   var svg = select('.scatterchart');\r\n  //   //Do svg stuff\r\n  //   const brush = brushY()\r\n  //     .on(\"brush\", brushed);\r\n\r\n  // svg.append(\"g\")\r\n  // .call(brush); \r\n  //   function brushed({selection}) {\r\n  //     console.log(selection)\r\n  //   }\r\n\r\n  // }\r\n\r\n  render() {\r\n\r\n\r\n    if (appState.graph.hasGraph) {\r\n      let x, y\r\n      if (appState.graph.scatterplot.x === 'network density' || appState.graph.scatterplot.x === 'standard distance') {\r\n        x = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(appState.graph.densityDistance, function (d) {\r\n              return parseFloat(d[appState.graph.scatterplot.x])\r\n            })\r\n          ])\r\n          .range([0, this.width])\r\n      }\r\n      else if (appState.graph.scatterplot.x === 'shortest path') {\r\n        const shortpathhop = appState.graph.rawGraph.paths.map(function (path, i) {\r\n          return path['path'].length - 1\r\n        })\r\n        shortpathhop.sort()\r\n        this.maxhop = shortpathhop[shortpathhop.length - 1]\r\n\r\n        this.infinityhop = shortpathhop.map((pathlen, i) => {\r\n          if (pathlen == -1) {\r\n            return this.maxhop + 1\r\n          } else {\r\n            return pathlen\r\n          }\r\n        })\r\n        this.infinityhop.sort()\r\n        // console.log()\r\n        // this.formatXtext =  [...new Set(this.infinityhop)].map((pathlen,i)=>{\r\n        //   if(pathlen == (this.maxhop +1)){\r\n        //     return 'None'\r\n        //   }else{\r\n        //     return pathlen.toString()\r\n        //   }\r\n        // })\r\n        // console.log(this.formatXtext)\r\n        x = scalePoint()\r\n          .domain(this.infinityhop)\r\n          .range([0, this.width]);\r\n\r\n\r\n      } else if (appState.graph.scatterplot.x === 'pair distance') {\r\n        const pairdistance = appState.graph.rawGraph.paths.map((path, i) => {\r\n          return parseFloat(path['distance'])\r\n        })\r\n        x = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(pairdistance)\r\n          ])\r\n          .range([0, this.width])\r\n\r\n\r\n      } else {\r\n        x = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(appState.graph.frame.getNodeList(), function (d) {\r\n              return parseFloat(d.data.ref[appState.graph.scatterplot.x])\r\n            })\r\n          ])\r\n          .range([0, this.width])\r\n      }\r\n\r\n      if (appState.graph.scatterplot.y === 'network density' || appState.graph.scatterplot.y === 'standard distance') {\r\n        y = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(appState.graph.densityDistance, function (d) {\r\n              return parseFloat(d[appState.graph.scatterplot.y])\r\n            })\r\n          ])\r\n          .range([this.height, 0])\r\n      }\r\n      else if (appState.graph.scatterplot.y === 'shortest path') {\r\n\r\n\r\n        const shortpathhop = appState.graph.rawGraph.paths.map(function (path, i) {\r\n          return path['path'].length - 1\r\n        })\r\n        shortpathhop.sort()\r\n        this.maxhop = shortpathhop[shortpathhop.length - 1]\r\n\r\n        this.infinityhop = shortpathhop.map((pathlen, i) => {\r\n          if (pathlen == -1) {\r\n            return this.maxhop + 1\r\n          } else {\r\n            return pathlen\r\n          }\r\n        })\r\n        this.infinityhop.sort().reverse()\r\n\r\n        y = scalePoint()\r\n          .domain(this.infinityhop)\r\n          .range([0, this.height]);\r\n\r\n      } else if (appState.graph.scatterplot.y === 'pair distance') {\r\n        const pairdistance = appState.graph.rawGraph.paths.map(function (path, i) {\r\n          return parseFloat(path['distance'])\r\n        })\r\n        y = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(pairdistance)\r\n          ])\r\n          .range([this.height, 0])\r\n\r\n      } else {\r\n        y = scaleLinear()\r\n          .domain([\r\n            0,\r\n            max(appState.graph.frame.getNodeList(), function (d) {\r\n              return parseFloat(d.data.ref[appState.graph.scatterplot.y])\r\n            })\r\n          ])\r\n          .range([this.height, 0])\r\n      }\r\n      const capitalizeString = (inputString) => {\r\n        const connectingWords = ['in', 'to']; // Add more connecting words as needed\r\n\r\n        return inputString.replace(/\\w+/g, function (word) {\r\n          return connectingWords.includes(word.toLowerCase()) ? word : word.charAt(0).toUpperCase() + word.slice(1);\r\n        });\r\n      }\r\n\r\n      // if (isLoggedIn) {\r\n      //   button = <LogoutButton onClick={this.handleLogoutClick} />;\r\n      // } else {\r\n      //   button = <LoginButton onClick={this.handleLoginClick} />;\r\n      // }\r\n\r\n\r\n      return (\r\n        <div>\r\n\r\n          {/* <div style={{ width:'50vw', transform:'translate(10px,10px)'}} className={classnames(Classes.CARD, \"sub-option\")}> */}\r\n\r\n          <div style={{ display: \"inline\", }}>\r\n            <p className=\"scatter-plot-font\" style={{ display: \"inline\", fontSize: \"12px\" }}>X by: </p>\r\n            <span >\r\n              < XYSelect className=\"scatter-plot-font\" style={{ display: \"inline\" }}\r\n                items={appState.graph.allComputedPropertiesKeyList.map(s => capitalizeString(s))}\r\n                onSelect={it => (appState.graph.scatterplot.x = it.split(' ').map((s) => s.charAt(0).toLowerCase() + s.substring(1)).join(' '))}\r\n                value={\r\n                  capitalizeString(appState.graph.scatterplot.x)\r\n                }\r\n              />\r\n            </span>\r\n            &nbsp;&nbsp;&nbsp;&nbsp;\r\n            <p className=\"scatter-plot-font\" style={{ display: \"inline\", fontSize: \"12px\" }}>Y by: </p>\r\n            <span >\r\n              <XYSelect\r\n                className=\"scatter-plot-font\"\r\n                items={appState.graph.allComputedPropertiesKeyList}\r\n                onSelect={it => (appState.graph.scatterplot.y = it.split(' ').map((s) => s.charAt(0).toLowerCase() + s.substring(1)).join(' '))}\r\n                value={capitalizeString(appState.graph.scatterplot.y)}\r\n              />\r\n            </span>\r\n            &nbsp;&nbsp;&nbsp;&nbsp;\r\n\r\n            <text id=\"scattertitle\" style={{}} > {(((appState.graph.scatterplot.x === 'shortest path') && (appState.graph.scatterplot.y === 'pair distance')) || ((appState.graph.scatterplot.y === 'shortest path') && (appState.graph.scatterplot.x === 'pair distance'))) ? (\r\n              'Route Factor Diagram'\r\n            ) : (((appState.graph.scatterplot.y == 'network density') && (appState.graph.scatterplot.x == 'standard distance')) ||\r\n              ((appState.graph.scatterplot.y == 'standard distance') && (appState.graph.scatterplot.x == 'network density'))) ? (\r\n              'Cluster-Cluster Plot'\r\n            ) : (\r\n              'Centrality-Centrality Plot'\r\n            )}</text>\r\n          </div>\r\n\r\n          <div style={{ display: \"inline\", }}>\r\n\r\n          </div>\r\n          {/* </div> */}\r\n          <div>\r\n\r\n            <svg\r\n              width={this.width + this.margin.right + this.margin.left + 10}\r\n              height={this.height + this.margin.top + this.margin.bottom}\r\n              className=\"scatterchart\"\r\n              id=\"scatterplot\"\r\n              ref={input => (this.svg = input)}\r\n            // ref = {ref}\r\n            >\r\n              <g\r\n                transform={\"translate(\" + this.margin.left + \",\" + this.margin.top + \")\"}\r\n                width={this.width}\r\n                height={this.height}\r\n                className=\"main\"\r\n              >\r\n\r\n                {appState.graph.hasGraph && <RenderCircles scale={{ x, y }} cr={this.cr} ref={this.circles} maxhop={this.maxhop} infinityhop={this.infinityhop} />}\r\n                <text style={{ transform: 'translate(20vw, 27.5vh)' }} fontSize=\"11px\">{(appState.graph.scatterplot.x === 'standard distance' || appState.graph.scatterplot.x === 'distance to center') ? capitalizeString(appState.graph.scatterplot.x) + ' (km)' : capitalizeString(appState.graph.scatterplot.x)}</text>\r\n                <Axis\r\n                  axis=\"x\"\r\n                  transform={\"translate(0,\" + this.height + \")\"}\r\n                  scale={(appState.graph.scatterplot.x === 'shortest path') ?\r\n                    axisBottom().scale(x).tickFormat((label) => {\r\n                      if (parseInt(label) == (this.maxhop + 1)) {\r\n                        return 'None'\r\n                      } else {\r\n                        return label\r\n                      }\r\n\r\n                    }) : axisBottom().scale(x)\r\n                  }\r\n                />\r\n                <text\r\n                  style={{ transform: \"translate(-45px, 18vh) rotate(-90deg)\", }}\r\n                  // transform={\"translate(-1vw, 21vh) rotate(-90deg)\"}\r\n                  fontSize=\"11px\"\r\n                >{(appState.graph.scatterplot.y === 'standard distance' || appState.graph.scatterplot.y === 'distance to center') ? capitalizeString(appState.graph.scatterplot.y) + ' (km)' : capitalizeString(appState.graph.scatterplot.y)}</text>\r\n                <Axis\r\n                  axis=\"y\"\r\n                  transform=\"translate(0,0)\"\r\n                  scale={(appState.graph.scatterplot.y === 'shortest path') ?\r\n                    axisLeft().scale(y).tickFormat((label) => {\r\n                      if (parseInt(label) == (this.maxhop + 1)) {\r\n                        return 'None'\r\n                      } else {\r\n                        return label\r\n                      }\r\n\r\n                    })\r\n                    : axisLeft().scale(y)\r\n                  }\r\n                // decorate={(s) => {\r\n                //   s.enter()\r\n                //     .select('text')\r\n                //     .style('text-anchor', 'start')\r\n                //     .attr('transform', 'rotate(45 -10 10)');\r\n                // }}\r\n                />\r\n              </g>\r\n              {(appState.graph.scatterplot.y !== 'shortest path') && (appState.graph.scatterplot.x !== 'shortest path') &&\r\n                (appState.graph.scatterplot.y !== 'network density') && (appState.graph.scatterplot.x !== 'standard distance') &&\r\n                (appState.graph.scatterplot.y !== 'standard distance') && (appState.graph.scatterplot.x !== 'network density') &&\r\n                (appState.graph.scatterplot.y !== 'pair distance') && (appState.graph.scatterplot.x !== 'pair distance') &&\r\n                this.renderBrush()}\r\n            </svg>\r\n          </div>\r\n          <Button\r\n            className=\"bp4-button\"\r\n            style={{ transform: \"translate(35vw, 1vh)\", }}\r\n            onClick={() => {\r\n              var svgsaver = new SvgSaver();                      // creates a new instance\r\n              var svg = document.querySelector('#scatterplot');         // find the SVG element\r\n              svgsaver.asSvg(svg);\r\n            }}>Download Image</Button>\r\n\r\n\r\n          {(\r\n            <CSVLink data={this.state.csvarray} onClick={this.downloadCSV} asyncOnClick={true} filename=\"bsedata.csv\">\r\n              <Button\r\n                className=\"bp4-button\"\r\n                style={{ transform: \"translate(12vw, 1.0vh)\", }}\r\n\r\n              >Download CSV\r\n              </Button>\r\n            </CSVLink>\r\n          )}\r\n        </div>\r\n\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\n@observer\r\nclass Axis extends React.Component {\r\n\r\n\r\n  componentDidMount() {\r\n    const node = this.refs[this.props.axis]\r\n    select(node).call(this.props.scale)\r\n\r\n  }\r\n\r\n  render() {\r\n    if (appState.graph.hasGraph) {\r\n      const node = this.refs[this.props.axis]\r\n      select(node).call(this.props.scale)\r\n\r\n      if (this.props.axis == 'x') {\r\n        return (\r\n          <g\r\n            className=\"xaxis\"\r\n            transform={this.props.transform}\r\n            ref={this.props.axis}\r\n          />\r\n        )\r\n      } else {\r\n        return (\r\n          <g\r\n            // className=\"xaxis\"\r\n            transform={this.props.transform}\r\n            ref={this.props.axis}\r\n          />\r\n        )\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n}\r\n\r\n@observer\r\nclass RenderCircles extends React.Component {\r\n  setScatterStyle = (node, ni) => {\r\n    // const dehighlightNode = {\r\n    //   fill: \"rgba(25, 158, 199, .9)\",\r\n    //   zIndex: \"0\"\r\n    // }\r\n    // const highlightNode = {\r\n    //   fill: \"rgba(255, 1, 1, .9)\",\r\n    //   zIndex: \"10000\"\r\n    // }\r\n    if ((appState.graph.scatterplot.y !== 'shortest path') && (appState.graph.scatterplot.x !== 'shortest path')\r\n      && (appState.graph.scatterplot.y !== 'pair distance') && (appState.graph.scatterplot.x !== 'pair distance')\r\n      && (appState.graph.scatterplot.y !== 'standard distance') && (appState.graph.scatterplot.x !== 'standard distance')\r\n      && (appState.graph.scatterplot.y !== 'network density') && (appState.graph.scatterplot.x !== 'network density')) {\r\n      if (!appState.graph.currentlyHovered && appState.graph.selectedNodes.length == 0) {\r\n        return {\r\n          fill: node.renderData.color,\r\n          zIndex: \"0\",\r\n          stroke: false,\r\n          fillOpacity: 0.8\r\n        }\r\n      } else if (appState.graph.currentlyHovered) {\r\n        if (node.id === appState.graph.currentlyHovered.id) {\r\n          return {\r\n            fill: node.renderData.color,\r\n            zIndex: \"10000\",\r\n            stroke: def.NODE_HIGHLIGHT,\r\n            fillOpacity: 0.8\r\n          }\r\n        } else {\r\n          return {\r\n            fill: node.renderData.color,\r\n            zIndex: \"0\",\r\n            stroke: false,\r\n            fillOpacity: 0.1\r\n          }\r\n        }\r\n      } else if (appState.graph.selectedNodes.length > 0) {\r\n        if (appState.graph.selectedNodes.indexOf(node) == -1) {\r\n          return {\r\n            fill: node.renderData.color,\r\n            zIndex: \"0\",\r\n            stroke: false,\r\n            fillOpacity: 0.1\r\n          }\r\n        } else {\r\n          return {\r\n            fill: node.renderData.color,\r\n            zIndex: \"10000\",\r\n            stroke: def.NODE_HIGHLIGHT,\r\n            fillOpacity: 0.8\r\n          }\r\n        }\r\n      }\r\n    } else if (((appState.graph.scatterplot.y == 'network density') && (appState.graph.scatterplot.x == 'standard distance')) ||\r\n      ((appState.graph.scatterplot.y == 'standard distance') && (appState.graph.scatterplot.x == 'network density'))) {  // density distance node style\r\n\r\n      //Click\r\n      if (appState.graph.distanceDensityCurrentlyClicked.length !== 0) {\r\n        if (appState.graph.distanceDensityCurrentlyClicked.includes(String(node['name']))) {\r\n          return {\r\n            fill: appState.graph.nodeColorScale(node['name']),\r\n            zIndex: \"10000\",\r\n            stroke: def.NODE_HIGHLIGHT,\r\n            fillOpacity: 0.8\r\n          }\r\n        }\r\n        else {\r\n          return {\r\n            fill: appState.graph.nodeColorScale(node['name']),\r\n            zIndex: \"0\",\r\n            stroke: false,\r\n            fillOpacity: 0.1\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        // no click \r\n        return {\r\n          fill: appState.graph.nodeColorScale(node['name']),\r\n          zIndex: \"0\",\r\n          stroke: false,\r\n          fillOpacity: 0.8\r\n        }\r\n      }\r\n    }\r\n    else { //path node style \r\n\r\n      //Click\r\n      if (appState.graph.pathHoveredList.length !== 0) {\r\n        const cpathid = `${node.source}👉${node.target}`\r\n        if (appState.graph.pathHoveredList.includes(cpathid)) {\r\n          return {\r\n\r\n            fill: 'rgba(255, 1, 1, .9)',\r\n            zIndex: \"0\",\r\n            stroke: false,\r\n            fillOpacity: 0.8\r\n          } \r\n        }\r\n        else {\r\n          return {\r\n\r\n            fill: appState.graph.edges.color,\r\n            zIndex: \"0\",\r\n            stroke: false,\r\n            fillOpacity: 0.8\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        // no click \r\n        return {\r\n\r\n          fill: appState.graph.edges.color,\r\n          zIndex: \"0\",\r\n          stroke: false,\r\n          fillOpacity: 0.8\r\n        }\r\n      }\r\n      // return {\r\n\r\n      //   fill: appState.graph.edges.color,\r\n      //   zIndex: \"0\",\r\n      //   stroke: false,\r\n      //   fillOpacity: 0.8\r\n      // }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const pathFinder = path.aGreedy(appState.graph.computedGraph);\r\n    if (appState.graph.hasGraph) {\r\n      let renderCircles = []\r\n      // let renderLabels = []\r\n      // let ydata =[]\r\n      if (((appState.graph.scatterplot.x === 'network density') && (appState.graph.scatterplot.y === 'standard distance')) ||\r\n        ((appState.graph.scatterplot.x === 'standard distance') && (appState.graph.scatterplot.y === 'network density'))) {\r\n        // renderLabels = appState.graph.densityDistance.sort((a, b) => b.size - a.size).map((cluster,ci)=>())\r\n\r\n        // appState.graph.densityDistance = ;\r\n        renderCircles = appState.graph.densityDistance.sort((a, b) => b.size - a.size).map((cluster, ci) => (\r\n\r\n          <g>\r\n            <circle\r\n              cx={this.props.scale.x(cluster[appState.graph.scatterplot.x])}\r\n              cy={this.props.scale.y(cluster[appState.graph.scatterplot.y])}\r\n              r={cluster['size'] > 50 ? 25 : cluster['size'] / 2}\r\n              style={this.setScatterStyle(cluster, ci)}\r\n              id={`${cluster.name}`}\r\n              // onMouseOver={(e) => {\r\n              //   appState.graph.distanceDensityCurrentlyHovered = e.target.getAttribute('id')\r\n\r\n              //   const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n              //     // console.log(node)\r\n              //     String(node.data.ref[appState.graph.groupby]) == appState.graph.distanceDensityCurrentlyHovered\r\n\r\n              //   )\r\n              //   appState.graph.frame.selection = selectionNode\r\n              //   appState.graph.selectedNodes = selectionNode\r\n\r\n\r\n              //   // console.log(selectionNode)\r\n              //   appState.graph.frame.updateSelectionOpacity()\r\n\r\n\r\n\r\n              // }}\r\n              // onMouseLeave={(e) => {\r\n\r\n              //   if (appState.graph.mapClicked) return;\r\n              //   appState.graph.distanceDensityCurrentlyHovered = undefined\r\n              //   appState.graph.frame.selection = []\r\n              //   appState.graph.selectedNodes = []\r\n              //   appState.graph.edgeselection = []\r\n\r\n              //   appState.graph.frame.graph.forEachNode(function (n) {  //highlight all the nodes \r\n              //     // if (n !== appState.graph.mapClicked) {\r\n              //     appState.graph.frame.colorNodeOpacity(n, 1);  // set opacity for all the node 1\r\n\r\n              //     appState.graph.frame.highlightNode(n, false, def.ADJACENT_HIGHLIGHT); //set highlight edge null\r\n              //     // }\r\n              //   }\r\n              //   );\r\n\r\n\r\n              // }}\r\n              onClick={(e) => {\r\n                if (appState.graph.distanceDensityCurrentlyClicked.includes(e.target.getAttribute('id'))) {\r\n                  appState.graph.distanceDensityCurrentlyClicked = appState.graph.distanceDensityCurrentlyClicked.filter(node =>\r\n                    node !== e.target.getAttribute('id')\r\n                  )\r\n                }\r\n                else {\r\n                  appState.graph.distanceDensityCurrentlyClicked.push(e.target.getAttribute('id'));\r\n                }\r\n\r\n                const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n                  // console.log(node)\r\n                  appState.graph.distanceDensityCurrentlyClicked.includes(String(node.data.ref[appState.graph.groupby]))\r\n\r\n                )\r\n                appState.graph.frame.selection = selectionNode\r\n                appState.graph.selectedNodes = selectionNode\r\n\r\n\r\n                // console.log(selectionNode)\r\n                appState.graph.frame.updateSelectionOpacity()\r\n              }}\r\n              key={ci}\r\n            />\r\n            <text className=\"scatterplot-label\"\r\n              x={this.props.scale.x(cluster[appState.graph.scatterplot.x])}\r\n              y={this.props.scale.y(cluster[appState.graph.scatterplot.y])}>\r\n              {cluster.name}\r\n            </text>\r\n          </g>)\r\n        )\r\n      }\r\n\r\n      else if ((appState.graph.scatterplot.x === 'shortest path') && (appState.graph.scatterplot.y === 'pair distance')) {\r\n        // const pathkeys = Object.keys(appState.graph.rawGraph.paths)\r\n        renderCircles = appState.graph.rawGraph.paths.map((path, i) => (\r\n          <circle\r\n            cx={path['path'].length == 0 ? this.props.scale.x(this.props.maxhop + 1) : this.props.scale.x(path['path'].length - 1)}\r\n            cy={this.props.scale.y(parseFloat(path['distance']))}\r\n            r={this.props.cr}\r\n            style={this.setScatterStyle(path)}\r\n            id={`${path.source}👉${path.target}`}\r\n            data={path}\r\n            onClick={(e) => {\r\n              if (appState.graph.pathHoveredList.includes(e.target.getAttribute('id'))) {\r\n                appState.graph.pathHoveredList = appState.graph.pathHoveredList.filter(node =>\r\n                  node !== e.target.getAttribute('id')\r\n                )\r\n              }\r\n              else {\r\n                appState.graph.pathHoveredList.push(e.target.getAttribute('id'));\r\n              }\r\n              const pathlist = []\r\n              appState.graph.pathHoveredList.forEach((pathid) => {\r\n                const [sourceid, targetid] = pathid.split('👉')\r\n                // e.target.getAttribute('fill') node.renderData.color,\r\n                // e.target.style.fill = 'rgba(255, 1, 1, .9)'\r\n                // const source = appState.graph.frame.getNode(sourceid)\r\n                // const target = appState.graph.frame.getNode(targetid)\r\n                const thepath = pathFinder.find(sourceid, targetid)\r\n                const pathnode = thepath.map((node) => {\r\n                  return appState.graph.frame.getNode(node.id)\r\n                })\r\n                //control map highlight \r\n                \r\n                pathlist.push( {\r\n                  \"sourceid\": sourceid,\r\n                  \"targetid\": targetid,\r\n                  \"pathnode\": pathnode\r\n                })\r\n               \r\n              })\r\n              appState.graph.pathHovered = {\r\n                'sourceid': pathlist.map(n=>n.sourceid),\r\n                'targetid': pathlist.map(n=>n.targetid),\r\n                // 'pathnode': pathlist.map(n=>n.pathnode),\r\n              }\r\n              appState.graph.pathHovered['pathnode']= []\r\n              if(pathlist.length>0){\r\n                appState.graph.pathHovered['pathnode']= pathlist[0].pathnode\r\n                for (let i = 0; i < pathlist.length-1; i++){\r\n                  appState.graph.pathHovered['pathnode'] = appState.graph.pathHovered['pathnode'].concat(pathlist[i+1].pathnode)\r\n                }\r\n              }\r\n              \r\n              \r\n              // pathlist.forEach(p=>appState.graph.pathHovered['pathnode'].concat(p.pathnode))\r\n              // appState.graph.pathHovered['pathnode'] = [].concat(...appState.graph.pathHovered['pathnode'])\r\n               // control socio update \r\n              appState.graph.frame.highlightPathEdgeNode(appState.graph.pathHovered['pathnode'])\r\n            }}\r\n            // onMouseOver={(e) => {\r\n            //   // const thenode = appState.graph.frame.getNode(e.target.dataset.id)\r\n            //   const [sourceid, targetid] = e.target.getAttribute('id').split('👉')\r\n            //   // e.target.getAttribute('fill') node.renderData.color,\r\n            //   e.target.style.fill = 'rgba(255, 1, 1, .9)'\r\n            //   // const source = appState.graph.frame.getNode(sourceid)\r\n            //   // const target = appState.graph.frame.getNode(targetid)\r\n            //   const thepath = pathFinder.find(sourceid, targetid)\r\n            //   const pathnode = thepath.map((node) => {\r\n            //     return appState.graph.frame.getNode(node.id)\r\n            //   })\r\n            //   //control map highlight \r\n            //   appState.graph.pathHovered = {\r\n            //     \"sourceid\": sourceid,\r\n            //     \"targetid\": targetid,\r\n            //     \"pathnode\": pathnode\r\n            //   }\r\n            //   // control socio update \r\n            //   appState.graph.frame.highlightPathEdgeNode(pathnode)\r\n\r\n\r\n\r\n            // }}\r\n            // onMouseLeave={(e) => {\r\n            //   // if (appState.graph.mapClicked) return;\r\n            //   e.target.style.fill = appState.graph.edges.color\r\n\r\n            //   appState.graph.frame.graph.forEachNode(function (n) {  //highlight all the nodes \r\n            //     // if (n !== appState.graph.mapClicked) {\r\n            //     appState.graph.frame.colorNodeOpacity(n, 1);  // set opacity for all the node 1\r\n\r\n            //     appState.graph.frame.highlightNode(n, false, def.ADJACENT_HIGHLIGHT); //set highlight edge null\r\n            //     // }\r\n            //   }\r\n            //   );\r\n            //   appState.graph.frame.colorNodeEdge(null);  //highlight all edges \r\n            //   appState.graph.pathHovered = null;\r\n\r\n\r\n            // }}\r\n            key={i}\r\n          />)\r\n        )\r\n\r\n\r\n      } else if ((appState.graph.scatterplot.y === 'shortest path') && (appState.graph.scatterplot.x === 'pair distance')) {\r\n        renderCircles = appState.graph.rawGraph.paths.map((path, i) => (\r\n          <circle\r\n            cy={path['path'].length == 0 ? this.props.scale.y(this.props.maxhop + 1) : this.props.scale.y(path['path'].length - 1)}\r\n            cx={this.props.scale.x(parseFloat(path['distance']))}\r\n            r={this.props.cr}\r\n            style={this.setScatterStyle(path)}\r\n            id={`${path.source}👉${path.target}`}\r\n            // data={node}\r\n            onClick={(e) => {\r\n              if (appState.graph.pathHoveredList.includes(e.target.getAttribute('id'))) {\r\n                appState.graph.pathHoveredList = appState.graph.pathHoveredList.filter(node =>\r\n                  node !== e.target.getAttribute('id')\r\n                )\r\n              }\r\n              else {\r\n                appState.graph.pathHoveredList.push(e.target.getAttribute('id'));\r\n              }\r\n              const pathlist = []\r\n              appState.graph.pathHoveredList.forEach((pathid) => {\r\n                const [sourceid, targetid] = pathid.split('👉')\r\n                // e.target.getAttribute('fill') node.renderData.color,\r\n                // e.target.style.fill = 'rgba(255, 1, 1, .9)'\r\n                // const source = appState.graph.frame.getNode(sourceid)\r\n                // const target = appState.graph.frame.getNode(targetid)\r\n                const thepath = pathFinder.find(sourceid, targetid)\r\n                const pathnode = thepath.map((node) => {\r\n                  return appState.graph.frame.getNode(node.id)\r\n                })\r\n                //control map highlight \r\n                \r\n                pathlist.push( {\r\n                  \"sourceid\": sourceid,\r\n                  \"targetid\": targetid,\r\n                  \"pathnode\": pathnode\r\n                })\r\n               \r\n              })\r\n              appState.graph.pathHovered = {\r\n                'sourceid': pathlist.map(n=>n.sourceid),\r\n                'targetid': pathlist.map(n=>n.targetid),\r\n                // 'pathnode': pathlist.map(n=>n.pathnode),\r\n              }\r\n              appState.graph.pathHovered['pathnode']= []\r\n              if(pathlist.length>0){\r\n                appState.graph.pathHovered['pathnode']= pathlist[0].pathnode\r\n                for (let i = 0; i < pathlist.length-1; i++){\r\n                  appState.graph.pathHovered['pathnode'] = appState.graph.pathHovered['pathnode'].concat(pathlist[i+1].pathnode)\r\n                }\r\n              }\r\n              \r\n              \r\n              // pathlist.forEach(p=>appState.graph.pathHovered['pathnode'].concat(p.pathnode))\r\n              // appState.graph.pathHovered['pathnode'] = [].concat(...appState.graph.pathHovered['pathnode'])\r\n               // control socio update \r\n              appState.graph.frame.highlightPathEdgeNode(appState.graph.pathHovered['pathnode'])\r\n            }}\r\n            // onMouseOver={(e) => {\r\n            //   // const thenode = appState.graph.frame.getNode(e.target.dataset.id)\r\n            //   const [sourceid, targetid] = e.target.getAttribute('id').split('👉')\r\n\r\n            //   e.target.style.fill = 'rgba(255, 1, 1, .9)'\r\n            //   // const source = appState.graph.frame.getNode(sourceid)\r\n            //   // const target = appState.graph.frame.getNode(targetid)\r\n            //   const thepath = pathFinder.find(sourceid, targetid)\r\n            //   const pathnode = thepath.map((node) => {\r\n            //     return appState.graph.frame.getNode(node.id)\r\n            //   })\r\n            //   //control map highlight \r\n            //   appState.graph.pathHovered = {\r\n            //     \"sourceid\": sourceid,\r\n            //     \"targetid\": targetid,\r\n            //     \"pathnode\": pathnode\r\n            //   }\r\n            //   // control socio update \r\n            //   appState.graph.frame.highlightPathEdgeNode(pathnode)\r\n\r\n\r\n\r\n            // }}\r\n            // onMouseLeave={(e) => {\r\n            //   // if (appState.graph.mapClicked) return;\r\n            //   e.target.style.fill = appState.graph.edges.color\r\n            //   appState.graph.frame.graph.forEachNode(function (n) {  //highlight all the nodes \r\n            //     // if (n !== appState.graph.mapClicked) {\r\n            //     appState.graph.frame.colorNodeOpacity(n, 1);  // set opacity for all the node 1\r\n\r\n            //     appState.graph.frame.highlightNode(n, false, def.ADJACENT_HIGHLIGHT); //set highlight edge null\r\n            //     // }\r\n            //   }\r\n            //   );\r\n            //   appState.graph.frame.colorNodeEdge(null);  //highlight all edges \r\n            //   appState.graph.pathHovered = null;\r\n\r\n\r\n            // }}\r\n            key={i}\r\n          />)\r\n        )\r\n      } else if ((appState.graph.scatterplot.y !== 'shortest path') && (appState.graph.scatterplot.x !== 'shortest path')\r\n        && (appState.graph.scatterplot.y !== 'pair distance') && (appState.graph.scatterplot.x !== 'pair distance')) {\r\n        renderCircles = appState.graph.frame.getNodeList().map((node, i) => (\r\n          <circle\r\n            cx={this.props.scale.x(parseFloat(node.data.ref[appState.graph.scatterplot.x]))}\r\n            cy={this.props.scale.y(parseFloat(node.data.ref[appState.graph.scatterplot.y]))}\r\n            r={this.props.cr}\r\n            style={this.setScatterStyle(node)}\r\n            id={node.id}\r\n            data={node}\r\n            onMouseOver={(e) => {\r\n              // console.log(e.target.dataset.id)\r\n              const thenode = appState.graph.frame.getNode(e.target.dataset.id)\r\n              appState.graph.currentlyHovered = thenode  // control map update \r\n              appState.graph.frame.highlightNode(thenode, true);   // control cosio update \r\n              appState.graph.frame.highlightEdges(thenode, true);\r\n\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (appState.graph.mapClicked) return;\r\n\r\n              appState.graph.frame.graph.forEachNode(function (n) {\r\n                // if (n !== appState.graph.mapClicked) {\r\n                appState.graph.frame.colorNodeOpacity(n, 1);\r\n\r\n                appState.graph.frame.highlightNode(n, false, def.ADJACENT_HIGHLIGHT);\r\n                // }\r\n              }\r\n              );\r\n              appState.graph.frame.colorNodeEdge(null);\r\n              appState.graph.currentlyHovered = null;\r\n\r\n\r\n            }}\r\n            // eventHandlers={{\r\n            //   mouseover: (e) => {\r\n            //     console.log(e)\r\n            //   }\r\n            // }}\r\n            // style={{ fill: \"rgba(25, 158, 199, .9)\" }}\r\n            key={i}\r\n          />\r\n        ))\r\n      }\r\n\r\n      return <g>{renderCircles}</g>\r\n    }\r\n  }\r\n}\r\n\r\nexport default ScatterPlot;\r\n\r\n","import React from \"react\";\r\n\r\nimport { format } from \"d3-format\";\r\nimport { LegendLinear, LegendSize } from \"@vx/vx\";\r\nimport appState from \"../stores\";\r\nimport { observer } from \"mobx-react\";\r\n\r\nfunction Legends() {\r\n  return (\r\n    <div className=\"legends\" style={{visibility: appState.preferences.isLegendShowing ? 'visible' : 'hidden'}}>\r\n      {/* <LegendSize\r\n        className=\"scale-legend\"\r\n        direction=\"row\"\r\n        itemDirection=\"column\"\r\n        itemMargin=\"0\"\r\n        shapeMargin=\"5px 0\"\r\n        labelFormat={format(\".2f\")}\r\n        scale={appState.graph.nodeSizeScale}\r\n        shape={props => {\r\n          const { size } = props;\r\n          return (\r\n            <svg width={size} height={size}>\r\n              <circle  {...props} r={size / 2} cx={size / 2} cy={size / 2} fill={'#9a9ea1'}/>\r\n            </svg>\r\n          );\r\n        }}\r\n      /> */}\r\n      {/* <LegendLinear\r\n        direction=\"row\"\r\n        itemDirection=\"column\"\r\n        shape=\"circle\"\r\n        scale={appState.graph.nodeColorScale}\r\n        labelFormat={format(\".4f\")}\r\n      /> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default observer(Legends);\r\n","import React from \"react\";\r\nimport { Button, Classes, Tooltip, Intent, Position } from \"@blueprintjs/core\";\r\nimport classnames from \"classnames\";\r\nimport { observer } from \"mobx-react\";\r\nimport appState from \"../../stores\";\r\n\r\n@observer\r\nclass SelectionActionPanel extends React.Component {\r\n  render() {\r\n      // Only relevant when there's exact 1 node selected.\r\n      // To display number of hidden nodes if exists\r\n      let numHiddenNeighbor = 0;\r\n      if (appState.graph.selectedNodes.length === 1) {\r\n        if (appState.graph.lastSelectedSingleNode) {\r\n            const selectedNodeId = appState.graph.lastSelectedSingleNode.data.ref.id.toString();\r\n            numHiddenNeighbor = appState.graph.getNeighborNodesFromRawGraph(selectedNodeId).filter(n => n.isHidden).length;\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div\r\n            className=\"argo-selection-action-panel\"\r\n            style={{\r\n                backgroundColor: appState.preferences.darkMode ? '#30404D' : '#FFFFFF',\r\n            }}\r\n        >\r\n            <Tooltip\r\n                content=\"Pin Selected Nodes\"\r\n                position={Position.BOTTOM}\r\n            >\r\n                <Button\r\n                    className={classnames([\r\n                    Classes.BUTTON,\r\n                    Classes.MINIMAL\r\n                    ])}\r\n                    iconName=\"pin\"\r\n                    text=\"Pin\"\r\n                    intent={Intent.PRIMARY}\r\n                    onClick={() => {\r\n                    appState.graph.frame.pinSelectedNodes();\r\n                    this.forceUpdate();\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip\r\n                content=\"Unpin Selected Nodes\"\r\n                position={Position.BOTTOM}\r\n            >\r\n                <Button\r\n                    className={classnames([\r\n                    Classes.BUTTON,\r\n                    Classes.MINIMAL\r\n                    ])}\r\n                    iconName=\"unpin\"\r\n                    text=\"Unpin\"\r\n                    intent={Intent.WARNING}\r\n                    onClick={() => {\r\n                    appState.graph.frame.unpinSelectedNodes();\r\n                    this.forceUpdate();\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            <Tooltip\r\n                content=\"Hide Selected Nodes\"\r\n                position={Position.BOTTOM}\r\n            >\r\n                <Button\r\n                    className={classnames([\r\n                    Classes.BUTTON,\r\n                    Classes.MINIMAL\r\n                    ])}\r\n                    iconName=\"delete\"\r\n                    text=\"Hide\"\r\n                    intent={Intent.DANGER}\r\n                    onClick={() => {\r\n                    appState.graph.hideNodes(\r\n                        appState.graph.frame.getSelectedIds()\r\n                    );\r\n                    this.forceUpdate();\r\n                    }}\r\n                />\r\n            </Tooltip>\r\n            {// This menu only shows when there's exactly 1 node selected\r\n              appState.graph.selectedNodes.length === 1 && (\r\n                <div style={{ display: \"inline\" }}>\r\n                  <Tooltip\r\n                    content=\"Open Neighbor Dialog\"\r\n                    position={Position.BOTTOM}\r\n                  >\r\n                    <Button\r\n                      className={classnames([\r\n                        Classes.BUTTON,\r\n                        Classes.MINIMAL\r\n                      ])}\r\n                      iconName=\"graph\"\r\n                      text={`Neighbors (${numHiddenNeighbor} hidden)`}\r\n                      intent={Intent.PRIMARY}\r\n                      onClick={() => {\r\n                        appState.graph.frame.pauseLayout();\r\n                        appState.preferences.neighborDialogOpen = true;\r\n                        this.forceUpdate();\r\n                      }}\r\n                    />\r\n                  </Tooltip>\r\n                </div>\r\n            )}\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default SelectionActionPanel;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport appState from \"../stores\";\r\n\r\n@observer\r\nclass StatusBar extends React.Component {\r\n    render() {\r\n        return (\r\n            <div\r\n                className={classnames(\"bottom-status-bar\")}\r\n                style={{\r\n                    backgroundColor: appState.preferences.darkMode ? '#30404D' : '#FFFFFF',\r\n                    visibility: appState.preferences.isStatusBarShowing? \"visible\" : \"hidden\"\r\n                }}\r\n            >\r\n                <div className={classnames(\"bottom-status-bar__left\")}>{appState.graph.metadata.fullNodes && appState.graph.metadata.fullEdges && `Total Nodes: ${appState.graph.metadata.fullNodes}, Total Edges: ${appState.graph.metadata.fullEdges},`} Hidden Nodes: {appState.graph.numHiddenNodes}</div>\r\n                <div className={classnames(\"bottom-status-bar__right\")}>Color by: {appState.graph.nodes.colorBy} ({appState.graph.nodes.color.scale}), Size by: {appState.graph.nodes.sizeBy} ({appState.graph.nodes.size.scale})</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default StatusBar;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  InputGroup,\r\n  Intent,\r\n  Position,\r\n  Tooltip,\r\n  Popover,\r\n  Menu,\r\n  MenuItem,\r\n  MenuDivider\r\n} from \"@blueprintjs/core\";\r\nimport pluralize from \"pluralize\";\r\nimport appState from \"../../stores\";\r\nimport GlobalPanel from \"./GlobalPanel\";\r\nimport SelectionPanel from \"./SelectionPanel\";\r\nimport uniq from \"lodash/uniq\";\r\n// import { averageClusteringCoefficient } from \"../../services/AlgorithmUtils\";\r\n\r\n\r\n@observer\r\nclass ZoomPanel extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className={classnames(\r\n        \"zoom-buttons\"\r\n      )}>\r\n          <Button\r\n            style={{marginBottom: \"5px\"}}\r\n            className={classnames([Classes.BUTTON])} \r\n            iconName=\"plus\"\r\n            onClick={() => {\r\n              let controls = appState.controls\r\n              controls.dollyIn(1.5)\r\n            }}\r\n            ></Button>\r\n            \r\n            \r\n            <br></br>\r\n            \r\n            \r\n            <Button \r\n            style={{marginBottom: \"5px\"}}\r\n            className={classnames([Classes.BUTTON])} \r\n            iconName=\"minus\"\r\n            onClick={() => {\r\n              let controls = appState.controls\r\n              controls.dollyIn(0.5)\r\n            }}></Button>\r\n\r\n\r\n            <br></br>\r\n            \r\n            \r\n            <Button\r\n            style={{marginBottom: \"5px\"}} \r\n            className={classnames([Classes.BUTTON])} \r\n            iconName=\"home\"\r\n            onClick={() => {\r\n              let controls = appState.controls\r\n              controls.reset()\r\n\r\n              //reset to center of graph code:\r\n              // let xVal = 0\r\n              // let yVal = 0\r\n              // let pos = appState.graph.frame.getPositions();\r\n              // for(let n in pos) {\r\n              //   xVal = pos[n][0]\r\n              //   yVal = pos[n][1]\r\n              // }\r\n              // let len = Object.keys(pos).length\r\n              // appState.panToMousePosition(xVal,yVal);\r\n            }}></Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ZoomPanel;","import React from \"react\";\r\nimport { Classes,Button, Tab2, Tabs2, Tag } from \"@blueprintjs/core\";\r\nimport classnames from \"classnames\";\r\nimport { observer } from \"mobx-react\";\r\nimport appState from \"../stores\";\r\nimport SimpleSelect from \"./utils/SimpleSelect\";\r\nimport { addNode } from \"../ipc/client\";\r\nimport NodesPanel from \"./panels/NodesPanel\";\r\nimport NodesFilterPanel from \"./panels/NodesFilterPanel\";\r\nimport EdgesPanel from \"./panels/EdgesPanel\";\r\nimport LabelsPanel from \"./panels/LabelsPanel\";\r\nimport NodeDetail from \"./panels/NodeDetailPanel\";\r\nimport ScatterPlot from \"./panels/ScatterPlot\";\r\nimport Legends from \"./Legends\";\r\nimport StatusBar from './StatusBar';\r\nimport SelectionActionPanel from \"./panels/SelectionActionPanel\";\r\nimport ZoomPanel from \"./panels/ZoomPanel\";\r\nimport * as SvgSaver from 'svgsaver';\r\n\r\n// TODO: migrate to simple select\r\n\r\n@observer\r\nclass RenderOptionsCard extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h4>Appearance </h4>\r\n        <Tabs2 animate id=\"graph-options\">\r\n          <Tab2 id=\"nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n          <Tab2 id=\"edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n          <Tab2 id=\"labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n          {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n          <Tabs2.Expander />\r\n        </Tabs2>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n@observer\r\nclass FilterOptionsCard extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h4>Filter Options</h4>\r\n        <Tabs2 animate id=\"filter-options\">\r\n          <Tab2 id=\"nodes\" title=\"Nodes\" panel={<NodesFilterPanel />} />\r\n          <Tab2 id=\"edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n          {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n          <Tabs2.Expander />\r\n        </Tabs2>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n//\r\n\r\n@observer\r\nclass FloatingCards extends React.Component {\r\n  optionsVisible = {\r\n    left: '0em'\r\n  }\r\n  optionsInvisible = {\r\n    left: '-22em'\r\n  }\r\n  sideButtonVis = {\r\n    marginLeft: '50px'\r\n  }\r\n  sideButtonInv = {\r\n    marginLeft: '-15px'\r\n  }\r\n  toggleOptions = () => {\r\n    appState.preferences.isRenderOptionsCardHidden = !appState.preferences.isRenderOptionsCardHidden;\r\n  };\r\n\r\n  filtersVisible = {\r\n    left: '0em'\r\n  }\r\n  filtersInvisible = {\r\n    left: '-22em'\r\n  }\r\n  filterSideButtonVis = {\r\n    marginLeft: '50px'\r\n  }\r\n  filterSideButtonInv = {\r\n    marginLeft: '-15px'\r\n  }\r\n  filterToggleOptions = () => {\r\n    appState.preferences.isFilterOptionsCardHidden = !appState.preferences.isFilterOptionsCardHidden;\r\n  };\r\n\r\n  scatterVisible = {\r\n    right: '0em'\r\n  }\r\n  scatterInvisible = {\r\n    right: '-52em'\r\n  }\r\n  scatterSideButtonVis = {\r\n    marginLeft: '0px'\r\n  }\r\n  scatterSideButtonInv = {\r\n    marginLeft: '80px'\r\n  }\r\n\r\n  scatterToggleOptions = () => {\r\n    appState.preferences.isScatterPlotCardHidden = !appState.preferences.isScatterPlotCardHidden;\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"floating-overlay\">\r\n        <div className=\"left-cards\" style={{zIndex: '5000'}}>\r\n          {appState.search.panelOpen && (\r\n            <div\r\n              className={classnames(\r\n                Classes.CARD,\r\n                Classes.ELEVATION_2,\r\n                \"overlay-card\",\r\n                \"left-overlay-card\"\r\n              )}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"left\",\r\n                  alignItems: \"left\"\r\n                }}\r\n              >\r\n                <h4 style={{ width: 140 }}>\r\n                  {appState.search.numCandidates} results\r\n                </h4>\r\n                <div style={{ width: 20 }} />\r\n                <h4>Order</h4>\r\n                <div style={{ width: 5 }} />\r\n                <SimpleSelect\r\n                  style={{ \"margin-bottom\": 10 }}\r\n                  items={[...appState.graph.metadata.nodeComputed, \"node_id\"]}\r\n                  onSelect={it => (appState.graph.searchOrder = it)}\r\n                  value={appState.graph.searchOrder}\r\n                />\r\n              </div>\r\n              <table\r\n                className={classnames(\r\n                  Classes.TABLE,\r\n                  Classes.TABLE_STRIPED,\r\n                  Classes.INTERACTIVE\r\n                )}\r\n                style={{\r\n                  width: \"100%\",\r\n                  userSelect: \"none\"\r\n                }}\r\n              >\r\n                <tbody>\r\n                  {appState.search.candidates.map((node, i) => (\r\n                    <tr\r\n                      key={i}\r\n                      onMouseOver={() =>\r\n                        appState.graph.frame.highlightNodeIds(\r\n                          [node.node_id],\r\n                          true\r\n                        )\r\n                      }\r\n                      onMouseDown={() => addNode(node.node_id)}\r\n                      onMouseLeave={() =>\r\n                        appState.graph.frame.highlightNodeIds(\r\n                          [node.node_id],\r\n                          false\r\n                        )\r\n                      }\r\n                    >\r\n                      <td>{node[appState.graph.nodes.labelBy]}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n              <center>\r\n                <a\r\n                  onMouseDown={() => {\r\n                    if (appState.search.pageNum > 0) {\r\n                      appState.search.pageNum -= 1;\r\n                      appState.search.candidates = appState.search.allCands.slice(\r\n                        appState.search.pageNum * appState.search.nPerPage,\r\n                        (appState.search.pageNum + 1) * appState.search.nPerPage\r\n                      );\r\n                    }\r\n                  }}\r\n                >\r\n                  Prev&nbsp;\r\n                </a>\r\n                &nbsp;\r\n                {appState.search.pageNum !== 0 ? (\r\n                  <a\r\n                    onMouseDown={() => {\r\n                      appState.search.pageNum = 0;\r\n                      appState.search.candidates = appState.search.allCands.slice(\r\n                        appState.search.pageNum * appState.search.nPerPage,\r\n                        (appState.search.pageNum + 1) * appState.search.nPerPage\r\n                      );\r\n                    }}\r\n                  >\r\n                    1&nbsp;\r\n                  </a>\r\n                ) : (\r\n                  <a\r\n                    style={{\r\n                      color: \"#111111\",\r\n                      pointerEvents: \"none\",\r\n                      cursor: \"default\"\r\n                    }}\r\n                  >\r\n                    {appState.search.pageNum + 1}&nbsp;\r\n                  </a>\r\n                )}\r\n                ...<b>&nbsp;</b>\r\n                {appState.search.pages.map(i => {\r\n                  if (\r\n                    i != 0 &&\r\n                    i != appState.search.maxPage &&\r\n                    i == appState.search.pageNum\r\n                  ) {\r\n                    return (\r\n                      <a\r\n                        key={i}\r\n                        style={{\r\n                          color: \"#111111\",\r\n                          pointerEvents: \"none\",\r\n                          cursor: \"default\"\r\n                        }}\r\n                      >\r\n                        {appState.search.pageNum + 1}&nbsp;\r\n                      </a>\r\n                    );\r\n                  } else if (\r\n                    i != 0 &&\r\n                    i != appState.search.maxPage &&\r\n                    ((i > appState.search.pageNum - 4 &&\r\n                      i < appState.search.pageNum + 4) ||\r\n                      (appState.search.pageNum < 4 && i < 8) ||\r\n                      (appState.search.pageNum > appState.search.maxPage - 4 &&\r\n                        i > appState.search.maxPage - 8))\r\n                  ) {\r\n                    return (\r\n                      <a\r\n                        key={i}\r\n                        onMouseDown={() => {\r\n                          appState.search.pageNum = i;\r\n                          appState.search.candidates = appState.search.allCands.slice(\r\n                            appState.search.pageNum * appState.search.nPerPage,\r\n                            (appState.search.pageNum + 1) *\r\n                            appState.search.nPerPage\r\n                          );\r\n                        }}\r\n                      >\r\n                        {i + 1}&nbsp;\r\n                      </a>\r\n                    );\r\n                  }\r\n                })}\r\n                ...&nbsp;\r\n                {appState.search.pageNum !== appState.search.maxPage ? (\r\n                  <a\r\n                    onMouseDown={() => {\r\n                      appState.search.pageNum = appState.search.maxPage;\r\n                      appState.search.candidates = appState.search.allCands.slice(\r\n                        appState.search.pageNum * appState.search.nPerPage,\r\n                        (appState.search.pageNum + 1) * appState.search.nPerPage\r\n                      );\r\n                    }}\r\n                  >\r\n                    {appState.search.maxPage + 1}&nbsp;\r\n                  </a>\r\n                ) : (\r\n                  <a\r\n                    style={{\r\n                      color: \"#111111\",\r\n                      pointerEvents: \"none\",\r\n                      cursor: \"default\"\r\n                    }}\r\n                  >\r\n                    {appState.search.pageNum + 1}\r\n                  </a>\r\n                )}\r\n                &nbsp;\r\n                <a\r\n                  onMouseDown={() => {\r\n                    if (appState.search.pageNum < appState.search.maxPage) {\r\n                      appState.search.pageNum += 1;\r\n                      appState.search.candidates = appState.search.allCands.slice(\r\n                        appState.search.pageNum * appState.search.nPerPage,\r\n                        (appState.search.pageNum + 1) * appState.search.nPerPage\r\n                      );\r\n                    }\r\n                  }}\r\n                >\r\n                  Next\r\n                </a>\r\n                <br />\r\n                <br />\r\n                <h5>Page {appState.search.pageNum + 1}</h5>\r\n              </center>\r\n            </div>\r\n          )}\r\n          <div\r\n            className={classnames(\r\n              Classes.CARD,\r\n              Classes.ELEVATION_2,\r\n              \"overlay-card\",\r\n              \"left-overlay-card\",\r\n              \"transparent-frame\",\r\n              \"left-cards\",\r\n              \"graph-option\"\r\n            )}\r\n            style={appState.preferences.isRenderOptionsCardHidden ? this.optionsInvisible : this.optionsVisible}\r\n          >\r\n            <button className=\"openbtn2\" onClick={this.toggleOptions}> &#8249;\r\n            </button>\r\n            <br />\r\n            <RenderOptionsCard />\r\n          </div>\r\n\r\n\r\n\r\n          <div className={classnames(Classes.CARD, Classes.ELEVATION_2, \"overlay-card\",\r\n            \"transparent-frame\")} style={{ width: \"1em\", paddingTop: \"0em\", paddingRight: \"0.7em\", paddingBottom: \"0.5em\", marginLeft: \"-5.4em\" }}>\r\n            <button className=\"openbtn\" onClick={this.toggleOptions} style={appState.preferences.isRenderOptionsCardHidden ? this.sideButtonVis : this.sideButtonInv}>\r\n              &#9776;\r\n            </button>\r\n          </div>\r\n\r\n\r\n        </div>\r\n        {/* Scatter Plot  panels */}\r\n        {/* <div className=\"right-cards\">\r\n          <div\r\n            className={classnames(\r\n              Classes.CARD,\r\n              Classes.ELEVATION_2,\r\n              \"scatter-overlay-card\",\r\n              \r\n              \"transparent-frame\",\r\n              \"right-cards\",\r\n              \"filter-option\"\r\n            )}\r\n            style={appState.preferences.isScatterPlotCardHidden ? this.scatterInvisible : this.scatterVisible}\r\n          >\r\n            <button className=\"openbtn3\" onClick={this.scatterToggleOptions}> &#8250;\r\n            </button>\r\n            \r\n            <br />\r\n            \r\n            <div id=\"scatter-plot\"\r\n            style={{transform: \"translate(10px, -20px)\"}}\r\n            >\r\n\r\n              {appState.graph.hasGraph && appState.graph.frame && appState.graph.rawGraph.nodes[0].degree !== undefined && < ScatterPlot />}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={classnames(Classes.CARD, Classes.ELEVATION_2, \"overlay-card\",\r\n            \"transparent-frame\")} style={{ width: \"1em\", height: \"0px\", paddingTop: \"0em\", paddingLeft: \"0px\", paddingBottom: \"0em\", marginRight: \"35px\" }}>\r\n            <button className=\"openbtn\" onClick={this.scatterToggleOptions} style={appState.preferences.isScatterPlotCardHidden ? this.scatterSideButtonVis : this.scatterSideButtonInv}>\r\n              &#9776;\r\n            </button>\r\n          </div>\r\n        </div> */}\r\n\r\n        {/* Filter option  panels */}\r\n        <div className={\"left-cards\"} style={{ marginTop:'6em'}} >\r\n          <div\r\n\r\n\r\n            className={classnames(\r\n              Classes.CARD,\r\n              Classes.ELEVATION_2,\r\n              \"overlay-card\",\r\n              \"left-overlay-card\",\r\n              \"transparent-frame\",\r\n              \"left-cards\", \r\n              \"filter-option\"\r\n            )}\r\n            style={appState.preferences.isFilterOptionsCardHidden ? this.filtersInvisible : this.filtersVisible}\r\n          >\r\n            <button className=\"openbtn2\" onClick={this.filterToggleOptions}> &#8249;\r\n            </button>\r\n            <br />\r\n            <FilterOptionsCard />\r\n\r\n          </div>\r\n\r\n          <div className={classnames(Classes.CARD, Classes.ELEVATION_2, \"overlay-card\",\r\n            \"transparent-frame\")} style={{ width: \"1em\", paddingTop: \"0em\", paddingRight: \"0.7em\", paddingBottom: \"0.5em\", marginLeft: \"-5.4em\" }}>\r\n            <button className=\"openbtn\" onClick={this.filterToggleOptions} style={appState.preferences.isFilterOptionsCardHidden ? this.filterSideButtonVis : this.filterSideButtonInv}>\r\n               &#9776;\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n     \r\n\r\n\r\n        <Legends />\r\n        {/* <StatusBar /> */}\r\n        {// This menu only shows when there are nodes selected\r\n          appState.graph.selectedNodes.length > 0 && !appState.preferences.isNavbarInMinimalMode && <SelectionActionPanel />\r\n        }\r\n\r\n        <ZoomPanel />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default FloatingCards;","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport uniq from \"lodash/uniq\";\r\n\r\nimport { Classes } from \"@blueprintjs/core\";\r\nimport appState from \"../../stores\";\r\nimport { observer } from \"mobx-react/index\";\r\nimport { observable, computed, action, runInAction } from \"mobx\";\r\nimport { Histogram, DensitySeries, BarSeries, withParentSize, XAxis, YAxis } from '@data-ui/histogram';\r\n// import  Histogram  from \"./Histogram\"\r\nimport SVGBrush from 'react-svg-brush';\r\n\r\nimport { min, max, scaleLinear, map, range, select } from \"d3\"\r\nimport { bin } from \"d3-array\"\r\nimport * as d3 from \"d3\"\r\nimport { filter, forEach } from \"lodash\";\r\n// import { min } from \"lodash\";\r\n\r\n\r\n@observer\r\nclass SelectionDetail extends React.Component {\r\n\r\n  // \r\n  margin = { top: 32, right: 30, bottom: 70, left: 40 }\r\n  // { top: 32, right: 32, bottom: 64, left: 64 }\r\n  containerDiv = document.querySelector(\"#graph-container\");\r\n  allwidth = this.containerDiv.offsetWidth / 2;\r\n  allheight = this.containerDiv.offsetHeight/ 3 *2;\r\n  width = this.allwidth - this.margin.left - this.margin.right\r\n  height = this.allheight - this.margin.top - this.margin.bottom\r\n  brushmargin = this.margin\r\n  brushwidth = this.width\r\n  distBinData = []\r\n  degreeBinData = []\r\n  edgeSelection = []\r\n\r\n\r\n  @action\r\n  SelectionDistanceFromLatLonIn = () => {\r\n    const selectNodes = appState.graph.selectedNodes;\r\n    const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n    this.SelectionDensity()\r\n\r\n    if (appState.graph.mapClicked) {\r\n\r\n      const edgeSelection = appState.graph.mapClicked.linkObjs\r\n      if (!edgeSelection || edgeSelection.length == 0) {\r\n        appState.graph.avgdist = 0\r\n        return [null, []];\r\n      }\r\n      this.edgeSelection = edgeSelection\r\n      const edgeDistance = edgeSelection.map(e => {\r\n        if(e.edgeDist >0){\r\n          \r\n          return e.edgeDist\r\n        }else {\r\n          return 0\r\n        }\r\n       \r\n      })\r\n      appState.graph.avgdist = average(edgeDistance).toFixed(2)\r\n      return [appState.graph.avgdist, edgeDistance];\r\n\r\n    }\r\n\r\n    if (selectNodes.length > 1) {\r\n      //// calculate only the connected distance \r\n      const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(appState.graph.selectedNodes)\r\n      if (edgeSelection.length == 0) {\r\n        appState.graph.avgdist = 0\r\n        return [null, []];\r\n      }\r\n      this.edgeSelection = edgeSelection\r\n      const edgeDistance = edgeSelection.map(e => {\r\n        if(e.edgeDist >0){\r\n          return e.edgeDist\r\n        }else {\r\n          return 0\r\n        }\r\n       \r\n      })\r\n      appState.graph.avgdist = average(edgeDistance).toFixed(2)\r\n      return [appState.graph.avgdist, edgeDistance];\r\n\r\n      //// calculate average distance between all selected nodes \r\n      // const edgeDistance = []\r\n      // appState.graph.frame.lineIndices.forEach((edge)=>{\r\n      //   if (appState.graph.selectedNodes.includes(edge.source ) && appState.graph.selectedNodes.includes(edge.target ) ){\r\n      //     edgeDistance.push(edge.edgeDist)\r\n\r\n      //   }\r\n      // })\r\n      // if(edgeDistance.length>0){\r\n      //   return [average(edgeDistance).toFixed(3), edgeDistance];\r\n      // }else{\r\n      //   return  [null, []]\r\n      // }\r\n\r\n      // for (let i = 0; i < selectNodes.length; i++) {\r\n      //   for (let j = i + 1; j < selectNodes.length; j++) {\r\n      //     const lon1 = selectNodes[i].data.ref.LonX\r\n      //     const lat1 = selectNodes[i].data.ref.LatY\r\n      //     const lon2 = selectNodes[j].data.ref.LonX\r\n      //     const lat2 = selectNodes[j].data.ref.LatY\r\n      //     const edgeDist = appState.graph.frame.getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2)\r\n      //     edgeDistance.push(edgeDist)\r\n      //   }\r\n      // }\r\n\r\n\r\n\r\n    } else {   // when no node is selected, return the distribution of the whole network \r\n\r\n      let edgeSelection = []\r\n      appState.graph.frame.getNodeList().forEach(node => {\r\n        if(node.linkObjs && node.linkObjs.length>0){\r\n          edgeSelection.push(...node.linkObjs)\r\n        }\r\n        \r\n      })\r\n\r\n      if (edgeSelection.length > 0) {\r\n        let uniqEdgeSelection = uniq(edgeSelection)\r\n        this.edgeSelection = uniqEdgeSelection\r\n        if (uniqEdgeSelection.length > 0) {\r\n          let edgeDistance = uniqEdgeSelection.map(e=>{\r\n            if(e.edgeDist >0){\r\n              return e.edgeDist\r\n            }else {\r\n              return 0\r\n            }\r\n           \r\n          })\r\n          // console.log(edgeDistance)\r\n          appState.graph.avgdist = average(edgeDistance).toFixed(2)\r\n          return [appState.graph.avgdist, edgeDistance];\r\n\r\n        } else {\r\n          return [null, []]\r\n        }\r\n\r\n      } else {\r\n        return [null, []]\r\n      }\r\n\r\n\r\n      // return null\r\n    }\r\n\r\n  }\r\n  \r\n  @action\r\n  SelectionDensity = () => {\r\n\r\n    // undirect graph\r\n\r\nif(appState.graph.selectedNodes.length > 1){\r\n  const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(appState.graph.selectedNodes)\r\n    // console.log(edgeSelection.length);\r\n    if (edgeSelection.length == 0) {\r\n      appState.graph.tempRawGraph = undefined\r\n      return 0;\r\n    }\r\n    // this.edgeSelection = [...edgeSelection]\r\n    \r\n    const nodelength = appState.graph.selectedNodes.length;\r\n    const selectionDen = (edgeSelection.length / (nodelength * (nodelength - 1))) * 2;\r\n    appState.graph.selectedEdge = edgeSelection.length;\r\n    appState.graph.avgDegree = appState.graph.selectedNodes.reduce((de, l) => de + l.data.ref.degree, 0) / appState.graph.selectedNodes.length\r\n    appState.graph.avgDegree = appState.graph.avgDegree.toFixed(3)\r\n    appState.graph.avgdensity = selectionDen.toFixed(3);\r\n    const selectnodesID = appState.graph.selectedNodes.map(n=>n.id)\r\n    appState.graph.rediameter = ''\r\n    appState.graph.reclustercoe = ''\r\n    appState.graph.recomponent = ''\r\n    appState.graph.tempRawGraph = {\r\n      \r\n        nodes: appState.graph.rawGraph.nodes.filter((n)=>(selectnodesID.includes(n.id))),\r\n        edges: appState.graph.rawGraph.edges.filter((e)=>(selectnodesID.includes(e.source_id) && selectnodesID.includes(e.target_id)))\r\n\r\n      \r\n    }\r\n    return selectionDen.toFixed(3)\r\n}else if (appState.graph.mapClicked){\r\n  const thenode = appState.graph.mapClicked\r\n  const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n  const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(selectneighbors)\r\n    // console.log(edgeSelection.length);\r\n    if (edgeSelection.length == 0) return 0;\r\n    // this.edgeSelection = [...edgeSelection]\r\n    \r\n    const nodelength = selectneighbors.length;\r\n    const selectionDen = (edgeSelection.length / (nodelength * (nodelength - 1))) * 2;\r\n    appState.graph.selectedEdge = edgeSelection.length;\r\n    appState.graph.avgDegree = selectneighbors.reduce((de, l) => de + l.data.ref.degree, 0) / selectneighbors.length;\r\n    appState.graph.avgDegree = appState.graph.avgDegree.toFixed(3)\r\n    appState.graph.avgdensity = selectionDen.toFixed(3);\r\n    const selectnodesID = selectneighbors.map(n=>n.data.ref.id)\r\n    selectnodesID.push(appState.graph.mapClicked.id)\r\n    appState.graph.rediameter = ''\r\n    appState.graph.reclustercoe = ''\r\n    appState.graph.recomponent = ''\r\n    appState.graph.tempRawGraph = {\r\n      \r\n        nodes: appState.graph.rawGraph.nodes.filter((n)=>(selectnodesID.includes(n.id))),\r\n        edges: appState.graph.rawGraph.edges.filter((e)=>(selectnodesID.includes(e.source_id) && selectnodesID.includes(e.target_id)))\r\n\r\n      \r\n    }\r\n    return selectionDen.toFixed(3)\r\n\r\n}\r\n    \r\n\r\n  }\r\n  // margin = \r\n\r\n\r\n  onEdgeBrushStart = ({ target, type, selection, sourceEvent }) => {\r\n    // appState.graph.frame.selection = []\r\n    // appState.graph.selectedNodes = []\r\n    appState.graph.edgeselection = []\r\n    appState.graph.clearBrush = false\r\n    // rehighlight all edges in sociogram\r\n    appState.graph.frame.highlightAllEdges()\r\n\r\n  }\r\n  onEdgeBrush = ({ target, type, selection, sourceEvent }) => {\r\n\r\n  }\r\n  onEdgeBrushEnd = ({ target, type, selection, sourceEvent }) => {\r\n    const selectionRectID = []\r\n    const svgElement = select(this.edgesvg)\r\n    const rects = svgElement.selectAll(\".vx-bar\")\r\n    const brushBounds = {\r\n      x0: selection[0][0] - this.brushmargin.left,\r\n      x1: selection[1][0] - this.brushmargin.left,\r\n      y0: selection[0][1],\r\n      y1: selection[1][1],\r\n    }\r\n\r\n    rects.each(function (d, i) {\r\n      const rectx = parseFloat(select(this).attr(\"x\"))\r\n      // const recty = parseFloat(select(this).attr(\"y\"))\r\n      if (rectx >= brushBounds.x0 && rectx <= brushBounds.x1) {\r\n        selectionRectID.push(i)\r\n      }\r\n\r\n    })\r\n\r\n\r\n\r\n    // console.log(this.distBinData)\r\n    // console.log(selectionRectID)\r\n    // const filterDistBin = this.distBinData.filter((d, i) => i % 2 != 1)\r\n    const filterDistBin2 = this.distBinData.filter((d, i) => selectionRectID.indexOf(i) !== -1)\r\n    // console.log(this.distBinData)\r\n    const distbuffer_min = min(filterDistBin2.map((d) => d.mind))\r\n    const distbuffer_max = max(filterDistBin2.map((d) => d.maxd))\r\n    // console.log(this.edgeSelection)\r\n    const filteredge = this.edgeSelection.filter(edge => (edge.edgeDist >= distbuffer_min && edge.edgeDist <= distbuffer_max))\r\n\r\n\r\n    appState.graph.edgeselection = filteredge\r\n    appState.graph.frame.highlightedgeWithinDist(distbuffer_min, distbuffer_max)\r\n    // this.distBinData = []\r\n    // const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n    //   // console.log(node)\r\n    //   selectionNodeID.includes(node.id)\r\n\r\n    // )\r\n    // appState.graph.frame.selection = selectionNode\r\n    // appState.graph.selectedNodes = selectionNode\r\n\r\n\r\n    // // console.log(selectionNode)\r\n    // appState.graph.frame.updateSelectionOpacity()\r\n    console.log(appState.graph.edgeselection)\r\n    // console.log(selection)\r\n    // console.log(selectionRectID)\r\n\r\n  }\r\n\r\n  renderEdgeBrush = () => (\r\n    <SVGBrush\r\n      // Defines the boundary of the brush.\r\n      // Strictly uses the format [[x0, y0], [x1, y1]] for both 1d and 2d brush.\r\n      // Note: d3 allows the format [x, y] for 1d brush.\r\n      selection = {appState.graph.clearBrush? null:undefined}\r\n      extent={\r\n        [[this.margin.left, this.brushmargin.top], [this.allwidth - this.brushmargin.right, this.allheight - this.brushmargin.bottom]]\r\n      }\r\n      // Obtain mouse positions relative to the current svg during mouse events.\r\n      // By default, getEventMouse returns [event.clientX, event.clientY]\r\n      getEventMouse={event => {\r\n        const { clientX, clientY } = event;\r\n        const { left, top } = this.edgesvg.getBoundingClientRect();\r\n        // console.log([clientX - left, clientY - top])\r\n        if ((clientX - left) < 0) {\r\n          console.log(\"Here\");\r\n          return [0, clientY - top];\r\n        }\r\n        return [clientX - left, clientY - top];\r\n      }}\r\n      brushType=\"x\" // \"x\"\r\n      onBrushStart={this.onEdgeBrushStart}\r\n      onBrush={this.onEdgeBrush}\r\n      onBrushEnd={this.onEdgeBrushEnd}\r\n    />\r\n  )\r\n\r\n  onDegreeBrushStart = ({ target, type, selection, sourceEvent }) => {\r\n    // appState.graph.frame.selection = []\r\n    // appState.graph.selectedNodes = []\r\n    // appState.graph.filter['degree'] ={\r\n    //   \"min\":-1,\r\n    //   \"max\":Infinity\r\n    // }\r\n\r\n    // appState.graph.filterNodes()\r\n    appState.graph.clearBrush = false\r\n\r\n  }\r\n  onDegreeBrush = ({ target, type, selection, sourceEvent }) => {\r\n\r\n  }\r\n  onNoNodeDegreeBrushEnd = ({ target, type, selection, sourceEvent }) => {\r\n    const selectionRectID = []\r\n    const svgElement = select(this.degreesvg)\r\n    const rects = svgElement.selectAll(\".vx-bar\")\r\n    if (selection){\r\n      const brushBounds = {\r\n        x0: selection[0][0] - this.margin.left,\r\n        x1: selection[1][0] - this.margin.left,\r\n        y0: selection[0][1],\r\n        y1: selection[1][1],\r\n      }\r\n  \r\n      rects.each(function (d, i) {\r\n        const rectx = parseFloat(select(this).attr(\"x\"))\r\n        // const recty = parseFloat(select(this).attr(\"y\"))\r\n        if (rectx >= brushBounds.x0 && rectx <= brushBounds.x1) {\r\n          selectionRectID.push(i)\r\n        }\r\n  \r\n  \r\n      })\r\n  \r\n      \r\n    //  if(selectionRectID.length>0){\r\n      const filterdegreeBin2 = this.degreeBinData.filter((d, i) => selectionRectID.indexOf(i) !== -1)\r\n      const degreebuffer_min = min(filterdegreeBin2.map((d) => d.mind))\r\n      const degreebuffer_max = max(filterdegreeBin2.map((d) => d.maxd))\r\n      \r\n      const selectionNode = appState.graph.frame.getNodeList().filter(node =>( \r\n        node.data.ref.degree>=degreebuffer_min && node.data.ref.degree<=degreebuffer_max)\r\n      )\r\n\r\n      // when no node statisfy, should dehighlight \r\n      appState.graph.frame.degreehighlight = selectionNode\r\n      appState.graph.frame.updateDegreeHistOpacity()\r\n      appState.graph.degreeselection = selectionNode\r\n      appState.graph.degreebrushed = true\r\n    }else{       // click on brush should clear \r\n      appState.graph.frame.selection = []\r\n      appState.graph.frame.updateSelectionOpacity()\r\n      appState.graph.degreeselection = []\r\n      appState.graph.degreebrushed = false\r\n    }\r\n    \r\n    \r\n  \r\n\r\n  }\r\n\r\n  onSelectDegreeBrushEnd = ({ target, type, selection, sourceEvent }) => {\r\n    const selectionRectID = []\r\n    const svgElement = select(this.degreesvg)\r\n    const rects = svgElement.selectAll(\".vx-bar\")\r\n    if (selection){\r\n    const brushBounds = {\r\n      x0: selection[0][0] - this.margin.left,\r\n      x1: selection[1][0] - this.margin.left,\r\n      y0: selection[0][1],\r\n      y1: selection[1][1],\r\n    }\r\n\r\n    rects.each(function (d, i) {\r\n      const rectx = parseFloat(select(this).attr(\"x\"))\r\n      // const recty = parseFloat(select(this).attr(\"y\"))\r\n      if (rectx >= brushBounds.x0 && rectx <= brushBounds.x1) {\r\n        selectionRectID.push(i)\r\n      }\r\n\r\n\r\n    })\r\n\r\n    \r\n  \r\n    const filterdegreeBin2 = this.degreeBinData.filter((d, i) => selectionRectID.indexOf(i) !== -1)\r\n    const degreebuffer_min = min(filterdegreeBin2.map((d) => d.mind))\r\n    const degreebuffer_max = max(filterdegreeBin2.map((d) => d.maxd))\r\n    \r\n    var selectionNode\r\n    if(appState.graph.selectedNodes.length >1){\r\n      selectionNode = appState.graph.selectedNodes.filter(node =>( \r\n        node.data.ref.degree>=degreebuffer_min && node.data.ref.degree<=degreebuffer_max)\r\n      )\r\n    }else if (appState.graph.selectedNodes.length == 1 && appState.graph.selectedNodes[0]){\r\n      const thenode = appState.graph.selectedNodes[0]\r\n      const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n      selectionNode = selectneighbors.filter(node =>( \r\n        node.data.ref.degree>=degreebuffer_min && node.data.ref.degree<=degreebuffer_max)\r\n      )\r\n    }\r\n\r\n    \r\n    appState.graph.frame.degreehighlight = selectionNode\r\n      appState.graph.frame.updateDegreeHistOpacity()\r\n      appState.graph.degreeselection = selectionNode\r\n      appState.graph.degreebrushed = true\r\n  }\r\n    else{\r\n      if(appState.graph.selectedNodes.length >1){\r\n      appState.graph.frame.selection = appState.graph.selectedNodes\r\n      appState.graph.frame.updateSelectionOpacity()\r\n      appState.graph.degreeselection = []\r\n      appState.graph.degreebrushed = false}\r\n      else if (appState.graph.selectedNodes.length == 1 && appState.graph.selectedNodes[0]){\r\n        const thenode = appState.graph.selectedNodes[0]\r\n        const selectionNode = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n        appState.graph.frame.degreehighlight = selectionNode\r\n        appState.graph.frame.updateDegreeHistOpacity()\r\n        appState.graph.degreeselection = selectionNode\r\n        appState.graph.degreebrushed = true\r\n      }\r\n\r\n      \r\n    }\r\n\r\n  }\r\n\r\n  renderNoNodeDegreeBrush = () => (\r\n    <SVGBrush\r\n      // Defines the boundary of the brush.\r\n      // Strictly uses the format [[x0, y0], [x1, y1]] for both 1d and 2d brush.\r\n      // Note: d3 allows the format [x, y] for 1d brush.\r\n      selection = {appState.graph.clearBrush? null:undefined}\r\n      extent={\r\n        [[this.margin.left, this.brushmargin.top], [this.allwidth - this.brushmargin.right, this.allheight - this.brushmargin.bottom]]\r\n      }\r\n      // Obtain mouse positions relative to the current svg during mouse events.\r\n      // By default, getEventMouse returns [event.clientX, event.clientY]\r\n      getEventMouse={event => {\r\n        const { clientX, clientY } = event;\r\n        const { left, top } = this.degreesvg.getBoundingClientRect();\r\n        // console.log([clientX - left, clientY - top])\r\n        return [clientX - left, clientY - top];\r\n      }}\r\n      brushType=\"x\" // \"x\"\r\n      onBrushStart={this.onDegreeBrushStart}\r\n      onBrush={this.onDegreeBrush}\r\n      onBrushEnd={this.onNoNodeDegreeBrushEnd}\r\n    />\r\n  )\r\n\r\n  renderSelectDegreeBrush = () => (\r\n    <SVGBrush\r\n      // Defines the boundary of the brush.\r\n      // Strictly uses the format [[x0, y0], [x1, y1]] for both 1d and 2d brush.\r\n      // Note: d3 allows the format [x, y] for 1d brush.\r\n      selection = {appState.graph.clearBrush? null:undefined}\r\n      extent={\r\n        [[this.margin.left, this.brushmargin.top], [this.allwidth - this.brushmargin.right, this.allheight - this.brushmargin.bottom]]\r\n      }\r\n      // Obtain mouse positions relative to the current svg during mouse events.\r\n      // By default, getEventMouse returns [event.clientX, event.clientY]\r\n      getEventMouse={event => {\r\n        const { clientX, clientY } = event;\r\n        const { left, top } = this.degreesvg.getBoundingClientRect();\r\n        // console.log([clientX - left, clientY - top])\r\n        return [clientX - left, clientY - top];\r\n      }}\r\n      brushType=\"x\" // \"x\"\r\n      onBrushStart={this.onDegreeBrushStart}\r\n      onBrush={this.onDegreeBrush}\r\n      onBrushEnd={this.onSelectDegreeBrushEnd}\r\n    />\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n\r\n\r\n\r\n    this.prevTick = \"\";\r\n    this.maxDegreeDict = {};\r\n    this.maxDegreeCount = 0;\r\n    this.maxDistanceCount= 0;\r\n\r\n    if (appState.graph.selectedNodes.length > 1 && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]) {\r\n      // self = this\r\n\r\n      // Array(100).fill().map(Math.random);\r\n\r\n\r\n      return (\r\n        <div\r\n          className={classnames(\r\n            // 'overlay-card',\r\n            // \"right-overlay-card\",\r\n            // \"transparent-frame\"\r\n          )}\r\n          style={{\r\n            // width: '40vw',\r\n            height: '40vh',\r\n            // border:'#C0C0C0',\r\n            // borderStyle:'solid',\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"node-details-table\")}>\r\n            <table\r\n              className={classnames(Classes.TABLE, Classes.TABLE_STRIPED, \"node-details-table-content\")}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: '0',\r\n                fontSize: \"12px\"\r\n              }}\r\n            >\r\n\r\n              <thead>\r\n                {/* <tr>\r\n                  <th></th>\r\n                  <th></th>\r\n                 \r\n                </tr> */}\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {appState.graph.selectedNodes.length + ' nodes are selected'}</td>\r\n                  {/* <td style={{ padding: '5px 10px', whiteSpace: 'normal' }}>{formatLongFloat(this.props.node[it])}</td> */}\r\n                </tr>\r\n                {/* <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {'The average distance is ' + this.SelectionDistanceFromLatLonIn()[0] + ' km'}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {'The network density (undirected network) is ' + this.SelectionDensity()}</td>\r\n                </tr> */}\r\n                {/* {appState.graph.allPropertiesKeyList.map((it, i) => (\r\n                  \r\n                ))} */}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div style={{ height: '100%' }}>\r\n              {/* <text className=\"distribution-title\" >Distance Distribution</text> */}\r\n              <svg\r\n                width={\"50%\"}\r\n                height={\"35vh\"}\r\n                // className=\"hist\"\r\n                id=\"edgesvg\"\r\n                ref={input => (this.edgesvg = input)}\r\n              // ref = {ref}\r\n              >\r\n                <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Edge Distance Distribution</text>\r\n                <Histogram\r\n                  ariaLabel=\"distance_dis\"\r\n                  orientation=\"vertical\"\r\n                  label=\"Edge Distance Distribution\"\r\n                  height={this.allheight}\r\n                  width={this.allwidth}\r\n                  cumulative={false}\r\n                  normalized={false}\r\n                  binCount={25}\r\n                  margin={this.margin}\r\n                  valueAccessor={(datum) => {\r\n\r\n                    return datum\r\n                  }}\r\n                  binType=\"numeric\"\r\n\r\n                >\r\n                  <BarSeries\r\n                    animated={false}\r\n                    rawData={this.SelectionDistanceFromLatLonIn()[1]}\r\n                    fill={(d, i) => {\r\n                      if (i === 0) {\r\n                        this.maxDistanceCount = 0;\r\n                        this.distBinData = []\r\n                      }\r\n                      if (d.data.length > this.maxDistanceCount) {\r\n                        this.maxDistanceCount = d.data.length;\r\n                      }\r\n                      if (d.data.length > 0) {\r\n                        this.distBinData.push({\r\n                          mind: min(d.data),\r\n                          maxd: max(d.data)\r\n                        })\r\n                      } else {\r\n                        this.distBinData.push({\r\n                          mind: Infinity,\r\n                          maxd: -1\r\n                        })\r\n                      }\r\n\r\n\r\n\r\n                      // console.log(this.distBinData)\r\n                      // console.log(i)\r\n                      // console.log(d)\r\n                      return \"#08519c\"\r\n                    }}\r\n                  />\r\n                  <XAxis numTicks={5} label=\"Edge Distance (km)\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                  {this.SelectionDistanceFromLatLonIn()[1].length < 10 ?\r\n                    <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                      (tick, ti) => {\r\n                        console.log(tick, this.maxDistanceCount/2);\r\n                        if (parseInt(tick).toString() == this.prevTick) {\r\n                          return \"\";\r\n                        } \r\n                        else {\r\n                          this.prevTick = parseInt(tick).toString();\r\n                          return parseInt(tick).toString();\r\n                        }\r\n                          \r\n  \r\n                        // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                      }} />\r\n                    :\r\n                    <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                      (tick, ti) => {\r\n                          return parseInt(tick).toString()\r\n  \r\n                        // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                      }} />\r\n                  }\r\n                  \r\n\r\n\r\n                </Histogram>\r\n                {this.renderEdgeBrush()}\r\n              </svg>\r\n              <svg\r\n                width={\"50%\"}\r\n                height={\"35vh\"}\r\n                // className=\"hist\"\r\n                id=\"degreesvg\"\r\n                ref={input => (this.degreesvg = input)}\r\n              // ref = {ref}\r\n              >\r\n\r\n                <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Node Degree Distribution</text>\r\n                <Histogram\r\n                  ariaLabel=\"degree_dis\"\r\n                  orientation=\"vertical\"\r\n                  height={this.allheight}\r\n                  width={this.allwidth}\r\n                  margin={this.margin}\r\n                  cumulative={false}\r\n                  normalized={false}\r\n                  binCount={25}\r\n                  valueAccessor={(datum) => datum}\r\n                  binType=\"numeric\"\r\n                >\r\n                  <BarSeries\r\n                    fill={(d, i) => {\r\n                      if (i === 0) {\r\n                        this.maxDistanceCount = 0;\r\n                        this.degreeBinData = []\r\n                      }\r\n                      if (d.data.length > this.maxDistanceCount) {\r\n                        this.maxDistanceCount = d.data.length;\r\n                      }\r\n                      if (d.data.length > 0) {\r\n                        this.degreeBinData.push({\r\n                          mind: min(d.data),\r\n                          maxd: max(d.data)\r\n                        })\r\n                      } else {\r\n                        this.degreeBinData.push({\r\n                          mind: Infinity,\r\n                          maxd: -1\r\n                        })\r\n                      }\r\n\r\n\r\n\r\n                      // console.log(this.distBinData)\r\n                      // console.log(i)\r\n                      // console.log(d)\r\n                      return \"#08519c\"\r\n                    }}\r\n                    animated={false}\r\n                    rawData={appState.graph.selectedNodes.map((node, i) => {\r\n                      if (i == 0) {\r\n                        this.maxDegreeCount = 0;\r\n                      }\r\n                      if (node.data.ref.degree in this.maxDegreeDict) {\r\n                        this.maxDegreeDict[node.data.ref.degree] += 1;\r\n                        if (this.maxDegreeDict[node.data.ref.degree] > this.maxDegreeCount) {\r\n                          this.maxDegreeCount = this.maxDegreeDict[node.data.ref.degree]\r\n                        }\r\n                      } else {\r\n                        this.maxDegreeDict[node.data.ref.degree] = 1;\r\n                        if (this.maxDegreeDict[node.data.ref.degree] > this.maxDegreeCount) {\r\n                          this.maxDegreeCount = this.maxDegreeDict[node.data.ref.degree]\r\n                        }\r\n                      }\r\n                      // console.log(this.maxDegreeCount, node.data.ref.degree);\r\n                      if(node.data.ref.degree>0){\r\n                        return node.data.ref.degree\r\n                      }else{\r\n                        return 0\r\n                      }\r\n                    })}\r\n                  />\r\n                  <XAxis numTicks={5} label=\"Degree\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                  {this.SelectionDistanceFromLatLonIn()[1].length < 10 ?\r\n                    <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                      (tick, ti) => {\r\n                        console.log(tick, this.prevTick);\r\n                        if (parseInt(tick).toString() == this.prevTick) {\r\n                          return \"\";\r\n                        } \r\n                        else {\r\n                          this.prevTick = parseInt(tick).toString();\r\n                          return parseInt(tick).toString();\r\n                        }\r\n                          \r\n  \r\n                        // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                      }} />\r\n                    :\r\n                    <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                      (tick, ti) => {\r\n                          // console.log(tick);\r\n                          if (parseInt(tick).toString() == this.prevTick) {\r\n                            return \"\";\r\n                          } \r\n                          else {\r\n                            this.prevTick = parseInt(tick).toString();\r\n                            return parseInt(tick).toString();\r\n                          }\r\n  \r\n                        // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                      }} />\r\n                  }\r\n                </Histogram>\r\n                {this.renderSelectDegreeBrush()}\r\n              </svg>\r\n          </div>\r\n\r\n\r\n        </div>\r\n      );\r\n    }\r\n    else if(appState.graph.mapClicked && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]){\r\n      const thenode = appState.graph.mapClicked\r\n      const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n      // appState.graph.selectedNodes = selectneighbors\r\n      if(selectneighbors.length >1 ){\r\n        return (\r\n          //\r\n          <div\r\n            className={classnames(\r\n              // 'overlay-card',\r\n              // \"right-overlay-card\",\r\n              // \"transparent-frame\"\r\n            )}\r\n            style={{\r\n              // width: '40vw',\r\n              height: '40vh',\r\n              // border:'#C0C0C0',\r\n              // borderStyle:'solid',\r\n            }}\r\n          >\r\n            <div className={classnames(Classes.CARD, \"node-details-table\")}>\r\n              <table\r\n                className={classnames(Classes.TABLE, Classes.TABLE_STRIPED, \"node-details-table-content\")}\r\n                style={{\r\n                  width: \"100%\",\r\n                  padding: '0',\r\n                  fontSize: \"12px\"\r\n                }}\r\n              >\r\n  \r\n                <thead>\r\n                  {/* <tr>\r\n                    <th></th>\r\n                    <th></th>\r\n                   \r\n                  </tr> */}\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td style={{ padding: '5px 10px' }}> {selectneighbors.length + ' nodes are selected'}</td>\r\n                    {/* <td style={{ padding: '5px 10px', whiteSpace: 'normal' }}>{formatLongFloat(this.props.node[it])}</td> */}\r\n                  </tr>\r\n                  {/* <tr>\r\n                    <td style={{ padding: '5px 10px' }}> {'The average distance is ' + this.SelectionDistanceFromLatLonIn()[0] + ' km'}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td style={{ padding: '5px 10px' }}> {'The network density (undirected network) is ' + this.SelectionDensity()}</td>\r\n                  </tr> */}\r\n                  {/* {appState.graph.allPropertiesKeyList.map((it, i) => (\r\n                    \r\n                  ))} */}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n  \r\n            <div style={{ height: '100%' }}>\r\n                {/* <text className=\"distribution-title\" >Distance Distribution</text> */}\r\n                <svg\r\n                  width={\"50%\"}\r\n                  height={\"35vh\"}\r\n                  // className=\"hist\"\r\n                  id=\"edgesvg\"\r\n                  ref={input => (this.edgesvg = input)}\r\n                // ref = {ref}\r\n                >\r\n                  <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Edge Distance Distribution</text>\r\n                  <Histogram\r\n                    ariaLabel=\"distance_dis\"\r\n                    orientation=\"vertical\"\r\n                    label=\"Edge Distance Distribution\"\r\n                    height={this.allheight}\r\n                    width={this.allwidth}\r\n                    cumulative={false}\r\n                    normalized={false}\r\n                    binCount={25}\r\n                    margin={this.margin}\r\n                    valueAccessor={(datum) => {\r\n  \r\n                      return datum\r\n                    }}\r\n                    binType=\"numeric\"\r\n  \r\n                  >\r\n                    <BarSeries\r\n                      animated={false}\r\n                      rawData={this.SelectionDistanceFromLatLonIn()[1]}\r\n                      fill={(d, i) => {\r\n                        if (i === 0) {\r\n                          this.maxDistanceCount = 0;\r\n                          this.distBinData = []\r\n                        }\r\n                        if (d.data.length > this.maxDistanceCount) {\r\n                          this.maxDistanceCount = d.data.length;\r\n                        }\r\n                        if (d.data.length > 0) {\r\n                          this.distBinData.push({\r\n                            mind: min(d.data),\r\n                            maxd: max(d.data)\r\n                          })\r\n                        } else {\r\n                          this.distBinData.push({\r\n                            mind: Infinity,\r\n                            maxd: -1\r\n                          })\r\n                        }\r\n  \r\n  \r\n  \r\n                        // console.log(this.distBinData)\r\n                        // console.log(i)\r\n                        // console.log(d)\r\n                        return \"#08519c\"\r\n                      }}\r\n                    />\r\n                    <XAxis numTicks={5} label=\"Edge Distance (km)\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                    {this.SelectionDistanceFromLatLonIn()[1].length < 10 ?\r\n                      <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                        (tick, ti) => {\r\n                          console.log(tick, this.maxDistanceCount/2);\r\n                          if (parseInt(tick).toString() == this.prevTick) {\r\n                            return \"\";\r\n                          } \r\n                          else {\r\n                            this.prevTick = parseInt(tick).toString();\r\n                            return parseInt(tick).toString();\r\n                          }\r\n                            \r\n    \r\n                          // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                        }} />\r\n                      :\r\n                      <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                        (tick, ti) => {\r\n                            return parseInt(tick).toString()\r\n    \r\n                          // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                        }} />\r\n                    }\r\n                    \r\n  \r\n  \r\n                  </Histogram>\r\n                  {this.renderEdgeBrush()}\r\n                </svg>\r\n                <svg\r\n                  width={\"50%\"}\r\n                  height={\"35vh\"}\r\n                  // className=\"hist\"\r\n                  id=\"degreesvg\"\r\n                  ref={input => (this.degreesvg = input)}\r\n                // ref = {ref}\r\n                >\r\n  \r\n                  <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Node Degree Distribution</text>\r\n                  <Histogram\r\n                    ariaLabel=\"degree_dis\"\r\n                    orientation=\"vertical\"\r\n                    height={this.allheight}\r\n                    width={this.allwidth}\r\n                    margin={this.margin}\r\n                    cumulative={false}\r\n                    normalized={false}\r\n                    binCount={25}\r\n                    valueAccessor={(datum) => datum}\r\n                    binType=\"numeric\"\r\n                  >\r\n                    <BarSeries\r\n                      fill={(d, i) => {\r\n                        if (i === 0) {\r\n                          this.maxDistanceCount = 0;\r\n                          this.degreeBinData = []\r\n                        }\r\n                        if (d.data.length > this.maxDistanceCount) {\r\n                          this.maxDistanceCount = d.data.length;\r\n                        }\r\n                        if (d.data.length > 0) {\r\n                          this.degreeBinData.push({\r\n                            mind: min(d.data),\r\n                            maxd: max(d.data)\r\n                          })\r\n                        } else {\r\n                          this.degreeBinData.push({\r\n                            mind: Infinity,\r\n                            maxd: -1\r\n                          })\r\n                        }\r\n  \r\n  \r\n  \r\n                        // console.log(this.distBinData)\r\n                        // console.log(i)\r\n                        // console.log(d)\r\n                        return \"#08519c\"\r\n                      }}\r\n                      animated={false}\r\n                      rawData={selectneighbors.map((node, i) => {\r\n                        if (i == 0) {\r\n                          this.maxDegreeCount = 0;\r\n                        }\r\n                        if (node.data.ref.degree in this.maxDegreeDict) {\r\n                          this.maxDegreeDict[node.data.ref.degree] += 1;\r\n                          if (this.maxDegreeDict[node.data.ref.degree] > this.maxDegreeCount) {\r\n                            this.maxDegreeCount = this.maxDegreeDict[node.data.ref.degree]\r\n                          }\r\n                        } else {\r\n                          this.maxDegreeDict[node.data.ref.degree] = 1;\r\n                          if (this.maxDegreeDict[node.data.ref.degree] > this.maxDegreeCount) {\r\n                            this.maxDegreeCount = this.maxDegreeDict[node.data.ref.degree]\r\n                          }\r\n                        }\r\n                        // console.log(this.maxDegreeCount, node.data.ref.degree);\r\n                        if(node.data.ref.degree>0){\r\n                          return node.data.ref.degree\r\n                        }else{\r\n                          return 0\r\n                        }\r\n                      })}\r\n                    />\r\n                    <XAxis numTicks={5} label=\"Degree\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                    {this.SelectionDistanceFromLatLonIn()[1].length < 10 ?\r\n                      <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                        (tick, ti) => {\r\n                          // console.log(tick, this.prevTick);\r\n                          if (parseInt(tick).toString() == this.prevTick) {\r\n                            return \"\";\r\n                          } \r\n                          else {\r\n                            this.prevTick = parseInt(tick).toString();\r\n                            return parseInt(tick).toString();\r\n                          }\r\n                            \r\n    \r\n                          // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                        }} />\r\n                      :\r\n                      <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                        (tick, ti) => {\r\n                            // console.log(tick);\r\n                            if (parseInt(tick).toString() == this.prevTick) {\r\n                              return \"\";\r\n                            } \r\n                            else {\r\n                              this.prevTick = parseInt(tick).toString();\r\n                              return parseInt(tick).toString();\r\n                            }\r\n    \r\n                          // return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString() == \"0\" ? \"\" : parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                        }} />\r\n                    }\r\n                  </Histogram>\r\n                  {this.renderSelectDegreeBrush()}\r\n                </svg>\r\n            </div>\r\n  \r\n  \r\n          </div>\r\n        );\r\n      }else {\r\n        return <div></div>\r\n      }\r\n     \r\n    }else if (appState.graph.selectedNodes.length == 1 && appState.graph.selectedNodes[0]){\r\n      return (\r\n        //\r\n        <div\r\n          className={classnames(\r\n            // 'overlay-card',\r\n            // \"right-overlay-card\",\r\n            // \"transparent-frame\"\r\n          )}\r\n          style={{\r\n            // width: '40vw',\r\n            height: '40vh',\r\n            // border:'#C0C0C0',\r\n            // borderStyle:'solid',\r\n          }}\r\n        >\r\n          <div className={classnames(Classes.CARD, \"node-details-table\")}>\r\n            <table\r\n              className={classnames(Classes.TABLE, Classes.TABLE_STRIPED, \"node-details-table-content\")}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: '0',\r\n                fontSize: \"12px\"\r\n              }}\r\n            >\r\n\r\n              <thead>\r\n                {/* <tr>\r\n                  <th></th>\r\n                  <th></th>\r\n                 \r\n                </tr> */}\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {'1 nodes are selected'}</td>\r\n                  {/* <td style={{ padding: '5px 10px', whiteSpace: 'normal' }}>{formatLongFloat(this.props.node[it])}</td> */}\r\n                </tr>\r\n                {/* <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {'The average distance is ' + this.SelectionDistanceFromLatLonIn()[0] + ' km'}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td style={{ padding: '5px 10px' }}> {'The network density (undirected network) is ' + this.SelectionDensity()}</td>\r\n                </tr> */}\r\n                {/* {appState.graph.allPropertiesKeyList.map((it, i) => (\r\n                  \r\n                ))} */}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n         \r\n\r\n\r\n        </div>\r\n      );\r\n    }\r\n    else if( this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]) {  // when no node is selected, show the result of the whole network \r\n      return <div\r\n        className={classnames(\r\n          // 'overlay-card',\r\n          // \"right-overlay-card\",\r\n          // \"transparent-frame\"\r\n        )}\r\n        style={{\r\n          // width: '40vw',\r\n          height: '40vh',\r\n          // border:'#C0C0C0',\r\n          // borderStyle:'solid',\r\n        }}\r\n      >\r\n        <div className={classnames(Classes.CARD, \"node-details-table\")}>\r\n          <table\r\n            className={classnames(Classes.TABLE, Classes.TABLE_STRIPED, \"node-details-table-content\")}\r\n            style={{\r\n              width: \"100%\",\r\n              padding: '0',\r\n              fontSize: \"12px\"\r\n            }}\r\n          >\r\n\r\n            <thead>\r\n\r\n            </thead>\r\n            <tbody>\r\n\r\n\r\n              <tr>\r\n                <td style={{ padding: '5px 10px' }}> {'No node is selected'} | {`Size by ${appState.graph.hasGraph ? appState.graph.nodes.sizeBy : 'NULL'}`} | {`Color by ${appState.graph.hasGraph ? appState.graph.nodes.colorBy : 'NULL'}`}</td>\r\n              </tr>\r\n              {/* <tr>\r\n                <td style={{ padding: '5px 10px' }}> {`The average degree is ${appState.graph.hasGraph ? appState.graph.degree().toFixed(3) : 'NULL'}`}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style={{ padding: '5px 10px' }}> {`The average density is ${appState.graph.hasGraph ? (appState.graph.density() ).toFixed(3) : 'NULL'}`}</td>\r\n              </tr> */}\r\n\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div style={{ height: '20vw' }}>\r\n            \r\n\r\n            <svg\r\n              width={\"50%\"}\r\n              height={\"35vh\"}\r\n              // className=\"hist\"\r\n              id=\"edgesvg\"\r\n              ref={input => (this.edgesvg = input)}\r\n            // ref = {ref}\r\n            >\r\n              <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Edge Distance Distribution</text>\r\n              <Histogram\r\n                ariaLabel=\"distance_dis\"\r\n                orientation=\"vertical\"\r\n                height={this.allheight}\r\n                width={this.allwidth}\r\n                cumulative={false}\r\n                normalized={true}\r\n                binCount={25}\r\n                margin={this.margin}\r\n                valueAccessor={(datum) => {\r\n\r\n                  return datum\r\n                }}\r\n                binType=\"numeric\"\r\n\r\n              >\r\n                <BarSeries\r\n                  animated={false}\r\n                  rawData={this.SelectionDistanceFromLatLonIn()[1]}\r\n                  fill={(d, i) => {\r\n                    if (i === 0) {\r\n                      this.distBinData = []\r\n                    }\r\n\r\n                    if (d.data.length > 0) {\r\n                      this.distBinData.push({\r\n                        mind: min(d.data),\r\n                        maxd: max(d.data)\r\n                      })\r\n                    } else {\r\n                      this.distBinData.push({\r\n                        mind: Infinity,\r\n                        maxd: -1\r\n                      })\r\n                    }\r\n                    return \"#08519c\"\r\n                  }}\r\n                />\r\n                <XAxis numTicks={5} label=\"Edge Distance (km)\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                <YAxis label=\"Frequency\" fontSize=\"12px\" tickFormat={\r\n                  (tick, ti) => {\r\n                    // console.log(tick, this.SelectionDistanceFromLatLonIn()[1].length);\r\n                    return parseInt(tick * this.SelectionDistanceFromLatLonIn()[1].length).toString()\r\n                  }} />\r\n\r\n\r\n              </Histogram>\r\n              {this.renderEdgeBrush()}\r\n            </svg>\r\n\r\n\r\n            {/* <text className=\"distribution-title\">Degree Distribution</text> */}\r\n            <svg\r\n              width={\"50%\"}\r\n              height={\"35vh\"}\r\n              // className=\"hist\"\r\n              id=\"degreesvg\"\r\n              ref={input => (this.degreesvg = input)}\r\n            // ref = {ref}\r\n            >\r\n\r\n              <text x=\"50%\" y=\"10%\" text-anchor=\"middle\" fontSize=\"12px\" fontSizeAdjust=\"inherit\">Node Degree Distribution</text>\r\n              <Histogram\r\n                ariaLabel=\"degree_dis\"\r\n                orientation=\"vertical\"\r\n                height={this.allheight}\r\n                width={this.allwidth}\r\n                cumulative={false}\r\n                normalized={true}\r\n                binCount={25}\r\n                margin={this.margin}\r\n                valueAccessor={(datum) => {\r\n                  return datum\r\n                }}\r\n                binType=\"numeric\"\r\n                \r\n              >\r\n                <BarSeries\r\n                  fill={(d, i) => {\r\n                    if (i === 0) {\r\n                      this.degreeBinData = []\r\n                    }\r\n\r\n                    if (d.data.length > 0) {\r\n                      this.degreeBinData.push({\r\n                        mind: min(d.data),\r\n                        maxd: max(d.data)\r\n                      })\r\n                    } else {\r\n                      this.degreeBinData.push({\r\n                        mind: Infinity,\r\n                        maxd: -1\r\n                      })\r\n                    }\r\n                    return \"#08519c\"\r\n                  }}\r\n                  animated={false}\r\n                  rawData={appState.graph.frame.getNodeList().map((node) => {\r\n                    if(node.data.ref.degree>0){\r\n                      return node.data.ref.degree\r\n                    }else{\r\n                      return 0\r\n                    }\r\n                    \r\n                  })}\r\n                />\r\n                <XAxis numTicks={5} label=\"Degree\" fontSize=\"12px\" tickLabelProps={(d, i) => ({ angle: 45 })} />\r\n                {/* <YAxis fontSize=\"12px\" /> */}\r\n                <YAxis numTicks={5} label=\"Frequency\" fontSize=\"12px\"\r\n                  tickFormat={\r\n                    (tick, ti) => {\r\n                      return parseInt(tick * appState.graph.frame.getNodeList().length).toString()\r\n                    }} />\r\n\r\n              </Histogram>\r\n              {this.renderNoNodeDegreeBrush()}\r\n            </svg>\r\n          </div>\r\n      </div>\r\n    } \r\n    else {\r\n      return <div></div>\r\n    }\r\n\r\n    ///\r\n    \r\n    ///\r\n\r\n  }\r\n}\r\n\r\nexport default SelectionDetail;","\r\nimport React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport SimpleSelect from \"../utils/SimpleSelect\";\r\nimport {\r\n    Button,\r\n    Classes,\r\n    InputGroup,\r\n    Intent,\r\n    Position,\r\n    Tooltip,\r\n    Popover,\r\n    Menu,\r\n    MenuItem,\r\n    MenuDivider\r\n} from \"@blueprintjs/core\";\r\n\r\nimport appState from \"../../stores\";\r\nimport createGraph from 'ngraph.graph';\r\nimport path from 'ngraph.path';\r\n\r\n\r\nimport axios from 'axios'\r\nimport { observable, computed, action, runInAction } from \"mobx\";\r\n\r\n\r\n@observer\r\nclass StatGroupPanel extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n\r\n    runcommunity = () => {\r\n        appState.graph.convexPolygons = []\r\n\r\n        var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n            return edge.source_id\r\n        })\r\n        var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n            return edge.target_id\r\n        })\r\n        var querydict = {\r\n            \"type\": 'edgelist',\r\n            \"message\": {\r\n                'name': 'community'\r\n            },\r\n            \"fromedgelist\": fromedgelist,\r\n            \"toedgelist\": toedgelist\r\n        }\r\n        axios.post('https://snoman.herokuapp.com/flask/community', querydict).then(\r\n            // https://snoman.herokuapp.com/flask/community', querydict).then(\r\n            (response) => {\r\n                var communityDict = response.data.message;\r\n                appState.graph.modularity = response.data.modularity;\r\n                appState.graph.rawGraph.nodes.forEach((node) => {\r\n                    var unicommunity = Math.max.apply(null, Object.values(communityDict)) +1\r\n                    if(node.degree>0 && !communityDict[node.id]){\r\n                        node.community = String.fromCharCode( unicommunity + 95)\r\n                        unicommunity = unicommunity+1\r\n                    }else if(communityDict[node.id]){\r\n                        node.community = String.fromCharCode(communityDict[node.id] + 95)\r\n                    }else{\r\n                        node.community =  '-1'\r\n                    }\r\n                    \r\n                })\r\n                const nodesArr = appState.graph.rawGraph.nodes\r\n                const nodekeyList = Object.keys(nodesArr[1])\r\n                const nodePropertyTypes = {}\r\n                nodekeyList.forEach(function (k) {\r\n                    nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n                })\r\n                const uniqueValue = {}\r\n                nodekeyList.forEach(function (k, i) {\r\n\r\n                    if (nodePropertyTypes[k] == 'string') {\r\n                        uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n                    } else {\r\n                        const valuea = nodesArr.map(function (el) { return el[k]; })\r\n                        const minv = Math.min(...valuea)\r\n                        const maxv = Math.max(...valuea)\r\n                        uniqueValue[k] = [minv, maxv]\r\n                    }\r\n                })\r\n                appState.graph.metadata.nodePropertyTypes = nodePropertyTypes\r\n                appState.graph.metadata.uniqueValue = uniqueValue\r\n                appState.graph.metadata.nodeProperties = nodekeyList\r\n\r\n                appState.graph.nodes.color.scale = \"Nominal Scale\"\r\n                appState.graph.nodes.colorBy = \"community\"\r\n\r\n                appState.graph.nodes.convexhullby = \"community\"\r\n                appState.graph.nodes.groupby = \"community\"\r\n                appState.graph.watchAppearance = appState.graph.watchAppearance + 1\r\n\r\n\r\n                // console.log(result);\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    avgConnectionDist = () => {\r\n        appState.graph.rawGraph.nodes.forEach(function (node) {\r\n            const links = appState.graph.frame.getNode(node['id']).linkObjs\r\n            if (links) {\r\n                const cdistance = links.reduce((dist, l) => dist + l.edgeDist, 0);\r\n                node['average distance'] = cdistance / node.degree\r\n                node['average distance'] = node['average distance'].toFixed(2)\r\n            }else{\r\n                node['average distance'] = 0\r\n            }\r\n        })\r\n\r\n        appState.graph.scatterplot.x = 'average distance'\r\n        appState.graph.scatterplot.y = 'degree'\r\n        appState.graph.metadata.nodeComputed.push('average distance')\r\n\r\n    }\r\n\r\n    runKfullfillment = () => {\r\n        const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n            const R = 6371; // Radius of the Earth in kilometers\r\n            const dLat = (lat2 - lat1) * (Math.PI / 180);\r\n            const dLon = (lon2 - lon1) * (Math.PI / 180);\r\n            const a =\r\n                Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n                Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *\r\n                Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            const distance = R * c;\r\n            return distance;\r\n        }\r\n\r\n        // Function to find the K nearest neighbors for each node\r\n        const findKfulfillment = (nodes, edges) => {\r\n            const neighbors = {};\r\n\r\n\r\n            for (const currentNode of nodes) {\r\n                // find nearest neighbors\r\n                const currentId = currentNode.id;\r\n                currentNode['nearestnn'] = []\r\n                // neighbors[currentId] = [];\r\n\r\n                // Calculate distances to all other nodes\r\n                for (const otherNode of nodes) {\r\n                    if (currentNode !== otherNode) {\r\n                        const distance = calculateDistance(\r\n                            currentNode.LatY,\r\n                            currentNode.LonX,\r\n                            otherNode.LatY,\r\n                            otherNode.LonX\r\n                        );\r\n\r\n                        currentNode['nearestnn'].push({\r\n                            id: otherNode.id,\r\n                            distance: distance\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Sort neighbors by distance and keep the closest K\r\n                currentNode['nearestnn'].sort((a, b) => a.distance - b.distance);\r\n                const k = currentNode['degree']\r\n                currentNode['nearestnn'] = currentNode['nearestnn'].slice(0, k);\r\n\r\n                //find connected node id\r\n                currentNode['connected node'] = []\r\n                for (const edge of edges) {\r\n                    if (edge.source_id == currentNode['id'] || edge.target_id == currentNode[\"id\"]) {\r\n                        currentNode['connected node'].push(edge.source_id)\r\n                        currentNode['connected node'].push(edge.target_id)\r\n                    }\r\n                }\r\n                currentNode['connected node'].filter((n) => n !== currentNode['id']);\r\n\r\n\r\n\r\n                // calculate kfulfillment\r\n                const cnn = new Set(currentNode['connected node']);\r\n                currentNode['connected node'] = Array.from(cnn)\r\n                const snn = new Set(currentNode['nearestnn'].map(n => n.id));\r\n\r\n                const intersection = [...cnn].filter(item => snn.has(item));\r\n                if (currentNode['degree'] === 0) {\r\n                    currentNode['k-Fulfillment'] = 0\r\n                } else {\r\n                    currentNode['k-Fulfillment'] = intersection.length / currentNode['degree']\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        findKfulfillment(appState.graph.rawGraph.nodes, appState.graph.rawGraph.edges)\r\n        appState.graph.metadata.nodeComputed.push('k-Fulfillment')\r\n        appState.graph.scatterplot.x = 'k-Fulfillment'\r\n        appState.graph.scatterplot.y = 'degree'\r\n\r\n\r\n    }\r\n\r\n    runGlobalFlatRatio = () => {\r\n        const nodes = appState.graph.rawGraph.nodes\r\n        const iter = 5\r\n        const shuffleArray = (array) => {\r\n            for (let i = array.length - 1; i > 0; i--) {\r\n                // Generate a random index from 0 to i\r\n                const randomIndex = Math.floor(Math.random() * (i + 1));\r\n\r\n                // Swap elements array[i] and array[randomIndex]\r\n                const temp = array[i];\r\n                array[i] = array[randomIndex];\r\n                array[randomIndex] = temp;\r\n            }\r\n        }\r\n\r\n        const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n            const R = 6371; // Radius of the Earth in kilometers\r\n            const dLat = (lat2 - lat1) * (Math.PI / 180);\r\n            const dLon = (lon2 - lon1) * (Math.PI / 180);\r\n            const a =\r\n                Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n                Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *\r\n                Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            const distance = R * c;\r\n            return distance;\r\n        }\r\n\r\n        const gBarSumDistances = (nodeOrders, nodesWKnn, distanceMatrix, degreeConstraintMatrix) => {\r\n            const degreeCount = new Map();\r\n            nodeOrders.forEach(node => degreeCount.set(node, 0));\r\n\r\n            const nodesLabels = nodesWKnn.map((n) => n['id']);\r\n            const n = nodesLabels.length;\r\n            const connectionCounted = {}\r\n            for (const nl of nodesLabels) {\r\n                connectionCounted[nl] = {};\r\n            }\r\n\r\n            let totalDistance = 0;\r\n\r\n            for (let i = 0; i < nodeOrders.length; i++) {\r\n                const node = nodeOrders[i];\r\n                const neighbors = nodesWKnn.filter(obj => {\r\n                    return obj['id'] === node\r\n                })[0]['nearestnn'];\r\n\r\n                const neighborsid = neighbors.map(n => n['id'])\r\n\r\n\r\n                for (const neighbor of neighborsid) {\r\n                    if (!connectionCounted[node][neighbor] &&\r\n                        degreeCount.get(node) < appState.graph.frame.getNode(node).data.ref.degree &&\r\n                        degreeCount.get(neighbor) < appState.graph.frame.getNode(neighbor).data.ref.degree) {\r\n                        totalDistance += distanceMatrix[node][neighbor];\r\n                        degreeCount.set(node, degreeCount.get(node) + 1);\r\n                        degreeCount.set(neighbor, degreeCount.get(neighbor) + 1);\r\n                        connectionCounted[node][neighbor] = true;\r\n                        connectionCounted[neighbor][node] = true;\r\n                        // console.log(\"Added distance for\", node, neighbor, \"in order:\", nodeOrders);\r\n                    }\r\n                }\r\n            }\r\n            return totalDistance;\r\n        }\r\n\r\n        //calcualte knn \r\n        if (!nodes[0]['nearestnn']) {\r\n            for (const currentNode of nodes) {\r\n                // find nearest neighbors\r\n                const currentId = currentNode.id;\r\n                currentNode['nearestnn'] = []\r\n                // neighbors[currentId] = [];\r\n\r\n                // Calculate distances to all other nodes\r\n                for (const otherNode of nodes) {\r\n                    if (currentNode !== otherNode) {\r\n                        const distance = calculateDistance(\r\n                            currentNode.LatY,\r\n                            currentNode.LonX,\r\n                            otherNode.LatY,\r\n                            otherNode.LonX\r\n                        );\r\n\r\n                        currentNode['nearestnn'].push({\r\n                            id: otherNode.id,\r\n                            distance: distance\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Sort neighbors by distance and keep the closest K\r\n                currentNode['nearestnn'].sort((a, b) => a.distance - b.distance);\r\n                const k = currentNode['degree']\r\n                currentNode['nearestnn'] = currentNode['nearestnn'].slice(0, k);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Generate iteration number of node orders \r\n        const nodeOrders = [];\r\n        for (let i = 0; i < iter; i++) {\r\n            nodeOrders.push(nodes.map((n) => n['id']));\r\n            shuffleArray(nodeOrders[i]); // Shuffle the node order\r\n        }\r\n\r\n        // Precompute the distance matrix\r\n        const nodesLabels = nodes.map((n) => n['id']);\r\n        const n = nodesLabels.length;\r\n        const distanceMatrix = {};\r\n        for (const nl of nodesLabels) {\r\n            distanceMatrix[nl] = {};\r\n            for (const ll of nodesLabels) {\r\n                distanceMatrix[nl][ll] = 0;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            // Skip diagonal values \r\n            for (let j = i + 1; j < n; j++) {\r\n                const distance = calculateDistance(\r\n                    nodes[i].LatY,\r\n                    nodes[i].LonX,\r\n                    nodes[j].LatY,\r\n                    nodes[j].LonX\r\n                )\r\n\r\n                // Update both upper and lower side of the matrix since the network is undirected\r\n                distanceMatrix[nodes[i]['id']][nodes[j]['id']] = distance;\r\n                distanceMatrix[nodes[j]['id']][nodes[i]['id']] = distance;\r\n            }\r\n        }\r\n\r\n        // Precompute the degree constraint matrix\r\n        const degreeConstraintMatrix = nodes.map(x => x['degree']);\r\n\r\n        // Calculate average distance of G_bar under iterations. \r\n        const avgGBarSum = nodeOrders.map(order => gBarSumDistances(order, nodes, distanceMatrix, degreeConstraintMatrix))\r\n            .reduce((a, b) => a + b, 0) / iter;\r\n        const links = appState.graph.frame.getNodeList().map(n => n.linkObjs).flat().filter(i => i)\r\n        const gSum = links.reduce((dist, l) => dist + l.edgeDist, 0) / 2\r\n\r\n        appState.graph.globalFlatRatio = avgGBarSum / gSum;\r\n    }\r\n\r\n\r\n\r\n    runLocalFlatRatio = () => {\r\n        const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n            const R = 6371; // Radius of the Earth in kilometers\r\n            const dLat = (lat2 - lat1) * (Math.PI / 180);\r\n            const dLon = (lon2 - lon1) * (Math.PI / 180);\r\n            const a =\r\n                Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n                Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *\r\n                Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            const distance = R * c;\r\n            return distance;\r\n        }\r\n\r\n        const findFlatRatio = (nodes) => {\r\n            const neighbors = {};\r\n\r\n            if (nodes[0]['nearestnn']) {\r\n                // don't calculate nearest neighbors again\r\n                //calculate connected node distance directly\r\n                for (const currentNode of nodes) {\r\n                    const currentId = currentNode.id;\r\n                    const links = appState.graph.frame.getNode(currentId).linkObjs\r\n                    if (links) {\r\n                        const cdistance = links.reduce((dist, l) => dist + l.edgeDist, 0);\r\n                        const ndistance = currentNode['nearestnn'].reduce((dist, l) => dist + l.distance, 0);\r\n                        // calculate flat ratio\r\n                        currentNode['flattening ratio'] = ndistance / cdistance\r\n                        if (!isFinite(currentNode['flattening ratio'])) {\r\n                            currentNode['flattening ratio'] = 0\r\n                        }\r\n                    } else {\r\n                        currentNode['flattening ratio'] = 0\r\n                    }\r\n\r\n                }\r\n            } else {\r\n                for (const currentNode of nodes) {\r\n                    // find nearest neighbors\r\n                    const currentId = currentNode.id;\r\n                    currentNode['nearestnn'] = []\r\n                    // neighbors[currentId] = [];\r\n\r\n                    // Calculate distances to all other nodes\r\n                    for (const otherNode of nodes) {\r\n                        if (currentNode !== otherNode) {\r\n                            const distance = calculateDistance(\r\n                                currentNode.LatY,\r\n                                currentNode.LonX,\r\n                                otherNode.LatY,\r\n                                otherNode.LonX\r\n                            );\r\n\r\n                            currentNode['nearestnn'].push({\r\n                                id: otherNode.id,\r\n                                distance: distance\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    // Sort neighbors by distance and keep the closest K\r\n                    currentNode['nearestnn'].sort((a, b) => a.distance - b.distance);\r\n                    const k = currentNode['degree']\r\n                    currentNode['nearestnn'] = currentNode['nearestnn'].slice(0, k);\r\n\r\n                    //calculate connected node distance\r\n                    const links = appState.graph.frame.getNode(currentId).linkObjs\r\n                    if (links) {\r\n                        const cdistance = links.reduce((dist, l) => dist + l.edgeDist, 0);\r\n                        const ndistance = currentNode['nearestnn'].reduce((dist, l) => dist + l.distance, 0);\r\n                        // calculate flat ratio\r\n                        currentNode['flattening ratio'] = ndistance / cdistance\r\n                        if (!isFinite(currentNode['flattening ratio'])) {\r\n                            currentNode['flattening ratio'] = 0\r\n                        }\r\n                    } else {\r\n                        currentNode['flattening ratio'] = 0\r\n                    }\r\n\r\n\r\n\r\n                }\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        findFlatRatio(appState.graph.rawGraph.nodes)\r\n        appState.graph.metadata.nodeComputed.push('flattening ratio')\r\n        appState.graph.scatterplot.x = 'flattening ratio'\r\n        appState.graph.scatterplot.y = 'degree'\r\n\r\n    }\r\n\r\n    runShortestPath = () => {\r\n\r\n\r\n        const calDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\r\n            var p = 0.017453292519943295;    // Math.PI / 180\r\n            var c = Math.cos;\r\n            var a = 0.5 - c((lat2 - lat1) * p) / 2 +\r\n                c(lat1 * p) * c(lat2 * p) *\r\n                (1 - c((lon2 - lon1) * p)) / 2;\r\n\r\n            return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n        }\r\n\r\n        const graph = createGraph();\r\n\r\n        // hardcode LatY and LonX for sample dataset \r\n        appState.graph.rawGraph.nodes.forEach(node => graph.addNode(node[\"id\"].toString(), { LatY: parseFloat(node[\"LatY\"]), LonX: parseFloat(node[\"LonX\"]) }))\r\n        appState.graph.rawGraph.edges.forEach(edge => graph.addLink(edge[\"source_id\"], edge[\"target_id\"]));\r\n\r\n        const shortestPathPairs = () => {\r\n            let pathFinder = path.aGreedy(graph);\r\n            const pathsArr = []\r\n            const pathsSet = new Set();\r\n\r\n\r\n\r\n            graph.forEachNode(function (fromnode) {\r\n\r\n                graph.forEachNode(function (tonode) {\r\n                    if (fromnode.id !== tonode.id) {\r\n                        const pathKey1 = `${fromnode.id}👉${tonode.id}`;\r\n                        const pathKey2 = `${tonode.id}👉${fromnode.id}`;\r\n                        const edgeinfo = appState.graph.rawGraph.edges.filter((edge) => {\r\n                            return (edge.source_id === fromnode.id && edge.target_id === tonode.id)\r\n                        })\r\n                        let pairdist = calDistanceFromLatLonInKm(fromnode.data.LatY, fromnode.data.LonX, tonode.data.LatY, tonode.data.LonX)\r\n\r\n\r\n\r\n                        // undirected graph:\r\n                        // only add once for undirected graph \r\n                        if (!(pathsSet.has(pathKey1)) && !(pathsSet.has(pathKey2))) {\r\n                            pathsSet.add(pathKey1);\r\n                            pathsSet.add(pathKey2);\r\n                            pathsArr.push({\r\n                                \"source\": fromnode.id,\r\n                                \"target\": tonode.id,\r\n                                \"path\": pathFinder.find(fromnode.id, tonode.id),\r\n                                \"distance\": pairdist\r\n\r\n                            })\r\n                        }\r\n\r\n                        //directed graph: \r\n                    }\r\n\r\n                })\r\n\r\n            })\r\n            // console.log(nodesArr.length)\r\n            // console.log(pathsArr.length)\r\n            return pathsArr\r\n\r\n        }\r\n        appState.graph.rawGraph.paths = shortestPathPairs();\r\n        appState.graph.metadata.nodeComputed.push('shortest path')\r\n        appState.graph.metadata.nodeComputed.push('pair distance')\r\n        appState.graph.scatterplot.x = 'pair distance'\r\n        appState.graph.scatterplot.y = 'shortest path'\r\n\r\n    }\r\n\r\n    findcliques = () => {\r\n\r\n        var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n            return edge.source_id\r\n        })\r\n        var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n            return edge.target_id\r\n        })\r\n        var querydict = {\r\n            \"type\": 'edgelist',\r\n            \"message\": {\r\n                'name': 'clique'\r\n            },\r\n            \"fromedgelist\": fromedgelist,\r\n            \"toedgelist\": toedgelist\r\n        }\r\n        axios.post('https://snoman.herokuapp.com/flask/Cliques', querydict).then(\r\n            (response) => {\r\n                var cliques = response.data.message;\r\n                console.log(cliques)\r\n                // appState.graph.rawGraph.nodes.forEach((node) => {\r\n                //     node.community = communityDict[node.id]\r\n                // })\r\n                // const nodesArr = appState.graph.rawGraph.nodes\r\n                // const nodekeyList = Object.keys(nodesArr[1])\r\n                // const nodePropertyTypes = {}\r\n                // nodekeyList.forEach(function (k) {\r\n                //     nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n                // })\r\n                // const uniqueValue = {}\r\n                // nodekeyList.forEach(function (k, i) {\r\n\r\n                //     if (nodePropertyTypes[k] == 'string') {\r\n                //         uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n                //     } else {\r\n                //         const valuea = nodesArr.map(function (el) { return el[k]; })\r\n                //         const minv = Math.min(...valuea)\r\n                //         const maxv = Math.max(...valuea)\r\n                //         uniqueValue[k] = [minv, maxv]\r\n                //     }\r\n                // })\r\n                // appState.graph.metadata.nodePropertyTypes= nodePropertyTypes\r\n                // appState.graph.metadata.uniqueValue = uniqueValue\r\n                // appState.graph.metadata.nodeProperties = nodekeyList\r\n\r\n                // console.log(result);\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    convexhull = (group) => {\r\n        var querydict \r\n        if(group === 'community'){\r\n            querydict = {\r\n                \"type\": 'edgelist',\r\n                \"message\": {\r\n                    'name': 'convex'\r\n                },\r\n                \"group\": group,\r\n                \"nodes\": appState.graph.rawGraph.nodes.filter(n=>n['community']!== '-1')\r\n    \r\n            }\r\n        }else{\r\n            querydict = {\r\n                \"type\": 'edgelist',\r\n                \"message\": {\r\n                    'name': 'convex'\r\n                },\r\n                \"group\": group,\r\n                \"nodes\": appState.graph.rawGraph.nodes\r\n    \r\n            }\r\n\r\n        }\r\n\r\n        // var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n        //     return edge.source_id\r\n        // })\r\n        // var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n        //     return edge.target_id\r\n        // })\r\n        \r\n        axios.post('https://snoman.herokuapp.com/flask/convexhull', querydict).then(\r\n\r\n            // https://snoman.herokuapp.com/flask/convexhull', querydict).then(\r\n            (response) => {\r\n                var jsondata = JSON.parse(response.data)\r\n                var convexDict = jsondata.message;\r\n\r\n\r\n                appState.graph.rawGraph.nodes.forEach((node) => {\r\n                    node.isconvex = convexDict[node.id]\r\n                })\r\n                const nodesArr = appState.graph.rawGraph.nodes\r\n                const nodekeyList = Object.keys(nodesArr[1])\r\n                const nodePropertyTypes = {}\r\n                nodekeyList.forEach(function (k) {\r\n                    nodePropertyTypes[k] = typeof (nodesArr[1][k])\r\n                })\r\n                const uniqueValue = {}\r\n                nodekeyList.forEach(function (k, i) {\r\n\r\n                    if (nodePropertyTypes[k] == 'string') {\r\n                        uniqueValue[k] = [...new Set(nodesArr.map(item => item[k]))]\r\n                    } else {\r\n                        const valuea = nodesArr.map(function (el) { return el[k]; })\r\n                        const minv = Math.min(...valuea)\r\n                        const maxv = Math.max(...valuea)\r\n                        uniqueValue[k] = [minv, maxv]\r\n                    }\r\n                })\r\n                appState.graph.metadata.nodePropertyTypes = nodePropertyTypes\r\n                appState.graph.metadata.uniqueValue = uniqueValue\r\n                appState.graph.metadata.nodeProperties = nodekeyList\r\n\r\n\r\n                appState.graph.nodes.color.scale = \"Nominal Scale\"\r\n                appState.graph.nodes.colorBy = group\r\n                appState.graph.convexPolygonsShow = true\r\n                appState.graph.watchAppearance = appState.graph.watchAppearance + 1\r\n\r\n                // const selectionNode = appState.graph.frame.getNodeList().filter(node =>\r\n                //     // console.log(node)\r\n                //     node.data.ref.isconvex\r\n\r\n                // )\r\n                // // highlight for the mapview \r\n                // appState.graph.convexNodes = selectionNode\r\n                appState.graph.convexPolygons = jsondata.multipolygon;\r\n                console.log(appState.graph.convexPolygons)\r\n                //highlight in the network view \r\n                // appState.graph.frame.graph.forEachNode(n => {  //fisrt dehighlight all the nodes  \r\n                //     appState.graph.frame.colorNodeOpacity(n, 0.2);\r\n\r\n                // });\r\n\r\n                // appState.graph.frame.lineIndices.forEach(function (link) {\r\n                //     link.linecolor.r = self.darkMode ? 0.25 : 0.89; //black/white\r\n                //     link.linecolor.g = self.darkMode ? 0.25 : 0.89;\r\n                //     link.linecolor.b = self.darkMode ? 0.25 : 0.89;\r\n                // })\r\n\r\n                // for (var i = 0; i < selectionNode.length; i++) {\r\n                //     appState.graph.frame.colorNodeOpacity(selectionNode[i], 1);\r\n                //   }\r\n\r\n\r\n\r\n            },\r\n            (error) => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    }\r\n\r\n\r\n    density_distance = (group) => {\r\n\r\n        // var fromedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n        //     return edge.source_id\r\n        // })\r\n        // var toedgelist = appState.graph.rawGraph.edges.map((edge) => {\r\n        //     return edge.target_id\r\n        // })\r\n\r\n        var querydict \r\n        if(group === 'community'){\r\n            querydict = {\r\n            \"type\": 'edgelist',\r\n            \"message\": {\r\n                'name': 'density_distance'\r\n            },\r\n            \"group\": group,\r\n            \"nodes\": appState.graph.rawGraph.nodes.filter(n=>n['community']!== '-1'),\r\n            \"edges\": appState.graph.rawGraph.edges\r\n\r\n\r\n        }\r\n        }else{\r\n            querydict = {\r\n                \"type\": 'edgelist',\r\n                \"message\": {\r\n                    'name': 'density_distance'\r\n                },\r\n                \"group\": group,\r\n                \"nodes\": appState.graph.rawGraph.nodes,\r\n                \"edges\": appState.graph.rawGraph.edges\r\n    \r\n    \r\n            }\r\n        }\r\n        \r\n        // var querydict = {\r\n        //     \"type\": 'edgelist',\r\n        //     \"message\": {\r\n        //         'name': 'density_distance'\r\n        //     },\r\n        //     \"group\": group,\r\n        //     \"nodes\": appState.graph.rawGraph.nodes,\r\n        //     \"edges\": appState.graph.rawGraph.edges\r\n\r\n\r\n        // }\r\n        axios.post('https://snoman.herokuapp.com/flask/densitydistance', querydict).then(\r\n            (response) => {\r\n                var jsondata = JSON.parse(response.data)\r\n                // var convexDict = jsondata.message;\r\n\r\n                appState.graph.metadata.nodeComputed.push('standard distance')\r\n                appState.graph.metadata.nodeComputed.push('network density')\r\n\r\n                appState.graph.densityDistance = jsondata.density_distance\r\n                appState.graph.scatterplot.y = 'standard distance'\r\n                appState.graph.scatterplot.x = 'network density'\r\n                appState.graph.groupby = group\r\n                appState.graph.nodes.colorBy = group\r\n                appState.graph.nodes.color.scale = \"Nominal Scale\"\r\n                appState.graph.watchAppearance = appState.graph.watchAppearance + 1\r\n\r\n\r\n            },\r\n            (error) => {\r\n                console.log(error)\r\n\r\n            }\r\n        );\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            (\r\n                <div> \r\n                    <p className=\"stat-section-heading\">Distance and Shortest Path</p>\r\n                     <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.avgConnectionDist}>Run Average Distance</Button>\r\n                        <br></br>\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.runShortestPath}>Run Shortest Path</Button>\r\n                    <br></br>\r\n                    <hr />\r\n                    <p className=\"stat-section-heading\">Efficient Distance Analysis</p>\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.runLocalFlatRatio}>Run Local Flattening Ratio</Button>\r\n                   <br></br>\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.runKfullfillment}>Run  K-fullfillment</Button>\r\n                        <br></br>\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.runGlobalFlatRatio}>Run Global Flattening Ratio</Button>\r\n                    {appState.graph.globalFlatRatio ? <text className=\"gf-tag\" style={{ fontSize: \"8px\" }} >{parseFloat(appState.graph.globalFlatRatio).toFixed(3)}</text> : null}\r\n                    <br></br>\r\n                    <hr />\r\n                    <p className=\"stat-section-heading\">Group-related Functions</p>\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={this.runcommunity}>Run Community Detection</Button>\r\n                    {/* <button style={{height: \"100%\"}} onClick={this.runcommunity} type=\"button\">\r\n                            Run Community\r\n                        </button> */}\r\n                    {appState.graph.modularity ? <text className=\"modularity-tag\" style={{ fontSize: \"8px\" }} >{\"Q value: \" + parseFloat(appState.graph.modularity).toFixed(3)}</text> : null}\r\n                    {/* <Button\r\n                        style={{ position: 'absolute', top: '50px', left: '500px', zIndex: '1000' }}\r\n                        onClick={this.findcliques}>Find Cliques</Button> */}\r\n                    {/* <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={() => this.convexhull('Family')}>Convex Hull by Group</Button>\r\n\r\n                    <Button\r\n                        className=\"bp4-button\"\r\n                        style={{ zIndex: '1000' }}\r\n                        onClick={() => this.density_distance('Family')}>Cluster Cluster</Button> */}\r\n\r\n\r\n                    <div>\r\n                        <p style={{ display: \"inline\", fontSize: \"12px\" }}>Convex Hull By: </p>\r\n                        <span style={{}}>\r\n                            <SimpleSelect\r\n                                items={appState.graph.filterKeyList.filter(it=>(it !== 'ID'&& (it === 'community' || isNaN(appState.graph.rawGraph.nodes[0][it]))))}\r\n                                onSelect={it => {\r\n                                    appState.graph.convexhullby = it\r\n                                    this.convexhull(it)\r\n                                    appState.graph.convexPolygonsShow = true\r\n                                    //followed by cluster by function\r\n                                    appState.graph.groupby = it\r\n                                    this.density_distance(it)\r\n\r\n                                }}\r\n                                value={appState.graph.convexhullby}\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                    <div>\r\n                        <p style={{ display: \"inline\", fontSize: \"12px\" }}>Group By: </p>\r\n                        <span style={{}}>\r\n                            <SimpleSelect\r\n                                items={appState.graph.filterKeyList.filter(it=>(it !== 'ID'&& (it === 'community' || isNaN(appState.graph.rawGraph.nodes[0][it]))))}\r\n                                onSelect={it => {\r\n                                    appState.graph.groupby = it\r\n                                    this.density_distance(it)\r\n                                }}\r\n                                value={appState.graph.groupby}\r\n                            />\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n            )\r\n        );\r\n    }\r\n}\r\n\r\nexport default StatGroupPanel;\r\n\r\n","import SidebarMenu from 'react-bootstrap-sidebar-menu';\r\nimport React from \"react\";\r\nimport uniq from \"lodash/uniq\";\r\nimport { Tab2, Tabs2, Tag, Classes } from \"@blueprintjs/core\";\r\nimport NodesPanel from \"./panels/NodesPanel\";\r\nimport EdgesPanel from \"./panels/EdgesPanel\";\r\nimport LabelsPanel from \"./panels/LabelsPanel\";\r\nimport NodesFilterPanel from \"./panels/NodesFilterPanel\";\r\nimport StatGroupPanel from \"./panels/StatGroupPanel\"\r\nimport appState from \"../stores/index\";\r\nimport classnames from \"classnames\";\r\nimport { observer } from \"mobx-react/index\";\r\nimport { observable, computed, action, runInAction } from \"mobx\";\r\nimport {\r\n    Button\r\n} from \"@blueprintjs/core\";\r\n\r\n\r\n@observer\r\nclass Sidebar extends React.Component {\r\n    openCity(cityName) {\r\n        var i;\r\n        var x = document.getElementsByClassName(\"city\");\r\n        for (i = 0; i < x.length; i++) {\r\n            x[i].style.display = \"none\";\r\n        }\r\n        var x = document.getElementsByClassName(\"sidebarButton\");\r\n        for (i = 0; i < x.length; i++) {\r\n            x[i].style.background = \"white\";\r\n        }\r\n        document.getElementById(cityName).style.display = \"block\";\r\n        document.getElementById(cityName + 'Tab').style.background = \"gray\";\r\n\r\n    }\r\n    // AverageDegree=()=>{\r\n    //     links.reduce((dist, l) => dist + l.edgeDist, 0) / 2\r\n    // }\r\n\r\n    SelectionDistanceFromLatLonIn = () => {\r\n        const selectNodes = appState.graph.selectedNodes;\r\n        const average = (array) => array.reduce((a, b) => a + b) / array.length;\r\n\r\n        if (appState.graph.mapClicked) {\r\n\r\n            const edgeSelection = appState.graph.mapClicked.linkObjs\r\n            if (!edgeSelection || edgeSelection.length == 0) return [null, []];\r\n            this.edgeSelection = edgeSelection\r\n            const edgeDistance = edgeSelection.map(e => {\r\n                if (e.edgeDist > 0) {\r\n                    return e.edgeDist\r\n                } else {\r\n                    return 0\r\n                }\r\n\r\n            })\r\n            return [average(edgeDistance).toFixed(3), edgeDistance];\r\n\r\n        }\r\n\r\n        if (selectNodes.length > 1) {\r\n            //// calculate only the connected distance \r\n            const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(appState.graph.selectedNodes)\r\n            if (edgeSelection.length == 0) return [null, []];\r\n            this.edgeSelection = edgeSelection\r\n            const edgeDistance = edgeSelection.map(e => {\r\n                if (e.edgeDist > 0) {\r\n                    return e.edgeDist\r\n                } else {\r\n                    return 0\r\n                }\r\n\r\n            })\r\n            return [average(edgeDistance).toFixed(3), edgeDistance];\r\n\r\n            //// calculate average distance between all selected nodes \r\n            // const edgeDistance = []\r\n            // appState.graph.frame.lineIndices.forEach((edge)=>{\r\n            //   if (appState.graph.selectedNodes.includes(edge.source ) && appState.graph.selectedNodes.includes(edge.target ) ){\r\n            //     edgeDistance.push(edge.edgeDist)\r\n\r\n            //   }\r\n            // })\r\n            // if(edgeDistance.length>0){\r\n            //   return [average(edgeDistance).toFixed(3), edgeDistance];\r\n            // }else{\r\n            //   return  [null, []]\r\n            // }\r\n\r\n            // for (let i = 0; i < selectNodes.length; i++) {\r\n            //   for (let j = i + 1; j < selectNodes.length; j++) {\r\n            //     const lon1 = selectNodes[i].data.ref.LonX\r\n            //     const lat1 = selectNodes[i].data.ref.LatY\r\n            //     const lon2 = selectNodes[j].data.ref.LonX\r\n            //     const lat2 = selectNodes[j].data.ref.LatY\r\n            //     const edgeDist = appState.graph.frame.getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2)\r\n            //     edgeDistance.push(edgeDist)\r\n            //   }\r\n            // }\r\n\r\n\r\n\r\n        } else {   // when no node is selected, return the distribution of the whole network \r\n\r\n            let edgeSelection = []\r\n            appState.graph.frame.getNodeList().forEach(node => {\r\n                if (node.linkObjs && node.linkObjs.length > 0) {\r\n                    edgeSelection.push(...node.linkObjs)\r\n                }\r\n\r\n            })\r\n\r\n            if (edgeSelection.length > 0) {\r\n                let uniqEdgeSelection = uniq(edgeSelection)\r\n                this.edgeSelection = uniqEdgeSelection\r\n                if (uniqEdgeSelection.length > 0) {\r\n                    let edgeDistance = uniqEdgeSelection.map(e => {\r\n                        if (e.edgeDist > 0) {\r\n                            return e.edgeDist\r\n                        } else {\r\n                            return 0\r\n                        }\r\n\r\n                    })\r\n                    // console.log(edgeDistance)\r\n                    return [average(edgeDistance).toFixed(3), edgeDistance];\r\n\r\n                } else {\r\n                    return [null, []]\r\n                }\r\n\r\n            } else {\r\n                return [null, []]\r\n            }\r\n\r\n\r\n            // return null\r\n        }\r\n\r\n    }\r\n\r\n    // @computed\r\n    SelectionDensity = () => {\r\n\r\n        // undirect graph\r\n        // console.log(\"ashdakjs\")\r\n        if (appState.graph.selectedNodes.length > 1) {\r\n            const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(appState.graph.selectedNodes)\r\n            // console.log(edgeSelection.length);\r\n            if (edgeSelection.length == 0) return [0, 0, 0];\r\n            // this.edgeSelection = [...edgeSelection]\r\n\r\n            const nodelength = appState.graph.selectedNodes.length;\r\n            const selectionDen = (edgeSelection.length / (nodelength * (nodelength - 1))) * 2;\r\n            const avgdegree = appState.graph.selectedNodes.reduce((de, l) => de + l.data.ref.degree, 0) / appState.graph.selectedNodes.length\r\n            return [selectionDen.toFixed(3), edgeSelection.length, avgdegree]\r\n        } else if (appState.graph.selectedNodes.length == 1 && appState.graph.selectedNodes[0]) {\r\n            const thenode = appState.graph.selectedNodes[0]\r\n            const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n            const edgeSelection = appState.graph.frame.getEdgeWithinSelectionForDensity(selectneighbors)\r\n            // console.log(edgeSelection.length);\r\n            if (edgeSelection.length == 0) return [0, 0, 0];\r\n            // this.edgeSelection = [...edgeSelection]\r\n            const avgdegree = selectneighbors.reduce((de, l) => de + l.data.ref.degree, 0) / selectneighbors.length\r\n            const nodelength = selectneighbors.length;\r\n            const selectionDen = (edgeSelection.length / (nodelength * (nodelength - 1))) * 2;\r\n            return [selectionDen.toFixed(3), edgeSelection.length, avgdegree]\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    rerunDiameter = ()=>{\r\n        // console.log(\"rerun degree\")\r\n        //create rawgraph based on selected nodes\r\n        if (appState.graph.tempRawGraph) {\r\n            appState.graph.rediameter = appState.graph.rerundiameter(appState.graph.tempRawGraph)\r\n        }else{\r\n            appState.graph.rediameter= 0\r\n        }\r\n\r\n    }\r\n    rerunCluster = ()=>{\r\n        // console.log(\"rerun degree\")\r\n        //create rawgraph based on selected nodes\r\n        if (appState.graph.tempRawGraph) {\r\n            appState.graph.reclustercoe = appState.graph.reruncluster(appState.graph.tempRawGraph).toFixed(2)\r\n        }else{\r\n            appState.graph.reclustercoe= 0\r\n        }\r\n\r\n    }\r\n    rerunComponent = ()=>{\r\n        // console.log(\"rerun degree\")\r\n        //create rawgraph based on selected nodes\r\n        if (appState.graph.tempRawGraph) {\r\n            appState.graph.recomponent = appState.graph.reruncomponent(appState.graph.tempRawGraph)\r\n        }else{\r\n            appState.graph.recomponent= 0\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        if (appState.graph.frame && appState.graph.selectedNodes.length > 1 && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]) {\r\n            return appState.graph.frame && (\r\n                <SidebarMenu>\r\n                    <div class=\"sidebar-container\">\r\n                        <div class=\"w3-bar \">\r\n                            <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                            <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                            <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                        </div>\r\n                        <div id=\"Appearance\" class=\"city\">\r\n                            {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                            <Tabs2 animate id=\"graph-options\">\r\n                                <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                            {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                            <text style={{ fontSize: \"12px\" }}></text>\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <hr />\r\n                        <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                            <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                <tbody>\r\n                                    {/* <thead> */}\r\n                                    <tr>\r\n                                        <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                    </tr>\r\n                                    {/* </thead> */}\r\n                                    {/* <caption>Network Statistics</caption> */}\r\n                                    <tr>\r\n                                        <td># Nodes</td>\r\n                                        <td>{appState.graph.selectedNodes.length}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td># Edges</td>\r\n\r\n                                        <td>{appState.graph.hasGraph ? appState.graph.selectedEdge : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Degree</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.avgDegree : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Distance <br></br>(km)</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.avgdist : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Density</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.avgdensity : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Diameter\r\n                                            <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunDiameter}>rerun</Button>\r\n                                        </td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.rediameter : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Clustering<br></br>Coefficient\r\n                                        <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunCluster}>rerun</Button></td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.reclustercoe : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Connected <br></br>Component\r\n                                        <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunComponent}>rerun</Button></td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.recomponent : 'loading graph'}</td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </SidebarMenu>\r\n            );\r\n        } else if (appState.graph.frame && appState.graph.mapClicked && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]) {\r\n            //one node is clicked\r\n            const thenode = appState.graph.mapClicked\r\n            const selectneighbors = appState.graph.frame.getNeighborNodesFromGraph(thenode)\r\n            // appState.graph.selectedNodes = selectneighbors\r\n            if (selectneighbors.length > 1) {\r\n                return appState.graph.frame && (\r\n                    <SidebarMenu>\r\n                        <div class=\"sidebar-container\">\r\n                            <div class=\"w3-bar \">\r\n                                <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                                <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                                <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                            </div>\r\n                            <div id=\"Appearance\" class=\"city\">\r\n                                {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                                <Tabs2 animate id=\"graph-options\">\r\n                                    <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                    <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                    <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                    {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                                {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                                <Tabs2 animate id=\"filter-options\">\r\n                                    <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                    {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                    {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                                <text style={{ fontSize: \"12px\" }}></text>\r\n                                <Tabs2 animate id=\"filter-options\">\r\n                                    <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <hr />\r\n                            <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                                <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                    <tbody>\r\n                                        {/* <thead> */}\r\n                                        <tr>\r\n                                            <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                        </tr>\r\n                                        {/* </thead> */}\r\n                                        {/* <caption>Network Statistics</caption> */}\r\n                                        <tr>\r\n                                            <td># Nodes</td>\r\n                                            <td>{selectneighbors.length}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td># Edges</td>\r\n                                            <td>{appState.graph.selectedEdge}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Average Degree</td>\r\n                                            <td>\r\n                                                {appState.graph.hasGraph ? appState.graph.avgDegree : 'loading graph'}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Average Distance <br></br>(km)</td>\r\n                                            <td>\r\n                                                {appState.graph.hasGraph ? appState.graph.avgdist : 'loading graph'}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Network Density</td>\r\n                                            <td>\r\n                                                {appState.graph.hasGraph ? appState.graph.avgdensity : 'loading graph'}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                        <td>Network Diameter\r\n                                            <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunDiameter}>rerun</Button>\r\n                                        </td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.rediameter : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Clustering<br></br>Coefficient\r\n                                        <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunCluster}>rerun</Button></td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.reclustercoe : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Connected <br></br>Component\r\n                                        <br></br>\r\n                                            <Button\r\n                                                className=\"bp4-button\"\r\n                                                style={{ zIndex: '1000' }}\r\n                                                onClick={this.rerunComponent}>rerun</Button></td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.recomponent : 'loading graph'}</td>\r\n\r\n                                    </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </SidebarMenu>\r\n                );\r\n            } else {\r\n                //selection is 0\r\n                return appState.graph.frame && (\r\n                    <SidebarMenu>\r\n                        <div class=\"sidebar-container\">\r\n                            <div class=\"w3-bar \">\r\n                                <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                                <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                                <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                            </div>\r\n                            <div id=\"Appearance\" class=\"city\">\r\n                                {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                                <Tabs2 animate id=\"graph-options\">\r\n                                    <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                    <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                    <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                    {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                                {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                                <Tabs2 animate id=\"filter-options\">\r\n                                    <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                    {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                    {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                                <text style={{ fontSize: \"12px\" }}></text>\r\n                                <Tabs2 animate id=\"filter-options\">\r\n                                    <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                    <Tabs2.Expander />\r\n                                </Tabs2>\r\n                            </div>\r\n                            <hr />\r\n                            <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                                <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                    <tbody>\r\n                                        {/* <thead> */}\r\n                                        <tr>\r\n                                            <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                        </tr>\r\n                                        {/* </thead> */}\r\n                                        {/* <caption>Network Statistics</caption> */}\r\n                                        <tr>\r\n                                            <td># Nodes</td>\r\n                                            <td>{0}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td># Edges</td>\r\n                                            <td>{0}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Average Degree</td>\r\n                                            <td>\r\n                                                {0}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Average Distance <br></br>(km)</td>\r\n                                            <td>\r\n                                                {0}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Network Density</td>\r\n                                            <td>\r\n                                                {0}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Network Diameter</td>\r\n                                            <td>\r\n                                                {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Clustering<br></br>Coefficient</td>\r\n                                            <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>Connected <br></br>Component</td>\r\n                                            <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </SidebarMenu>\r\n                );\r\n            }\r\n        }\r\n        else if (appState.graph.frame && appState.graph.selectedNodes.length == 1 && appState.graph.selectedNodes[0] && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]){\r\n            //one node is selected \r\n            const thenode = appState.graph.selectedNodes[0]\r\n            return appState.graph.frame && (\r\n                <SidebarMenu>\r\n                    <div class=\"sidebar-container\">\r\n                        <div class=\"w3-bar \">\r\n                            <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                            <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                            <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                        </div>\r\n                        <div id=\"Appearance\" class=\"city\">\r\n                            {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                            <Tabs2 animate id=\"graph-options\">\r\n                                <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                            {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                            <text style={{ fontSize: \"12px\" }}></text>\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <hr />\r\n                        <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                            <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                <tbody>\r\n                                    {/* <thead> */}\r\n                                    <tr>\r\n                                        <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                    </tr>\r\n                                    {/* </thead> */}\r\n                                    {/* <caption>Network Statistics</caption> */}\r\n                                    <tr>\r\n                                        <td># Nodes</td>\r\n                                        <td>{1}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td># Edges</td>\r\n                                        <td>{0}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Degree</td>\r\n                                        <td>\r\n                                            {thenode.data.ref.degree}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Distance <br></br>(km)</td>\r\n                                        <td>\r\n                                            {0}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Density</td>\r\n                                        <td>\r\n                                            {0}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Diameter</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Clustering<br></br>Coefficient</td>\r\n                                        <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Connected <br></br>Component</td>\r\n                                        <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </SidebarMenu>\r\n            );\r\n        }\r\n        else if (appState.graph.frame && this.SelectionDistanceFromLatLonIn() && this.SelectionDistanceFromLatLonIn()[0]) {\r\n            //no node is selected \r\n            return appState.graph.frame && (\r\n                <SidebarMenu>\r\n                    <div class=\"sidebar-container\">\r\n                        <div class=\"w3-bar \">\r\n                            <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                            <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                            <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                        </div>\r\n                        <div id=\"Appearance\" class=\"city\">\r\n                            {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                            <Tabs2 animate id=\"graph-options\">\r\n                                <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                            {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                            <text style={{ fontSize: \"12px\" }}></text>\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <hr />\r\n                        <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                            <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                <tbody>\r\n                                    {/* <thead> */}\r\n                                    <tr>\r\n                                        <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                    </tr>\r\n                                    {/* </thead> */}\r\n                                    {/* <caption>Network Statistics</caption> */}\r\n                                    <tr>\r\n                                        <td># Nodes</td>\r\n                                        <td>{appState.graph.frame.getNodeList().length}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td># Edges</td>\r\n                                        <td>{appState.graph.frame.getEdgeList().filter(n=>n.fromId!==n.toId).length}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Degree</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.avgDe().toFixed(3) : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Distance<br></br> (km)</td>\r\n                                        <td>\r\n                                            {appState.graph.frame ? appState.graph.avgDist() : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Density</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.filtergraphDensity().toFixed(3) : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Diameter</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? appState.graph.diameter() : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Clustering<br></br>Coefficient</td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.averageClustering().toFixed(3) : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Connected <br></br>Component</td>\r\n                                        <td>{(appState.graph.hasGraph) ? appState.graph.components() : 'loading graph'}</td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </SidebarMenu>\r\n            );\r\n        }\r\n        else {\r\n            //everything else , no valid selection, etc. \r\n            return appState.graph.frame && (\r\n                <SidebarMenu>\r\n                    <div class=\"sidebar-container\">\r\n                        <div class=\"w3-bar \">\r\n                            <button id=\"AppearanceTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Appearance\")}>Appearance</button>\r\n                            <button id=\"FilterTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Filter\")}>Filter</button>\r\n                            <button id=\"StatisticsTab\" class=\"sidebarButton w3-bar-item-button w3-bar-item w3-button\" onClick={this.openCity.bind(this, \"Statistics\")}>Statistics</button>\r\n                        </div>\r\n                        <div id=\"Appearance\" class=\"city\">\r\n                            {/* <text style={{fontSize: \"12px\"}}>Appearance </text> */}\r\n                            <Tabs2 animate id=\"graph-options\">\r\n                                <Tab2 id=\"a_nodes\" title=\"Nodes\" panel={<NodesPanel />} />\r\n                                <Tab2 id=\"a_edges\" title=\"Edges\" panel={<EdgesPanel />} />\r\n                                <Tab2 id=\"a_labels\" title=\"Labels\" panel={<LabelsPanel />} />\r\n                                {/* <Tab2 id=\"layout\" title=\"Layout\" panel={<LayoutPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Filter\" class=\"city\" style={{ display: \"None\" }}>\r\n                            {/* <text style={{fontSize: \"12px\"}}>Filter Options</text> */}\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"f_nodes\" panel={<NodesFilterPanel />} />\r\n                                {/* <Tab2 id=\"f_edges\" title=\"Edges\" panel={<EdgesPanel />} /> */}\r\n                                {/* <Tab2 id=\"f_layout\" title=\"Layout\" panel={<EdgesPanel />} /> */}\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <div id=\"Statistics\" class=\"city\" style={{ display: \"None\" }}>\r\n                            <text style={{ fontSize: \"12px\" }}></text>\r\n                            <Tabs2 animate id=\"filter-options\">\r\n                                <Tab2 id=\"s_layout\" panel={<StatGroupPanel />} />\r\n                                <Tabs2.Expander />\r\n                            </Tabs2>\r\n                        </div>\r\n                        <hr />\r\n                        <div id=\"statTable\" className={classnames(Classes.DIALOG_BODY)}>\r\n                            <table className={Classes.TABLE + ' ' + \"siderTable\"} style={{ width: '100%' }}>\r\n\r\n                                <tbody>\r\n                                    {/* <thead> */}\r\n                                    <tr>\r\n                                        <th colspan=\"2\" style={{ textAlign: \"center\" }}>Network Statistics</th>\r\n\r\n                                    </tr>\r\n                                    {/* </thead> */}\r\n                                    {/* <caption>Network Statistics</caption> */}\r\n                                    <tr>\r\n                                        <td># Nodes</td>\r\n                                        <td>{0}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td># Edges</td>\r\n                                        <td>{0}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Degree</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Average Distance<br></br> (km)</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Density</td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Network Diameter <br></br>\r\n\r\n                                        </td>\r\n                                        <td>\r\n                                            {appState.graph.hasGraph ? 0 : 'loading graph'}\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Clustering<br></br>Coefficient</td>\r\n                                        <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>Connected <br></br>Component</td>\r\n                                        <td>{(appState.graph.hasGraph) ? 0 : 'loading graph'}</td>\r\n\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </SidebarMenu>\r\n            );\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default Sidebar;","import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport classnames from \"classnames\";\r\nimport {\r\n  Button,\r\n  Classes,\r\n  FocusStyleManager,\r\n  NonIdealState\r\n} from \"@blueprintjs/core\";\r\nimport Dialogs from \"./components/Dialogs\";\r\nimport NavbarSelector from \"./components/Navbar\";\r\n// import ComDetection from './components/ComDetection'\r\nimport WorkspaceView from \"./components/WorkspaceView\";\r\nimport appState from \"./stores/index\";\r\nimport ThreeJSVis from \"./visualizers/ThreeJSVis\";\r\nimport MapView from \"./visualizers/MapView\";\r\nimport FloatingCards from \"./components/FloatingCards\";\r\nimport registerIPC from \"./ipc/client\";\r\nimport { fetchWorkspaceProjects } from \"./ipc/client\";\r\nimport { MOBILE_WIDTH_CUTOFF, MOBILE_HEIGHT_CUTOFF } from \"./constants\";\r\n// import ScatterPlot from \"./components/panels/ScatterPlot\"\r\nimport SelectionDetail from \"./components/panels/SelectionDetail\";\r\n// import Sidebar from \"./components/Sidebar\"\r\nimport { Tag } from \"@blueprintjs/core\";\r\n// import GraphView from \"./components/GraphView\";\r\n\r\nimport keydown, { Keys } from \"react-keydown\";\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nimport { useEffect } from \"react\";\r\nimport axios from 'axios'\r\n\r\nimport ScatterPlot from \"./components/panels/ScatterPlot\";\r\n\r\nimport Sidebar from \"./components/Sidebar\"\r\n\r\nregisterIPC();\r\nFocusStyleManager.onlyShowFocusOnTabs();\r\n\r\nfetchWorkspaceProjects();\r\n\r\nappState.preferences.loadUserConfig();\r\n\r\nconst { DELETE, BACKSPACE, P, U } = Keys;\r\n\r\n// Respond to window resize, also triggered after frame is loaded.\r\nfunction respondToResize() {\r\n  if (!appState.graph.frame) {\r\n    window.setTimeout(respondToResize, 1000);\r\n    return;\r\n  }\r\n  if (window.innerWidth < MOBILE_WIDTH_CUTOFF || window.innerHeight < MOBILE_HEIGHT_CUTOFF) {\r\n    appState.preferences.turnOnMinimalMode();\r\n  }\r\n  // appState.graph.setUpFrame();\r\n}\r\n\r\nrespondToResize();\r\n\r\nwindow.addEventListener('resize', respondToResize);\r\n\r\n@keydown\r\n@observer\r\nclass App extends React.Component {\r\n\r\n\r\n\r\n  componentWillReceiveProps({ keydown }) {\r\n    if (keydown.event) {\r\n      if (keydown.event.which === DELETE || keydown.event.which === BACKSPACE) {\r\n        if (appState && appState.graph && appState.graph.frame) {\r\n          appState.graph.hideNodes(appState.graph.frame.getSelectedIds());\r\n          this.forceUpdate();\r\n        }\r\n      } else if (keydown.event.which === P) {\r\n        if (appState && appState.graph && appState.graph.frame) {\r\n          appState.graph.frame.pinSelectedNodes();\r\n        }\r\n      } else if (keydown.event.which === U) {\r\n        if (appState && appState.graph && appState.graph.frame) {\r\n          appState.graph.frame.unpinSelectedNodes();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n      // Query the element\r\n      const resizer = document.getElementById('dragMeUp');\r\n      const leftSide = resizer.previousElementSibling;\r\n      const rightSide = resizer.nextElementSibling;\r\n\r\n      // The current position of mouse\r\n      let x = 0;\r\n      let y = 0;\r\n      let upHeight = 0;\r\n\r\n      // Handle the mousedown event\r\n      // that's triggered when user drags the resizer\r\n      const mouseDownHandler = function (e) {\r\n        // Get the current mouse position\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n        upHeight = leftSide.getBoundingClientRect().height;\r\n\r\n        // Attach the listeners to `document`\r\n        document.addEventListener('mousemove', mouseMoveHandler);\r\n        document.addEventListener('mouseup', mouseUpHandler);\r\n      };\r\n\r\n      const mouseMoveHandler = function (e) {\r\n        // How far the mouse has been moved\r\n        const dx = e.clientX - x;\r\n        const dy = e.clientY - y;\r\n\r\n        const newLeftHeight = ((upHeight + dy) * 100) / resizer.parentNode.getBoundingClientRect().height;\r\n        leftSide.style.height = `${newLeftHeight}%`;\r\n\r\n        resizer.style.cursor = 'col-resize';\r\n        document.body.style.cursor = 'col-resize';\r\n\r\n        leftSide.style.userSelect = 'none';\r\n        leftSide.style.pointerEvents = 'none';\r\n\r\n        rightSide.style.userSelect = 'none';\r\n        rightSide.style.pointerEvents = 'none';\r\n      };\r\n\r\n      const mouseUpHandler = function () {\r\n        resizer.style.removeProperty('cursor');\r\n        document.body.style.removeProperty('cursor');\r\n\r\n        leftSide.style.removeProperty('user-select');\r\n        leftSide.style.removeProperty('pointer-events');\r\n\r\n        rightSide.style.removeProperty('user-select');\r\n        rightSide.style.removeProperty('pointer-events');\r\n\r\n        // Remove the handlers of `mousemove` and `mouseup`\r\n        document.removeEventListener('mousemove', mouseMoveHandler);\r\n        document.removeEventListener('mouseup', mouseUpHandler);\r\n      };\r\n\r\n      // Attach the handler\r\n      resizer.addEventListener('mousedown', mouseDownHandler);\r\n    });\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n      // Query the element\r\n      const resizer = document.getElementById('dragMe');\r\n      const leftSide = resizer.previousElementSibling;\r\n      const rightSide = resizer.nextElementSibling;\r\n\r\n      // The current position of mouse\r\n      let x = 0;\r\n      let y = 0;\r\n      let leftWidth = 0;\r\n\r\n      // Handle the mousedown event\r\n      // that's triggered when user drags the resizer\r\n      const mouseDownHandler = function (e) {\r\n        // Get the current mouse position\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n        leftWidth = leftSide.getBoundingClientRect().width;\r\n\r\n        // Attach the listeners to `document`\r\n        document.addEventListener('mousemove', mouseMoveHandler);\r\n        document.addEventListener('mouseup', mouseUpHandler);\r\n      };\r\n\r\n      const mouseMoveHandler = function (e) {\r\n        // How far the mouse has been moved\r\n        const dx = e.clientX - x;\r\n        const dy = e.clientY - y;\r\n\r\n        const newLeftWidth = ((leftWidth + dx) * 100) / resizer.parentNode.getBoundingClientRect().width;\r\n        leftSide.style.width = `${newLeftWidth}%`;\r\n\r\n        resizer.style.cursor = 'col-resize';\r\n        document.body.style.cursor = 'col-resize';\r\n\r\n        leftSide.style.userSelect = 'none';\r\n        leftSide.style.pointerEvents = 'none';\r\n\r\n        rightSide.style.userSelect = 'none';\r\n        rightSide.style.pointerEvents = 'none';\r\n      };\r\n\r\n      const mouseUpHandler = function () {\r\n        resizer.style.removeProperty('cursor');\r\n        document.body.style.removeProperty('cursor');\r\n\r\n        leftSide.style.removeProperty('user-select');\r\n        leftSide.style.removeProperty('pointer-events');\r\n\r\n        rightSide.style.removeProperty('user-select');\r\n        rightSide.style.removeProperty('pointer-events');\r\n\r\n        // Remove the handlers of `mousemove` and `mouseup`\r\n        document.removeEventListener('mousemove', mouseMoveHandler);\r\n        document.removeEventListener('mouseup', mouseUpHandler);\r\n      };\r\n\r\n      // Attach the handler\r\n      resizer.addEventListener('mousedown', mouseDownHandler);\r\n    });\r\n\r\n    return (\r\n      <div className={classnames({\r\n        \"app-wrapper\": true,\r\n      })} style={{display: \"flex\"}}>\r\n        <div>\r\n        <NavbarSelector />\r\n        </div>\r\n        <div class=\"container\" style={{paddingTop:\"5vh\", maxWidth:\"100vw\", height:\"100%\"}}>\r\n          <div class=\"container\" style={{height:\"100%\"}}>\r\n            <Sidebar />\r\n            {/* {appState.graph.hasGraph && <ComDetection />} */}\r\n            <div class=\"outer-container\">\r\n              <div class=\"container-up container\">\r\n                <div class=\"container__left\">\r\n                    {appState.graph.hasGraph && <Tag className=\"network-tag\">Network</Tag>}\r\n                    <main className=\"main\">\r\n                      {(appState.graph.hasGraph && (!appState.import.loading)) ? (\r\n                        <ThreeJSVis />\r\n                      ) : (\r\n                        <WorkspaceView />\r\n                      )}\r\n                    </main>\r\n                    {/* {appState.graph.hasGraph && <FloatingCards />} */}\r\n                    <Dialogs />\r\n                </div>\r\n                <div class=\"resizer\" id=\"dragMe\"></div>\r\n                <div class=\"container__right\">\r\n                  {(appState.graph.hasGraph && (!appState.import.loading)) ? (\r\n                    <MapView />\r\n                  ) : (\r\n                    <WorkspaceView />\r\n                  )}\r\n                  {/* <h3>{this.mss}</h3> */}\r\n                </div>\r\n              </div>\r\n              <div class=\"resizer-up\" id=\"dragMeUp\"></div>\r\n              <div class=\"container-down container\" id=\"scatter\">\r\n                <div style={{\r\n                  display: \"flex\", height: \"100%\",width: '40vw'\r\n                  // border:'#C0C0C0',\r\n                  // borderStyle:'solid',\r\n                  // flex:\"1 1 50%\"\r\n                }}>\r\n                  {appState.graph.frame &&  <SelectionDetail />}\r\n                </div>\r\n                <div style={{\r\n                  display: \"flex\", height: \"100%\",\r\n                  // border:'#C0C0C0',\r\n                  // borderStyle:'solid',\r\n                  // flex:\"1 1 50%\"\r\n                }}>\r\n                  {/* {appState.graph.hasGraph && <GraphView />} */}\r\n                  <div id=\"scatter-plot\">\r\n                    {appState.graph.hasGraph && appState.graph.frame  && appState.graph.rawGraph.nodes[0].degree !== undefined && < ScatterPlot />}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app';\r\n\r\nimport 'normalize.css/normalize.css';\r\nimport '@blueprintjs/core/dist/blueprint.css';\r\nimport '@blueprintjs/table/dist/table.css';\r\nimport './styles/index.css';\r\nimport './styles/w3.css'\r\n\r\n\r\nconst render = () => {\r\n    ReactDOM.render(<App/>, document.getElementById('root'));\r\n};\r\n\r\nrender();"],"sourceRoot":""}